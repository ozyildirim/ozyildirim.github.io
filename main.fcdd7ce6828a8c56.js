"use strict";(self.webpackChunkkuti_dev=self.webpackChunkkuti_dev||[]).push([[179],{1600:(Wn,vt,ge)=>{ge.r(vt),ge.d(vt,{HomeModule:()=>bT});var W=ge(6895),le=ge(3353),J=ge(8256);let ot=(()=>{class _{constructor(){}ngOnInit(){}}return _.\u0275fac=function(i){return new(i||_)},_.\u0275cmp=J.Xpm({type:_,selectors:[["app-home"]],decls:1,vars:0,template:function(i,c){1&i&&J._UZ(0,"router-outlet")},dependencies:[le.lC]}),_})(),Ke=(()=>{class _{constructor(){}ngOnInit(){}}return _.\u0275fac=function(i){return new(i||_)},_.\u0275cmp=J.Xpm({type:_,selectors:[["app-contact"]],decls:31,vars:0,consts:[[1,"text-center","flex","flex-row"],[1,"m-auto","mt-10"],[1,"font-bold","text-4xl"],[1,"description-container","m-auto","w-3/4","sm:w-auto"],[1,"text-lg","font-thin"],[1,"w-full","max-w-lg","m-auto","mt-20"],[1,"md:flex","md:items-center","mb-6"],[1,"md:w-1/3"],["for","inline-full-name",1,"block","text-gray-500","font-bold","md:text-right","mb-1","md:mb-0","pr-4"],[1,"md:w-2/3"],["id","inline-full-name","type","text","placeholder","Kutay Y\u0131ld\u0131r\u0131m",1,"bg-gray-200","appearance-none","border-2","border-gray-200","rounded","w-full","py-2","px-4","text-gray-700","leading-tight","focus:outline-none","focus:bg-white","focus:border-blue-400"],["for","inline-password",1,"block","text-gray-500","font-bold","md:text-right","mb-1","md:mb-0","pr-4"],["id","inline-password","type","email","placeholder","kuti@dev.com",1,"bg-gray-200","appearance-none","border-2","border-gray-200","rounded","w-full","py-2","px-4","text-gray-700","leading-tight","focus:outline-none","focus:bg-white","focus:border-blue-400"],["id","inline-password","type","text","placeholder","Hey, let me ask you something...",1,"bg-gray-200","appearance-none","border-2","border-gray-200","rounded","w-full","h-36","py-2","px-4","text-gray-700","leading-tight","focus:outline-none","focus:bg-white","focus:border-blue-400"],[1,"md:flex","md:items-center"],["type","button",1,"shadow","bg-blue-400","hover:bg-blue-500","focus:shadow-outline","focus:outline-none","text-white","font-bold","py-2","px-4","rounded"]],template:function(i,c){1&i&&(J.TgZ(0,"div",0)(1,"div",1)(2,"p",2),J._uU(3,"Reach me!"),J.qZA(),J.TgZ(4,"div",3)(5,"p",4),J._uU(6," Just send me a message if you have anything to ask or talk! "),J.qZA()()()(),J.TgZ(7,"form",5)(8,"div",6)(9,"div",7)(10,"label",8),J._uU(11," Full Name "),J.qZA()(),J.TgZ(12,"div",9),J._UZ(13,"input",10),J.qZA()(),J.TgZ(14,"div",6)(15,"div",7)(16,"label",11),J._uU(17," E-mail "),J.qZA()(),J.TgZ(18,"div",9),J._UZ(19,"input",12),J.qZA()(),J.TgZ(20,"div",6)(21,"div",7)(22,"label",11),J._uU(23," Message "),J.qZA()(),J.TgZ(24,"div",9),J._UZ(25,"input",13),J.qZA()(),J.TgZ(26,"div",14),J._UZ(27,"div",7),J.TgZ(28,"div",9)(29,"button",15),J._uU(30," Sign Up "),J.qZA()()()())}}),_})();var Ft=ge(5861);const Sr=1001,Xn=1003,Di=1006,Ws=1009,ai=1014,nn=1015,Qi=1016,Mo=1020,we=1023,Te=1026,Ve=1027,Ua=3e3,pi=3001,Ta="srgb",xc="srgb-linear";class Ro{addEventListener(t,i){void 0===this._listeners&&(this._listeners={});const c=this._listeners;void 0===c[t]&&(c[t]=[]),-1===c[t].indexOf(i)&&c[t].push(i)}hasEventListener(t,i){if(void 0===this._listeners)return!1;const c=this._listeners;return void 0!==c[t]&&-1!==c[t].indexOf(i)}removeEventListener(t,i){if(void 0===this._listeners)return;const d=this._listeners[t];if(void 0!==d){const p=d.indexOf(i);-1!==p&&d.splice(p,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const c=this._listeners[t.type];if(void 0!==c){t.target=this;const d=c.slice(0);for(let p=0,m=d.length;p<m;p++)d[p].call(this,t);t.target=null}}}const xi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],ia=Math.PI/180,Ks=180/Math.PI;function li(){const _=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,c=4294967295*Math.random()|0;return(xi[255&_]+xi[_>>8&255]+xi[_>>16&255]+xi[_>>24&255]+"-"+xi[255&t]+xi[t>>8&255]+"-"+xi[t>>16&15|64]+xi[t>>24&255]+"-"+xi[63&i|128]+xi[i>>8&255]+"-"+xi[i>>16&255]+xi[i>>24&255]+xi[255&c]+xi[c>>8&255]+xi[c>>16&255]+xi[c>>24&255]).toLowerCase()}function gr(_,t,i){return Math.max(t,Math.min(i,_))}function Ts(_,t,i){return(1-i)*_+i*t}function nl(_){return 0==(_&_-1)&&0!==_}function fr(_){return Math.pow(2,Math.floor(Math.log(_)/Math.LN2))}function Po(_,t){switch(t.constructor){case Float32Array:return _;case Uint16Array:return _/65535;case Uint8Array:return _/255;case Int16Array:return Math.max(_/32767,-1);case Int8Array:return Math.max(_/127,-1);default:throw new Error("Invalid component type.")}}function wn(_,t){switch(t.constructor){case Float32Array:return _;case Uint16Array:return Math.round(65535*_);case Uint8Array:return Math.round(255*_);case Int16Array:return Math.round(32767*_);case Int8Array:return Math.round(127*_);default:throw new Error("Invalid component type.")}}class Xe{constructor(t=0,i=0){Xe.prototype.isVector2=!0,this.x=t,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,i){return this.x=t,this.y=i,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const i=this.x,c=this.y,d=t.elements;return this.x=d[0]*i+d[3]*c+d[6],this.y=d[1]*i+d[4]*c+d[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this}clampLength(t,i){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(t,Math.min(i,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,c=this.y-t.y;return i*i+c*c}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this}lerpVectors(t,i,c){return this.x=t.x+(i.x-t.x)*c,this.y=t.y+(i.y-t.y)*c,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this}rotateAround(t,i){const c=Math.cos(i),d=Math.sin(i),p=this.x-t.x,m=this.y-t.y;return this.x=p*c-m*d+t.x,this.y=p*d+m*c+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Nr{constructor(){Nr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,i,c,d,p,m,y,w,b){const C=this.elements;return C[0]=t,C[1]=d,C[2]=y,C[3]=i,C[4]=p,C[5]=w,C[6]=c,C[7]=m,C[8]=b,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const i=this.elements,c=t.elements;return i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=c[3],i[4]=c[4],i[5]=c[5],i[6]=c[6],i[7]=c[7],i[8]=c[8],this}extractBasis(t,i,c){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),c.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const c=t.elements,d=i.elements,p=this.elements,m=c[0],y=c[3],w=c[6],b=c[1],C=c[4],D=c[7],R=c[2],k=c[5],V=c[8],U=d[0],F=d[3],j=d[6],X=d[1],Y=d[4],K=d[7],ie=d[2],ue=d[5],ve=d[8];return p[0]=m*U+y*X+w*ie,p[3]=m*F+y*Y+w*ue,p[6]=m*j+y*K+w*ve,p[1]=b*U+C*X+D*ie,p[4]=b*F+C*Y+D*ue,p[7]=b*j+C*K+D*ve,p[2]=R*U+k*X+V*ie,p[5]=R*F+k*Y+V*ue,p[8]=R*j+k*K+V*ve,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this}determinant(){const t=this.elements,i=t[0],c=t[1],d=t[2],p=t[3],m=t[4],y=t[5],w=t[6],b=t[7],C=t[8];return i*m*C-i*y*b-c*p*C+c*y*w+d*p*b-d*m*w}invert(){const t=this.elements,i=t[0],c=t[1],d=t[2],p=t[3],m=t[4],y=t[5],w=t[6],b=t[7],C=t[8],D=C*m-y*b,R=y*w-C*p,k=b*p-m*w,V=i*D+c*R+d*k;if(0===V)return this.set(0,0,0,0,0,0,0,0,0);const U=1/V;return t[0]=D*U,t[1]=(d*b-C*c)*U,t[2]=(y*c-d*m)*U,t[3]=R*U,t[4]=(C*i-d*w)*U,t[5]=(d*p-y*i)*U,t[6]=k*U,t[7]=(c*w-b*i)*U,t[8]=(m*i-c*p)*U,this}transpose(){let t;const i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this}setUvTransform(t,i,c,d,p,m,y){const w=Math.cos(p),b=Math.sin(p);return this.set(c*w,c*b,-c*(w*m+b*y)+m+t,-d*b,d*w,-d*(-b*m+w*y)+y+i,0,0,1),this}scale(t,i){const c=this.elements;return c[0]*=t,c[3]*=t,c[6]*=t,c[1]*=i,c[4]*=i,c[7]*=i,this}rotate(t){const i=Math.cos(t),c=Math.sin(t),d=this.elements,p=d[0],m=d[3],y=d[6],w=d[1],b=d[4],C=d[7];return d[0]=i*p+c*w,d[3]=i*m+c*b,d[6]=i*y+c*C,d[1]=-c*p+i*w,d[4]=-c*m+i*b,d[7]=-c*y+i*C,this}translate(t,i){const c=this.elements;return c[0]+=t*c[2],c[3]+=t*c[5],c[6]+=t*c[8],c[1]+=i*c[2],c[4]+=i*c[5],c[7]+=i*c[8],this}equals(t){const i=this.elements,c=t.elements;for(let d=0;d<9;d++)if(i[d]!==c[d])return!1;return!0}fromArray(t,i=0){for(let c=0;c<9;c++)this.elements[c]=t[c+i];return this}toArray(t=[],i=0){const c=this.elements;return t[i]=c[0],t[i+1]=c[1],t[i+2]=c[2],t[i+3]=c[3],t[i+4]=c[4],t[i+5]=c[5],t[i+6]=c[6],t[i+7]=c[7],t[i+8]=c[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function Lo(_){for(let t=_.length-1;t>=0;--t)if(_[t]>=65535)return!0;return!1}function sa(_){return document.createElementNS("http://www.w3.org/1999/xhtml",_)}function No(_){return _<.04045?.0773993808*_:Math.pow(.9478672986*_+.0521327014,2.4)}function Ec(_){return _<.0031308?12.92*_:1.055*Math.pow(_,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Ui={[Ta]:{[xc]:No},[xc]:{[Ta]:Ec}},Bi={legacyMode:!0,get workingColorSpace(){return xc},set workingColorSpace(_){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(_,t,i){if(this.legacyMode||t===i||!t||!i)return _;if(Ui[t]&&void 0!==Ui[t][i]){const c=Ui[t][i];return _.r=c(_.r),_.g=c(_.g),_.b=c(_.b),_}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(_,t){return this.convert(_,this.workingColorSpace,t)},toWorkingColorSpace:function(_,t){return this.convert(_,t,this.workingColorSpace)}},Iu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},si={r:0,g:0,b:0},gi={h:0,s:0,l:0},Bl={h:0,s:0,l:0};function Cu(_,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?_+6*(t-_)*i:i<.5?t:i<2/3?_+6*(t-_)*(2/3-i):_}function rl(_,t){return t.r=_.r,t.g=_.g,t.b=_.b,t}let Zs,Yt=(()=>{class _{constructor(i,c,d){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===c&&void 0===d?this.set(i):this.setRGB(i,c,d)}set(i){return i&&i.isColor?this.copy(i):"number"==typeof i?this.setHex(i):"string"==typeof i&&this.setStyle(i),this}setScalar(i){return this.r=i,this.g=i,this.b=i,this}setHex(i,c=Ta){return i=Math.floor(i),this.r=(i>>16&255)/255,this.g=(i>>8&255)/255,this.b=(255&i)/255,Bi.toWorkingColorSpace(this,c),this}setRGB(i,c,d,p=xc){return this.r=i,this.g=c,this.b=d,Bi.toWorkingColorSpace(this,p),this}setHSL(i,c,d,p=xc){if(i=function Td(_,t){return(_%t+t)%t}(i,1),c=gr(c,0,1),d=gr(d,0,1),0===c)this.r=this.g=this.b=d;else{const m=d<=.5?d*(1+c):d+c-d*c,y=2*d-m;this.r=Cu(y,m,i+1/3),this.g=Cu(y,m,i),this.b=Cu(y,m,i-1/3)}return Bi.toWorkingColorSpace(this,p),this}setStyle(i,c=Ta){function d(m){void 0!==m&&parseFloat(m)<1&&console.warn("THREE.Color: Alpha component of "+i+" will be ignored.")}let p;if(p=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(i)){let m;const w=p[2];switch(p[1]){case"rgb":case"rgba":if(m=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(w))return this.r=Math.min(255,parseInt(m[1],10))/255,this.g=Math.min(255,parseInt(m[2],10))/255,this.b=Math.min(255,parseInt(m[3],10))/255,Bi.toWorkingColorSpace(this,c),d(m[4]),this;if(m=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(w))return this.r=Math.min(100,parseInt(m[1],10))/100,this.g=Math.min(100,parseInt(m[2],10))/100,this.b=Math.min(100,parseInt(m[3],10))/100,Bi.toWorkingColorSpace(this,c),d(m[4]),this;break;case"hsl":case"hsla":if(m=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(w)){const b=parseFloat(m[1])/360,C=parseFloat(m[2])/100,D=parseFloat(m[3])/100;return d(m[4]),this.setHSL(b,C,D,c)}}}else if(p=/^\#([A-Fa-f\d]+)$/.exec(i)){const m=p[1],y=m.length;if(3===y)return this.r=parseInt(m.charAt(0)+m.charAt(0),16)/255,this.g=parseInt(m.charAt(1)+m.charAt(1),16)/255,this.b=parseInt(m.charAt(2)+m.charAt(2),16)/255,Bi.toWorkingColorSpace(this,c),this;if(6===y)return this.r=parseInt(m.charAt(0)+m.charAt(1),16)/255,this.g=parseInt(m.charAt(2)+m.charAt(3),16)/255,this.b=parseInt(m.charAt(4)+m.charAt(5),16)/255,Bi.toWorkingColorSpace(this,c),this}return i&&i.length>0?this.setColorName(i,c):this}setColorName(i,c=Ta){const d=Iu[i.toLowerCase()];return void 0!==d?this.setHex(d,c):console.warn("THREE.Color: Unknown color "+i),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(i){return this.r=i.r,this.g=i.g,this.b=i.b,this}copySRGBToLinear(i){return this.r=No(i.r),this.g=No(i.g),this.b=No(i.b),this}copyLinearToSRGB(i){return this.r=Ec(i.r),this.g=Ec(i.g),this.b=Ec(i.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(i=Ta){return Bi.fromWorkingColorSpace(rl(this,si),i),gr(255*si.r,0,255)<<16^gr(255*si.g,0,255)<<8^gr(255*si.b,0,255)<<0}getHexString(i=Ta){return("000000"+this.getHex(i).toString(16)).slice(-6)}getHSL(i,c=xc){Bi.fromWorkingColorSpace(rl(this,si),c);const d=si.r,p=si.g,m=si.b,y=Math.max(d,p,m),w=Math.min(d,p,m);let b,C;const D=(w+y)/2;if(w===y)b=0,C=0;else{const R=y-w;switch(C=D<=.5?R/(y+w):R/(2-y-w),y){case d:b=(p-m)/R+(p<m?6:0);break;case p:b=(m-d)/R+2;break;case m:b=(d-p)/R+4}b/=6}return i.h=b,i.s=C,i.l=D,i}getRGB(i,c=xc){return Bi.fromWorkingColorSpace(rl(this,si),c),i.r=si.r,i.g=si.g,i.b=si.b,i}getStyle(i=Ta){return Bi.fromWorkingColorSpace(rl(this,si),i),i!==Ta?`color(${i} ${si.r} ${si.g} ${si.b})`:`rgb(${255*si.r|0},${255*si.g|0},${255*si.b|0})`}offsetHSL(i,c,d){return this.getHSL(gi),gi.h+=i,gi.s+=c,gi.l+=d,this.setHSL(gi.h,gi.s,gi.l),this}add(i){return this.r+=i.r,this.g+=i.g,this.b+=i.b,this}addColors(i,c){return this.r=i.r+c.r,this.g=i.g+c.g,this.b=i.b+c.b,this}addScalar(i){return this.r+=i,this.g+=i,this.b+=i,this}sub(i){return this.r=Math.max(0,this.r-i.r),this.g=Math.max(0,this.g-i.g),this.b=Math.max(0,this.b-i.b),this}multiply(i){return this.r*=i.r,this.g*=i.g,this.b*=i.b,this}multiplyScalar(i){return this.r*=i,this.g*=i,this.b*=i,this}lerp(i,c){return this.r+=(i.r-this.r)*c,this.g+=(i.g-this.g)*c,this.b+=(i.b-this.b)*c,this}lerpColors(i,c,d){return this.r=i.r+(c.r-i.r)*d,this.g=i.g+(c.g-i.g)*d,this.b=i.b+(c.b-i.b)*d,this}lerpHSL(i,c){this.getHSL(gi),i.getHSL(Bl);const d=Ts(gi.h,Bl.h,c),p=Ts(gi.s,Bl.s,c),m=Ts(gi.l,Bl.l,c);return this.setHSL(d,p,m),this}equals(i){return i.r===this.r&&i.g===this.g&&i.b===this.b}fromArray(i,c=0){return this.r=i[c],this.g=i[c+1],this.b=i[c+2],this}toArray(i=[],c=0){return i[c]=this.r,i[c+1]=this.g,i[c+2]=this.b,i}fromBufferAttribute(i,c){return this.r=i.getX(c),this.g=i.getY(c),this.b=i.getZ(c),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return _.NAMES=Iu,_})();class Du{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{void 0===Zs&&(Zs=sa("canvas")),Zs.width=t.width,Zs.height=t.height;const c=Zs.getContext("2d");t instanceof ImageData?c.putImageData(t,0,0):c.drawImage(t,0,0,t.width,t.height),i=Zs}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const i=sa("canvas");i.width=t.width,i.height=t.height;const c=i.getContext("2d");c.drawImage(t,0,0,t.width,t.height);const d=c.getImageData(0,0,t.width,t.height),p=d.data;for(let m=0;m<p.length;m++)p[m]=255*No(p[m]/255);return c.putImageData(d,0,0),i}if(t.data){const i=t.data.slice(0);for(let c=0;c<i.length;c++)i[c]=i instanceof Uint8Array||i instanceof Uint8ClampedArray?Math.floor(255*No(i[c]/255)):No(i[c]);return{data:i,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class N{constructor(t=null){this.isSource=!0,this.uuid=li(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.images[this.uuid])return t.images[this.uuid];const c={uuid:this.uuid,url:""},d=this.data;if(null!==d){let p;if(Array.isArray(d)){p=[];for(let m=0,y=d.length;m<y;m++)p.push($(d[m].isDataTexture?d[m].image:d[m]))}else p=$(d);c.url=p}return i||(t.images[this.uuid]=c),c}}function $(_){return typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_ instanceof ImageBitmap?Du.getDataURL(_):_.data?{data:Array.from(_.data),width:_.width,height:_.height,type:_.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let B=0,ee=(()=>{class _ extends Ro{constructor(i=_.DEFAULT_IMAGE,c=_.DEFAULT_MAPPING,d=Sr,p=Sr,m=Di,y=1008,w=we,b=Ws,C=1,D=Ua){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:B++}),this.uuid=li(),this.name="",this.source=new N(i),this.mipmaps=[],this.mapping=c,this.wrapS=d,this.wrapT=p,this.magFilter=m,this.minFilter=y,this.anisotropy=C,this.format=w,this.internalFormat=null,this.type=b,this.offset=new Xe(0,0),this.repeat=new Xe(1,1),this.center=new Xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Nr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=D,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(i){this.source.data=i}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(i){return this.name=i.name,this.source=i.source,this.mipmaps=i.mipmaps.slice(0),this.mapping=i.mapping,this.wrapS=i.wrapS,this.wrapT=i.wrapT,this.magFilter=i.magFilter,this.minFilter=i.minFilter,this.anisotropy=i.anisotropy,this.format=i.format,this.internalFormat=i.internalFormat,this.type=i.type,this.offset.copy(i.offset),this.repeat.copy(i.repeat),this.center.copy(i.center),this.rotation=i.rotation,this.matrixAutoUpdate=i.matrixAutoUpdate,this.matrix.copy(i.matrix),this.generateMipmaps=i.generateMipmaps,this.premultiplyAlpha=i.premultiplyAlpha,this.flipY=i.flipY,this.unpackAlignment=i.unpackAlignment,this.encoding=i.encoding,this.userData=JSON.parse(JSON.stringify(i.userData)),this.needsUpdate=!0,this}toJSON(i){const c=void 0===i||"string"==typeof i;if(!c&&void 0!==i.textures[this.uuid])return i.textures[this.uuid];const d={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(i).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData),c||(i.textures[this.uuid]=d),d}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(i){if(300!==this.mapping)return i;if(i.applyMatrix3(this.matrix),i.x<0||i.x>1)switch(this.wrapS){case 1e3:i.x=i.x-Math.floor(i.x);break;case Sr:i.x=i.x<0?0:1;break;case 1002:i.x=1===Math.abs(Math.floor(i.x)%2)?Math.ceil(i.x)-i.x:i.x-Math.floor(i.x)}if(i.y<0||i.y>1)switch(this.wrapT){case 1e3:i.y=i.y-Math.floor(i.y);break;case Sr:i.y=i.y<0?0:1;break;case 1002:i.y=1===Math.abs(Math.floor(i.y)%2)?Math.ceil(i.y)-i.y:i.y-Math.floor(i.y)}return this.flipY&&(i.y=1-i.y),i}set needsUpdate(i){!0===i&&(this.version++,this.source.needsUpdate=!0)}}return _.DEFAULT_IMAGE=null,_.DEFAULT_MAPPING=300,_})();class pe{constructor(t=0,i=0,c=0,d=1){pe.prototype.isVector4=!0,this.x=t,this.y=i,this.z=c,this.w=d}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,i,c,d){return this.x=t,this.y=i,this.z=c,this.w=d,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const i=this.x,c=this.y,d=this.z,p=this.w,m=t.elements;return this.x=m[0]*i+m[4]*c+m[8]*d+m[12]*p,this.y=m[1]*i+m[5]*c+m[9]*d+m[13]*p,this.z=m[2]*i+m[6]*c+m[10]*d+m[14]*p,this.w=m[3]*i+m[7]*c+m[11]*d+m[15]*p,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this}setAxisAngleFromRotationMatrix(t){let i,c,d,p;const w=t.elements,b=w[0],C=w[4],D=w[8],R=w[1],k=w[5],V=w[9],U=w[2],F=w[6],j=w[10];if(Math.abs(C-R)<.01&&Math.abs(D-U)<.01&&Math.abs(V-F)<.01){if(Math.abs(C+R)<.1&&Math.abs(D+U)<.1&&Math.abs(V+F)<.1&&Math.abs(b+k+j-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const Y=(b+1)/2,K=(k+1)/2,ie=(j+1)/2,ue=(C+R)/4,ve=(D+U)/4,te=(V+F)/4;return Y>K&&Y>ie?Y<.01?(c=0,d=.707106781,p=.707106781):(c=Math.sqrt(Y),d=ue/c,p=ve/c):K>ie?K<.01?(c=.707106781,d=0,p=.707106781):(d=Math.sqrt(K),c=ue/d,p=te/d):ie<.01?(c=.707106781,d=.707106781,p=0):(p=Math.sqrt(ie),c=ve/p,d=te/p),this.set(c,d,p,i),this}let X=Math.sqrt((F-V)*(F-V)+(D-U)*(D-U)+(R-C)*(R-C));return Math.abs(X)<.001&&(X=1),this.x=(F-V)/X,this.y=(D-U)/X,this.z=(R-C)/X,this.w=Math.acos((b+k+j-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this.w=Math.max(t.w,Math.min(i.w,this.w)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this.w=Math.max(t,Math.min(i,this.w)),this}clampLength(t,i){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(t,Math.min(i,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this}lerpVectors(t,i,c){return this.x=t.x+(i.x-t.x)*c,this.y=t.y+(i.y-t.y)*c,this.z=t.z+(i.z-t.z)*c,this.w=t.w+(i.w-t.w)*c,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Le extends Ro{constructor(t=1,i=1,c={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=i,this.depth=1,this.scissor=new pe(0,0,t,i),this.scissorTest=!1,this.viewport=new pe(0,0,t,i),this.texture=new ee({width:t,height:i,depth:1},c.mapping,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==c.generateMipmaps&&c.generateMipmaps,this.texture.internalFormat=void 0!==c.internalFormat?c.internalFormat:null,this.texture.minFilter=void 0!==c.minFilter?c.minFilter:Di,this.depthBuffer=void 0===c.depthBuffer||c.depthBuffer,this.stencilBuffer=void 0!==c.stencilBuffer&&c.stencilBuffer,this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null,this.samples=void 0!==c.samples?c.samples:0}setSize(t,i,c=1){(this.width!==t||this.height!==i||this.depth!==c)&&(this.width=t,this.height=i,this.depth=c,this.texture.image.width=t,this.texture.image.height=i,this.texture.image.depth=c,this.dispose()),this.viewport.set(0,0,t,i),this.scissor.set(0,0,t,i)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const i=Object.assign({},t.texture.image);return this.texture.source=new N(i),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Je extends ee{constructor(t=null,i=1,c=1,d=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:i,height:c,depth:d},this.magFilter=Xn,this.minFilter=Xn,this.wrapR=Sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _r extends ee{constructor(t=null,i=1,c=1,d=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:i,height:c,depth:d},this.magFilter=Xn,this.minFilter=Xn,this.wrapR=Sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class bn{constructor(t=0,i=0,c=0,d=1){this.isQuaternion=!0,this._x=t,this._y=i,this._z=c,this._w=d}static slerpFlat(t,i,c,d,p,m,y){let w=c[d+0],b=c[d+1],C=c[d+2],D=c[d+3];const R=p[m+0],k=p[m+1],V=p[m+2],U=p[m+3];if(0===y)return t[i+0]=w,t[i+1]=b,t[i+2]=C,void(t[i+3]=D);if(1===y)return t[i+0]=R,t[i+1]=k,t[i+2]=V,void(t[i+3]=U);if(D!==U||w!==R||b!==k||C!==V){let F=1-y;const j=w*R+b*k+C*V+D*U,X=j>=0?1:-1,Y=1-j*j;if(Y>Number.EPSILON){const ie=Math.sqrt(Y),ue=Math.atan2(ie,j*X);F=Math.sin(F*ue)/ie,y=Math.sin(y*ue)/ie}const K=y*X;if(w=w*F+R*K,b=b*F+k*K,C=C*F+V*K,D=D*F+U*K,F===1-y){const ie=1/Math.sqrt(w*w+b*b+C*C+D*D);w*=ie,b*=ie,C*=ie,D*=ie}}t[i]=w,t[i+1]=b,t[i+2]=C,t[i+3]=D}static multiplyQuaternionsFlat(t,i,c,d,p,m){const y=c[d],w=c[d+1],b=c[d+2],C=c[d+3],D=p[m],R=p[m+1],k=p[m+2],V=p[m+3];return t[i]=y*V+C*D+w*k-b*R,t[i+1]=w*V+C*R+b*D-y*k,t[i+2]=b*V+C*k+y*R-w*D,t[i+3]=C*V-y*D-w*R-b*k,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,c,d){return this._x=t,this._y=i,this._z=c,this._w=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i){const c=t._x,d=t._y,p=t._z,m=t._order,y=Math.cos,w=Math.sin,b=y(c/2),C=y(d/2),D=y(p/2),R=w(c/2),k=w(d/2),V=w(p/2);switch(m){case"XYZ":this._x=R*C*D+b*k*V,this._y=b*k*D-R*C*V,this._z=b*C*V+R*k*D,this._w=b*C*D-R*k*V;break;case"YXZ":this._x=R*C*D+b*k*V,this._y=b*k*D-R*C*V,this._z=b*C*V-R*k*D,this._w=b*C*D+R*k*V;break;case"ZXY":this._x=R*C*D-b*k*V,this._y=b*k*D+R*C*V,this._z=b*C*V+R*k*D,this._w=b*C*D-R*k*V;break;case"ZYX":this._x=R*C*D-b*k*V,this._y=b*k*D+R*C*V,this._z=b*C*V-R*k*D,this._w=b*C*D+R*k*V;break;case"YZX":this._x=R*C*D+b*k*V,this._y=b*k*D+R*C*V,this._z=b*C*V-R*k*D,this._w=b*C*D-R*k*V;break;case"XZY":this._x=R*C*D-b*k*V,this._y=b*k*D-R*C*V,this._z=b*C*V+R*k*D,this._w=b*C*D+R*k*V;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+m)}return!1!==i&&this._onChangeCallback(),this}setFromAxisAngle(t,i){const c=i/2,d=Math.sin(c);return this._x=t.x*d,this._y=t.y*d,this._z=t.z*d,this._w=Math.cos(c),this._onChangeCallback(),this}setFromRotationMatrix(t){const i=t.elements,c=i[0],d=i[4],p=i[8],m=i[1],y=i[5],w=i[9],b=i[2],C=i[6],D=i[10],R=c+y+D;if(R>0){const k=.5/Math.sqrt(R+1);this._w=.25/k,this._x=(C-w)*k,this._y=(p-b)*k,this._z=(m-d)*k}else if(c>y&&c>D){const k=2*Math.sqrt(1+c-y-D);this._w=(C-w)/k,this._x=.25*k,this._y=(d+m)/k,this._z=(p+b)/k}else if(y>D){const k=2*Math.sqrt(1+y-c-D);this._w=(p-b)/k,this._x=(d+m)/k,this._y=.25*k,this._z=(w+C)/k}else{const k=2*Math.sqrt(1+D-c-y);this._w=(m-d)/k,this._x=(p+b)/k,this._y=(w+C)/k,this._z=.25*k}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let c=t.dot(i)+1;return c<Number.EPSILON?(c=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=c):(this._x=0,this._y=-t.z,this._z=t.y,this._w=c)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=c),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(gr(this.dot(t),-1,1)))}rotateTowards(t,i){const c=this.angleTo(t);if(0===c)return this;const d=Math.min(1,i/c);return this.slerp(t,d),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){const c=t._x,d=t._y,p=t._z,m=t._w,y=i._x,w=i._y,b=i._z,C=i._w;return this._x=c*C+m*y+d*b-p*w,this._y=d*C+m*w+p*y-c*b,this._z=p*C+m*b+c*w-d*y,this._w=m*C-c*y-d*w-p*b,this._onChangeCallback(),this}slerp(t,i){if(0===i)return this;if(1===i)return this.copy(t);const c=this._x,d=this._y,p=this._z,m=this._w;let y=m*t._w+c*t._x+d*t._y+p*t._z;if(y<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,y=-y):this.copy(t),y>=1)return this._w=m,this._x=c,this._y=d,this._z=p,this;const w=1-y*y;if(w<=Number.EPSILON){const k=1-i;return this._w=k*m+i*this._w,this._x=k*c+i*this._x,this._y=k*d+i*this._y,this._z=k*p+i*this._z,this.normalize(),this._onChangeCallback(),this}const b=Math.sqrt(w),C=Math.atan2(b,y),D=Math.sin((1-i)*C)/b,R=Math.sin(i*C)/b;return this._w=m*D+this._w*R,this._x=c*D+this._x*R,this._y=d*D+this._y*R,this._z=p*D+this._z*R,this._onChangeCallback(),this}slerpQuaternions(t,i,c){return this.copy(t).slerp(i,c)}random(){const t=Math.random(),i=Math.sqrt(1-t),c=Math.sqrt(t),d=2*Math.PI*Math.random(),p=2*Math.PI*Math.random();return this.set(i*Math.cos(d),c*Math.sin(p),c*Math.cos(p),i*Math.sin(d))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class re{constructor(t=0,i=0,c=0){re.prototype.isVector3=!0,this.x=t,this.y=i,this.z=c}set(t,i,c){return void 0===c&&(c=this.z),this.x=t,this.y=i,this.z=c,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return this.applyQuaternion(Jn.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(Jn.setFromAxisAngle(t,i))}applyMatrix3(t){const i=this.x,c=this.y,d=this.z,p=t.elements;return this.x=p[0]*i+p[3]*c+p[6]*d,this.y=p[1]*i+p[4]*c+p[7]*d,this.z=p[2]*i+p[5]*c+p[8]*d,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const i=this.x,c=this.y,d=this.z,p=t.elements,m=1/(p[3]*i+p[7]*c+p[11]*d+p[15]);return this.x=(p[0]*i+p[4]*c+p[8]*d+p[12])*m,this.y=(p[1]*i+p[5]*c+p[9]*d+p[13])*m,this.z=(p[2]*i+p[6]*c+p[10]*d+p[14])*m,this}applyQuaternion(t){const i=this.x,c=this.y,d=this.z,p=t.x,m=t.y,y=t.z,w=t.w,b=w*i+m*d-y*c,C=w*c+y*i-p*d,D=w*d+p*c-m*i,R=-p*i-m*c-y*d;return this.x=b*w+R*-p+C*-y-D*-m,this.y=C*w+R*-m+D*-p-b*-y,this.z=D*w+R*-y+b*-m-C*-p,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const i=this.x,c=this.y,d=this.z,p=t.elements;return this.x=p[0]*i+p[4]*c+p[8]*d,this.y=p[1]*i+p[5]*c+p[9]*d,this.z=p[2]*i+p[6]*c+p[10]*d,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}clampLength(t,i){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(t,Math.min(i,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,c){return this.x=t.x+(i.x-t.x)*c,this.y=t.y+(i.y-t.y)*c,this.z=t.z+(i.z-t.z)*c,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,i){const c=t.x,d=t.y,p=t.z,m=i.x,y=i.y,w=i.z;return this.x=d*w-p*y,this.y=p*m-c*w,this.z=c*y-d*m,this}projectOnVector(t){const i=t.lengthSq();if(0===i)return this.set(0,0,0);const c=t.dot(this)/i;return this.copy(t).multiplyScalar(c)}projectOnPlane(t){return nr.copy(this).projectOnVector(t),this.sub(nr)}reflect(t){return this.sub(nr.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===i)return Math.PI/2;const c=this.dot(t)/i;return Math.acos(gr(c,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,c=this.y-t.y,d=this.z-t.z;return i*i+c*c+d*d}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,c){const d=Math.sin(i)*t;return this.x=d*Math.sin(c),this.y=Math.cos(i)*t,this.z=d*Math.cos(c),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,c){return this.x=t*Math.sin(i),this.y=c,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){const i=this.setFromMatrixColumn(t,0).length(),c=this.setFromMatrixColumn(t,1).length(),d=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=c,this.z=d,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,4*i)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,3*i)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),i=Math.random()*Math.PI*2,c=Math.sqrt(1-t**2);return this.x=c*Math.cos(i),this.y=c*Math.sin(i),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const nr=new re,Jn=new bn;class hs{constructor(t=new re(1/0,1/0,1/0),i=new re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromArray(t){let i=1/0,c=1/0,d=1/0,p=-1/0,m=-1/0,y=-1/0;for(let w=0,b=t.length;w<b;w+=3){const C=t[w],D=t[w+1],R=t[w+2];C<i&&(i=C),D<c&&(c=D),R<d&&(d=R),C>p&&(p=C),D>m&&(m=D),R>y&&(y=R)}return this.min.set(i,c,d),this.max.set(p,m,y),this}setFromBufferAttribute(t){let i=1/0,c=1/0,d=1/0,p=-1/0,m=-1/0,y=-1/0;for(let w=0,b=t.count;w<b;w++){const C=t.getX(w),D=t.getY(w),R=t.getZ(w);C<i&&(i=C),D<c&&(c=D),R<d&&(d=R),C>p&&(p=C),D>m&&(m=D),R>y&&(y=R)}return this.min.set(i,c,d),this.max.set(p,m,y),this}setFromPoints(t){this.makeEmpty();for(let i=0,c=t.length;i<c;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){const c=fs.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(c),this.max.copy(t).add(c),this}setFromObject(t,i=!1){return this.makeEmpty(),this.expandByObject(t,i)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,i=!1){t.updateWorldMatrix(!1,!1);const c=t.geometry;if(void 0!==c)if(i&&null!=c.attributes&&void 0!==c.attributes.position){const p=c.attributes.position;for(let m=0,y=p.count;m<y;m++)fs.fromBufferAttribute(p,m).applyMatrix4(t.matrixWorld),this.expandByPoint(fs)}else null===c.boundingBox&&c.computeBoundingBox(),ps.copy(c.boundingBox),ps.applyMatrix4(t.matrixWorld),this.union(ps);const d=t.children;for(let p=0,m=d.length;p<m;p++)this.expandByObject(d[p],i);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,i){return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,fs),fs.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let i,c;return t.normal.x>0?(i=t.normal.x*this.min.x,c=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,c=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,c+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,c+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,c+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,c+=t.normal.z*this.min.z),i<=-t.constant&&c>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(il),Vl.subVectors(this.max,il),Ms.subVectors(t.a,il),ho.subVectors(t.b,il),gs.subVectors(t.c,il),Is.subVectors(ho,Ms),Oo.subVectors(gs,ho),fo.subVectors(Ms,gs);let i=[0,-Is.z,Is.y,0,-Oo.z,Oo.y,0,-fo.z,fo.y,Is.z,0,-Is.x,Oo.z,0,-Oo.x,fo.z,0,-fo.x,-Is.y,Is.x,0,-Oo.y,Oo.x,0,-fo.y,fo.x,0];return!(!Rd(i,Ms,ho,gs,Vl)||(i=[1,0,0,0,1,0,0,0,1],!Rd(i,Ms,ho,gs,Vl)))&&(oa.crossVectors(Is,Oo),i=[oa.x,oa.y,oa.z],Rd(i,Ms,ho,gs,Vl))}clampPoint(t,i){return i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return fs.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(fs).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(wi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),wi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),wi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),wi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),wi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),wi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),wi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),wi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(wi)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const wi=[new re,new re,new re,new re,new re,new re,new re,new re],fs=new re,ps=new hs,Ms=new re,ho=new re,gs=new re,Is=new re,Oo=new re,fo=new re,il=new re,Vl=new re,oa=new re,po=new re;function Rd(_,t,i,c,d){for(let p=0,m=_.length-3;p<=m;p+=3){po.fromArray(_,p);const y=d.x*Math.abs(po.x)+d.y*Math.abs(po.y)+d.z*Math.abs(po.z),w=t.dot(po),b=i.dot(po),C=c.dot(po);if(Math.max(-Math.max(w,b,C),Math.min(w,b,C))>y)return!1}return!0}const Sp=new hs,ko=new re,Au=new re;class Tc{constructor(t=new re,i=-1){this.center=t,this.radius=i}set(t,i){return this.center.copy(t),this.radius=i,this}setFromPoints(t,i){const c=this.center;void 0!==i?c.copy(i):Sp.setFromPoints(t).getCenter(c);let d=0;for(let p=0,m=t.length;p<m;p++)d=Math.max(d,c.distanceToSquared(t[p]));return this.radius=Math.sqrt(d),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const i=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=i*i}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,i){const c=this.center.distanceToSquared(t);return i.copy(t),c>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ko.subVectors(t,this.center);const i=ko.lengthSq();if(i>this.radius*this.radius){const c=Math.sqrt(i),d=.5*(c-this.radius);this.center.addScaledVector(ko,d/c),this.radius+=d}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Au.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ko.copy(t.center).add(Au)),this.expandByPoint(ko.copy(t.center).sub(Au))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const za=new re,Pd=new re,Ru=new re,aa=new re,zl=new re,sl=new re,Gl=new re;class Mc{constructor(t=new re,i=new re(0,0,-1)){this.origin=t,this.direction=i}set(t,i){return this.origin.copy(t),this.direction.copy(i),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,i){return i.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,za)),this}closestPointToPoint(t,i){i.subVectors(t,this.origin);const c=i.dot(this.direction);return c<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(c).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const i=za.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(za.copy(this.direction).multiplyScalar(i).add(this.origin),za.distanceToSquared(t))}distanceSqToSegment(t,i,c,d){Pd.copy(t).add(i).multiplyScalar(.5),Ru.copy(i).sub(t).normalize(),aa.copy(this.origin).sub(Pd);const p=.5*t.distanceTo(i),m=-this.direction.dot(Ru),y=aa.dot(this.direction),w=-aa.dot(Ru),b=aa.lengthSq(),C=Math.abs(1-m*m);let D,R,k,V;if(C>0)if(D=m*w-y,R=m*y-w,V=p*C,D>=0)if(R>=-V)if(R<=V){const U=1/C;D*=U,R*=U,k=D*(D+m*R+2*y)+R*(m*D+R+2*w)+b}else R=p,D=Math.max(0,-(m*R+y)),k=-D*D+R*(R+2*w)+b;else R=-p,D=Math.max(0,-(m*R+y)),k=-D*D+R*(R+2*w)+b;else R<=-V?(D=Math.max(0,-(-m*p+y)),R=D>0?-p:Math.min(Math.max(-p,-w),p),k=-D*D+R*(R+2*w)+b):R<=V?(D=0,R=Math.min(Math.max(-p,-w),p),k=R*(R+2*w)+b):(D=Math.max(0,-(m*p+y)),R=D>0?p:Math.min(Math.max(-p,-w),p),k=-D*D+R*(R+2*w)+b);else R=m>0?-p:p,D=Math.max(0,-(m*R+y)),k=-D*D+R*(R+2*w)+b;return c&&c.copy(this.direction).multiplyScalar(D).add(this.origin),d&&d.copy(Ru).multiplyScalar(R).add(Pd),k}intersectSphere(t,i){za.subVectors(t.center,this.origin);const c=za.dot(this.direction),d=za.dot(za)-c*c,p=t.radius*t.radius;if(d>p)return null;const m=Math.sqrt(p-d),y=c-m,w=c+m;return y<0&&w<0?null:this.at(y<0?w:y,i)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const i=t.normal.dot(this.direction);if(0===i)return 0===t.distanceToPoint(this.origin)?0:null;const c=-(this.origin.dot(t.normal)+t.constant)/i;return c>=0?c:null}intersectPlane(t,i){const c=this.distanceToPlane(t);return null===c?null:this.at(c,i)}intersectsPlane(t){const i=t.distanceToPoint(this.origin);return 0===i||t.normal.dot(this.direction)*i<0}intersectBox(t,i){let c,d,p,m,y,w;const b=1/this.direction.x,C=1/this.direction.y,D=1/this.direction.z,R=this.origin;return b>=0?(c=(t.min.x-R.x)*b,d=(t.max.x-R.x)*b):(c=(t.max.x-R.x)*b,d=(t.min.x-R.x)*b),C>=0?(p=(t.min.y-R.y)*C,m=(t.max.y-R.y)*C):(p=(t.max.y-R.y)*C,m=(t.min.y-R.y)*C),c>m||p>d||((p>c||isNaN(c))&&(c=p),(m<d||isNaN(d))&&(d=m),D>=0?(y=(t.min.z-R.z)*D,w=(t.max.z-R.z)*D):(y=(t.max.z-R.z)*D,w=(t.min.z-R.z)*D),c>w||y>d)||((y>c||c!=c)&&(c=y),(w<d||d!=d)&&(d=w),d<0)?null:this.at(c>=0?c:d,i)}intersectsBox(t){return null!==this.intersectBox(t,za)}intersectTriangle(t,i,c,d,p){zl.subVectors(i,t),sl.subVectors(c,t),Gl.crossVectors(zl,sl);let y,m=this.direction.dot(Gl);if(m>0){if(d)return null;y=1}else{if(!(m<0))return null;y=-1,m=-m}aa.subVectors(this.origin,t);const w=y*this.direction.dot(sl.crossVectors(aa,sl));if(w<0)return null;const b=y*this.direction.dot(zl.cross(aa));if(b<0||w+b>m)return null;const C=-y*aa.dot(Gl);return C<0?null:this.at(C/m,p)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class qn{constructor(){qn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,i,c,d,p,m,y,w,b,C,D,R,k,V,U,F){const j=this.elements;return j[0]=t,j[4]=i,j[8]=c,j[12]=d,j[1]=p,j[5]=m,j[9]=y,j[13]=w,j[2]=b,j[6]=C,j[10]=D,j[14]=R,j[3]=k,j[7]=V,j[11]=U,j[15]=F,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new qn).fromArray(this.elements)}copy(t){const i=this.elements,c=t.elements;return i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=c[3],i[4]=c[4],i[5]=c[5],i[6]=c[6],i[7]=c[7],i[8]=c[8],i[9]=c[9],i[10]=c[10],i[11]=c[11],i[12]=c[12],i[13]=c[13],i[14]=c[14],i[15]=c[15],this}copyPosition(t){const i=this.elements,c=t.elements;return i[12]=c[12],i[13]=c[13],i[14]=c[14],this}setFromMatrix3(t){const i=t.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(t,i,c){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),c.setFromMatrixColumn(this,2),this}makeBasis(t,i,c){return this.set(t.x,i.x,c.x,0,t.y,i.y,c.y,0,t.z,i.z,c.z,0,0,0,0,1),this}extractRotation(t){const i=this.elements,c=t.elements,d=1/Fo.setFromMatrixColumn(t,0).length(),p=1/Fo.setFromMatrixColumn(t,1).length(),m=1/Fo.setFromMatrixColumn(t,2).length();return i[0]=c[0]*d,i[1]=c[1]*d,i[2]=c[2]*d,i[3]=0,i[4]=c[4]*p,i[5]=c[5]*p,i[6]=c[6]*p,i[7]=0,i[8]=c[8]*m,i[9]=c[9]*m,i[10]=c[10]*m,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(t){const i=this.elements,c=t.x,d=t.y,p=t.z,m=Math.cos(c),y=Math.sin(c),w=Math.cos(d),b=Math.sin(d),C=Math.cos(p),D=Math.sin(p);if("XYZ"===t.order){const R=m*C,k=m*D,V=y*C,U=y*D;i[0]=w*C,i[4]=-w*D,i[8]=b,i[1]=k+V*b,i[5]=R-U*b,i[9]=-y*w,i[2]=U-R*b,i[6]=V+k*b,i[10]=m*w}else if("YXZ"===t.order){const R=w*C,k=w*D,V=b*C,U=b*D;i[0]=R+U*y,i[4]=V*y-k,i[8]=m*b,i[1]=m*D,i[5]=m*C,i[9]=-y,i[2]=k*y-V,i[6]=U+R*y,i[10]=m*w}else if("ZXY"===t.order){const R=w*C,k=w*D,V=b*C,U=b*D;i[0]=R-U*y,i[4]=-m*D,i[8]=V+k*y,i[1]=k+V*y,i[5]=m*C,i[9]=U-R*y,i[2]=-m*b,i[6]=y,i[10]=m*w}else if("ZYX"===t.order){const R=m*C,k=m*D,V=y*C,U=y*D;i[0]=w*C,i[4]=V*b-k,i[8]=R*b+U,i[1]=w*D,i[5]=U*b+R,i[9]=k*b-V,i[2]=-b,i[6]=y*w,i[10]=m*w}else if("YZX"===t.order){const R=m*w,k=m*b,V=y*w,U=y*b;i[0]=w*C,i[4]=U-R*D,i[8]=V*D+k,i[1]=D,i[5]=m*C,i[9]=-y*C,i[2]=-b*C,i[6]=k*D+V,i[10]=R-U*D}else if("XZY"===t.order){const R=m*w,k=m*b,V=y*w,U=y*b;i[0]=w*C,i[4]=-D,i[8]=b*C,i[1]=R*D+U,i[5]=m*C,i[9]=k*D-V,i[2]=V*D-k,i[6]=y*C,i[10]=U*D+R}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(t){return this.compose(ol,t,Xh)}lookAt(t,i,c){const d=this.elements;return Xs.subVectors(t,i),0===Xs.lengthSq()&&(Xs.z=1),Xs.normalize(),ca.crossVectors(c,Xs),0===ca.lengthSq()&&(1===Math.abs(c.z)?Xs.x+=1e-4:Xs.z+=1e-4,Xs.normalize(),ca.crossVectors(c,Xs)),ca.normalize(),Pu.crossVectors(Xs,ca),d[0]=ca.x,d[4]=Pu.x,d[8]=Xs.x,d[1]=ca.y,d[5]=Pu.y,d[9]=Xs.y,d[2]=ca.z,d[6]=Pu.z,d[10]=Xs.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const c=t.elements,d=i.elements,p=this.elements,m=c[0],y=c[4],w=c[8],b=c[12],C=c[1],D=c[5],R=c[9],k=c[13],V=c[2],U=c[6],F=c[10],j=c[14],X=c[3],Y=c[7],K=c[11],ie=c[15],ue=d[0],ve=d[4],te=d[8],fe=d[12],be=d[1],qe=d[5],gt=d[9],$e=d[13],Ie=d[2],Qe=d[6],lt=d[10],Mt=d[14],it=d[3],Re=d[7],Fe=d[11],It=d[15];return p[0]=m*ue+y*be+w*Ie+b*it,p[4]=m*ve+y*qe+w*Qe+b*Re,p[8]=m*te+y*gt+w*lt+b*Fe,p[12]=m*fe+y*$e+w*Mt+b*It,p[1]=C*ue+D*be+R*Ie+k*it,p[5]=C*ve+D*qe+R*Qe+k*Re,p[9]=C*te+D*gt+R*lt+k*Fe,p[13]=C*fe+D*$e+R*Mt+k*It,p[2]=V*ue+U*be+F*Ie+j*it,p[6]=V*ve+U*qe+F*Qe+j*Re,p[10]=V*te+U*gt+F*lt+j*Fe,p[14]=V*fe+U*$e+F*Mt+j*It,p[3]=X*ue+Y*be+K*Ie+ie*it,p[7]=X*ve+Y*qe+K*Qe+ie*Re,p[11]=X*te+Y*gt+K*lt+ie*Fe,p[15]=X*fe+Y*$e+K*Mt+ie*It,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}determinant(){const t=this.elements,i=t[0],c=t[4],d=t[8],p=t[12],m=t[1],y=t[5],w=t[9],b=t[13],C=t[2],D=t[6],R=t[10],k=t[14];return t[3]*(+p*w*D-d*b*D-p*y*R+c*b*R+d*y*k-c*w*k)+t[7]*(+i*w*k-i*b*R+p*m*R-d*m*k+d*b*C-p*w*C)+t[11]*(+i*b*D-i*y*k-p*m*D+c*m*k+p*y*C-c*b*C)+t[15]*(-d*y*C-i*w*D+i*y*R+d*m*D-c*m*R+c*w*C)}transpose(){const t=this.elements;let i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this}setPosition(t,i,c){const d=this.elements;return t.isVector3?(d[12]=t.x,d[13]=t.y,d[14]=t.z):(d[12]=t,d[13]=i,d[14]=c),this}invert(){const t=this.elements,i=t[0],c=t[1],d=t[2],p=t[3],m=t[4],y=t[5],w=t[6],b=t[7],C=t[8],D=t[9],R=t[10],k=t[11],V=t[12],U=t[13],F=t[14],j=t[15],X=D*F*b-U*R*b+U*w*k-y*F*k-D*w*j+y*R*j,Y=V*R*b-C*F*b-V*w*k+m*F*k+C*w*j-m*R*j,K=C*U*b-V*D*b+V*y*k-m*U*k-C*y*j+m*D*j,ie=V*D*w-C*U*w-V*y*R+m*U*R+C*y*F-m*D*F,ue=i*X+c*Y+d*K+p*ie;if(0===ue)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ve=1/ue;return t[0]=X*ve,t[1]=(U*R*p-D*F*p-U*d*k+c*F*k+D*d*j-c*R*j)*ve,t[2]=(y*F*p-U*w*p+U*d*b-c*F*b-y*d*j+c*w*j)*ve,t[3]=(D*w*p-y*R*p-D*d*b+c*R*b+y*d*k-c*w*k)*ve,t[4]=Y*ve,t[5]=(C*F*p-V*R*p+V*d*k-i*F*k-C*d*j+i*R*j)*ve,t[6]=(V*w*p-m*F*p-V*d*b+i*F*b+m*d*j-i*w*j)*ve,t[7]=(m*R*p-C*w*p+C*d*b-i*R*b-m*d*k+i*w*k)*ve,t[8]=K*ve,t[9]=(V*D*p-C*U*p-V*c*k+i*U*k+C*c*j-i*D*j)*ve,t[10]=(m*U*p-V*y*p+V*c*b-i*U*b-m*c*j+i*y*j)*ve,t[11]=(C*y*p-m*D*p-C*c*b+i*D*b+m*c*k-i*y*k)*ve,t[12]=ie*ve,t[13]=(C*U*d-V*D*d+V*c*R-i*U*R-C*c*F+i*D*F)*ve,t[14]=(V*y*d-m*U*d-V*c*w+i*U*w+m*c*F-i*y*F)*ve,t[15]=(m*D*d-C*y*d+C*c*w-i*D*w-m*c*R+i*y*R)*ve,this}scale(t){const i=this.elements,c=t.x,d=t.y,p=t.z;return i[0]*=c,i[4]*=d,i[8]*=p,i[1]*=c,i[5]*=d,i[9]*=p,i[2]*=c,i[6]*=d,i[10]*=p,i[3]*=c,i[7]*=d,i[11]*=p,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,i,c){return this.set(1,0,0,t,0,1,0,i,0,0,1,c,0,0,0,1),this}makeRotationX(t){const i=Math.cos(t),c=Math.sin(t);return this.set(1,0,0,0,0,i,-c,0,0,c,i,0,0,0,0,1),this}makeRotationY(t){const i=Math.cos(t),c=Math.sin(t);return this.set(i,0,c,0,0,1,0,0,-c,0,i,0,0,0,0,1),this}makeRotationZ(t){const i=Math.cos(t),c=Math.sin(t);return this.set(i,-c,0,0,c,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,i){const c=Math.cos(i),d=Math.sin(i),p=1-c,m=t.x,y=t.y,w=t.z,b=p*m,C=p*y;return this.set(b*m+c,b*y-d*w,b*w+d*y,0,b*y+d*w,C*y+c,C*w-d*m,0,b*w-d*y,C*w+d*m,p*w*w+c,0,0,0,0,1),this}makeScale(t,i,c){return this.set(t,0,0,0,0,i,0,0,0,0,c,0,0,0,0,1),this}makeShear(t,i,c,d,p,m){return this.set(1,c,p,0,t,1,m,0,i,d,1,0,0,0,0,1),this}compose(t,i,c){const d=this.elements,p=i._x,m=i._y,y=i._z,w=i._w,b=p+p,C=m+m,D=y+y,R=p*b,k=p*C,V=p*D,U=m*C,F=m*D,j=y*D,X=w*b,Y=w*C,K=w*D,ie=c.x,ue=c.y,ve=c.z;return d[0]=(1-(U+j))*ie,d[1]=(k+K)*ie,d[2]=(V-Y)*ie,d[3]=0,d[4]=(k-K)*ue,d[5]=(1-(R+j))*ue,d[6]=(F+X)*ue,d[7]=0,d[8]=(V+Y)*ve,d[9]=(F-X)*ve,d[10]=(1-(R+U))*ve,d[11]=0,d[12]=t.x,d[13]=t.y,d[14]=t.z,d[15]=1,this}decompose(t,i,c){const d=this.elements;let p=Fo.set(d[0],d[1],d[2]).length();const m=Fo.set(d[4],d[5],d[6]).length(),y=Fo.set(d[8],d[9],d[10]).length();this.determinant()<0&&(p=-p),t.x=d[12],t.y=d[13],t.z=d[14],Uo.copy(this);const b=1/p,C=1/m,D=1/y;return Uo.elements[0]*=b,Uo.elements[1]*=b,Uo.elements[2]*=b,Uo.elements[4]*=C,Uo.elements[5]*=C,Uo.elements[6]*=C,Uo.elements[8]*=D,Uo.elements[9]*=D,Uo.elements[10]*=D,i.setFromRotationMatrix(Uo),c.x=p,c.y=m,c.z=y,this}makePerspective(t,i,c,d,p,m){const y=this.elements,b=2*p/(c-d),C=(i+t)/(i-t),D=(c+d)/(c-d),R=-(m+p)/(m-p),k=-2*m*p/(m-p);return y[0]=2*p/(i-t),y[4]=0,y[8]=C,y[12]=0,y[1]=0,y[5]=b,y[9]=D,y[13]=0,y[2]=0,y[6]=0,y[10]=R,y[14]=k,y[3]=0,y[7]=0,y[11]=-1,y[15]=0,this}makeOrthographic(t,i,c,d,p,m){const y=this.elements,w=1/(i-t),b=1/(c-d),C=1/(m-p),D=(i+t)*w,R=(c+d)*b,k=(m+p)*C;return y[0]=2*w,y[4]=0,y[8]=0,y[12]=-D,y[1]=0,y[5]=2*b,y[9]=0,y[13]=-R,y[2]=0,y[6]=0,y[10]=-2*C,y[14]=-k,y[3]=0,y[7]=0,y[11]=0,y[15]=1,this}equals(t){const i=this.elements,c=t.elements;for(let d=0;d<16;d++)if(i[d]!==c[d])return!1;return!0}fromArray(t,i=0){for(let c=0;c<16;c++)this.elements[c]=t[c+i];return this}toArray(t=[],i=0){const c=this.elements;return t[i]=c[0],t[i+1]=c[1],t[i+2]=c[2],t[i+3]=c[3],t[i+4]=c[4],t[i+5]=c[5],t[i+6]=c[6],t[i+7]=c[7],t[i+8]=c[8],t[i+9]=c[9],t[i+10]=c[10],t[i+11]=c[11],t[i+12]=c[12],t[i+13]=c[13],t[i+14]=c[14],t[i+15]=c[15],t}}const Fo=new re,Uo=new qn,ol=new re(0,0,0),Xh=new re(1,1,1),ca=new re,Pu=new re,Xs=new re,Lu=new qn,Ep=new bn;let go=(()=>{class _{constructor(i=0,c=0,d=0,p=_.DefaultOrder){this.isEuler=!0,this._x=i,this._y=c,this._z=d,this._order=p}get x(){return this._x}set x(i){this._x=i,this._onChangeCallback()}get y(){return this._y}set y(i){this._y=i,this._onChangeCallback()}get z(){return this._z}set z(i){this._z=i,this._onChangeCallback()}get order(){return this._order}set order(i){this._order=i,this._onChangeCallback()}set(i,c,d,p=this._order){return this._x=i,this._y=c,this._z=d,this._order=p,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(i){return this._x=i._x,this._y=i._y,this._z=i._z,this._order=i._order,this._onChangeCallback(),this}setFromRotationMatrix(i,c=this._order,d=!0){const p=i.elements,m=p[0],y=p[4],w=p[8],b=p[1],C=p[5],D=p[9],R=p[2],k=p[6],V=p[10];switch(c){case"XYZ":this._y=Math.asin(gr(w,-1,1)),Math.abs(w)<.9999999?(this._x=Math.atan2(-D,V),this._z=Math.atan2(-y,m)):(this._x=Math.atan2(k,C),this._z=0);break;case"YXZ":this._x=Math.asin(-gr(D,-1,1)),Math.abs(D)<.9999999?(this._y=Math.atan2(w,V),this._z=Math.atan2(b,C)):(this._y=Math.atan2(-R,m),this._z=0);break;case"ZXY":this._x=Math.asin(gr(k,-1,1)),Math.abs(k)<.9999999?(this._y=Math.atan2(-R,V),this._z=Math.atan2(-y,C)):(this._y=0,this._z=Math.atan2(b,m));break;case"ZYX":this._y=Math.asin(-gr(R,-1,1)),Math.abs(R)<.9999999?(this._x=Math.atan2(k,V),this._z=Math.atan2(b,m)):(this._x=0,this._z=Math.atan2(-y,C));break;case"YZX":this._z=Math.asin(gr(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(-D,C),this._y=Math.atan2(-R,m)):(this._x=0,this._y=Math.atan2(w,V));break;case"XZY":this._z=Math.asin(-gr(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(k,C),this._y=Math.atan2(w,m)):(this._x=Math.atan2(-D,V),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+c)}return this._order=c,!0===d&&this._onChangeCallback(),this}setFromQuaternion(i,c,d){return Lu.makeRotationFromQuaternion(i),this.setFromRotationMatrix(Lu,c,d)}setFromVector3(i,c=this._order){return this.set(i.x,i.y,i.z,c)}reorder(i){return Ep.setFromEuler(this),this.setFromQuaternion(Ep,i)}equals(i){return i._x===this._x&&i._y===this._y&&i._z===this._z&&i._order===this._order}fromArray(i){return this._x=i[0],this._y=i[1],this._z=i[2],void 0!==i[3]&&(this._order=i[3]),this._onChangeCallback(),this}toArray(i=[],c=0){return i[c]=this._x,i[c+1]=this._y,i[c+2]=this._z,i[c+3]=this._order,i}_onChange(i){return this._onChangeCallback=i,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return _.DefaultOrder="XYZ",_.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],_})();class Nu{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let Ic=0;const Ou=new re,Hl=new bn,Qs=new qn,Wl=new re,Ld=new re,Tp=new re,al=new bn,ku=new re(1,0,0),Fu=new re(0,1,0),Nd=new re(0,0,1),Od={type:"added"},$l={type:"removed"};let ms=(()=>{class _ extends Ro{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ic++}),this.uuid=li(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_.DefaultUp.clone();const i=new re,c=new go,d=new bn,p=new re(1,1,1);c._onChange(function m(){d.setFromEuler(c,!1)}),d._onChange(function y(){c.setFromQuaternion(d,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:c},quaternion:{configurable:!0,enumerable:!0,value:d},scale:{configurable:!0,enumerable:!0,value:p},modelViewMatrix:{value:new qn},normalMatrix:{value:new Nr}}),this.matrix=new qn,this.matrixWorld=new qn,this.matrixAutoUpdate=_.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=_.DefaultMatrixWorldAutoUpdate,this.layers=new Nu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(i){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(i),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(i){return this.quaternion.premultiply(i),this}setRotationFromAxisAngle(i,c){this.quaternion.setFromAxisAngle(i,c)}setRotationFromEuler(i){this.quaternion.setFromEuler(i,!0)}setRotationFromMatrix(i){this.quaternion.setFromRotationMatrix(i)}setRotationFromQuaternion(i){this.quaternion.copy(i)}rotateOnAxis(i,c){return Hl.setFromAxisAngle(i,c),this.quaternion.multiply(Hl),this}rotateOnWorldAxis(i,c){return Hl.setFromAxisAngle(i,c),this.quaternion.premultiply(Hl),this}rotateX(i){return this.rotateOnAxis(ku,i)}rotateY(i){return this.rotateOnAxis(Fu,i)}rotateZ(i){return this.rotateOnAxis(Nd,i)}translateOnAxis(i,c){return Ou.copy(i).applyQuaternion(this.quaternion),this.position.add(Ou.multiplyScalar(c)),this}translateX(i){return this.translateOnAxis(ku,i)}translateY(i){return this.translateOnAxis(Fu,i)}translateZ(i){return this.translateOnAxis(Nd,i)}localToWorld(i){return i.applyMatrix4(this.matrixWorld)}worldToLocal(i){return i.applyMatrix4(Qs.copy(this.matrixWorld).invert())}lookAt(i,c,d){i.isVector3?Wl.copy(i):Wl.set(i,c,d);const p=this.parent;this.updateWorldMatrix(!0,!1),Ld.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Qs.lookAt(Ld,Wl,this.up):Qs.lookAt(Wl,Ld,this.up),this.quaternion.setFromRotationMatrix(Qs),p&&(Qs.extractRotation(p.matrixWorld),Hl.setFromRotationMatrix(Qs),this.quaternion.premultiply(Hl.invert()))}add(i){if(arguments.length>1){for(let c=0;c<arguments.length;c++)this.add(arguments[c]);return this}return i===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",i),this):(i&&i.isObject3D?(null!==i.parent&&i.parent.remove(i),i.parent=this,this.children.push(i),i.dispatchEvent(Od)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",i),this)}remove(i){if(arguments.length>1){for(let d=0;d<arguments.length;d++)this.remove(arguments[d]);return this}const c=this.children.indexOf(i);return-1!==c&&(i.parent=null,this.children.splice(c,1),i.dispatchEvent($l)),this}removeFromParent(){const i=this.parent;return null!==i&&i.remove(this),this}clear(){for(let i=0;i<this.children.length;i++){const c=this.children[i];c.parent=null,c.dispatchEvent($l)}return this.children.length=0,this}attach(i){return this.updateWorldMatrix(!0,!1),Qs.copy(this.matrixWorld).invert(),null!==i.parent&&(i.parent.updateWorldMatrix(!0,!1),Qs.multiply(i.parent.matrixWorld)),i.applyMatrix4(Qs),this.add(i),i.updateWorldMatrix(!1,!0),this}getObjectById(i){return this.getObjectByProperty("id",i)}getObjectByName(i){return this.getObjectByProperty("name",i)}getObjectByProperty(i,c){if(this[i]===c)return this;for(let d=0,p=this.children.length;d<p;d++){const y=this.children[d].getObjectByProperty(i,c);if(void 0!==y)return y}}getWorldPosition(i){return this.updateWorldMatrix(!0,!1),i.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(i){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ld,i,Tp),i}getWorldScale(i){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ld,al,i),i}getWorldDirection(i){this.updateWorldMatrix(!0,!1);const c=this.matrixWorld.elements;return i.set(c[8],c[9],c[10]).normalize()}raycast(){}traverse(i){i(this);const c=this.children;for(let d=0,p=c.length;d<p;d++)c[d].traverse(i)}traverseVisible(i){if(!1===this.visible)return;i(this);const c=this.children;for(let d=0,p=c.length;d<p;d++)c[d].traverseVisible(i)}traverseAncestors(i){const c=this.parent;null!==c&&(i(c),c.traverseAncestors(i))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(i){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||i)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,i=!0);const c=this.children;for(let d=0,p=c.length;d<p;d++){const m=c[d];(!0===m.matrixWorldAutoUpdate||!0===i)&&m.updateMatrixWorld(i)}}updateWorldMatrix(i,c){const d=this.parent;if(!0===i&&null!==d&&!0===d.matrixWorldAutoUpdate&&d.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===c){const p=this.children;for(let m=0,y=p.length;m<y;m++){const w=p[m];!0===w.matrixWorldAutoUpdate&&w.updateWorldMatrix(!1,!0)}}}toJSON(i){const c=void 0===i||"string"==typeof i,d={};c&&(i={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},d.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const p={};function m(w,b){return void 0===w[b.uuid]&&(w[b.uuid]=b.toJSON(i)),b.uuid}if(p.uuid=this.uuid,p.type=this.type,""!==this.name&&(p.name=this.name),!0===this.castShadow&&(p.castShadow=!0),!0===this.receiveShadow&&(p.receiveShadow=!0),!1===this.visible&&(p.visible=!1),!1===this.frustumCulled&&(p.frustumCulled=!1),0!==this.renderOrder&&(p.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(p.userData=this.userData),p.layers=this.layers.mask,p.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(p.matrixAutoUpdate=!1),this.isInstancedMesh&&(p.type="InstancedMesh",p.count=this.count,p.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(p.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?p.background=this.background.toJSON():this.background.isTexture&&(p.background=this.background.toJSON(i).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(p.environment=this.environment.toJSON(i).uuid);else if(this.isMesh||this.isLine||this.isPoints){p.geometry=m(i.geometries,this.geometry);const w=this.geometry.parameters;if(void 0!==w&&void 0!==w.shapes){const b=w.shapes;if(Array.isArray(b))for(let C=0,D=b.length;C<D;C++)m(i.shapes,b[C]);else m(i.shapes,b)}}if(this.isSkinnedMesh&&(p.bindMode=this.bindMode,p.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(m(i.skeletons,this.skeleton),p.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const w=[];for(let b=0,C=this.material.length;b<C;b++)w.push(m(i.materials,this.material[b]));p.material=w}else p.material=m(i.materials,this.material);if(this.children.length>0){p.children=[];for(let w=0;w<this.children.length;w++)p.children.push(this.children[w].toJSON(i).object)}if(this.animations.length>0){p.animations=[];for(let w=0;w<this.animations.length;w++)p.animations.push(m(i.animations,this.animations[w]))}if(c){const w=y(i.geometries),b=y(i.materials),C=y(i.textures),D=y(i.images),R=y(i.shapes),k=y(i.skeletons),V=y(i.animations),U=y(i.nodes);w.length>0&&(d.geometries=w),b.length>0&&(d.materials=b),C.length>0&&(d.textures=C),D.length>0&&(d.images=D),R.length>0&&(d.shapes=R),k.length>0&&(d.skeletons=k),V.length>0&&(d.animations=V),U.length>0&&(d.nodes=U)}return d.object=p,d;function y(w){const b=[];for(const C in w){const D=w[C];delete D.metadata,b.push(D)}return b}}clone(i){return(new this.constructor).copy(this,i)}copy(i,c=!0){if(this.name=i.name,this.up.copy(i.up),this.position.copy(i.position),this.rotation.order=i.rotation.order,this.quaternion.copy(i.quaternion),this.scale.copy(i.scale),this.matrix.copy(i.matrix),this.matrixWorld.copy(i.matrixWorld),this.matrixAutoUpdate=i.matrixAutoUpdate,this.matrixWorldNeedsUpdate=i.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=i.matrixWorldAutoUpdate,this.layers.mask=i.layers.mask,this.visible=i.visible,this.castShadow=i.castShadow,this.receiveShadow=i.receiveShadow,this.frustumCulled=i.frustumCulled,this.renderOrder=i.renderOrder,this.userData=JSON.parse(JSON.stringify(i.userData)),!0===c)for(let d=0;d<i.children.length;d++)this.add(i.children[d].clone());return this}}return _.DefaultUp=new re(0,1,0),_.DefaultMatrixAutoUpdate=!0,_.DefaultMatrixWorldAutoUpdate=!0,_})();const mo=new re,Ia=new re,Ga=new re,Ha=new re,qi=new re,Wa=new re,Ki=new re,kd=new re,cl=new re,Ca=new re;class Ri{constructor(t=new re,i=new re,c=new re){this.a=t,this.b=i,this.c=c}static getNormal(t,i,c,d){d.subVectors(c,i),mo.subVectors(t,i),d.cross(mo);const p=d.lengthSq();return p>0?d.multiplyScalar(1/Math.sqrt(p)):d.set(0,0,0)}static getBarycoord(t,i,c,d,p){mo.subVectors(d,i),Ia.subVectors(c,i),Ga.subVectors(t,i);const m=mo.dot(mo),y=mo.dot(Ia),w=mo.dot(Ga),b=Ia.dot(Ia),C=Ia.dot(Ga),D=m*b-y*y;if(0===D)return p.set(-2,-1,-1);const R=1/D,k=(b*w-y*C)*R,V=(m*C-y*w)*R;return p.set(1-k-V,V,k)}static containsPoint(t,i,c,d){return this.getBarycoord(t,i,c,d,Ha),Ha.x>=0&&Ha.y>=0&&Ha.x+Ha.y<=1}static getUV(t,i,c,d,p,m,y,w){return this.getBarycoord(t,i,c,d,Ha),w.set(0,0),w.addScaledVector(p,Ha.x),w.addScaledVector(m,Ha.y),w.addScaledVector(y,Ha.z),w}static isFrontFacing(t,i,c,d){return mo.subVectors(c,i),Ia.subVectors(t,i),mo.cross(Ia).dot(d)<0}set(t,i,c){return this.a.copy(t),this.b.copy(i),this.c.copy(c),this}setFromPointsAndIndices(t,i,c,d){return this.a.copy(t[i]),this.b.copy(t[c]),this.c.copy(t[d]),this}setFromAttributeAndIndices(t,i,c,d){return this.a.fromBufferAttribute(t,i),this.b.fromBufferAttribute(t,c),this.c.fromBufferAttribute(t,d),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return mo.subVectors(this.c,this.b),Ia.subVectors(this.a,this.b),.5*mo.cross(Ia).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Ri.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,i){return Ri.getBarycoord(t,this.a,this.b,this.c,i)}getUV(t,i,c,d,p){return Ri.getUV(t,this.a,this.b,this.c,i,c,d,p)}containsPoint(t){return Ri.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Ri.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,i){const c=this.a,d=this.b,p=this.c;let m,y;qi.subVectors(d,c),Wa.subVectors(p,c),kd.subVectors(t,c);const w=qi.dot(kd),b=Wa.dot(kd);if(w<=0&&b<=0)return i.copy(c);cl.subVectors(t,d);const C=qi.dot(cl),D=Wa.dot(cl);if(C>=0&&D<=C)return i.copy(d);const R=w*D-C*b;if(R<=0&&w>=0&&C<=0)return m=w/(w-C),i.copy(c).addScaledVector(qi,m);Ca.subVectors(t,p);const k=qi.dot(Ca),V=Wa.dot(Ca);if(V>=0&&k<=V)return i.copy(p);const U=k*b-w*V;if(U<=0&&b>=0&&V<=0)return y=b/(b-V),i.copy(c).addScaledVector(Wa,y);const F=C*V-k*D;if(F<=0&&D-C>=0&&k-V>=0)return Ki.subVectors(p,d),y=(D-C)/(D-C+(k-V)),i.copy(d).addScaledVector(Ki,y);const j=1/(F+U+R);return m=U*j,y=R*j,i.copy(c).addScaledVector(qi,m).addScaledVector(Wa,y)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let jl=0;class ql extends Ro{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:jl++}),this.uuid=li(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const i in t){const c=t[i];if(void 0===c){console.warn("THREE.Material: '"+i+"' parameter is undefined.");continue}const d=this[i];void 0!==d?d&&d.isColor?d.set(c):d&&d.isVector3&&c&&c.isVector3?d.copy(c):this[i]=c:console.warn("THREE."+this.type+": '"+i+"' is not a property of this material.")}}toJSON(t){const i=void 0===t||"string"==typeof t;i&&(t={textures:{},images:{}});const c={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function d(p){const m=[];for(const y in p){const w=p[y];delete w.metadata,m.push(w)}return m}if(c.uuid=this.uuid,c.type=this.type,""!==this.name&&(c.name=this.name),this.color&&this.color.isColor&&(c.color=this.color.getHex()),void 0!==this.roughness&&(c.roughness=this.roughness),void 0!==this.metalness&&(c.metalness=this.metalness),void 0!==this.sheen&&(c.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(c.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(c.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(c.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(c.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(c.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(c.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(c.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(c.shininess=this.shininess),void 0!==this.clearcoat&&(c.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(c.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(c.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(c.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(c.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,c.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(c.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(c.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(c.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(c.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(c.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(c.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(c.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(c.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(c.lightMap=this.lightMap.toJSON(t).uuid,c.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(c.aoMap=this.aoMap.toJSON(t).uuid,c.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(c.bumpMap=this.bumpMap.toJSON(t).uuid,c.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(c.normalMap=this.normalMap.toJSON(t).uuid,c.normalMapType=this.normalMapType,c.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(c.displacementMap=this.displacementMap.toJSON(t).uuid,c.displacementScale=this.displacementScale,c.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(c.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(c.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(c.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(c.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(c.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(c.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(c.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(c.combine=this.combine)),void 0!==this.envMapIntensity&&(c.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(c.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(c.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(c.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(c.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(c.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(c.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(c.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(c.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(c.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(c.size=this.size),null!==this.shadowSide&&(c.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(c.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(c.blending=this.blending),0!==this.side&&(c.side=this.side),this.vertexColors&&(c.vertexColors=!0),this.opacity<1&&(c.opacity=this.opacity),!0===this.transparent&&(c.transparent=this.transparent),c.depthFunc=this.depthFunc,c.depthTest=this.depthTest,c.depthWrite=this.depthWrite,c.colorWrite=this.colorWrite,c.stencilWrite=this.stencilWrite,c.stencilWriteMask=this.stencilWriteMask,c.stencilFunc=this.stencilFunc,c.stencilRef=this.stencilRef,c.stencilFuncMask=this.stencilFuncMask,c.stencilFail=this.stencilFail,c.stencilZFail=this.stencilZFail,c.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(c.rotation=this.rotation),!0===this.polygonOffset&&(c.polygonOffset=!0),0!==this.polygonOffsetFactor&&(c.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(c.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(c.linewidth=this.linewidth),void 0!==this.dashSize&&(c.dashSize=this.dashSize),void 0!==this.gapSize&&(c.gapSize=this.gapSize),void 0!==this.scale&&(c.scale=this.scale),!0===this.dithering&&(c.dithering=!0),this.alphaTest>0&&(c.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(c.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(c.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(c.wireframe=this.wireframe),this.wireframeLinewidth>1&&(c.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(c.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(c.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(c.flatShading=this.flatShading),!1===this.visible&&(c.visible=!1),!1===this.toneMapped&&(c.toneMapped=!1),!1===this.fog&&(c.fog=!1),"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData),i){const p=d(t.textures),m=d(t.images);p.length>0&&(c.textures=p),m.length>0&&(c.images=m)}return c}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const i=t.clippingPlanes;let c=null;if(null!==i){const d=i.length;c=new Array(d);for(let p=0;p!==d;++p)c[p]=i[p].clone()}return this.clippingPlanes=c,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class yo extends ql{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Yt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const ui=new re,Mp=new Xe;class Vi{constructor(t,i,c){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=i,this.count=void 0!==t?t.length/i:0,this.normalized=!0===c,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,i,c){t*=this.itemSize,c*=i.itemSize;for(let d=0,p=this.itemSize;d<p;d++)this.array[t+d]=i.array[c+d];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let i=0,c=this.count;i<c;i++)Mp.fromBufferAttribute(this,i),Mp.applyMatrix3(t),this.setXY(i,Mp.x,Mp.y);else if(3===this.itemSize)for(let i=0,c=this.count;i<c;i++)ui.fromBufferAttribute(this,i),ui.applyMatrix3(t),this.setXYZ(i,ui.x,ui.y,ui.z);return this}applyMatrix4(t){for(let i=0,c=this.count;i<c;i++)ui.fromBufferAttribute(this,i),ui.applyMatrix4(t),this.setXYZ(i,ui.x,ui.y,ui.z);return this}applyNormalMatrix(t){for(let i=0,c=this.count;i<c;i++)ui.fromBufferAttribute(this,i),ui.applyNormalMatrix(t),this.setXYZ(i,ui.x,ui.y,ui.z);return this}transformDirection(t){for(let i=0,c=this.count;i<c;i++)ui.fromBufferAttribute(this,i),ui.transformDirection(t),this.setXYZ(i,ui.x,ui.y,ui.z);return this}set(t,i=0){return this.array.set(t,i),this}getX(t){let i=this.array[t*this.itemSize];return this.normalized&&(i=Po(i,this.array)),i}setX(t,i){return this.normalized&&(i=wn(i,this.array)),this.array[t*this.itemSize]=i,this}getY(t){let i=this.array[t*this.itemSize+1];return this.normalized&&(i=Po(i,this.array)),i}setY(t,i){return this.normalized&&(i=wn(i,this.array)),this.array[t*this.itemSize+1]=i,this}getZ(t){let i=this.array[t*this.itemSize+2];return this.normalized&&(i=Po(i,this.array)),i}setZ(t,i){return this.normalized&&(i=wn(i,this.array)),this.array[t*this.itemSize+2]=i,this}getW(t){let i=this.array[t*this.itemSize+3];return this.normalized&&(i=Po(i,this.array)),i}setW(t,i){return this.normalized&&(i=wn(i,this.array)),this.array[t*this.itemSize+3]=i,this}setXY(t,i,c){return t*=this.itemSize,this.normalized&&(i=wn(i,this.array),c=wn(c,this.array)),this.array[t+0]=i,this.array[t+1]=c,this}setXYZ(t,i,c,d){return t*=this.itemSize,this.normalized&&(i=wn(i,this.array),c=wn(c,this.array),d=wn(d,this.array)),this.array[t+0]=i,this.array[t+1]=c,this.array[t+2]=d,this}setXYZW(t,i,c,d,p){return t*=this.itemSize,this.normalized&&(i=wn(i,this.array),c=wn(c,this.array),d=wn(d,this.array),p=wn(p,this.array)),this.array[t+0]=i,this.array[t+1]=c,this.array[t+2]=d,this.array[t+3]=p,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Uu extends Vi{constructor(t,i,c){super(new Uint16Array(t),i,c)}}class Jh extends Vi{constructor(t,i,c){super(new Uint32Array(t),i,c)}}class rn extends Vi{constructor(t,i,c){super(new Float32Array(t),i,c)}}let Ip=0;const Hr=new qn,Bu=new ms,Da=new re,_o=new hs,Vu=new hs,kr=new re;class yn extends Ro{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ip++}),this.uuid=li(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(Lo(t)?Jh:Uu)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,i){return this.attributes[t]=i,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,i,c=0){this.groups.push({start:t,count:i,materialIndex:c})}clearGroups(){this.groups=[]}setDrawRange(t,i){this.drawRange.start=t,this.drawRange.count=i}applyMatrix4(t){const i=this.attributes.position;void 0!==i&&(i.applyMatrix4(t),i.needsUpdate=!0);const c=this.attributes.normal;if(void 0!==c){const p=(new Nr).getNormalMatrix(t);c.applyNormalMatrix(p),c.needsUpdate=!0}const d=this.attributes.tangent;return void 0!==d&&(d.transformDirection(t),d.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Hr.makeRotationFromQuaternion(t),this.applyMatrix4(Hr),this}rotateX(t){return Hr.makeRotationX(t),this.applyMatrix4(Hr),this}rotateY(t){return Hr.makeRotationY(t),this.applyMatrix4(Hr),this}rotateZ(t){return Hr.makeRotationZ(t),this.applyMatrix4(Hr),this}translate(t,i,c){return Hr.makeTranslation(t,i,c),this.applyMatrix4(Hr),this}scale(t,i,c){return Hr.makeScale(t,i,c),this.applyMatrix4(Hr),this}lookAt(t){return Bu.lookAt(t),Bu.updateMatrix(),this.applyMatrix4(Bu.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Da).negate(),this.translate(Da.x,Da.y,Da.z),this}setFromPoints(t){const i=[];for(let c=0,d=t.length;c<d;c++){const p=t[c];i.push(p.x,p.y,p.z||0)}return this.setAttribute("position",new rn(i,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new hs);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new re(-1/0,-1/0,-1/0),new re(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),i)for(let c=0,d=i.length;c<d;c++)_o.setFromBufferAttribute(i[c]),this.morphTargetsRelative?(kr.addVectors(this.boundingBox.min,_o.min),this.boundingBox.expandByPoint(kr),kr.addVectors(this.boundingBox.max,_o.max),this.boundingBox.expandByPoint(kr)):(this.boundingBox.expandByPoint(_o.min),this.boundingBox.expandByPoint(_o.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Tc);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new re,1/0);if(t){const c=this.boundingSphere.center;if(_o.setFromBufferAttribute(t),i)for(let p=0,m=i.length;p<m;p++)Vu.setFromBufferAttribute(i[p]),this.morphTargetsRelative?(kr.addVectors(_o.min,Vu.min),_o.expandByPoint(kr),kr.addVectors(_o.max,Vu.max),_o.expandByPoint(kr)):(_o.expandByPoint(Vu.min),_o.expandByPoint(Vu.max));_o.getCenter(c);let d=0;for(let p=0,m=t.count;p<m;p++)kr.fromBufferAttribute(t,p),d=Math.max(d,c.distanceToSquared(kr));if(i)for(let p=0,m=i.length;p<m;p++){const y=i[p],w=this.morphTargetsRelative;for(let b=0,C=y.count;b<C;b++)kr.fromBufferAttribute(y,b),w&&(Da.fromBufferAttribute(t,b),kr.add(Da)),d=Math.max(d,c.distanceToSquared(kr))}this.boundingSphere.radius=Math.sqrt(d),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,i=this.attributes;if(null===t||void 0===i.position||void 0===i.normal||void 0===i.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const c=t.array,d=i.position.array,p=i.normal.array,m=i.uv.array,y=d.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Vi(new Float32Array(4*y),4));const w=this.getAttribute("tangent").array,b=[],C=[];for(let be=0;be<y;be++)b[be]=new re,C[be]=new re;const D=new re,R=new re,k=new re,V=new Xe,U=new Xe,F=new Xe,j=new re,X=new re;function Y(be,qe,gt){D.fromArray(d,3*be),R.fromArray(d,3*qe),k.fromArray(d,3*gt),V.fromArray(m,2*be),U.fromArray(m,2*qe),F.fromArray(m,2*gt),R.sub(D),k.sub(D),U.sub(V),F.sub(V);const $e=1/(U.x*F.y-F.x*U.y);!isFinite($e)||(j.copy(R).multiplyScalar(F.y).addScaledVector(k,-U.y).multiplyScalar($e),X.copy(k).multiplyScalar(U.x).addScaledVector(R,-F.x).multiplyScalar($e),b[be].add(j),b[qe].add(j),b[gt].add(j),C[be].add(X),C[qe].add(X),C[gt].add(X))}let K=this.groups;0===K.length&&(K=[{start:0,count:c.length}]);for(let be=0,qe=K.length;be<qe;++be){const gt=K[be],$e=gt.start;for(let Qe=$e,lt=$e+gt.count;Qe<lt;Qe+=3)Y(c[Qe+0],c[Qe+1],c[Qe+2])}const ie=new re,ue=new re,ve=new re,te=new re;function fe(be){ve.fromArray(p,3*be),te.copy(ve);const qe=b[be];ie.copy(qe),ie.sub(ve.multiplyScalar(ve.dot(qe))).normalize(),ue.crossVectors(te,qe);const $e=ue.dot(C[be])<0?-1:1;w[4*be]=ie.x,w[4*be+1]=ie.y,w[4*be+2]=ie.z,w[4*be+3]=$e}for(let be=0,qe=K.length;be<qe;++be){const gt=K[be],$e=gt.start;for(let Qe=$e,lt=$e+gt.count;Qe<lt;Qe+=3)fe(c[Qe+0]),fe(c[Qe+1]),fe(c[Qe+2])}}computeVertexNormals(){const t=this.index,i=this.getAttribute("position");if(void 0!==i){let c=this.getAttribute("normal");if(void 0===c)c=new Vi(new Float32Array(3*i.count),3),this.setAttribute("normal",c);else for(let R=0,k=c.count;R<k;R++)c.setXYZ(R,0,0,0);const d=new re,p=new re,m=new re,y=new re,w=new re,b=new re,C=new re,D=new re;if(t)for(let R=0,k=t.count;R<k;R+=3){const V=t.getX(R+0),U=t.getX(R+1),F=t.getX(R+2);d.fromBufferAttribute(i,V),p.fromBufferAttribute(i,U),m.fromBufferAttribute(i,F),C.subVectors(m,p),D.subVectors(d,p),C.cross(D),y.fromBufferAttribute(c,V),w.fromBufferAttribute(c,U),b.fromBufferAttribute(c,F),y.add(C),w.add(C),b.add(C),c.setXYZ(V,y.x,y.y,y.z),c.setXYZ(U,w.x,w.y,w.z),c.setXYZ(F,b.x,b.y,b.z)}else for(let R=0,k=i.count;R<k;R+=3)d.fromBufferAttribute(i,R+0),p.fromBufferAttribute(i,R+1),m.fromBufferAttribute(i,R+2),C.subVectors(m,p),D.subVectors(d,p),C.cross(D),c.setXYZ(R+0,C.x,C.y,C.z),c.setXYZ(R+1,C.x,C.y,C.z),c.setXYZ(R+2,C.x,C.y,C.z);this.normalizeNormals(),c.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let i=0,c=t.count;i<c;i++)kr.fromBufferAttribute(t,i),kr.normalize(),t.setXYZ(i,kr.x,kr.y,kr.z)}toNonIndexed(){function t(y,w){const b=y.array,C=y.itemSize,D=y.normalized,R=new b.constructor(w.length*C);let k=0,V=0;for(let U=0,F=w.length;U<F;U++){k=y.isInterleavedBufferAttribute?w[U]*y.data.stride+y.offset:w[U]*C;for(let j=0;j<C;j++)R[V++]=b[k++]}return new Vi(R,C,D)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new yn,c=this.index.array,d=this.attributes;for(const y in d){const b=t(d[y],c);i.setAttribute(y,b)}const p=this.morphAttributes;for(const y in p){const w=[],b=p[y];for(let C=0,D=b.length;C<D;C++){const k=t(b[C],c);w.push(k)}i.morphAttributes[y]=w}i.morphTargetsRelative=this.morphTargetsRelative;const m=this.groups;for(let y=0,w=m.length;y<w;y++){const b=m[y];i.addGroup(b.start,b.count,b.materialIndex)}return i}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const w=this.parameters;for(const b in w)void 0!==w[b]&&(t[b]=w[b]);return t}t.data={attributes:{}};const i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const c=this.attributes;for(const w in c)t.data.attributes[w]=c[w].toJSON(t.data);const d={};let p=!1;for(const w in this.morphAttributes){const b=this.morphAttributes[w],C=[];for(let D=0,R=b.length;D<R;D++)C.push(b[D].toJSON(t.data));C.length>0&&(d[w]=C,p=!0)}p&&(t.data.morphAttributes=d,t.data.morphTargetsRelative=this.morphTargetsRelative);const m=this.groups;m.length>0&&(t.data.groups=JSON.parse(JSON.stringify(m)));const y=this.boundingSphere;return null!==y&&(t.data.boundingSphere={center:y.center.toArray(),radius:y.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=t.name;const c=t.index;null!==c&&this.setIndex(c.clone(i));const d=t.attributes;for(const b in d)this.setAttribute(b,d[b].clone(i));const p=t.morphAttributes;for(const b in p){const C=[],D=p[b];for(let R=0,k=D.length;R<k;R++)C.push(D[R].clone(i));this.morphAttributes[b]=C}this.morphTargetsRelative=t.morphTargetsRelative;const m=t.groups;for(let b=0,C=m.length;b<C;b++){const D=m[b];this.addGroup(D.start,D.count,D.materialIndex)}const y=t.boundingBox;null!==y&&(this.boundingBox=y.clone());const w=t.boundingSphere;return null!==w&&(this.boundingSphere=w.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Cp=new qn,Aa=new Mc,ll=new Tc,$a=new re,Cc=new re,Dc=new re,Fm=new re,Fd=new re,Ud=new re,Ji=new re,ul=new re,ja=new re,ef=new Xe,M=new Xe,I=new Xe,E=new re,L=new re;class z extends ms{constructor(t=new yn,i=new yo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const i=this.geometry.morphAttributes,c=Object.keys(i);if(c.length>0){const d=i[c[0]];if(void 0!==d){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let p=0,m=d.length;p<m;p++){const y=d[p].name||String(p);this.morphTargetInfluences.push(0),this.morphTargetDictionary[y]=p}}}}raycast(t,i){const c=this.geometry,d=this.material,p=this.matrixWorld;if(void 0===d||(null===c.boundingSphere&&c.computeBoundingSphere(),ll.copy(c.boundingSphere),ll.applyMatrix4(p),!1===t.ray.intersectsSphere(ll))||(Cp.copy(p).invert(),Aa.copy(t.ray).applyMatrix4(Cp),null!==c.boundingBox&&!1===Aa.intersectsBox(c.boundingBox)))return;let m;const y=c.index,w=c.attributes.position,b=c.morphAttributes.position,C=c.morphTargetsRelative,D=c.attributes.uv,R=c.attributes.uv2,k=c.groups,V=c.drawRange;if(null!==y)if(Array.isArray(d))for(let U=0,F=k.length;U<F;U++){const j=k[U],X=d[j.materialIndex];for(let ie=Math.max(j.start,V.start),ue=Math.min(y.count,Math.min(j.start+j.count,V.start+V.count));ie<ue;ie+=3){const ve=y.getX(ie),te=y.getX(ie+1),fe=y.getX(ie+2);m=ae(this,X,t,Aa,w,b,C,D,R,ve,te,fe),m&&(m.faceIndex=Math.floor(ie/3),m.face.materialIndex=j.materialIndex,i.push(m))}}else for(let j=Math.max(0,V.start),X=Math.min(y.count,V.start+V.count);j<X;j+=3){const Y=y.getX(j),K=y.getX(j+1),ie=y.getX(j+2);m=ae(this,d,t,Aa,w,b,C,D,R,Y,K,ie),m&&(m.faceIndex=Math.floor(j/3),i.push(m))}else if(void 0!==w)if(Array.isArray(d))for(let U=0,F=k.length;U<F;U++){const j=k[U],X=d[j.materialIndex];for(let ie=Math.max(j.start,V.start),ue=Math.min(w.count,Math.min(j.start+j.count,V.start+V.count));ie<ue;ie+=3)m=ae(this,X,t,Aa,w,b,C,D,R,ie,ie+1,ie+2),m&&(m.faceIndex=Math.floor(ie/3),m.face.materialIndex=j.materialIndex,i.push(m))}else for(let j=Math.max(0,V.start),X=Math.min(w.count,V.start+V.count);j<X;j+=3)m=ae(this,d,t,Aa,w,b,C,D,R,j,j+1,j+2),m&&(m.faceIndex=Math.floor(j/3),i.push(m))}}function ae(_,t,i,c,d,p,m,y,w,b,C,D){$a.fromBufferAttribute(d,b),Cc.fromBufferAttribute(d,C),Dc.fromBufferAttribute(d,D);const R=_.morphTargetInfluences;if(p&&R){Ji.set(0,0,0),ul.set(0,0,0),ja.set(0,0,0);for(let V=0,U=p.length;V<U;V++){const F=R[V],j=p[V];0!==F&&(Fm.fromBufferAttribute(j,b),Fd.fromBufferAttribute(j,C),Ud.fromBufferAttribute(j,D),m?(Ji.addScaledVector(Fm,F),ul.addScaledVector(Fd,F),ja.addScaledVector(Ud,F)):(Ji.addScaledVector(Fm.sub($a),F),ul.addScaledVector(Fd.sub(Cc),F),ja.addScaledVector(Ud.sub(Dc),F)))}$a.add(Ji),Cc.add(ul),Dc.add(ja)}_.isSkinnedMesh&&(_.boneTransform(b,$a),_.boneTransform(C,Cc),_.boneTransform(D,Dc));const k=function Z(_,t,i,c,d,p,m,y){let w;if(w=1===t.side?c.intersectTriangle(m,p,d,!0,y):c.intersectTriangle(d,p,m,2!==t.side,y),null===w)return null;L.copy(y),L.applyMatrix4(_.matrixWorld);const b=i.ray.origin.distanceTo(L);return b<i.near||b>i.far?null:{distance:b,point:L.clone(),object:_}}(_,t,i,c,$a,Cc,Dc,E);if(k){y&&(ef.fromBufferAttribute(y,b),M.fromBufferAttribute(y,C),I.fromBufferAttribute(y,D),k.uv=Ri.getUV(E,$a,Cc,Dc,ef,M,I,new Xe)),w&&(ef.fromBufferAttribute(w,b),M.fromBufferAttribute(w,C),I.fromBufferAttribute(w,D),k.uv2=Ri.getUV(E,$a,Cc,Dc,ef,M,I,new Xe));const V={a:b,b:C,c:D,normal:new re,materialIndex:0};Ri.getNormal($a,Cc,Dc,V.normal),k.face=V}return k}class he extends yn{constructor(t=1,i=1,c=1,d=1,p=1,m=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:i,depth:c,widthSegments:d,heightSegments:p,depthSegments:m};const y=this;d=Math.floor(d),p=Math.floor(p),m=Math.floor(m);const w=[],b=[],C=[],D=[];let R=0,k=0;function V(U,F,j,X,Y,K,ie,ue,ve,te,fe){const be=K/ve,qe=ie/te,gt=K/2,$e=ie/2,Ie=ue/2,Qe=ve+1,lt=te+1;let Mt=0,it=0;const Re=new re;for(let Fe=0;Fe<lt;Fe++){const It=Fe*qe-$e;for(let yt=0;yt<Qe;yt++)Re[U]=(yt*be-gt)*X,Re[F]=It*Y,Re[j]=Ie,b.push(Re.x,Re.y,Re.z),Re[U]=0,Re[F]=0,Re[j]=ue>0?1:-1,C.push(Re.x,Re.y,Re.z),D.push(yt/ve),D.push(1-Fe/te),Mt+=1}for(let Fe=0;Fe<te;Fe++)for(let It=0;It<ve;It++){const Gt=R+It+Qe*(Fe+1),ln=R+(It+1)+Qe*(Fe+1),Gn=R+(It+1)+Qe*Fe;w.push(R+It+Qe*Fe,Gt,Gn),w.push(Gt,ln,Gn),it+=6}y.addGroup(k,it,fe),k+=it,R+=Mt}V("z","y","x",-1,-1,c,i,t,m,p,0),V("z","y","x",1,-1,c,i,-t,m,p,1),V("x","z","y",1,1,t,c,i,d,m,2),V("x","z","y",1,-1,t,c,-i,d,m,3),V("x","y","z",1,-1,t,i,c,d,p,4),V("x","y","z",-1,-1,t,i,-c,d,p,5),this.setIndex(w),this.setAttribute("position",new rn(b,3)),this.setAttribute("normal",new rn(C,3)),this.setAttribute("uv",new rn(D,2))}static fromJSON(t){return new he(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ae(_){const t={};for(const i in _){t[i]={};for(const c in _[i]){const d=_[i][c];t[i][c]=d&&(d.isColor||d.isMatrix3||d.isMatrix4||d.isVector2||d.isVector3||d.isVector4||d.isTexture||d.isQuaternion)?d.clone():Array.isArray(d)?d.slice():d}}return t}function ft(_){const t={};for(let i=0;i<_.length;i++){const c=Ae(_[i]);for(const d in c)t[d]=c[d]}return t}const jt={clone:Ae,merge:ft};class Ds extends ql{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ae(t.uniforms),this.uniformsGroups=function Sn(_){const t=[];for(let i=0;i<_.length;i++)t.push(_[i].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const i=super.toJSON(t);i.glslVersion=this.glslVersion,i.uniforms={};for(const d in this.uniforms){const m=this.uniforms[d].value;i.uniforms[d]=m&&m.isTexture?{type:"t",value:m.toJSON(t).uuid}:m&&m.isColor?{type:"c",value:m.getHex()}:m&&m.isVector2?{type:"v2",value:m.toArray()}:m&&m.isVector3?{type:"v3",value:m.toArray()}:m&&m.isVector4?{type:"v4",value:m.toArray()}:m&&m.isMatrix3?{type:"m3",value:m.toArray()}:m&&m.isMatrix4?{type:"m4",value:m.toArray()}:{value:m}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader;const c={};for(const d in this.extensions)!0===this.extensions[d]&&(c[d]=!0);return Object.keys(c).length>0&&(i.extensions=c),i}}class qa extends ms{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new qn,this.projectionMatrix=new qn,this.projectionMatrixInverse=new qn}copy(t,i){return super.copy(t,i),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(-i[8],-i[9],-i[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,i){super.updateWorldMatrix(t,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Zr extends qa{constructor(t=50,i=1,c=.1,d=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=c,this.far=d,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const i=.5*this.getFilmHeight()/t;this.fov=2*Ks*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*ia*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Ks*Math.atan(Math.tan(.5*ia*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,i,c,d,p,m){this.aspect=t/i,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=c,this.view.offsetY=d,this.view.width=p,this.view.height=m,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let i=t*Math.tan(.5*ia*this.fov)/this.zoom,c=2*i,d=this.aspect*c,p=-.5*d;const m=this.view;if(null!==this.view&&this.view.enabled){const w=m.fullWidth,b=m.fullHeight;p+=m.offsetX*d/w,i-=m.offsetY*c/b,d*=m.width/w,c*=m.height/b}const y=this.filmOffset;0!==y&&(p+=t*y/this.getFilmWidth()),this.projectionMatrix.makePerspective(p,p+d,i,i-c,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,null!==this.view&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}}class tf extends ms{constructor(t,i,c){super(),this.type="CubeCamera",this.renderTarget=c;const d=new Zr(90,1,t,i);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new re(1,0,0)),this.add(d);const p=new Zr(90,1,t,i);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new re(-1,0,0)),this.add(p);const m=new Zr(90,1,t,i);m.layers=this.layers,m.up.set(0,0,1),m.lookAt(new re(0,1,0)),this.add(m);const y=new Zr(90,1,t,i);y.layers=this.layers,y.up.set(0,0,-1),y.lookAt(new re(0,-1,0)),this.add(y);const w=new Zr(90,1,t,i);w.layers=this.layers,w.up.set(0,-1,0),w.lookAt(new re(0,0,1)),this.add(w);const b=new Zr(90,1,t,i);b.layers=this.layers,b.up.set(0,-1,0),b.lookAt(new re(0,0,-1)),this.add(b)}update(t,i){null===this.parent&&this.updateMatrixWorld();const c=this.renderTarget,[d,p,m,y,w,b]=this.children,C=t.getRenderTarget(),D=t.toneMapping,R=t.xr.enabled;t.toneMapping=0,t.xr.enabled=!1;const k=c.texture.generateMipmaps;c.texture.generateMipmaps=!1,t.setRenderTarget(c,0),t.render(i,d),t.setRenderTarget(c,1),t.render(i,p),t.setRenderTarget(c,2),t.render(i,m),t.setRenderTarget(c,3),t.render(i,y),t.setRenderTarget(c,4),t.render(i,w),c.texture.generateMipmaps=k,t.setRenderTarget(c,5),t.render(i,b),t.setRenderTarget(C),t.toneMapping=D,t.xr.enabled=R,c.texture.needsPMREMUpdate=!0}}class bi extends ee{constructor(t,i,c,d,p,m,y,w,b,C){super(t=void 0!==t?t:[],i=void 0!==i?i:301,c,d,p,m,y,w,b,C),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Dp extends Le{constructor(t=1,i={}){super(t,t,i),this.isWebGLCubeRenderTarget=!0;const c={width:t,height:t,depth:1};this.texture=new bi([c,c,c,c,c,c],i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:Di}fromEquirectangularTexture(t,i){this.texture.type=i.type,this.texture.encoding=i.encoding,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const c_uniforms={tEquirect:{value:null}},c_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",c_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",d=new he(5,5,5),p=new Ds({name:"CubemapFromEquirect",uniforms:Ae(c_uniforms),vertexShader:c_vertexShader,fragmentShader:c_fragmentShader,side:1,blending:0});p.uniforms.tEquirect.value=i;const m=new z(d,p),y=i.minFilter;return 1008===i.minFilter&&(i.minFilter=Di),new tf(1,10,this).update(t,m),i.minFilter=y,m.geometry.dispose(),m.material.dispose(),this}clear(t,i,c,d){const p=t.getRenderTarget();for(let m=0;m<6;m++)t.setRenderTarget(this,m),t.clear(i,c,d);t.setRenderTarget(p)}}const Bd=new re,nf=new re,rf=new Nr;class dl{constructor(t=new re(1,0,0),i=0){this.isPlane=!0,this.normal=t,this.constant=i}set(t,i){return this.normal.copy(t),this.constant=i,this}setComponents(t,i,c,d){return this.normal.set(t,i,c),this.constant=d,this}setFromNormalAndCoplanarPoint(t,i){return this.normal.copy(t),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(t,i,c){const d=Bd.subVectors(c,i).cross(nf.subVectors(t,i)).normalize();return this.setFromNormalAndCoplanarPoint(d,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,i){return i.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,i){const c=t.delta(Bd),d=this.normal.dot(c);if(0===d)return 0===this.distanceToPoint(t.start)?i.copy(t.start):null;const p=-(t.start.dot(this.normal)+this.constant)/d;return p<0||p>1?null:i.copy(c).multiplyScalar(p).add(t.start)}intersectsLine(t){const i=this.distanceToPoint(t.start),c=this.distanceToPoint(t.end);return i<0&&c>0||c<0&&i>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,i){const c=i||rf.getNormalMatrix(t),d=this.coplanarPoint(Bd).applyMatrix4(t),p=this.normal.applyMatrix3(c).normalize();return this.constant=-d.dot(p),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Kl=new Tc,Ap=new re;class Yi{constructor(t=new dl,i=new dl,c=new dl,d=new dl,p=new dl,m=new dl){this.planes=[t,i,c,d,p,m]}set(t,i,c,d,p,m){const y=this.planes;return y[0].copy(t),y[1].copy(i),y[2].copy(c),y[3].copy(d),y[4].copy(p),y[5].copy(m),this}copy(t){const i=this.planes;for(let c=0;c<6;c++)i[c].copy(t.planes[c]);return this}setFromProjectionMatrix(t){const i=this.planes,c=t.elements,d=c[0],p=c[1],m=c[2],y=c[3],w=c[4],b=c[5],C=c[6],D=c[7],R=c[8],k=c[9],V=c[10],U=c[11],F=c[12],j=c[13],X=c[14],Y=c[15];return i[0].setComponents(y-d,D-w,U-R,Y-F).normalize(),i[1].setComponents(y+d,D+w,U+R,Y+F).normalize(),i[2].setComponents(y+p,D+b,U+k,Y+j).normalize(),i[3].setComponents(y-p,D-b,U-k,Y-j).normalize(),i[4].setComponents(y-m,D-C,U-V,Y-X).normalize(),i[5].setComponents(y+m,D+C,U+V,Y+X).normalize(),this}intersectsObject(t){const i=t.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),Kl.copy(i.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Kl)}intersectsSprite(t){return Kl.center.set(0,0,0),Kl.radius=.7071067811865476,Kl.applyMatrix4(t.matrixWorld),this.intersectsSphere(Kl)}intersectsSphere(t){const i=this.planes,c=t.center,d=-t.radius;for(let p=0;p<6;p++)if(i[p].distanceToPoint(c)<d)return!1;return!0}intersectsBox(t){const i=this.planes;for(let c=0;c<6;c++){const d=i[c];if(Ap.x=d.normal.x>0?t.max.x:t.min.x,Ap.y=d.normal.y>0?t.max.y:t.min.y,Ap.z=d.normal.z>0?t.max.z:t.min.z,d.distanceToPoint(Ap)<0)return!1}return!0}containsPoint(t){const i=this.planes;for(let c=0;c<6;c++)if(i[c].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Vd(){let _=null,t=!1,i=null,c=null;function d(p,m){i(p,m),c=_.requestAnimationFrame(d)}return{start:function(){!0!==t&&null!==i&&(c=_.requestAnimationFrame(d),t=!0)},stop:function(){_.cancelAnimationFrame(c),t=!1},setAnimationLoop:function(p){i=p},setContext:function(p){_=p}}}function Rp(_,t){const i=t.isWebGL2,c=new WeakMap;return{get:function m(b){return b.isInterleavedBufferAttribute&&(b=b.data),c.get(b)},remove:function y(b){b.isInterleavedBufferAttribute&&(b=b.data);const C=c.get(b);C&&(_.deleteBuffer(C.buffer),c.delete(b))},update:function w(b,C){if(b.isGLBufferAttribute){const R=c.get(b);return void((!R||R.version<b.version)&&c.set(b,{buffer:b.buffer,type:b.type,bytesPerElement:b.elementSize,version:b.version}))}b.isInterleavedBufferAttribute&&(b=b.data);const D=c.get(b);void 0===D?c.set(b,function d(b,C){const D=b.array,R=b.usage,k=_.createBuffer();let V;if(_.bindBuffer(C,k),_.bufferData(C,D,R),b.onUploadCallback(),D instanceof Float32Array)V=5126;else if(D instanceof Uint16Array)if(b.isFloat16BufferAttribute){if(!i)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");V=5131}else V=5123;else if(D instanceof Int16Array)V=5122;else if(D instanceof Uint32Array)V=5125;else if(D instanceof Int32Array)V=5124;else if(D instanceof Int8Array)V=5120;else if(D instanceof Uint8Array)V=5121;else{if(!(D instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+D);V=5121}return{buffer:k,type:V,bytesPerElement:D.BYTES_PER_ELEMENT,version:b.version}}(b,C)):D.version<b.version&&(function p(b,C,D){const R=C.array,k=C.updateRange;_.bindBuffer(D,b),-1===k.count?_.bufferSubData(D,0,R):(i?_.bufferSubData(D,k.offset*R.BYTES_PER_ELEMENT,R,k.offset,k.count):_.bufferSubData(D,k.offset*R.BYTES_PER_ELEMENT,R.subarray(k.offset,k.offset+k.count)),k.count=-1)}(D.buffer,b,C),D.version=b.version)}}}class Yl extends yn{constructor(t=1,i=1,c=1,d=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:i,widthSegments:c,heightSegments:d};const p=t/2,m=i/2,y=Math.floor(c),w=Math.floor(d),b=y+1,C=w+1,D=t/y,R=i/w,k=[],V=[],U=[],F=[];for(let j=0;j<C;j++){const X=j*R-m;for(let Y=0;Y<b;Y++)V.push(Y*D-p,-X,0),U.push(0,0,1),F.push(Y/y),F.push(1-j/w)}for(let j=0;j<w;j++)for(let X=0;X<y;X++){const K=X+b*(j+1),ie=X+1+b*(j+1),ue=X+1+b*j;k.push(X+b*j,K,ue),k.push(K,ie,ue)}this.setIndex(k),this.setAttribute("position",new rn(V,3)),this.setAttribute("normal",new rn(U,3)),this.setAttribute("uv",new rn(F,2))}static fromJSON(t){return new Yl(t.width,t.height,t.widthSegments,t.heightSegments)}}const rr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},zt={common:{diffuse:{value:new Yt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Nr},uv2Transform:{value:new Nr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Yt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Yt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Nr}},sprite:{diffuse:{value:new Yt(16777215)},opacity:{value:1},center:{value:new Xe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Nr}}},Ka={basic:{uniforms:ft([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.fog]),vertexShader:rr.meshbasic_vert,fragmentShader:rr.meshbasic_frag},lambert:{uniforms:ft([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.fog,zt.lights,{emissive:{value:new Yt(0)}}]),vertexShader:rr.meshlambert_vert,fragmentShader:rr.meshlambert_frag},phong:{uniforms:ft([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.fog,zt.lights,{emissive:{value:new Yt(0)},specular:{value:new Yt(1118481)},shininess:{value:30}}]),vertexShader:rr.meshphong_vert,fragmentShader:rr.meshphong_frag},standard:{uniforms:ft([zt.common,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.roughnessmap,zt.metalnessmap,zt.fog,zt.lights,{emissive:{value:new Yt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:rr.meshphysical_vert,fragmentShader:rr.meshphysical_frag},toon:{uniforms:ft([zt.common,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.gradientmap,zt.fog,zt.lights,{emissive:{value:new Yt(0)}}]),vertexShader:rr.meshtoon_vert,fragmentShader:rr.meshtoon_frag},matcap:{uniforms:ft([zt.common,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.fog,{matcap:{value:null}}]),vertexShader:rr.meshmatcap_vert,fragmentShader:rr.meshmatcap_frag},points:{uniforms:ft([zt.points,zt.fog]),vertexShader:rr.points_vert,fragmentShader:rr.points_frag},dashed:{uniforms:ft([zt.common,zt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rr.linedashed_vert,fragmentShader:rr.linedashed_frag},depth:{uniforms:ft([zt.common,zt.displacementmap]),vertexShader:rr.depth_vert,fragmentShader:rr.depth_frag},normal:{uniforms:ft([zt.common,zt.bumpmap,zt.normalmap,zt.displacementmap,{opacity:{value:1}}]),vertexShader:rr.meshnormal_vert,fragmentShader:rr.meshnormal_frag},sprite:{uniforms:ft([zt.sprite,zt.fog]),vertexShader:rr.sprite_vert,fragmentShader:rr.sprite_frag},background:{uniforms:{uvTransform:{value:new Nr},t2D:{value:null}},vertexShader:rr.background_vert,fragmentShader:rr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:rr.backgroundCube_vert,fragmentShader:rr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rr.cube_vert,fragmentShader:rr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rr.equirect_vert,fragmentShader:rr.equirect_frag},distanceRGBA:{uniforms:ft([zt.common,zt.displacementmap,{referencePosition:{value:new re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rr.distanceRGBA_vert,fragmentShader:rr.distanceRGBA_frag},shadow:{uniforms:ft([zt.lights,zt.fog,{color:{value:new Yt(0)},opacity:{value:1}}]),vertexShader:rr.shadow_vert,fragmentShader:rr.shadow_frag}};function ny(_,t,i,c,d,p,m){const y=new Yt(0);let b,C,w=!0===p?0:1,D=null,R=0,k=null;function U(F,j){c.buffers.color.setClear(F.r,F.g,F.b,j,m)}return{getClearColor:function(){return y},setClearColor:function(F,j=1){y.set(F),w=j,U(y,w)},getClearAlpha:function(){return w},setClearAlpha:function(F){w=F,U(y,w)},render:function V(F,j){let X=!1,Y=!0===j.isScene?j.background:null;Y&&Y.isTexture&&(Y=(j.backgroundBlurriness>0?i:t).get(Y));const K=_.xr,ie=K.getSession&&K.getSession();ie&&"additive"===ie.environmentBlendMode&&(Y=null),null===Y?U(y,w):Y&&Y.isColor&&(U(Y,1),X=!0),(_.autoClear||X)&&_.clear(_.autoClearColor,_.autoClearDepth,_.autoClearStencil),Y&&(Y.isCubeTexture||306===Y.mapping)?(void 0===C&&(C=new z(new he(1,1,1),new Ds({name:"BackgroundCubeMaterial",uniforms:Ae(Ka.backgroundCube.uniforms),vertexShader:Ka.backgroundCube.vertexShader,fragmentShader:Ka.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),C.geometry.deleteAttribute("normal"),C.geometry.deleteAttribute("uv"),C.onBeforeRender=function(ue,ve,te){this.matrixWorld.copyPosition(te.matrixWorld)},Object.defineProperty(C.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),d.update(C)),C.material.uniforms.envMap.value=Y,C.material.uniforms.flipEnvMap.value=Y.isCubeTexture&&!1===Y.isRenderTargetTexture?-1:1,C.material.uniforms.backgroundBlurriness.value=j.backgroundBlurriness,(D!==Y||R!==Y.version||k!==_.toneMapping)&&(C.material.needsUpdate=!0,D=Y,R=Y.version,k=_.toneMapping),C.layers.enableAll(),F.unshift(C,C.geometry,C.material,0,0,null)):Y&&Y.isTexture&&(void 0===b&&(b=new z(new Yl(2,2),new Ds({name:"BackgroundMaterial",uniforms:Ae(Ka.background.uniforms),vertexShader:Ka.background.vertexShader,fragmentShader:Ka.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),b.geometry.deleteAttribute("normal"),Object.defineProperty(b.material,"map",{get:function(){return this.uniforms.t2D.value}}),d.update(b)),b.material.uniforms.t2D.value=Y,!0===Y.matrixAutoUpdate&&Y.updateMatrix(),b.material.uniforms.uvTransform.value.copy(Y.matrix),(D!==Y||R!==Y.version||k!==_.toneMapping)&&(b.material.needsUpdate=!0,D=Y,R=Y.version,k=_.toneMapping),b.layers.enableAll(),F.unshift(b,b.geometry,b.material,0,0,null))}}}function zE(_,t,i,c){const d=_.getParameter(34921),p=c.isWebGL2?null:t.get("OES_vertex_array_object"),m=c.isWebGL2||null!==p,y={},w=F(null);let b=w,C=!1;function k(Ie){return c.isWebGL2?_.bindVertexArray(Ie):p.bindVertexArrayOES(Ie)}function V(Ie){return c.isWebGL2?_.deleteVertexArray(Ie):p.deleteVertexArrayOES(Ie)}function F(Ie){const Qe=[],lt=[],Mt=[];for(let it=0;it<d;it++)Qe[it]=0,lt[it]=0,Mt[it]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Qe,enabledAttributes:lt,attributeDivisors:Mt,object:Ie,attributes:{},index:null}}function Y(){const Ie=b.newAttributes;for(let Qe=0,lt=Ie.length;Qe<lt;Qe++)Ie[Qe]=0}function K(Ie){ie(Ie,0)}function ie(Ie,Qe){const Mt=b.enabledAttributes,it=b.attributeDivisors;b.newAttributes[Ie]=1,0===Mt[Ie]&&(_.enableVertexAttribArray(Ie),Mt[Ie]=1),it[Ie]!==Qe&&((c.isWebGL2?_:t.get("ANGLE_instanced_arrays"))[c.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ie,Qe),it[Ie]=Qe)}function ue(){const Ie=b.newAttributes,Qe=b.enabledAttributes;for(let lt=0,Mt=Qe.length;lt<Mt;lt++)Qe[lt]!==Ie[lt]&&(_.disableVertexAttribArray(lt),Qe[lt]=0)}function ve(Ie,Qe,lt,Mt,it,Re){!0!==c.isWebGL2||5124!==lt&&5125!==lt?_.vertexAttribPointer(Ie,Qe,lt,Mt,it,Re):_.vertexAttribIPointer(Ie,Qe,lt,it,Re)}function gt(){$e(),C=!0,b!==w&&(b=w,k(b.object))}function $e(){w.geometry=null,w.program=null,w.wireframe=!1}return{setup:function D(Ie,Qe,lt,Mt,it){let Re=!1;if(m){const Fe=function U(Ie,Qe,lt){const Mt=!0===lt.wireframe;let it=y[Ie.id];void 0===it&&(it={},y[Ie.id]=it);let Re=it[Qe.id];void 0===Re&&(Re={},it[Qe.id]=Re);let Fe=Re[Mt];return void 0===Fe&&(Fe=F(function R(){return c.isWebGL2?_.createVertexArray():p.createVertexArrayOES()}()),Re[Mt]=Fe),Fe}(Mt,lt,Qe);b!==Fe&&(b=Fe,k(b.object)),Re=function j(Ie,Qe,lt,Mt){const it=b.attributes,Re=Qe.attributes;let Fe=0;const It=lt.getAttributes();for(const yt in It)if(It[yt].location>=0){const ln=it[yt];let Gn=Re[yt];if(void 0===Gn&&("instanceMatrix"===yt&&Ie.instanceMatrix&&(Gn=Ie.instanceMatrix),"instanceColor"===yt&&Ie.instanceColor&&(Gn=Ie.instanceColor)),void 0===ln||ln.attribute!==Gn||Gn&&ln.data!==Gn.data)return!0;Fe++}return b.attributesNum!==Fe||b.index!==Mt}(Ie,Mt,lt,it),Re&&function X(Ie,Qe,lt,Mt){const it={},Re=Qe.attributes;let Fe=0;const It=lt.getAttributes();for(const yt in It)if(It[yt].location>=0){let ln=Re[yt];void 0===ln&&("instanceMatrix"===yt&&Ie.instanceMatrix&&(ln=Ie.instanceMatrix),"instanceColor"===yt&&Ie.instanceColor&&(ln=Ie.instanceColor));const Gn={};Gn.attribute=ln,ln&&ln.data&&(Gn.data=ln.data),it[yt]=Gn,Fe++}b.attributes=it,b.attributesNum=Fe,b.index=Mt}(Ie,Mt,lt,it)}else{const Fe=!0===Qe.wireframe;(b.geometry!==Mt.id||b.program!==lt.id||b.wireframe!==Fe)&&(b.geometry=Mt.id,b.program=lt.id,b.wireframe=Fe,Re=!0)}null!==it&&i.update(it,34963),(Re||C)&&(C=!1,function te(Ie,Qe,lt,Mt){if(!1===c.isWebGL2&&(Ie.isInstancedMesh||Mt.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;Y();const it=Mt.attributes,Re=lt.getAttributes(),Fe=Qe.defaultAttributeValues;for(const It in Re){const yt=Re[It];if(yt.location>=0){let Gt=it[It];if(void 0===Gt&&("instanceMatrix"===It&&Ie.instanceMatrix&&(Gt=Ie.instanceMatrix),"instanceColor"===It&&Ie.instanceColor&&(Gt=Ie.instanceColor)),void 0!==Gt){const ln=Gt.normalized,Gn=Gt.itemSize,st=i.get(Gt);if(void 0===st)continue;const vr=st.buffer,Rn=st.type,ir=st.bytesPerElement;if(Gt.isInterleavedBufferAttribute){const qt=Gt.data,Tr=qt.stride,ct=Gt.offset;if(qt.isInstancedInterleavedBuffer){for(let rt=0;rt<yt.locationSize;rt++)ie(yt.location+rt,qt.meshPerAttribute);!0!==Ie.isInstancedMesh&&void 0===Mt._maxInstanceCount&&(Mt._maxInstanceCount=qt.meshPerAttribute*qt.count)}else for(let rt=0;rt<yt.locationSize;rt++)K(yt.location+rt);_.bindBuffer(34962,vr);for(let rt=0;rt<yt.locationSize;rt++)ve(yt.location+rt,Gn/yt.locationSize,Rn,ln,Tr*ir,(ct+Gn/yt.locationSize*rt)*ir)}else{if(Gt.isInstancedBufferAttribute){for(let qt=0;qt<yt.locationSize;qt++)ie(yt.location+qt,Gt.meshPerAttribute);!0!==Ie.isInstancedMesh&&void 0===Mt._maxInstanceCount&&(Mt._maxInstanceCount=Gt.meshPerAttribute*Gt.count)}else for(let qt=0;qt<yt.locationSize;qt++)K(yt.location+qt);_.bindBuffer(34962,vr);for(let qt=0;qt<yt.locationSize;qt++)ve(yt.location+qt,Gn/yt.locationSize,Rn,ln,Gn*ir,Gn/yt.locationSize*qt*ir)}}else if(void 0!==Fe){const ln=Fe[It];if(void 0!==ln)switch(ln.length){case 2:_.vertexAttrib2fv(yt.location,ln);break;case 3:_.vertexAttrib3fv(yt.location,ln);break;case 4:_.vertexAttrib4fv(yt.location,ln);break;default:_.vertexAttrib1fv(yt.location,ln)}}}}ue()}(Ie,Qe,lt,Mt),null!==it&&_.bindBuffer(34963,i.get(it).buffer))},reset:gt,resetDefaultState:$e,dispose:function fe(){gt();for(const Ie in y){const Qe=y[Ie];for(const lt in Qe){const Mt=Qe[lt];for(const it in Mt)V(Mt[it].object),delete Mt[it];delete Qe[lt]}delete y[Ie]}},releaseStatesOfGeometry:function be(Ie){if(void 0===y[Ie.id])return;const Qe=y[Ie.id];for(const lt in Qe){const Mt=Qe[lt];for(const it in Mt)V(Mt[it].object),delete Mt[it];delete Qe[lt]}delete y[Ie.id]},releaseStatesOfProgram:function qe(Ie){for(const Qe in y){const lt=y[Qe];if(void 0===lt[Ie.id])continue;const Mt=lt[Ie.id];for(const it in Mt)V(Mt[it].object),delete Mt[it];delete lt[Ie.id]}},initAttributes:Y,enableAttribute:K,disableUnusedAttributes:ue}}function zw(_,t,i,c){const d=c.isWebGL2;let p;this.setMode=function m(b){p=b},this.render=function y(b,C){_.drawArrays(p,b,C),i.update(C,p,1)},this.renderInstances=function w(b,C,D){if(0===D)return;let R,k;if(d)R=_,k="drawArraysInstanced";else if(R=t.get("ANGLE_instanced_arrays"),k="drawArraysInstancedANGLE",null===R)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");R[k](p,b,C,D),i.update(C,p,D)}}function Rv(_,t,i){let c;function p(ve){if("highp"===ve){if(_.getShaderPrecisionFormat(35633,36338).precision>0&&_.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";ve="mediump"}return"mediump"===ve&&_.getShaderPrecisionFormat(35633,36337).precision>0&&_.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const m=typeof WebGL2RenderingContext<"u"&&_ instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&_ instanceof WebGL2ComputeRenderingContext;let y=void 0!==i.precision?i.precision:"highp";const w=p(y);w!==y&&(console.warn("THREE.WebGLRenderer:",y,"not supported, using",w,"instead."),y=w);const b=m||t.has("WEBGL_draw_buffers"),C=!0===i.logarithmicDepthBuffer,D=_.getParameter(34930),R=_.getParameter(35660),k=_.getParameter(3379),V=_.getParameter(34076),U=_.getParameter(34921),F=_.getParameter(36347),j=_.getParameter(36348),X=_.getParameter(36349),Y=R>0,K=m||t.has("OES_texture_float");return{isWebGL2:m,drawBuffers:b,getMaxAnisotropy:function d(){if(void 0!==c)return c;if(!0===t.has("EXT_texture_filter_anisotropic")){const ve=t.get("EXT_texture_filter_anisotropic");c=_.getParameter(ve.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else c=0;return c},getMaxPrecision:p,precision:y,logarithmicDepthBuffer:C,maxTextures:D,maxVertexTextures:R,maxTextureSize:k,maxCubemapSize:V,maxAttributes:U,maxVertexUniforms:F,maxVaryings:j,maxFragmentUniforms:X,vertexTextures:Y,floatFragmentTextures:K,floatVertexTextures:Y&&K,maxSamples:m?_.getParameter(36183):0}}function ry(_){const t=this;let i=null,c=0,d=!1,p=!1;const m=new dl,y=new Nr,w={value:null,needsUpdate:!1};function b(){w.value!==i&&(w.value=i,w.needsUpdate=c>0),t.numPlanes=c,t.numIntersection=0}function C(D,R,k,V){const U=null!==D?D.length:0;let F=null;if(0!==U){if(F=w.value,!0!==V||null===F){const j=k+4*U,X=R.matrixWorldInverse;y.getNormalMatrix(X),(null===F||F.length<j)&&(F=new Float32Array(j));for(let Y=0,K=k;Y!==U;++Y,K+=4)m.copy(D[Y]).applyMatrix4(X,y),m.normal.toArray(F,K),F[K+3]=m.constant}w.value=F,w.needsUpdate=!0}return t.numPlanes=U,t.numIntersection=0,F}this.uniform=w,this.numPlanes=0,this.numIntersection=0,this.init=function(D,R,k){const V=0!==D.length||R||0!==c||d;return d=R,i=C(D,k,0),c=D.length,V},this.beginShadows=function(){p=!0,C(null)},this.endShadows=function(){p=!1,b()},this.setState=function(D,R,k){const V=D.clippingPlanes,U=D.clipIntersection,F=D.clipShadows,j=_.get(D);if(!d||null===V||0===V.length||p&&!F)p?C(null):b();else{const X=p?0:c,Y=4*X;let K=j.clippingState||null;w.value=K,K=C(V,R,Y,k);for(let ie=0;ie!==Y;++ie)K[ie]=i[ie];j.clippingState=K,this.numIntersection=U?this.numPlanes:0,this.numPlanes+=X}}}function GE(_){let t=new WeakMap;function i(m,y){return 303===y?m.mapping=301:304===y&&(m.mapping=302),m}function d(m){const y=m.target;y.removeEventListener("dispose",d);const w=t.get(y);void 0!==w&&(t.delete(y),w.dispose())}return{get:function c(m){if(m&&m.isTexture&&!1===m.isRenderTargetTexture){const y=m.mapping;if(303===y||304===y){if(t.has(m))return i(t.get(m).texture,m.mapping);{const w=m.image;if(w&&w.height>0){const b=new Dp(w.height/2);return b.fromEquirectangularTexture(_,m),t.set(m,b),m.addEventListener("dispose",d),i(b.texture,m.mapping)}return null}}}return m},dispose:function p(){t=new WeakMap}}}Ka.physical={uniforms:ft([Ka.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Xe(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Yt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Xe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Yt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Yt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:rr.meshphysical_vert,fragmentShader:rr.meshphysical_frag};class $d extends qa{constructor(t=-1,i=1,c=1,d=-1,p=.1,m=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=i,this.top=c,this.bottom=d,this.near=p,this.far=m,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,i,c,d,p,m){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=c,this.view.offsetY=d,this.view.width=p,this.view.height=m,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,d=(this.top+this.bottom)/2;let p=c-t,m=c+t,y=d+i,w=d-i;if(null!==this.view&&this.view.enabled){const b=(this.right-this.left)/this.view.fullWidth/this.zoom,C=(this.top-this.bottom)/this.view.fullHeight/this.zoom;p+=b*this.view.offsetX,m=p+b*this.view.width,y-=C*this.view.offsetY,w=y-C*this.view.height}this.projectionMatrix.makeOrthographic(p,m,y,w,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,null!==this.view&&(i.object.view=Object.assign({},this.view)),i}}const yf=[.125,.215,.35,.446,.526,.582],Qp=new $d,iy=new Yt;let _f=null;const Rc=(1+Math.sqrt(5))/2,Pc=1/Rc,vf=[new re(1,1,1),new re(-1,1,1),new re(1,1,-1),new re(-1,1,-1),new re(0,Rc,Pc),new re(0,Rc,-Pc),new re(Pc,0,Rc),new re(-Pc,0,Rc),new re(Rc,Pc,0),new re(-Rc,Pc,0)];class Pv{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,i=0,c=.1,d=100){_f=this._renderer.getRenderTarget(),this._setSize(256);const p=this._allocateTargets();return p.depthBuffer=!0,this._sceneToCubeUV(t,c,d,p),i>0&&this._blur(p,0,0,i),this._applyPMREM(p),this._cleanup(p),p}fromEquirectangular(t,i=null){return this._fromTexture(t,i)}fromCubemap(t,i=null){return this._fromTexture(t,i)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=sy(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Ya(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(_f),t.scissorTest=!1,Hu(t,0,0,t.width,t.height)}_fromTexture(t,i){this._setSize(301===t.mapping||302===t.mapping?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),_f=this._renderer.getRenderTarget();const c=i||this._allocateTargets();return this._textureToCubeUV(t,c),this._applyPMREM(c),this._cleanup(c),c}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,c={magFilter:Di,minFilter:Di,generateMipmaps:!1,type:Qi,format:we,encoding:Ua,depthBuffer:!1},d=xf(t,i,c);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=xf(t,i,c);const{_lodMax:p}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Gw(_){const t=[],i=[],c=[];let d=_;const p=_-4+1+yf.length;for(let m=0;m<p;m++){const y=Math.pow(2,d);i.push(y);let w=1/y;m>_-4?w=yf[m-_+4-1]:0===m&&(w=0),c.push(w);const b=1/(y-2),C=-b,D=1+b,R=[C,C,D,C,D,D,C,C,D,D,C,D],k=6,V=6,U=3,F=2,j=1,X=new Float32Array(U*V*k),Y=new Float32Array(F*V*k),K=new Float32Array(j*V*k);for(let ue=0;ue<k;ue++){const ve=ue%3*2/3-1,te=ue>2?0:-1;X.set([ve,te,0,ve+2/3,te,0,ve+2/3,te+1,0,ve,te,0,ve+2/3,te+1,0,ve,te+1,0],U*V*ue),Y.set(R,F*V*ue),K.set([ue,ue,ue,ue,ue,ue],j*V*ue)}const ie=new yn;ie.setAttribute("position",new Vi(X,U)),ie.setAttribute("uv",new Vi(Y,F)),ie.setAttribute("faceIndex",new Vi(K,j)),t.push(ie),d>4&&d--}return{lodPlanes:t,sizeLods:i,sigmas:c}}(p)),this._blurMaterial=function qd(_,t,i){const c=new Float32Array(20),d=new re(0,1,0);return new Ds({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${_}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:c},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:d}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(p,t,i)}return d}_compileMaterial(t){const i=new z(this._lodPlanes[0],t);this._renderer.compile(i,Qp)}_sceneToCubeUV(t,i,c,d){const y=new Zr(90,1,i,c),w=[1,-1,1,1,1,1],b=[1,1,1,-1,-1,-1],C=this._renderer,D=C.autoClear,R=C.toneMapping;C.getClearColor(iy),C.toneMapping=0,C.autoClear=!1;const k=new yo({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),V=new z(new he,k);let U=!1;const F=t.background;F?F.isColor&&(k.color.copy(F),t.background=null,U=!0):(k.color.copy(iy),U=!0);for(let j=0;j<6;j++){const X=j%3;0===X?(y.up.set(0,w[j],0),y.lookAt(b[j],0,0)):1===X?(y.up.set(0,0,w[j]),y.lookAt(0,b[j],0)):(y.up.set(0,w[j],0),y.lookAt(0,0,b[j]));const Y=this._cubeSize;Hu(d,X*Y,j>2?Y:0,Y,Y),C.setRenderTarget(d),U&&C.render(V,y),C.render(t,y)}V.geometry.dispose(),V.material.dispose(),C.toneMapping=R,C.autoClear=D,t.background=F}_textureToCubeUV(t,i){const c=this._renderer,d=301===t.mapping||302===t.mapping;d?(null===this._cubemapMaterial&&(this._cubemapMaterial=sy()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Ya());const p=d?this._cubemapMaterial:this._equirectMaterial,m=new z(this._lodPlanes[0],p);p.uniforms.envMap.value=t;const w=this._cubeSize;Hu(i,0,0,3*w,2*w),c.setRenderTarget(i),c.render(m,Qp)}_applyPMREM(t){const i=this._renderer,c=i.autoClear;i.autoClear=!1;for(let d=1;d<this._lodPlanes.length;d++){const p=Math.sqrt(this._sigmas[d]*this._sigmas[d]-this._sigmas[d-1]*this._sigmas[d-1]);this._blur(t,d-1,d,p,vf[(d-1)%vf.length])}i.autoClear=c}_blur(t,i,c,d,p){const m=this._pingPongRenderTarget;this._halfBlur(t,m,i,c,d,"latitudinal",p),this._halfBlur(m,t,c,c,d,"longitudinal",p)}_halfBlur(t,i,c,d,p,m,y){const w=this._renderer,b=this._blurMaterial;"latitudinal"!==m&&"longitudinal"!==m&&console.error("blur direction must be either latitudinal or longitudinal!");const D=new z(this._lodPlanes[d],b),R=b.uniforms,k=this._sizeLods[c]-1,V=isFinite(p)?Math.PI/(2*k):2*Math.PI/39,U=p/V,F=isFinite(p)?1+Math.floor(3*U):20;F>20&&console.warn(`sigmaRadians, ${p}, is too large and will clip, as it requested ${F} samples when the maximum is set to 20`);const j=[];let X=0;for(let ve=0;ve<20;++ve){const te=ve/U,fe=Math.exp(-te*te/2);j.push(fe),0===ve?X+=fe:ve<F&&(X+=2*fe)}for(let ve=0;ve<j.length;ve++)j[ve]=j[ve]/X;R.envMap.value=t.texture,R.samples.value=F,R.weights.value=j,R.latitudinal.value="latitudinal"===m,y&&(R.poleAxis.value=y);const{_lodMax:Y}=this;R.dTheta.value=V,R.mipInt.value=Y-c;const K=this._sizeLods[d];Hu(i,3*K*(d>Y-4?d-Y+4:0),4*(this._cubeSize-K),3*K,2*K),w.setRenderTarget(i),w.render(D,Qp)}}function xf(_,t,i){const c=new Le(_,t,i);return c.texture.mapping=306,c.texture.name="PMREM.cubeUv",c.scissorTest=!0,c}function Hu(_,t,i,c,d){_.viewport.set(t,i,c,d),_.scissor.set(t,i,c,d)}function Ya(){return new Ds({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function sy(){return new Ds({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Lv(_){let t=new WeakMap,i=null;function p(y){const w=y.target;w.removeEventListener("dispose",p);const b=t.get(w);void 0!==b&&(t.delete(w),b.dispose())}return{get:function c(y){if(y&&y.isTexture){const w=y.mapping,b=303===w||304===w,C=301===w||302===w;if(b||C){if(y.isRenderTargetTexture&&!0===y.needsPMREMUpdate){y.needsPMREMUpdate=!1;let D=t.get(y);return null===i&&(i=new Pv(_)),D=b?i.fromEquirectangular(y,D):i.fromCubemap(y,D),t.set(y,D),D.texture}if(t.has(y))return t.get(y).texture;{const D=y.image;if(b&&D&&D.height>0||C&&D&&function d(y){let w=0;for(let C=0;C<6;C++)void 0!==y[C]&&w++;return 6===w}(D)){null===i&&(i=new Pv(_));const R=b?i.fromEquirectangular(y):i.fromCubemap(y);return t.set(y,R),y.addEventListener("dispose",p),R.texture}return null}}}return y},dispose:function m(){t=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function eu(_){const t={};function i(c){if(void 0!==t[c])return t[c];let d;switch(c){case"WEBGL_depth_texture":d=_.getExtension("WEBGL_depth_texture")||_.getExtension("MOZ_WEBGL_depth_texture")||_.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":d=_.getExtension("EXT_texture_filter_anisotropic")||_.getExtension("MOZ_EXT_texture_filter_anisotropic")||_.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":d=_.getExtension("WEBGL_compressed_texture_s3tc")||_.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":d=_.getExtension("WEBGL_compressed_texture_pvrtc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=_.getExtension(c)}return t[c]=d,d}return{has:function(c){return null!==i(c)},init:function(c){c.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(c){const d=i(c);return null===d&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported."),d}}}function Hw(_,t,i,c){const d={},p=new WeakMap;function m(D){const R=D.target;null!==R.index&&t.remove(R.index);for(const V in R.attributes)t.remove(R.attributes[V]);R.removeEventListener("dispose",m),delete d[R.id];const k=p.get(R);k&&(t.remove(k),p.delete(R)),c.releaseStatesOfGeometry(R),!0===R.isInstancedBufferGeometry&&delete R._maxInstanceCount,i.memory.geometries--}function b(D){const R=[],k=D.index,V=D.attributes.position;let U=0;if(null!==k){const X=k.array;U=k.version;for(let Y=0,K=X.length;Y<K;Y+=3){const ie=X[Y+0],ue=X[Y+1],ve=X[Y+2];R.push(ie,ue,ue,ve,ve,ie)}}else{U=V.version;for(let Y=0,K=V.array.length/3-1;Y<K;Y+=3){const ie=Y+0,ue=Y+1,ve=Y+2;R.push(ie,ue,ue,ve,ve,ie)}}const F=new(Lo(R)?Jh:Uu)(R,1);F.version=U;const j=p.get(D);j&&t.remove(j),p.set(D,F)}return{get:function y(D,R){return!0===d[R.id]||(R.addEventListener("dispose",m),d[R.id]=!0,i.memory.geometries++),R},update:function w(D){const R=D.attributes;for(const V in R)t.update(R[V],34962);const k=D.morphAttributes;for(const V in k){const U=k[V];for(let F=0,j=U.length;F<j;F++)t.update(U[F],34962)}},getWireframeAttribute:function C(D){const R=p.get(D);if(R){const k=D.index;null!==k&&R.version<k.version&&b(D)}else b(D);return p.get(D)}}}function Wu(_,t,i,c){const d=c.isWebGL2;let p,y,w;this.setMode=function m(R){p=R},this.setIndex=function b(R){y=R.type,w=R.bytesPerElement},this.render=function C(R,k){_.drawElements(p,k,y,R*w),i.update(k,p,1)},this.renderInstances=function D(R,k,V){if(0===V)return;let U,F;if(d)U=_,F="drawElementsInstanced";else if(U=t.get("ANGLE_instanced_arrays"),F="drawElementsInstancedANGLE",null===U)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");U[F](p,k,y,R*w,V),i.update(k,p,V)}}function HE(_){const i={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:i,programs:null,autoReset:!0,reset:function d(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0},update:function c(p,m,y){switch(i.calls++,m){case 4:i.triangles+=y*(p/3);break;case 1:i.lines+=y*(p/2);break;case 3:i.lines+=y*(p-1);break;case 2:i.lines+=y*p;break;case 0:i.points+=y*p;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",m)}}}}function WE(_,t){return _[0]-t[0]}function ay(_,t){return Math.abs(t[1])-Math.abs(_[1])}function Ww(_,t,i){const c={},d=new Float32Array(8),p=new WeakMap,m=new pe,y=[];for(let b=0;b<8;b++)y[b]=[b,0];return{update:function w(b,C,D,R){const k=b.morphTargetInfluences;if(!0===t.isWebGL2){const V=C.morphAttributes.position||C.morphAttributes.normal||C.morphAttributes.color,U=void 0!==V?V.length:0;let F=p.get(C);if(void 0===F||F.count!==U){let Qe=function(){$e.dispose(),p.delete(C),C.removeEventListener("dispose",Qe)};void 0!==F&&F.texture.dispose();const Y=void 0!==C.morphAttributes.position,K=void 0!==C.morphAttributes.normal,ie=void 0!==C.morphAttributes.color,ue=C.morphAttributes.position||[],ve=C.morphAttributes.normal||[],te=C.morphAttributes.color||[];let fe=0;!0===Y&&(fe=1),!0===K&&(fe=2),!0===ie&&(fe=3);let be=C.attributes.position.count*fe,qe=1;be>t.maxTextureSize&&(qe=Math.ceil(be/t.maxTextureSize),be=t.maxTextureSize);const gt=new Float32Array(be*qe*4*U),$e=new Je(gt,be,qe,U);$e.type=nn,$e.needsUpdate=!0;const Ie=4*fe;for(let lt=0;lt<U;lt++){const Mt=ue[lt],it=ve[lt],Re=te[lt],Fe=be*qe*4*lt;for(let It=0;It<Mt.count;It++){const yt=It*Ie;!0===Y&&(m.fromBufferAttribute(Mt,It),gt[Fe+yt+0]=m.x,gt[Fe+yt+1]=m.y,gt[Fe+yt+2]=m.z,gt[Fe+yt+3]=0),!0===K&&(m.fromBufferAttribute(it,It),gt[Fe+yt+4]=m.x,gt[Fe+yt+5]=m.y,gt[Fe+yt+6]=m.z,gt[Fe+yt+7]=0),!0===ie&&(m.fromBufferAttribute(Re,It),gt[Fe+yt+8]=m.x,gt[Fe+yt+9]=m.y,gt[Fe+yt+10]=m.z,gt[Fe+yt+11]=4===Re.itemSize?m.w:1)}}F={count:U,texture:$e,size:new Xe(be,qe)},p.set(C,F),C.addEventListener("dispose",Qe)}let j=0;for(let Y=0;Y<k.length;Y++)j+=k[Y];const X=C.morphTargetsRelative?1:1-j;R.getUniforms().setValue(_,"morphTargetBaseInfluence",X),R.getUniforms().setValue(_,"morphTargetInfluences",k),R.getUniforms().setValue(_,"morphTargetsTexture",F.texture,i),R.getUniforms().setValue(_,"morphTargetsTextureSize",F.size)}else{const V=void 0===k?0:k.length;let U=c[C.id];if(void 0===U||U.length!==V){U=[];for(let K=0;K<V;K++)U[K]=[K,0];c[C.id]=U}for(let K=0;K<V;K++){const ie=U[K];ie[0]=K,ie[1]=k[K]}U.sort(ay);for(let K=0;K<8;K++)K<V&&U[K][1]?(y[K][0]=U[K][0],y[K][1]=U[K][1]):(y[K][0]=Number.MAX_SAFE_INTEGER,y[K][1]=0);y.sort(WE);const F=C.morphAttributes.position,j=C.morphAttributes.normal;let X=0;for(let K=0;K<8;K++){const ie=y[K],ue=ie[0],ve=ie[1];ue!==Number.MAX_SAFE_INTEGER&&ve?(F&&C.getAttribute("morphTarget"+K)!==F[ue]&&C.setAttribute("morphTarget"+K,F[ue]),j&&C.getAttribute("morphNormal"+K)!==j[ue]&&C.setAttribute("morphNormal"+K,j[ue]),d[K]=ve,X+=ve):(F&&!0===C.hasAttribute("morphTarget"+K)&&C.deleteAttribute("morphTarget"+K),j&&!0===C.hasAttribute("morphNormal"+K)&&C.deleteAttribute("morphNormal"+K),d[K]=0)}const Y=C.morphTargetsRelative?1:1-X;R.getUniforms().setValue(_,"morphTargetBaseInfluence",Y),R.getUniforms().setValue(_,"morphTargetInfluences",d)}}}}function $w(_,t,i,c){let d=new WeakMap;function y(w){const b=w.target;b.removeEventListener("dispose",y),i.remove(b.instanceMatrix),null!==b.instanceColor&&i.remove(b.instanceColor)}return{update:function p(w){const b=c.render.frame,D=t.get(w,w.geometry);return d.get(D)!==b&&(t.update(D),d.set(D,b)),w.isInstancedMesh&&(!1===w.hasEventListener("dispose",y)&&w.addEventListener("dispose",y),i.update(w.instanceMatrix,34962),null!==w.instanceColor&&i.update(w.instanceColor,34962)),D},dispose:function m(){d=new WeakMap}}}const Kd=new ee,Yd=new Je,cy=new _r,ly=new bi,Fs=[],Jp=[],uy=new Float32Array(16),Zd=new Float32Array(9),ts=new Float32Array(4);function Lc(_,t,i){const c=_[0];if(c<=0||c>0)return _;const d=t*i;let p=Fs[d];if(void 0===p&&(p=new Float32Array(d),Fs[d]=p),0!==t){c.toArray(p,0);for(let m=1,y=0;m!==t;++m)y+=i,_[m].toArray(p,y)}return p}function ns(_,t){if(_.length!==t.length)return!1;for(let i=0,c=_.length;i<c;i++)if(_[i]!==t[i])return!1;return!0}function vs(_,t){for(let i=0,c=t.length;i<c;i++)_[i]=t[i]}function eg(_,t){let i=Jp[t];void 0===i&&(i=new Int32Array(t),Jp[t]=i);for(let c=0;c!==t;++c)i[c]=_.allocateTextureUnit();return i}function Nv(_,t){const i=this.cache;i[0]!==t&&(_.uniform1f(this.addr,t),i[0]=t)}function jw(_,t){const i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y)&&(_.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(ns(i,t))return;_.uniform2fv(this.addr,t),vs(i,t)}}function Ov(_,t){const i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(_.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(_.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(ns(i,t))return;_.uniform3fv(this.addr,t),vs(i,t)}}function $u(_,t){const i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(_.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(ns(i,t))return;_.uniform4fv(this.addr,t),vs(i,t)}}function dy(_,t){const i=this.cache,c=t.elements;if(void 0===c){if(ns(i,t))return;_.uniformMatrix2fv(this.addr,!1,t),vs(i,t)}else{if(ns(i,c))return;ts.set(c),_.uniformMatrix2fv(this.addr,!1,ts),vs(i,c)}}function $E(_,t){const i=this.cache,c=t.elements;if(void 0===c){if(ns(i,t))return;_.uniformMatrix3fv(this.addr,!1,t),vs(i,t)}else{if(ns(i,c))return;Zd.set(c),_.uniformMatrix3fv(this.addr,!1,Zd),vs(i,c)}}function qw(_,t){const i=this.cache,c=t.elements;if(void 0===c){if(ns(i,t))return;_.uniformMatrix4fv(this.addr,!1,t),vs(i,t)}else{if(ns(i,c))return;uy.set(c),_.uniformMatrix4fv(this.addr,!1,uy),vs(i,c)}}function hy(_,t){const i=this.cache;i[0]!==t&&(_.uniform1i(this.addr,t),i[0]=t)}function Kw(_,t){const i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y)&&(_.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(ns(i,t))return;_.uniform2iv(this.addr,t),vs(i,t)}}function Yw(_,t){const i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(_.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(ns(i,t))return;_.uniform3iv(this.addr,t),vs(i,t)}}function Xd(_,t){const i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(_.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(ns(i,t))return;_.uniform4iv(this.addr,t),vs(i,t)}}function pl(_,t){const i=this.cache;i[0]!==t&&(_.uniform1ui(this.addr,t),i[0]=t)}function Zw(_,t){const i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y)&&(_.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(ns(i,t))return;_.uniform2uiv(this.addr,t),vs(i,t)}}function jE(_,t){const i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(_.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(ns(i,t))return;_.uniform3uiv(this.addr,t),vs(i,t)}}function fI(_,t){const i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(_.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(ns(i,t))return;_.uniform4uiv(this.addr,t),vs(i,t)}}function pI(_,t,i){const c=this.cache,d=i.allocateTextureUnit();c[0]!==d&&(_.uniform1i(this.addr,d),c[0]=d),i.setTexture2D(t||Kd,d)}function kv(_,t,i){const c=this.cache,d=i.allocateTextureUnit();c[0]!==d&&(_.uniform1i(this.addr,d),c[0]=d),i.setTexture3D(t||cy,d)}function gI(_,t,i){const c=this.cache,d=i.allocateTextureUnit();c[0]!==d&&(_.uniform1i(this.addr,d),c[0]=d),i.setTextureCube(t||ly,d)}function gl(_,t,i){const c=this.cache,d=i.allocateTextureUnit();c[0]!==d&&(_.uniform1i(this.addr,d),c[0]=d),i.setTexture2DArray(t||Yd,d)}function wf(_,t){_.uniform1fv(this.addr,t)}function Nc(_,t){const i=Lc(t,this.size,2);_.uniform2fv(this.addr,i)}function Xw(_,t){const i=Lc(t,this.size,3);_.uniform3fv(this.addr,i)}function qE(_,t){const i=Lc(t,this.size,4);_.uniform4fv(this.addr,i)}function tg(_,t){const i=Lc(t,this.size,4);_.uniformMatrix2fv(this.addr,!1,i)}function KE(_,t){const i=Lc(t,this.size,9);_.uniformMatrix3fv(this.addr,!1,i)}function YE(_,t){const i=Lc(t,this.size,16);_.uniformMatrix4fv(this.addr,!1,i)}function Uv(_,t){_.uniform1iv(this.addr,t)}function ng(_,t){_.uniform2iv(this.addr,t)}function Qw(_,t){_.uniform3iv(this.addr,t)}function ZE(_,t){_.uniform4iv(this.addr,t)}function ju(_,t){_.uniform1uiv(this.addr,t)}function Bv(_,t){_.uniform2uiv(this.addr,t)}function fy(_,t){_.uniform3uiv(this.addr,t)}function rg(_,t){_.uniform4uiv(this.addr,t)}function Js(_,t,i){const c=this.cache,d=t.length,p=eg(i,d);ns(c,p)||(_.uniform1iv(this.addr,p),vs(c,p));for(let m=0;m!==d;++m)i.setTexture2D(t[m]||Kd,p[m])}function Oc(_,t,i){const c=this.cache,d=t.length,p=eg(i,d);ns(c,p)||(_.uniform1iv(this.addr,p),vs(c,p));for(let m=0;m!==d;++m)i.setTexture3D(t[m]||cy,p[m])}function Vv(_,t,i){const c=this.cache,d=t.length,p=eg(i,d);ns(c,p)||(_.uniform1iv(this.addr,p),vs(c,p));for(let m=0;m!==d;++m)i.setTextureCube(t[m]||ly,p[m])}function Qd(_,t,i){const c=this.cache,d=t.length,p=eg(i,d);ns(c,p)||(_.uniform1iv(this.addr,p),vs(c,p));for(let m=0;m!==d;++m)i.setTexture2DArray(t[m]||Yd,p[m])}class kt{constructor(t,i,c){this.id=t,this.addr=c,this.cache=[],this.setValue=function Fv(_){switch(_){case 5126:return Nv;case 35664:return jw;case 35665:return Ov;case 35666:return $u;case 35674:return dy;case 35675:return $E;case 35676:return qw;case 5124:case 35670:return hy;case 35667:case 35671:return Kw;case 35668:case 35672:return Yw;case 35669:case 35673:return Xd;case 5125:return pl;case 36294:return Zw;case 36295:return jE;case 36296:return fI;case 35678:case 36198:case 36298:case 36306:case 35682:return pI;case 35679:case 36299:case 36307:return kv;case 35680:case 36300:case 36308:case 36293:return gI;case 36289:case 36303:case 36311:case 36292:return gl}}(i.type)}}class kc{constructor(t,i,c){this.id=t,this.addr=c,this.cache=[],this.size=i.size,this.setValue=function py(_){switch(_){case 5126:return wf;case 35664:return Nc;case 35665:return Xw;case 35666:return qE;case 35674:return tg;case 35675:return KE;case 35676:return YE;case 5124:case 35670:return Uv;case 35667:case 35671:return ng;case 35668:case 35672:return Qw;case 35669:case 35673:return ZE;case 5125:return ju;case 36294:return Bv;case 36295:return fy;case 36296:return rg;case 35678:case 36198:case 36298:case 36306:case 35682:return Js;case 35679:case 36299:case 36307:return Oc;case 35680:case 36300:case 36308:case 36293:return Vv;case 36289:case 36303:case 36311:case 36292:return Qd}}(i.type)}}class ml{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,i,c){const d=this.seq;for(let p=0,m=d.length;p!==m;++p){const y=d[p];y.setValue(t,i[y.id],c)}}}const Jd=/(\w+)(\])?(\[|\.)?/g;function Za(_,t){_.seq.push(t),_.map[t.id]=t}function gy(_,t,i){const c=_.name,d=c.length;for(Jd.lastIndex=0;;){const p=Jd.exec(c),m=Jd.lastIndex;let y=p[1];const b=p[3];if("]"===p[2]&&(y|=0),void 0===b||"["===b&&m+2===d){Za(i,void 0===b?new kt(y,_,t):new kc(y,_,t));break}{let D=i.map[y];void 0===D&&(D=new ml(y),Za(i,D)),i=D}}}class ig{constructor(t,i){this.seq=[],this.map={};const c=t.getProgramParameter(i,35718);for(let d=0;d<c;++d){const p=t.getActiveUniform(i,d);gy(p,t.getUniformLocation(i,p.name),this)}}setValue(t,i,c,d){const p=this.map[i];void 0!==p&&p.setValue(t,c,d)}setOptional(t,i,c){const d=i[c];void 0!==d&&this.setValue(t,c,d)}static upload(t,i,c,d){for(let p=0,m=i.length;p!==m;++p){const y=i[p],w=c[y.id];!1!==w.needsUpdate&&y.setValue(t,w.value,d)}}static seqWithValue(t,i){const c=[];for(let d=0,p=t.length;d!==p;++d){const m=t[d];m.id in i&&c.push(m)}return c}}function eh(_,t,i){const c=_.createShader(t);return _.shaderSource(c,i),_.compileShader(c),c}let sg=0;function yy(_,t,i){const c=_.getShaderParameter(t,35713),d=_.getShaderInfoLog(t).trim();if(c&&""===d)return"";const p=/ERROR: 0:(\d+)/.exec(d);if(p){const m=parseInt(p[1]);return i.toUpperCase()+"\n\n"+d+"\n\n"+function my(_,t){const i=_.split("\n"),c=[],d=Math.max(t-6,0),p=Math.min(t+6,i.length);for(let m=d;m<p;m++){const y=m+1;c.push(`${y===t?">":" "} ${y}: ${i[m]}`)}return c.join("\n")}(_.getShaderSource(t),m)}return d}function th(_,t){const i=function qu(_){switch(_){case Ua:return["Linear","( value )"];case pi:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",_),["Linear","( value )"]}}(t);return"vec4 "+_+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function _y(_,t){let i;switch(t){case 1:i="Linear";break;case 2:i="Reinhard";break;case 3:i="OptimizedCineon";break;case 4:i="ACESFilmic";break;case 5:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+_+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function Si(_){return""!==_}function rs(_,t){const i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return _.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function bf(_,t){return _.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const ag=/^[ \t]*#include +<([\w\d./]+)>/gm;function nh(_){return _.replace(ag,Ra)}function Ra(_,t){const i=rr[t];if(void 0===i)throw new Error("Can not resolve #include <"+t+">");return nh(i)}const rh=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function cg(_){return _.replace(rh,vy)}function vy(_,t,i,c){let d="";for(let p=parseInt(t);p<parseInt(i);p++)d+=c.replace(/\[\s*i\s*\]/g,"[ "+p+" ]").replace(/UNROLLED_LOOP_INDEX/g,p);return d}function Ku(_){let t="precision "+_.precision+" float;\nprecision "+_.precision+" int;";return"highp"===_.precision?t+="\n#define HIGH_PRECISION":"mediump"===_.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===_.precision&&(t+="\n#define LOW_PRECISION"),t}function wy(_,t,i,c){const d=_.getContext(),p=i.defines;let m=i.vertexShader,y=i.fragmentShader;const w=function xy(_){let t="SHADOWMAP_TYPE_BASIC";return 1===_.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===_.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===_.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(i),b=function Yu(_){let t="ENVMAP_TYPE_CUBE";if(_.envMap)switch(_.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(i),C=function tb(_){let t="ENVMAP_MODE_REFLECTION";return _.envMap&&302===_.envMapMode&&(t="ENVMAP_MODE_REFRACTION"),t}(i),D=function lg(_){let t="ENVMAP_BLENDING_NONE";if(_.envMap)switch(_.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(i),R=function nb(_){const t=_.envMapCubeUVHeight;if(null===t)return null;const i=Math.log2(t)-2,c=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:c,maxMip:i}}(i),k=i.isWebGL2?"":function Jw(_){return[_.extensionDerivatives||_.envMapCubeUVHeight||_.bumpMap||_.tangentSpaceNormalMap||_.clearcoatNormalMap||_.flatShading||"physical"===_.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(_.extensionFragDepth||_.logarithmicDepthBuffer)&&_.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",_.extensionDrawBuffers&&_.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(_.extensionShaderTextureLOD||_.envMap||_.transmission)&&_.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Si).join("\n")}(i),V=function og(_){const t=[];for(const i in _){const c=_[i];!1!==c&&t.push("#define "+i+" "+c)}return t.join("\n")}(p),U=d.createProgram();let F,j,X=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(F=[V].filter(Si).join("\n"),F.length>0&&(F+="\n"),j=[k,V].filter(Si).join("\n"),j.length>0&&(j+="\n")):(F=[Ku(i),"#define SHADER_NAME "+i.shaderName,V,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+C:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+w:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Si).join("\n"),j=[k,Ku(i),"#define SHADER_NAME "+i.shaderName,V,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+b:"",i.envMap?"#define "+C:"",i.envMap?"#define "+D:"",R?"#define CUBEUV_TEXEL_WIDTH "+R.texelWidth:"",R?"#define CUBEUV_TEXEL_HEIGHT "+R.texelHeight:"",R?"#define CUBEUV_MAX_MIP "+R.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+w:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==i.toneMapping?"#define TONE_MAPPING":"",0!==i.toneMapping?rr.tonemapping_pars_fragment:"",0!==i.toneMapping?_y("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",rr.encodings_pars_fragment,th("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Si).join("\n")),m=nh(m),m=rs(m,i),m=bf(m,i),y=nh(y),y=rs(y,i),y=bf(y,i),m=cg(m),y=cg(y),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(X="#version 300 es\n",F=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+F,j=["#define varying in","300 es"===i.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===i.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+j);const K=X+j+y,ie=eh(d,35633,X+F+m),ue=eh(d,35632,K);if(d.attachShader(U,ie),d.attachShader(U,ue),void 0!==i.index0AttributeName?d.bindAttribLocation(U,0,i.index0AttributeName):!0===i.morphTargets&&d.bindAttribLocation(U,0,"position"),d.linkProgram(U),_.debug.checkShaderErrors){const fe=d.getProgramInfoLog(U).trim(),be=d.getShaderInfoLog(ie).trim(),qe=d.getShaderInfoLog(ue).trim();let gt=!0,$e=!0;if(!1===d.getProgramParameter(U,35714)){gt=!1;const Ie=yy(d,ie,"vertex"),Qe=yy(d,ue,"fragment");console.error("THREE.WebGLProgram: Shader Error "+d.getError()+" - VALIDATE_STATUS "+d.getProgramParameter(U,35715)+"\n\nProgram Info Log: "+fe+"\n"+Ie+"\n"+Qe)}else""!==fe?console.warn("THREE.WebGLProgram: Program Info Log:",fe):(""===be||""===qe)&&($e=!1);$e&&(this.diagnostics={runnable:gt,programLog:fe,vertexShader:{log:be,prefix:F},fragmentShader:{log:qe,prefix:j}})}let ve,te;return d.deleteShader(ie),d.deleteShader(ue),this.getUniforms=function(){return void 0===ve&&(ve=new ig(d,U)),ve},this.getAttributes=function(){return void 0===te&&(te=function eb(_,t){const i={},c=_.getProgramParameter(t,35721);for(let d=0;d<c;d++){const p=_.getActiveAttrib(t,d),m=p.name;let y=1;35674===p.type&&(y=2),35675===p.type&&(y=3),35676===p.type&&(y=4),i[m]={type:p.type,location:_.getAttribLocation(t,m),locationSize:y}}return i}(d,U)),te},this.destroy=function(){c.releaseStatesOfProgram(this),d.deleteProgram(U),this.program=void 0},this.name=i.shaderName,this.id=sg++,this.cacheKey=t,this.usedTimes=1,this.program=U,this.vertexShader=ie,this.fragmentShader=ue,this}let ih=0;class zv{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const c=t.fragmentShader,d=this._getShaderStage(t.vertexShader),p=this._getShaderStage(c),m=this._getShaderCacheForMaterial(t);return!1===m.has(d)&&(m.add(d),d.usedTimes++),!1===m.has(p)&&(m.add(p),p.usedTimes++),this}remove(t){const i=this.materialCache.get(t);for(const c of i)c.usedTimes--,0===c.usedTimes&&this.shaderCache.delete(c.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const i=this.materialCache;let c=i.get(t);return void 0===c&&(c=new Set,i.set(t,c)),c}_getShaderStage(t){const i=this.shaderCache;let c=i.get(t);return void 0===c&&(c=new Gv(t),i.set(t,c)),c}}class Gv{constructor(t){this.id=ih++,this.code=t,this.usedTimes=0}}function Hv(_,t,i,c,d,p,m){const y=new Nu,w=new zv,b=[],C=d.isWebGL2,D=d.logarithmicDepthBuffer,R=d.vertexTextures;let k=d.precision;const V={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function U(te,fe,be,qe,gt){const $e=qe.fog,Ie=gt.geometry,lt=(te.isMeshStandardMaterial?i:t).get(te.envMap||(te.isMeshStandardMaterial?qe.environment:null)),Mt=lt&&306===lt.mapping?lt.image.height:null,it=V[te.type];null!==te.precision&&(k=d.getMaxPrecision(te.precision),k!==te.precision&&console.warn("THREE.WebGLProgram.getParameters:",te.precision,"not supported, using",k,"instead."));const Re=Ie.morphAttributes.position||Ie.morphAttributes.normal||Ie.morphAttributes.color,Fe=void 0!==Re?Re.length:0;let yt,Gt,ln,Gn,It=0;if(void 0!==Ie.morphAttributes.position&&(It=1),void 0!==Ie.morphAttributes.normal&&(It=2),void 0!==Ie.morphAttributes.color&&(It=3),it){const Tr=Ka[it];yt=Tr.vertexShader,Gt=Tr.fragmentShader}else yt=te.vertexShader,Gt=te.fragmentShader,w.update(te),ln=w.getVertexShaderID(te),Gn=w.getFragmentShaderID(te);const st=_.getRenderTarget(),Rn=te.clearcoat>0,ir=te.iridescence>0;return{isWebGL2:C,shaderID:it,shaderName:te.type,vertexShader:yt,fragmentShader:Gt,defines:te.defines,customVertexShaderID:ln,customFragmentShaderID:Gn,isRawShaderMaterial:!0===te.isRawShaderMaterial,glslVersion:te.glslVersion,precision:k,instancing:!0===gt.isInstancedMesh,instancingColor:!0===gt.isInstancedMesh&&null!==gt.instanceColor,supportsVertexTextures:R,outputEncoding:null===st?_.outputEncoding:!0===st.isXRRenderTarget?st.texture.encoding:Ua,map:!!te.map,matcap:!!te.matcap,envMap:!!lt,envMapMode:lt&&lt.mapping,envMapCubeUVHeight:Mt,lightMap:!!te.lightMap,aoMap:!!te.aoMap,emissiveMap:!!te.emissiveMap,bumpMap:!!te.bumpMap,normalMap:!!te.normalMap,objectSpaceNormalMap:1===te.normalMapType,tangentSpaceNormalMap:0===te.normalMapType,decodeVideoTexture:!!te.map&&!0===te.map.isVideoTexture&&te.map.encoding===pi,clearcoat:Rn,clearcoatMap:Rn&&!!te.clearcoatMap,clearcoatRoughnessMap:Rn&&!!te.clearcoatRoughnessMap,clearcoatNormalMap:Rn&&!!te.clearcoatNormalMap,iridescence:ir,iridescenceMap:ir&&!!te.iridescenceMap,iridescenceThicknessMap:ir&&!!te.iridescenceThicknessMap,displacementMap:!!te.displacementMap,roughnessMap:!!te.roughnessMap,metalnessMap:!!te.metalnessMap,specularMap:!!te.specularMap,specularIntensityMap:!!te.specularIntensityMap,specularColorMap:!!te.specularColorMap,opaque:!1===te.transparent&&1===te.blending,alphaMap:!!te.alphaMap,alphaTest:te.alphaTest>0,gradientMap:!!te.gradientMap,sheen:te.sheen>0,sheenColorMap:!!te.sheenColorMap,sheenRoughnessMap:!!te.sheenRoughnessMap,transmission:te.transmission>0,transmissionMap:!!te.transmissionMap,thicknessMap:!!te.thicknessMap,combine:te.combine,vertexTangents:!!te.normalMap&&!!Ie.attributes.tangent,vertexColors:te.vertexColors,vertexAlphas:!0===te.vertexColors&&!!Ie.attributes.color&&4===Ie.attributes.color.itemSize,vertexUvs:!!(te.map||te.bumpMap||te.normalMap||te.specularMap||te.alphaMap||te.emissiveMap||te.roughnessMap||te.metalnessMap||te.clearcoatMap||te.clearcoatRoughnessMap||te.clearcoatNormalMap||te.iridescenceMap||te.iridescenceThicknessMap||te.displacementMap||te.transmissionMap||te.thicknessMap||te.specularIntensityMap||te.specularColorMap||te.sheenColorMap||te.sheenRoughnessMap),uvsVertexOnly:!(te.map||te.bumpMap||te.normalMap||te.specularMap||te.alphaMap||te.emissiveMap||te.roughnessMap||te.metalnessMap||te.clearcoatNormalMap||te.iridescenceMap||te.iridescenceThicknessMap||te.transmission>0||te.transmissionMap||te.thicknessMap||te.specularIntensityMap||te.specularColorMap||te.sheen>0||te.sheenColorMap||te.sheenRoughnessMap||!te.displacementMap),fog:!!$e,useFog:!0===te.fog,fogExp2:$e&&$e.isFogExp2,flatShading:!!te.flatShading,sizeAttenuation:te.sizeAttenuation,logarithmicDepthBuffer:D,skinning:!0===gt.isSkinnedMesh,morphTargets:void 0!==Ie.morphAttributes.position,morphNormals:void 0!==Ie.morphAttributes.normal,morphColors:void 0!==Ie.morphAttributes.color,morphTargetsCount:Fe,morphTextureStride:It,numDirLights:fe.directional.length,numPointLights:fe.point.length,numSpotLights:fe.spot.length,numSpotLightMaps:fe.spotLightMap.length,numRectAreaLights:fe.rectArea.length,numHemiLights:fe.hemi.length,numDirLightShadows:fe.directionalShadowMap.length,numPointLightShadows:fe.pointShadowMap.length,numSpotLightShadows:fe.spotShadowMap.length,numSpotLightShadowsWithMaps:fe.numSpotLightShadowsWithMaps,numClippingPlanes:m.numPlanes,numClipIntersection:m.numIntersection,dithering:te.dithering,shadowMapEnabled:_.shadowMap.enabled&&be.length>0,shadowMapType:_.shadowMap.type,toneMapping:te.toneMapped?_.toneMapping:0,physicallyCorrectLights:_.physicallyCorrectLights,premultipliedAlpha:te.premultipliedAlpha,doubleSided:2===te.side,flipSided:1===te.side,useDepthPacking:!!te.depthPacking,depthPacking:te.depthPacking||0,index0AttributeName:te.index0AttributeName,extensionDerivatives:te.extensions&&te.extensions.derivatives,extensionFragDepth:te.extensions&&te.extensions.fragDepth,extensionDrawBuffers:te.extensions&&te.extensions.drawBuffers,extensionShaderTextureLOD:te.extensions&&te.extensions.shaderTextureLOD,rendererExtensionFragDepth:C||c.has("EXT_frag_depth"),rendererExtensionDrawBuffers:C||c.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:C||c.has("EXT_shader_texture_lod"),customProgramCacheKey:te.customProgramCacheKey()}},getProgramCacheKey:function F(te){const fe=[];if(te.shaderID?fe.push(te.shaderID):(fe.push(te.customVertexShaderID),fe.push(te.customFragmentShaderID)),void 0!==te.defines)for(const be in te.defines)fe.push(be),fe.push(te.defines[be]);return!1===te.isRawShaderMaterial&&(function j(te,fe){te.push(fe.precision),te.push(fe.outputEncoding),te.push(fe.envMapMode),te.push(fe.envMapCubeUVHeight),te.push(fe.combine),te.push(fe.vertexUvs),te.push(fe.fogExp2),te.push(fe.sizeAttenuation),te.push(fe.morphTargetsCount),te.push(fe.morphAttributeCount),te.push(fe.numDirLights),te.push(fe.numPointLights),te.push(fe.numSpotLights),te.push(fe.numSpotLightMaps),te.push(fe.numHemiLights),te.push(fe.numRectAreaLights),te.push(fe.numDirLightShadows),te.push(fe.numPointLightShadows),te.push(fe.numSpotLightShadows),te.push(fe.numSpotLightShadowsWithMaps),te.push(fe.shadowMapType),te.push(fe.toneMapping),te.push(fe.numClippingPlanes),te.push(fe.numClipIntersection),te.push(fe.depthPacking)}(fe,te),function X(te,fe){y.disableAll(),fe.isWebGL2&&y.enable(0),fe.supportsVertexTextures&&y.enable(1),fe.instancing&&y.enable(2),fe.instancingColor&&y.enable(3),fe.map&&y.enable(4),fe.matcap&&y.enable(5),fe.envMap&&y.enable(6),fe.lightMap&&y.enable(7),fe.aoMap&&y.enable(8),fe.emissiveMap&&y.enable(9),fe.bumpMap&&y.enable(10),fe.normalMap&&y.enable(11),fe.objectSpaceNormalMap&&y.enable(12),fe.tangentSpaceNormalMap&&y.enable(13),fe.clearcoat&&y.enable(14),fe.clearcoatMap&&y.enable(15),fe.clearcoatRoughnessMap&&y.enable(16),fe.clearcoatNormalMap&&y.enable(17),fe.iridescence&&y.enable(18),fe.iridescenceMap&&y.enable(19),fe.iridescenceThicknessMap&&y.enable(20),fe.displacementMap&&y.enable(21),fe.specularMap&&y.enable(22),fe.roughnessMap&&y.enable(23),fe.metalnessMap&&y.enable(24),fe.gradientMap&&y.enable(25),fe.alphaMap&&y.enable(26),fe.alphaTest&&y.enable(27),fe.vertexColors&&y.enable(28),fe.vertexAlphas&&y.enable(29),fe.vertexUvs&&y.enable(30),fe.vertexTangents&&y.enable(31),fe.uvsVertexOnly&&y.enable(32),te.push(y.mask),y.disableAll(),fe.fog&&y.enable(0),fe.useFog&&y.enable(1),fe.flatShading&&y.enable(2),fe.logarithmicDepthBuffer&&y.enable(3),fe.skinning&&y.enable(4),fe.morphTargets&&y.enable(5),fe.morphNormals&&y.enable(6),fe.morphColors&&y.enable(7),fe.premultipliedAlpha&&y.enable(8),fe.shadowMapEnabled&&y.enable(9),fe.physicallyCorrectLights&&y.enable(10),fe.doubleSided&&y.enable(11),fe.flipSided&&y.enable(12),fe.useDepthPacking&&y.enable(13),fe.dithering&&y.enable(14),fe.specularIntensityMap&&y.enable(15),fe.specularColorMap&&y.enable(16),fe.transmission&&y.enable(17),fe.transmissionMap&&y.enable(18),fe.thicknessMap&&y.enable(19),fe.sheen&&y.enable(20),fe.sheenColorMap&&y.enable(21),fe.sheenRoughnessMap&&y.enable(22),fe.decodeVideoTexture&&y.enable(23),fe.opaque&&y.enable(24),te.push(y.mask)}(fe,te),fe.push(_.outputEncoding)),fe.push(te.customProgramCacheKey),fe.join()},getUniforms:function Y(te){const fe=V[te.type];let be;return be=fe?jt.clone(Ka[fe].uniforms):te.uniforms,be},acquireProgram:function K(te,fe){let be;for(let qe=0,gt=b.length;qe<gt;qe++){const $e=b[qe];if($e.cacheKey===fe){be=$e,++be.usedTimes;break}}return void 0===be&&(be=new wy(_,fe,te,p),b.push(be)),be},releaseProgram:function ie(te){if(0==--te.usedTimes){const fe=b.indexOf(te);b[fe]=b[b.length-1],b.pop(),te.destroy()}},releaseShaderCache:function ue(te){w.remove(te)},programs:b,dispose:function ve(){w.dispose()}}}function ug(){let _=new WeakMap;return{get:function t(p){let m=_.get(p);return void 0===m&&(m={},_.set(p,m)),m},remove:function i(p){_.delete(p)},update:function c(p,m,y){_.get(p)[m]=y},dispose:function d(){_=new WeakMap}}}function dg(_,t){return _.groupOrder!==t.groupOrder?_.groupOrder-t.groupOrder:_.renderOrder!==t.renderOrder?_.renderOrder-t.renderOrder:_.material.id!==t.material.id?_.material.id-t.material.id:_.z!==t.z?_.z-t.z:_.id-t.id}function by(_,t){return _.groupOrder!==t.groupOrder?_.groupOrder-t.groupOrder:_.renderOrder!==t.renderOrder?_.renderOrder-t.renderOrder:_.z!==t.z?t.z-_.z:_.id-t.id}function Fc(){const _=[];let t=0;const i=[],c=[],d=[];function m(D,R,k,V,U,F){let j=_[t];return void 0===j?(j={id:D.id,object:D,geometry:R,material:k,groupOrder:V,renderOrder:D.renderOrder,z:U,group:F},_[t]=j):(j.id=D.id,j.object=D,j.geometry=R,j.material=k,j.groupOrder=V,j.renderOrder=D.renderOrder,j.z=U,j.group=F),t++,j}return{opaque:i,transmissive:c,transparent:d,init:function p(){t=0,i.length=0,c.length=0,d.length=0},push:function y(D,R,k,V,U,F){const j=m(D,R,k,V,U,F);k.transmission>0?c.push(j):!0===k.transparent?d.push(j):i.push(j)},unshift:function w(D,R,k,V,U,F){const j=m(D,R,k,V,U,F);k.transmission>0?c.unshift(j):!0===k.transparent?d.unshift(j):i.unshift(j)},finish:function C(){for(let D=t,R=_.length;D<R;D++){const k=_[D];if(null===k.id)break;k.id=null,k.object=null,k.geometry=null,k.material=null,k.group=null}},sort:function b(D,R){i.length>1&&i.sort(D||dg),c.length>1&&c.sort(R||by),d.length>1&&d.sort(R||by)}}}function Sy(){let _=new WeakMap;return{get:function t(c,d){const p=_.get(c);let m;return void 0===p?(m=new Fc,_.set(c,[m])):d>=p.length?(m=new Fc,p.push(m)):m=p[d],m},dispose:function i(){_=new WeakMap}}}function Xa(){const _={};return{get:function(t){if(void 0!==_[t.id])return _[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new re,color:new Yt};break;case"SpotLight":i={position:new re,direction:new re,color:new Yt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new re,color:new Yt,distance:0,decay:0};break;case"HemisphereLight":i={direction:new re,skyColor:new Yt,groundColor:new Yt};break;case"RectAreaLight":i={color:new Yt,position:new re,halfWidth:new re,halfHeight:new re}}return _[t.id]=i,i}}}let Ey=0;function Sf(_,t){return(t.castShadow?2:0)-(_.castShadow?2:0)+(t.map?1:0)-(_.map?1:0)}function Ty(_,t){const i=new Xa,c=function rb(){const _={};return{get:function(t){if(void 0!==_[t.id])return _[t.id];let i;switch(t.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xe,shadowCameraNear:1,shadowCameraFar:1e3}}return _[t.id]=i,i}}}(),d={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let C=0;C<9;C++)d.probe.push(new re);const p=new re,m=new qn,y=new qn;return{setup:function w(C,D){let R=0,k=0,V=0;for(let qe=0;qe<9;qe++)d.probe[qe].set(0,0,0);let U=0,F=0,j=0,X=0,Y=0,K=0,ie=0,ue=0,ve=0,te=0;C.sort(Sf);const fe=!0!==D?Math.PI:1;for(let qe=0,gt=C.length;qe<gt;qe++){const $e=C[qe],Ie=$e.color,Qe=$e.intensity,lt=$e.distance,Mt=$e.shadow&&$e.shadow.map?$e.shadow.map.texture:null;if($e.isAmbientLight)R+=Ie.r*Qe*fe,k+=Ie.g*Qe*fe,V+=Ie.b*Qe*fe;else if($e.isLightProbe)for(let it=0;it<9;it++)d.probe[it].addScaledVector($e.sh.coefficients[it],Qe);else if($e.isDirectionalLight){const it=i.get($e);if(it.color.copy($e.color).multiplyScalar($e.intensity*fe),$e.castShadow){const Re=$e.shadow,Fe=c.get($e);Fe.shadowBias=Re.bias,Fe.shadowNormalBias=Re.normalBias,Fe.shadowRadius=Re.radius,Fe.shadowMapSize=Re.mapSize,d.directionalShadow[U]=Fe,d.directionalShadowMap[U]=Mt,d.directionalShadowMatrix[U]=$e.shadow.matrix,K++}d.directional[U]=it,U++}else if($e.isSpotLight){const it=i.get($e);it.position.setFromMatrixPosition($e.matrixWorld),it.color.copy(Ie).multiplyScalar(Qe*fe),it.distance=lt,it.coneCos=Math.cos($e.angle),it.penumbraCos=Math.cos($e.angle*(1-$e.penumbra)),it.decay=$e.decay,d.spot[j]=it;const Re=$e.shadow;if($e.map&&(d.spotLightMap[ve]=$e.map,ve++,Re.updateMatrices($e),$e.castShadow&&te++),d.spotLightMatrix[j]=Re.matrix,$e.castShadow){const Fe=c.get($e);Fe.shadowBias=Re.bias,Fe.shadowNormalBias=Re.normalBias,Fe.shadowRadius=Re.radius,Fe.shadowMapSize=Re.mapSize,d.spotShadow[j]=Fe,d.spotShadowMap[j]=Mt,ue++}j++}else if($e.isRectAreaLight){const it=i.get($e);it.color.copy(Ie).multiplyScalar(Qe),it.halfWidth.set(.5*$e.width,0,0),it.halfHeight.set(0,.5*$e.height,0),d.rectArea[X]=it,X++}else if($e.isPointLight){const it=i.get($e);if(it.color.copy($e.color).multiplyScalar($e.intensity*fe),it.distance=$e.distance,it.decay=$e.decay,$e.castShadow){const Re=$e.shadow,Fe=c.get($e);Fe.shadowBias=Re.bias,Fe.shadowNormalBias=Re.normalBias,Fe.shadowRadius=Re.radius,Fe.shadowMapSize=Re.mapSize,Fe.shadowCameraNear=Re.camera.near,Fe.shadowCameraFar=Re.camera.far,d.pointShadow[F]=Fe,d.pointShadowMap[F]=Mt,d.pointShadowMatrix[F]=$e.shadow.matrix,ie++}d.point[F]=it,F++}else if($e.isHemisphereLight){const it=i.get($e);it.skyColor.copy($e.color).multiplyScalar(Qe*fe),it.groundColor.copy($e.groundColor).multiplyScalar(Qe*fe),d.hemi[Y]=it,Y++}}X>0&&(t.isWebGL2||!0===_.has("OES_texture_float_linear")?(d.rectAreaLTC1=zt.LTC_FLOAT_1,d.rectAreaLTC2=zt.LTC_FLOAT_2):!0===_.has("OES_texture_half_float_linear")?(d.rectAreaLTC1=zt.LTC_HALF_1,d.rectAreaLTC2=zt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),d.ambient[0]=R,d.ambient[1]=k,d.ambient[2]=V;const be=d.hash;(be.directionalLength!==U||be.pointLength!==F||be.spotLength!==j||be.rectAreaLength!==X||be.hemiLength!==Y||be.numDirectionalShadows!==K||be.numPointShadows!==ie||be.numSpotShadows!==ue||be.numSpotMaps!==ve)&&(d.directional.length=U,d.spot.length=j,d.rectArea.length=X,d.point.length=F,d.hemi.length=Y,d.directionalShadow.length=K,d.directionalShadowMap.length=K,d.pointShadow.length=ie,d.pointShadowMap.length=ie,d.spotShadow.length=ue,d.spotShadowMap.length=ue,d.directionalShadowMatrix.length=K,d.pointShadowMatrix.length=ie,d.spotLightMatrix.length=ue+ve-te,d.spotLightMap.length=ve,d.numSpotLightShadowsWithMaps=te,be.directionalLength=U,be.pointLength=F,be.spotLength=j,be.rectAreaLength=X,be.hemiLength=Y,be.numDirectionalShadows=K,be.numPointShadows=ie,be.numSpotShadows=ue,be.numSpotMaps=ve,d.version=Ey++)},setupView:function b(C,D){let R=0,k=0,V=0,U=0,F=0;const j=D.matrixWorldInverse;for(let X=0,Y=C.length;X<Y;X++){const K=C[X];if(K.isDirectionalLight){const ie=d.directional[R];ie.direction.setFromMatrixPosition(K.matrixWorld),p.setFromMatrixPosition(K.target.matrixWorld),ie.direction.sub(p),ie.direction.transformDirection(j),R++}else if(K.isSpotLight){const ie=d.spot[V];ie.position.setFromMatrixPosition(K.matrixWorld),ie.position.applyMatrix4(j),ie.direction.setFromMatrixPosition(K.matrixWorld),p.setFromMatrixPosition(K.target.matrixWorld),ie.direction.sub(p),ie.direction.transformDirection(j),V++}else if(K.isRectAreaLight){const ie=d.rectArea[U];ie.position.setFromMatrixPosition(K.matrixWorld),ie.position.applyMatrix4(j),y.identity(),m.copy(K.matrixWorld),m.premultiply(j),y.extractRotation(m),ie.halfWidth.set(.5*K.width,0,0),ie.halfHeight.set(0,.5*K.height,0),ie.halfWidth.applyMatrix4(y),ie.halfHeight.applyMatrix4(y),U++}else if(K.isPointLight){const ie=d.point[k];ie.position.setFromMatrixPosition(K.matrixWorld),ie.position.applyMatrix4(j),k++}else if(K.isHemisphereLight){const ie=d.hemi[F];ie.direction.setFromMatrixPosition(K.matrixWorld),ie.direction.transformDirection(j),F++}}},state:d}}function Wv(_,t){const i=new Ty(_,t),c=[],d=[];return{init:function p(){c.length=0,d.length=0},state:{lightsArray:c,shadowsArray:d,lights:i},setupLights:function w(D){i.setup(c,D)},setupLightsView:function b(D){i.setupView(c,D)},pushLight:function m(D){c.push(D)},pushShadow:function y(D){d.push(D)}}}function My(_,t){let i=new WeakMap;return{get:function c(p,m=0){const y=i.get(p);let w;return void 0===y?(w=new Wv(_,t),i.set(p,[w])):m>=y.length?(w=new Wv(_,t),y.push(w)):w=y[m],w},dispose:function d(){i=new WeakMap}}}class Iy extends ql{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class $v extends ql{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new re,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function zn(_,t,i){let c=new Yi;const d=new Xe,p=new Xe,m=new pe,y=new Iy({depthPacking:3201}),w=new $v,b={},C=i.maxTextureSize,D={0:1,1:0,2:2},R=new Ds({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Xe},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),k=R.clone();k.defines.HORIZONTAL_PASS=1;const V=new yn;V.setAttribute("position",new Vi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const U=new z(V,R),F=this;function j(K,ie){const ue=t.update(U);R.defines.VSM_SAMPLES!==K.blurSamples&&(R.defines.VSM_SAMPLES=K.blurSamples,k.defines.VSM_SAMPLES=K.blurSamples,R.needsUpdate=!0,k.needsUpdate=!0),null===K.mapPass&&(K.mapPass=new Le(d.x,d.y)),R.uniforms.shadow_pass.value=K.map.texture,R.uniforms.resolution.value=K.mapSize,R.uniforms.radius.value=K.radius,_.setRenderTarget(K.mapPass),_.clear(),_.renderBufferDirect(ie,null,ue,R,U,null),k.uniforms.shadow_pass.value=K.mapPass.texture,k.uniforms.resolution.value=K.mapSize,k.uniforms.radius.value=K.radius,_.setRenderTarget(K.map),_.clear(),_.renderBufferDirect(ie,null,ue,k,U,null)}function X(K,ie,ue,ve,te,fe){let be=null;const qe=!0===ue.isPointLight?K.customDistanceMaterial:K.customDepthMaterial;if(be=void 0!==qe?qe:!0===ue.isPointLight?w:y,_.localClippingEnabled&&!0===ie.clipShadows&&Array.isArray(ie.clippingPlanes)&&0!==ie.clippingPlanes.length||ie.displacementMap&&0!==ie.displacementScale||ie.alphaMap&&ie.alphaTest>0){const gt=be.uuid,$e=ie.uuid;let Ie=b[gt];void 0===Ie&&(Ie={},b[gt]=Ie);let Qe=Ie[$e];void 0===Qe&&(Qe=be.clone(),Ie[$e]=Qe),be=Qe}return be.visible=ie.visible,be.wireframe=ie.wireframe,be.side=3===fe?null!==ie.shadowSide?ie.shadowSide:ie.side:null!==ie.shadowSide?ie.shadowSide:D[ie.side],be.alphaMap=ie.alphaMap,be.alphaTest=ie.alphaTest,be.clipShadows=ie.clipShadows,be.clippingPlanes=ie.clippingPlanes,be.clipIntersection=ie.clipIntersection,be.displacementMap=ie.displacementMap,be.displacementScale=ie.displacementScale,be.displacementBias=ie.displacementBias,be.wireframeLinewidth=ie.wireframeLinewidth,be.linewidth=ie.linewidth,!0===ue.isPointLight&&!0===be.isMeshDistanceMaterial&&(be.referencePosition.setFromMatrixPosition(ue.matrixWorld),be.nearDistance=ve,be.farDistance=te),be}function Y(K,ie,ue,ve,te){if(!1===K.visible)return;if(K.layers.test(ie.layers)&&(K.isMesh||K.isLine||K.isPoints)&&(K.castShadow||K.receiveShadow&&3===te)&&(!K.frustumCulled||c.intersectsObject(K))){K.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,K.matrixWorld);const qe=t.update(K),gt=K.material;if(Array.isArray(gt)){const $e=qe.groups;for(let Ie=0,Qe=$e.length;Ie<Qe;Ie++){const lt=$e[Ie],Mt=gt[lt.materialIndex];if(Mt&&Mt.visible){const it=X(K,Mt,ve,ue.near,ue.far,te);_.renderBufferDirect(ue,null,qe,it,K,lt)}}}else if(gt.visible){const $e=X(K,gt,ve,ue.near,ue.far,te);_.renderBufferDirect(ue,null,qe,$e,K,null)}}const be=K.children;for(let qe=0,gt=be.length;qe<gt;qe++)Y(be[qe],ie,ue,ve,te)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(K,ie,ue){if(!1===F.enabled||!1===F.autoUpdate&&!1===F.needsUpdate||0===K.length)return;const ve=_.getRenderTarget(),te=_.getActiveCubeFace(),fe=_.getActiveMipmapLevel(),be=_.state;be.setBlending(0),be.buffers.color.setClear(1,1,1,1),be.buffers.depth.setTest(!0),be.setScissorTest(!1);for(let qe=0,gt=K.length;qe<gt;qe++){const $e=K[qe],Ie=$e.shadow;if(void 0===Ie){console.warn("THREE.WebGLShadowMap:",$e,"has no shadow.");continue}if(!1===Ie.autoUpdate&&!1===Ie.needsUpdate)continue;d.copy(Ie.mapSize);const Qe=Ie.getFrameExtents();d.multiply(Qe),p.copy(Ie.mapSize),(d.x>C||d.y>C)&&(d.x>C&&(p.x=Math.floor(C/Qe.x),d.x=p.x*Qe.x,Ie.mapSize.x=p.x),d.y>C&&(p.y=Math.floor(C/Qe.y),d.y=p.y*Qe.y,Ie.mapSize.y=p.y)),null===Ie.map&&(Ie.map=new Le(d.x,d.y,3!==this.type?{minFilter:Xn,magFilter:Xn}:{}),Ie.map.texture.name=$e.name+".shadowMap",Ie.camera.updateProjectionMatrix()),_.setRenderTarget(Ie.map),_.clear();const lt=Ie.getViewportCount();for(let Mt=0;Mt<lt;Mt++){const it=Ie.getViewport(Mt);m.set(p.x*it.x,p.y*it.y,p.x*it.z,p.y*it.w),be.viewport(m),Ie.updateMatrices($e,Mt),c=Ie.getFrustum(),Y(ie,ue,Ie.camera,$e,this.type)}!0!==Ie.isPointLightShadow&&3===this.type&&j(Ie,ue),Ie.needsUpdate=!1}F.needsUpdate=!1,_.setRenderTarget(ve,te,fe)}}function tu(_,t,i){const c=i.isWebGL2,y=new function d(){let Se=!1;const Ze=new pe;let At=null;const an=new pe(0,0,0,0);return{setMask:function(_n){At!==_n&&!Se&&(_.colorMask(_n,_n,_n,_n),At=_n)},setLocked:function(_n){Se=_n},setClear:function(_n,qr,Zi,Us,El){!0===El&&(_n*=Us,qr*=Us,Zi*=Us),Ze.set(_n,qr,Zi,Us),!1===an.equals(Ze)&&(_.clearColor(_n,qr,Zi,Us),an.copy(Ze))},reset:function(){Se=!1,At=null,an.set(-1,0,0,0)}}},w=new function p(){let Se=!1,Ze=null,At=null,an=null;return{setTest:function(_n){_n?vr(2929):Rn(2929)},setMask:function(_n){Ze!==_n&&!Se&&(_.depthMask(_n),Ze=_n)},setFunc:function(_n){if(At!==_n){switch(_n){case 0:_.depthFunc(512);break;case 1:_.depthFunc(519);break;case 2:_.depthFunc(513);break;case 3:default:_.depthFunc(515);break;case 4:_.depthFunc(514);break;case 5:_.depthFunc(518);break;case 6:_.depthFunc(516);break;case 7:_.depthFunc(517)}At=_n}},setLocked:function(_n){Se=_n},setClear:function(_n){an!==_n&&(_.clearDepth(_n),an=_n)},reset:function(){Se=!1,Ze=null,At=null,an=null}}},b=new function m(){let Se=!1,Ze=null,At=null,an=null,_n=null,qr=null,Zi=null,Us=null,El=null;return{setTest:function(ur){Se||(ur?vr(2960):Rn(2960))},setMask:function(ur){Ze!==ur&&!Se&&(_.stencilMask(ur),Ze=ur)},setFunc:function(ur,os,Bs){(At!==ur||an!==os||_n!==Bs)&&(_.stencilFunc(ur,os,Bs),At=ur,an=os,_n=Bs)},setOp:function(ur,os,Bs){(qr!==ur||Zi!==os||Us!==Bs)&&(_.stencilOp(ur,os,Bs),qr=ur,Zi=os,Us=Bs)},setLocked:function(ur){Se=ur},setClear:function(ur){El!==ur&&(_.clearStencil(ur),El=ur)},reset:function(){Se=!1,Ze=null,At=null,an=null,_n=null,qr=null,Zi=null,Us=null,El=null}}},C=new WeakMap,D=new WeakMap;let R={},k={},V=new WeakMap,U=[],F=null,j=!1,X=null,Y=null,K=null,ie=null,ue=null,ve=null,te=null,fe=!1,be=null,qe=null,gt=null,$e=null,Ie=null;const Qe=_.getParameter(35661);let lt=!1,Mt=0;const it=_.getParameter(7938);-1!==it.indexOf("WebGL")?(Mt=parseFloat(/^WebGL (\d)/.exec(it)[1]),lt=Mt>=1):-1!==it.indexOf("OpenGL ES")&&(Mt=parseFloat(/^OpenGL ES (\d)/.exec(it)[1]),lt=Mt>=2);let Re=null,Fe={};const It=_.getParameter(3088),yt=_.getParameter(2978),Gt=(new pe).fromArray(It),ln=(new pe).fromArray(yt);function Gn(Se,Ze,At){const an=new Uint8Array(4),_n=_.createTexture();_.bindTexture(Se,_n),_.texParameteri(Se,10241,9728),_.texParameteri(Se,10240,9728);for(let qr=0;qr<At;qr++)_.texImage2D(Ze+qr,0,6408,1,1,0,6408,5121,an);return _n}const st={};function vr(Se){!0!==R[Se]&&(_.enable(Se),R[Se]=!0)}function Rn(Se){!1!==R[Se]&&(_.disable(Se),R[Se]=!1)}st[3553]=Gn(3553,3553,1),st[34067]=Gn(34067,34069,6),y.setClear(0,0,0,1),w.setClear(1),b.setClear(0),vr(2929),w.setFunc(3),Zt(!1),lr(1),vr(2884),Ot(0);const ct={100:32774,101:32778,102:32779};if(c)ct[103]=32775,ct[104]=32776;else{const Se=t.get("EXT_blend_minmax");null!==Se&&(ct[103]=Se.MIN_EXT,ct[104]=Se.MAX_EXT)}const rt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Ot(Se,Ze,At,an,_n,qr,Zi,Us){if(0!==Se){if(!1===j&&(vr(3042),j=!0),5===Se)_n=_n||Ze,qr=qr||At,Zi=Zi||an,(Ze!==Y||_n!==ue)&&(_.blendEquationSeparate(ct[Ze],ct[_n]),Y=Ze,ue=_n),(At!==K||an!==ie||qr!==ve||Zi!==te)&&(_.blendFuncSeparate(rt[At],rt[an],rt[qr],rt[Zi]),K=At,ie=an,ve=qr,te=Zi),X=Se,fe=null;else if(Se!==X||Us!==fe){if((100!==Y||100!==ue)&&(_.blendEquation(32774),Y=100,ue=100),Us)switch(Se){case 1:_.blendFuncSeparate(1,771,1,771);break;case 2:_.blendFunc(1,1);break;case 3:_.blendFuncSeparate(0,769,0,1);break;case 4:_.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Se)}else switch(Se){case 1:_.blendFuncSeparate(770,771,1,771);break;case 2:_.blendFunc(770,1);break;case 3:_.blendFuncSeparate(0,769,0,1);break;case 4:_.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Se)}K=null,ie=null,ve=null,te=null,X=Se,fe=Us}}else!0===j&&(Rn(3042),j=!1)}function Zt(Se){be!==Se&&(_.frontFace(Se?2304:2305),be=Se)}function lr(Se){0!==Se?(vr(2884),Se!==qe&&_.cullFace(1===Se?1029:2===Se?1028:1032)):Rn(2884),qe=Se}function Pn(Se,Ze,At){Se?(vr(32823),($e!==Ze||Ie!==At)&&(_.polygonOffset(Ze,At),$e=Ze,Ie=At)):Rn(32823)}return{buffers:{color:y,depth:w,stencil:b},enable:vr,disable:Rn,bindFramebuffer:function ir(Se,Ze){return k[Se]!==Ze&&(_.bindFramebuffer(Se,Ze),k[Se]=Ze,c&&(36009===Se&&(k[36160]=Ze),36160===Se&&(k[36009]=Ze)),!0)},drawBuffers:function qt(Se,Ze){let At=U,an=!1;if(Se)if(At=V.get(Ze),void 0===At&&(At=[],V.set(Ze,At)),Se.isWebGLMultipleRenderTargets){const _n=Se.texture;if(At.length!==_n.length||36064!==At[0]){for(let qr=0,Zi=_n.length;qr<Zi;qr++)At[qr]=36064+qr;At.length=_n.length,an=!0}}else 36064!==At[0]&&(At[0]=36064,an=!0);else 1029!==At[0]&&(At[0]=1029,an=!0);an&&(i.isWebGL2?_.drawBuffers(At):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(At))},useProgram:function Tr(Se){return F!==Se&&(_.useProgram(Se),F=Se,!0)},setBlending:Ot,setMaterial:function hn(Se,Ze){2===Se.side?Rn(2884):vr(2884);let At=1===Se.side;Ze&&(At=!At),Zt(At),1===Se.blending&&!1===Se.transparent?Ot(0):Ot(Se.blending,Se.blendEquation,Se.blendSrc,Se.blendDst,Se.blendEquationAlpha,Se.blendSrcAlpha,Se.blendDstAlpha,Se.premultipliedAlpha),w.setFunc(Se.depthFunc),w.setTest(Se.depthTest),w.setMask(Se.depthWrite),y.setMask(Se.colorWrite);const an=Se.stencilWrite;b.setTest(an),an&&(b.setMask(Se.stencilWriteMask),b.setFunc(Se.stencilFunc,Se.stencilRef,Se.stencilFuncMask),b.setOp(Se.stencilFail,Se.stencilZFail,Se.stencilZPass)),Pn(Se.polygonOffset,Se.polygonOffsetFactor,Se.polygonOffsetUnits),!0===Se.alphaToCoverage?vr(32926):Rn(32926)},setFlipSided:Zt,setCullFace:lr,setLineWidth:function kn(Se){Se!==gt&&(lt&&_.lineWidth(Se),gt=Se)},setPolygonOffset:Pn,setScissorTest:function di(Se){Se?vr(3089):Rn(3089)},activeTexture:function ri(Se){void 0===Se&&(Se=33984+Qe-1),Re!==Se&&(_.activeTexture(Se),Re=Se)},bindTexture:function me(Se,Ze,At){void 0===At&&(At=null===Re?33984+Qe-1:Re);let an=Fe[At];void 0===an&&(an={type:void 0,texture:void 0},Fe[At]=an),(an.type!==Se||an.texture!==Ze)&&(Re!==At&&(_.activeTexture(At),Re=At),_.bindTexture(Se,Ze||st[Se]),an.type=Se,an.texture=Ze)},unbindTexture:function oe(){const Se=Fe[Re];void 0!==Se&&void 0!==Se.type&&(_.bindTexture(Se.type,null),Se.type=void 0,Se.texture=void 0)},compressedTexImage2D:function Ge(){try{_.compressedTexImage2D.apply(_,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},compressedTexImage3D:function xt(){try{_.compressedTexImage3D.apply(_,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},texImage2D:function Hn(){try{_.texImage2D.apply(_,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},texImage3D:function mn(){try{_.texImage3D.apply(_,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},updateUBOMapping:function Vr(Se,Ze){let At=D.get(Ze);void 0===At&&(At=new WeakMap,D.set(Ze,At));let an=At.get(Se);void 0===an&&(an=_.getUniformBlockIndex(Ze,Se.name),At.set(Se,an))},uniformBlockBinding:function yi(Se,Ze){const an=D.get(Ze).get(Se);C.get(Se)!==an&&(_.uniformBlockBinding(Ze,an,Se.__bindingPointIndex),C.set(Se,an))},texStorage2D:function nt(){try{_.texStorage2D.apply(_,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},texStorage3D:function En(){try{_.texStorage3D.apply(_,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},texSubImage2D:function Pt(){try{_.texSubImage2D.apply(_,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},texSubImage3D:function Jt(){try{_.texSubImage3D.apply(_,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},compressedTexSubImage2D:function Fn(){try{_.compressedTexSubImage2D.apply(_,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},compressedTexSubImage3D:function en(){try{_.compressedTexSubImage3D.apply(_,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}},scissor:function In(Se){!1===Gt.equals(Se)&&(_.scissor(Se.x,Se.y,Se.z,Se.w),Gt.copy(Se))},viewport:function Tn(Se){!1===ln.equals(Se)&&(_.viewport(Se.x,Se.y,Se.z,Se.w),ln.copy(Se))},reset:function ss(){_.disable(3042),_.disable(2884),_.disable(2929),_.disable(32823),_.disable(3089),_.disable(2960),_.disable(32926),_.blendEquation(32774),_.blendFunc(1,0),_.blendFuncSeparate(1,0,1,0),_.colorMask(!0,!0,!0,!0),_.clearColor(0,0,0,0),_.depthMask(!0),_.depthFunc(513),_.clearDepth(1),_.stencilMask(4294967295),_.stencilFunc(519,0,4294967295),_.stencilOp(7680,7680,7680),_.clearStencil(0),_.cullFace(1029),_.frontFace(2305),_.polygonOffset(0,0),_.activeTexture(33984),_.bindFramebuffer(36160,null),!0===c&&(_.bindFramebuffer(36009,null),_.bindFramebuffer(36008,null)),_.useProgram(null),_.lineWidth(1),_.scissor(0,0,_.canvas.width,_.canvas.height),_.viewport(0,0,_.canvas.width,_.canvas.height),R={},Re=null,Fe={},k={},V=new WeakMap,U=[],F=null,j=!1,X=null,Y=null,K=null,ie=null,ue=null,ve=null,te=null,fe=!1,be=null,qe=null,gt=null,$e=null,Ie=null,Gt.set(0,0,_.canvas.width,_.canvas.height),ln.set(0,0,_.canvas.width,_.canvas.height),y.reset(),w.reset(),b.reset()}}}function nu(_,t,i,c,d,p,m){const y=d.isWebGL2,w=d.maxTextures,b=d.maxCubemapSize,C=d.maxTextureSize,D=d.maxSamples,R=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,k=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),V=new WeakMap;let U;const F=new WeakMap;let j=!1;try{j=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function X(me,oe){return j?new OffscreenCanvas(me,oe):sa("canvas")}function Y(me,oe,Ge,xt){let Pt=1;if((me.width>xt||me.height>xt)&&(Pt=xt/Math.max(me.width,me.height)),Pt<1||!0===oe){if(typeof HTMLImageElement<"u"&&me instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&me instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&me instanceof ImageBitmap){const Jt=oe?fr:Math.floor,Fn=Jt(Pt*me.width),en=Jt(Pt*me.height);void 0===U&&(U=X(Fn,en));const nt=Ge?X(Fn,en):U;return nt.width=Fn,nt.height=en,nt.getContext("2d").drawImage(me,0,0,Fn,en),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+me.width+"x"+me.height+") to ("+Fn+"x"+en+")."),nt}return"data"in me&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+me.width+"x"+me.height+")."),me}return me}function K(me){return nl(me.width)&&nl(me.height)}function ue(me,oe){return me.generateMipmaps&&oe&&me.minFilter!==Xn&&me.minFilter!==Di}function ve(me){_.generateMipmap(me)}function te(me,oe,Ge,xt,Pt=!1){if(!1===y)return oe;if(null!==me){if(void 0!==_[me])return _[me];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+me+"'")}let Jt=oe;return 6403===oe&&(5126===Ge&&(Jt=33326),5131===Ge&&(Jt=33325),5121===Ge&&(Jt=33321)),33319===oe&&(5126===Ge&&(Jt=33328),5131===Ge&&(Jt=33327),5121===Ge&&(Jt=33323)),6408===oe&&(5126===Ge&&(Jt=34836),5131===Ge&&(Jt=34842),5121===Ge&&(Jt=xt===pi&&!1===Pt?35907:32856),32819===Ge&&(Jt=32854),32820===Ge&&(Jt=32855)),(33325===Jt||33326===Jt||33327===Jt||33328===Jt||34842===Jt||34836===Jt)&&t.get("EXT_color_buffer_float"),Jt}function fe(me,oe,Ge){return!0===ue(me,Ge)||me.isFramebufferTexture&&me.minFilter!==Xn&&me.minFilter!==Di?Math.log2(Math.max(oe.width,oe.height))+1:void 0!==me.mipmaps&&me.mipmaps.length>0?me.mipmaps.length:me.isCompressedTexture&&Array.isArray(me.image)?oe.mipmaps.length:1}function be(me){return me===Xn||1004===me||1005===me?9728:9729}function qe(me){const oe=me.target;oe.removeEventListener("dispose",qe),function $e(me){const oe=c.get(me);if(void 0===oe.__webglInit)return;const Ge=me.source,xt=F.get(Ge);if(xt){const Pt=xt[oe.__cacheKey];Pt.usedTimes--,0===Pt.usedTimes&&Ie(me),0===Object.keys(xt).length&&F.delete(Ge)}c.remove(me)}(oe),oe.isVideoTexture&&V.delete(oe)}function gt(me){const oe=me.target;oe.removeEventListener("dispose",gt),function Qe(me){const oe=me.texture,Ge=c.get(me),xt=c.get(oe);if(void 0!==xt.__webglTexture&&(_.deleteTexture(xt.__webglTexture),m.memory.textures--),me.depthTexture&&me.depthTexture.dispose(),me.isWebGLCubeRenderTarget)for(let Pt=0;Pt<6;Pt++)_.deleteFramebuffer(Ge.__webglFramebuffer[Pt]),Ge.__webglDepthbuffer&&_.deleteRenderbuffer(Ge.__webglDepthbuffer[Pt]);else{if(_.deleteFramebuffer(Ge.__webglFramebuffer),Ge.__webglDepthbuffer&&_.deleteRenderbuffer(Ge.__webglDepthbuffer),Ge.__webglMultisampledFramebuffer&&_.deleteFramebuffer(Ge.__webglMultisampledFramebuffer),Ge.__webglColorRenderbuffer)for(let Pt=0;Pt<Ge.__webglColorRenderbuffer.length;Pt++)Ge.__webglColorRenderbuffer[Pt]&&_.deleteRenderbuffer(Ge.__webglColorRenderbuffer[Pt]);Ge.__webglDepthRenderbuffer&&_.deleteRenderbuffer(Ge.__webglDepthRenderbuffer)}if(me.isWebGLMultipleRenderTargets)for(let Pt=0,Jt=oe.length;Pt<Jt;Pt++){const Fn=c.get(oe[Pt]);Fn.__webglTexture&&(_.deleteTexture(Fn.__webglTexture),m.memory.textures--),c.remove(oe[Pt])}c.remove(oe),c.remove(me)}(oe)}function Ie(me){const oe=c.get(me);_.deleteTexture(oe.__webglTexture),delete F.get(me.source)[oe.__cacheKey],m.memory.textures--}let lt=0;function Fe(me,oe){const Ge=c.get(me);if(me.isVideoTexture&&function di(me){const oe=m.render.frame;V.get(me)!==oe&&(V.set(me,oe),me.update())}(me),!1===me.isRenderTargetTexture&&me.version>0&&Ge.__version!==me.version){const xt=me.image;if(null===xt)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==xt.complete)return void Rn(Ge,me,oe);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.bindTexture(3553,Ge.__webglTexture,33984+oe)}const ln={1e3:10497,[Sr]:33071,1002:33648},Gn={[Xn]:9728,1004:9984,1005:9986,[Di]:9729,1007:9985,1008:9987};function st(me,oe,Ge){if(Ge?(_.texParameteri(me,10242,ln[oe.wrapS]),_.texParameteri(me,10243,ln[oe.wrapT]),(32879===me||35866===me)&&_.texParameteri(me,32882,ln[oe.wrapR]),_.texParameteri(me,10240,Gn[oe.magFilter]),_.texParameteri(me,10241,Gn[oe.minFilter])):(_.texParameteri(me,10242,33071),_.texParameteri(me,10243,33071),(32879===me||35866===me)&&_.texParameteri(me,32882,33071),(oe.wrapS!==Sr||oe.wrapT!==Sr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),_.texParameteri(me,10240,be(oe.magFilter)),_.texParameteri(me,10241,be(oe.minFilter)),oe.minFilter!==Xn&&oe.minFilter!==Di&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const xt=t.get("EXT_texture_filter_anisotropic");if(oe.type===nn&&!1===t.has("OES_texture_float_linear")||!1===y&&oe.type===Qi&&!1===t.has("OES_texture_half_float_linear"))return;(oe.anisotropy>1||c.get(oe).__currentAnisotropy)&&(_.texParameterf(me,xt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(oe.anisotropy,d.getMaxAnisotropy())),c.get(oe).__currentAnisotropy=oe.anisotropy)}}function vr(me,oe){let Ge=!1;void 0===me.__webglInit&&(me.__webglInit=!0,oe.addEventListener("dispose",qe));const xt=oe.source;let Pt=F.get(xt);void 0===Pt&&(Pt={},F.set(xt,Pt));const Jt=function Re(me){const oe=[];return oe.push(me.wrapS),oe.push(me.wrapT),oe.push(me.wrapR||0),oe.push(me.magFilter),oe.push(me.minFilter),oe.push(me.anisotropy),oe.push(me.internalFormat),oe.push(me.format),oe.push(me.type),oe.push(me.generateMipmaps),oe.push(me.premultiplyAlpha),oe.push(me.flipY),oe.push(me.unpackAlignment),oe.push(me.encoding),oe.join()}(oe);if(Jt!==me.__cacheKey){void 0===Pt[Jt]&&(Pt[Jt]={texture:_.createTexture(),usedTimes:0},m.memory.textures++,Ge=!0),Pt[Jt].usedTimes++;const Fn=Pt[me.__cacheKey];void 0!==Fn&&(Pt[me.__cacheKey].usedTimes--,0===Fn.usedTimes&&Ie(oe)),me.__cacheKey=Jt,me.__webglTexture=Pt[Jt].texture}return Ge}function Rn(me,oe,Ge){let xt=3553;(oe.isDataArrayTexture||oe.isCompressedArrayTexture)&&(xt=35866),oe.isData3DTexture&&(xt=32879);const Pt=vr(me,oe),Jt=oe.source;i.bindTexture(xt,me.__webglTexture,33984+Ge);const Fn=c.get(Jt);if(Jt.version!==Fn.__version||!0===Pt){i.activeTexture(33984+Ge),_.pixelStorei(37440,oe.flipY),_.pixelStorei(37441,oe.premultiplyAlpha),_.pixelStorei(3317,oe.unpackAlignment),_.pixelStorei(37443,0);const en=function ie(me){return!y&&(me.wrapS!==Sr||me.wrapT!==Sr||me.minFilter!==Xn&&me.minFilter!==Di)}(oe)&&!1===K(oe.image);let nt=Y(oe.image,en,!1,C);nt=ri(oe,nt);const En=K(nt)||y,Hn=p.convert(oe.format,oe.encoding);let Tn,mn=p.convert(oe.type),In=te(oe.internalFormat,Hn,mn,oe.encoding,oe.isVideoTexture);st(xt,oe,En);const Vr=oe.mipmaps,yi=y&&!0!==oe.isVideoTexture,ss=void 0===Fn.__version||!0===Pt,Se=fe(oe,nt,En);if(oe.isDepthTexture)In=6402,y?In=oe.type===nn?36012:oe.type===ai?33190:oe.type===Mo?35056:33189:oe.type===nn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),oe.format===Te&&6402===In&&1012!==oe.type&&oe.type!==ai&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),oe.type=ai,mn=p.convert(oe.type)),oe.format===Ve&&6402===In&&(In=34041,oe.type!==Mo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),oe.type=Mo,mn=p.convert(oe.type))),ss&&(yi?i.texStorage2D(3553,1,In,nt.width,nt.height):i.texImage2D(3553,0,In,nt.width,nt.height,0,Hn,mn,null));else if(oe.isDataTexture)if(Vr.length>0&&En){yi&&ss&&i.texStorage2D(3553,Se,In,Vr[0].width,Vr[0].height);for(let Ze=0,At=Vr.length;Ze<At;Ze++)Tn=Vr[Ze],yi?i.texSubImage2D(3553,Ze,0,0,Tn.width,Tn.height,Hn,mn,Tn.data):i.texImage2D(3553,Ze,In,Tn.width,Tn.height,0,Hn,mn,Tn.data);oe.generateMipmaps=!1}else yi?(ss&&i.texStorage2D(3553,Se,In,nt.width,nt.height),i.texSubImage2D(3553,0,0,0,nt.width,nt.height,Hn,mn,nt.data)):i.texImage2D(3553,0,In,nt.width,nt.height,0,Hn,mn,nt.data);else if(oe.isCompressedTexture)if(oe.isCompressedArrayTexture){yi&&ss&&i.texStorage3D(35866,Se,In,Vr[0].width,Vr[0].height,nt.depth);for(let Ze=0,At=Vr.length;Ze<At;Ze++)Tn=Vr[Ze],oe.format!==we?null!==Hn?yi?i.compressedTexSubImage3D(35866,Ze,0,0,0,Tn.width,Tn.height,nt.depth,Hn,Tn.data,0,0):i.compressedTexImage3D(35866,Ze,In,Tn.width,Tn.height,nt.depth,0,Tn.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):yi?i.texSubImage3D(35866,Ze,0,0,0,Tn.width,Tn.height,nt.depth,Hn,mn,Tn.data):i.texImage3D(35866,Ze,In,Tn.width,Tn.height,nt.depth,0,Hn,mn,Tn.data)}else{yi&&ss&&i.texStorage2D(3553,Se,In,Vr[0].width,Vr[0].height);for(let Ze=0,At=Vr.length;Ze<At;Ze++)Tn=Vr[Ze],oe.format!==we?null!==Hn?yi?i.compressedTexSubImage2D(3553,Ze,0,0,Tn.width,Tn.height,Hn,Tn.data):i.compressedTexImage2D(3553,Ze,In,Tn.width,Tn.height,0,Tn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):yi?i.texSubImage2D(3553,Ze,0,0,Tn.width,Tn.height,Hn,mn,Tn.data):i.texImage2D(3553,Ze,In,Tn.width,Tn.height,0,Hn,mn,Tn.data)}else if(oe.isDataArrayTexture)yi?(ss&&i.texStorage3D(35866,Se,In,nt.width,nt.height,nt.depth),i.texSubImage3D(35866,0,0,0,0,nt.width,nt.height,nt.depth,Hn,mn,nt.data)):i.texImage3D(35866,0,In,nt.width,nt.height,nt.depth,0,Hn,mn,nt.data);else if(oe.isData3DTexture)yi?(ss&&i.texStorage3D(32879,Se,In,nt.width,nt.height,nt.depth),i.texSubImage3D(32879,0,0,0,0,nt.width,nt.height,nt.depth,Hn,mn,nt.data)):i.texImage3D(32879,0,In,nt.width,nt.height,nt.depth,0,Hn,mn,nt.data);else if(oe.isFramebufferTexture){if(ss)if(yi)i.texStorage2D(3553,Se,In,nt.width,nt.height);else{let Ze=nt.width,At=nt.height;for(let an=0;an<Se;an++)i.texImage2D(3553,an,In,Ze,At,0,Hn,mn,null),Ze>>=1,At>>=1}}else if(Vr.length>0&&En){yi&&ss&&i.texStorage2D(3553,Se,In,Vr[0].width,Vr[0].height);for(let Ze=0,At=Vr.length;Ze<At;Ze++)Tn=Vr[Ze],yi?i.texSubImage2D(3553,Ze,0,0,Hn,mn,Tn):i.texImage2D(3553,Ze,In,Hn,mn,Tn);oe.generateMipmaps=!1}else yi?(ss&&i.texStorage2D(3553,Se,In,nt.width,nt.height),i.texSubImage2D(3553,0,0,0,Hn,mn,nt)):i.texImage2D(3553,0,In,Hn,mn,nt);ue(oe,En)&&ve(xt),Fn.__version=Jt.version,oe.onUpdate&&oe.onUpdate(oe)}me.__version=oe.version}function qt(me,oe,Ge,xt,Pt){const Jt=p.convert(Ge.format,Ge.encoding),Fn=p.convert(Ge.type),en=te(Ge.internalFormat,Jt,Fn,Ge.encoding);c.get(oe).__hasExternalTextures||(32879===Pt||35866===Pt?i.texImage3D(Pt,0,en,oe.width,oe.height,oe.depth,0,Jt,Fn,null):i.texImage2D(Pt,0,en,oe.width,oe.height,0,Jt,Fn,null)),i.bindFramebuffer(36160,me),Pn(oe)?R.framebufferTexture2DMultisampleEXT(36160,xt,Pt,c.get(Ge).__webglTexture,0,kn(oe)):(3553===Pt||Pt>=34069&&Pt<=34074)&&_.framebufferTexture2D(36160,xt,Pt,c.get(Ge).__webglTexture,0),i.bindFramebuffer(36160,null)}function Tr(me,oe,Ge){if(_.bindRenderbuffer(36161,me),oe.depthBuffer&&!oe.stencilBuffer){let xt=33189;if(Ge||Pn(oe)){const Pt=oe.depthTexture;Pt&&Pt.isDepthTexture&&(Pt.type===nn?xt=36012:Pt.type===ai&&(xt=33190));const Jt=kn(oe);Pn(oe)?R.renderbufferStorageMultisampleEXT(36161,Jt,xt,oe.width,oe.height):_.renderbufferStorageMultisample(36161,Jt,xt,oe.width,oe.height)}else _.renderbufferStorage(36161,xt,oe.width,oe.height);_.framebufferRenderbuffer(36160,36096,36161,me)}else if(oe.depthBuffer&&oe.stencilBuffer){const xt=kn(oe);Ge&&!1===Pn(oe)?_.renderbufferStorageMultisample(36161,xt,35056,oe.width,oe.height):Pn(oe)?R.renderbufferStorageMultisampleEXT(36161,xt,35056,oe.width,oe.height):_.renderbufferStorage(36161,34041,oe.width,oe.height),_.framebufferRenderbuffer(36160,33306,36161,me)}else{const xt=!0===oe.isWebGLMultipleRenderTargets?oe.texture:[oe.texture];for(let Pt=0;Pt<xt.length;Pt++){const Jt=xt[Pt],Fn=p.convert(Jt.format,Jt.encoding),en=p.convert(Jt.type),nt=te(Jt.internalFormat,Fn,en,Jt.encoding),En=kn(oe);Ge&&!1===Pn(oe)?_.renderbufferStorageMultisample(36161,En,nt,oe.width,oe.height):Pn(oe)?R.renderbufferStorageMultisampleEXT(36161,En,nt,oe.width,oe.height):_.renderbufferStorage(36161,nt,oe.width,oe.height)}}_.bindRenderbuffer(36161,null)}function rt(me){const oe=c.get(me),Ge=!0===me.isWebGLCubeRenderTarget;if(me.depthTexture&&!oe.__autoAllocateDepthBuffer){if(Ge)throw new Error("target.depthTexture not supported in Cube render targets");!function ct(me,oe){if(oe&&oe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,me),!oe.depthTexture||!oe.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!c.get(oe.depthTexture).__webglTexture||oe.depthTexture.image.width!==oe.width||oe.depthTexture.image.height!==oe.height)&&(oe.depthTexture.image.width=oe.width,oe.depthTexture.image.height=oe.height,oe.depthTexture.needsUpdate=!0),Fe(oe.depthTexture,0);const xt=c.get(oe.depthTexture).__webglTexture,Pt=kn(oe);if(oe.depthTexture.format===Te)Pn(oe)?R.framebufferTexture2DMultisampleEXT(36160,36096,3553,xt,0,Pt):_.framebufferTexture2D(36160,36096,3553,xt,0);else{if(oe.depthTexture.format!==Ve)throw new Error("Unknown depthTexture format");Pn(oe)?R.framebufferTexture2DMultisampleEXT(36160,33306,3553,xt,0,Pt):_.framebufferTexture2D(36160,33306,3553,xt,0)}}(oe.__webglFramebuffer,me)}else if(Ge){oe.__webglDepthbuffer=[];for(let xt=0;xt<6;xt++)i.bindFramebuffer(36160,oe.__webglFramebuffer[xt]),oe.__webglDepthbuffer[xt]=_.createRenderbuffer(),Tr(oe.__webglDepthbuffer[xt],me,!1)}else i.bindFramebuffer(36160,oe.__webglFramebuffer),oe.__webglDepthbuffer=_.createRenderbuffer(),Tr(oe.__webglDepthbuffer,me,!1);i.bindFramebuffer(36160,null)}function kn(me){return Math.min(D,me.samples)}function Pn(me){const oe=c.get(me);return y&&me.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==oe.__useRenderToTexture}function ri(me,oe){const Ge=me.encoding,xt=me.format,Pt=me.type;return!0===me.isCompressedTexture||!0===me.isVideoTexture||1035===me.format||Ge!==Ua&&(Ge===pi?!1===y?!0===t.has("EXT_sRGB")&&xt===we?(me.format=1035,me.minFilter=Di,me.generateMipmaps=!1):oe=Du.sRGBToLinear(oe):(xt!==we||Pt!==Ws)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Ge)),oe}this.allocateTextureUnit=function it(){const me=lt;return me>=w&&console.warn("THREE.WebGLTextures: Trying to use "+me+" texture units while this GPU supports only "+w),lt+=1,me},this.resetTextureUnits=function Mt(){lt=0},this.setTexture2D=Fe,this.setTexture2DArray=function It(me,oe){const Ge=c.get(me);me.version>0&&Ge.__version!==me.version?Rn(Ge,me,oe):i.bindTexture(35866,Ge.__webglTexture,33984+oe)},this.setTexture3D=function yt(me,oe){const Ge=c.get(me);me.version>0&&Ge.__version!==me.version?Rn(Ge,me,oe):i.bindTexture(32879,Ge.__webglTexture,33984+oe)},this.setTextureCube=function Gt(me,oe){const Ge=c.get(me);me.version>0&&Ge.__version!==me.version?function ir(me,oe,Ge){if(6!==oe.image.length)return;const xt=vr(me,oe),Pt=oe.source;i.bindTexture(34067,me.__webglTexture,33984+Ge);const Jt=c.get(Pt);if(Pt.version!==Jt.__version||!0===xt){i.activeTexture(33984+Ge),_.pixelStorei(37440,oe.flipY),_.pixelStorei(37441,oe.premultiplyAlpha),_.pixelStorei(3317,oe.unpackAlignment),_.pixelStorei(37443,0);const Fn=oe.isCompressedTexture||oe.image[0].isCompressedTexture,en=oe.image[0]&&oe.image[0].isDataTexture,nt=[];for(let Ze=0;Ze<6;Ze++)nt[Ze]=Fn||en?en?oe.image[Ze].image:oe.image[Ze]:Y(oe.image[Ze],!1,!0,b),nt[Ze]=ri(oe,nt[Ze]);const En=nt[0],Hn=K(En)||y,mn=p.convert(oe.format,oe.encoding),In=p.convert(oe.type),Tn=te(oe.internalFormat,mn,In,oe.encoding),Vr=y&&!0!==oe.isVideoTexture,yi=void 0===Jt.__version||!0===xt;let Se,ss=fe(oe,En,Hn);if(st(34067,oe,Hn),Fn){Vr&&yi&&i.texStorage2D(34067,ss,Tn,En.width,En.height);for(let Ze=0;Ze<6;Ze++){Se=nt[Ze].mipmaps;for(let At=0;At<Se.length;At++){const an=Se[At];oe.format!==we?null!==mn?Vr?i.compressedTexSubImage2D(34069+Ze,At,0,0,an.width,an.height,mn,an.data):i.compressedTexImage2D(34069+Ze,At,Tn,an.width,an.height,0,an.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Vr?i.texSubImage2D(34069+Ze,At,0,0,an.width,an.height,mn,In,an.data):i.texImage2D(34069+Ze,At,Tn,an.width,an.height,0,mn,In,an.data)}}}else{Se=oe.mipmaps,Vr&&yi&&(Se.length>0&&ss++,i.texStorage2D(34067,ss,Tn,nt[0].width,nt[0].height));for(let Ze=0;Ze<6;Ze++)if(en){Vr?i.texSubImage2D(34069+Ze,0,0,0,nt[Ze].width,nt[Ze].height,mn,In,nt[Ze].data):i.texImage2D(34069+Ze,0,Tn,nt[Ze].width,nt[Ze].height,0,mn,In,nt[Ze].data);for(let At=0;At<Se.length;At++){const _n=Se[At].image[Ze].image;Vr?i.texSubImage2D(34069+Ze,At+1,0,0,_n.width,_n.height,mn,In,_n.data):i.texImage2D(34069+Ze,At+1,Tn,_n.width,_n.height,0,mn,In,_n.data)}}else{Vr?i.texSubImage2D(34069+Ze,0,0,0,mn,In,nt[Ze]):i.texImage2D(34069+Ze,0,Tn,mn,In,nt[Ze]);for(let At=0;At<Se.length;At++){const an=Se[At];Vr?i.texSubImage2D(34069+Ze,At+1,0,0,mn,In,an.image[Ze]):i.texImage2D(34069+Ze,At+1,Tn,mn,In,an.image[Ze])}}}ue(oe,Hn)&&ve(34067),Jt.__version=Pt.version,oe.onUpdate&&oe.onUpdate(oe)}me.__version=oe.version}(Ge,me,oe):i.bindTexture(34067,Ge.__webglTexture,33984+oe)},this.rebindTextures=function Ot(me,oe,Ge){const xt=c.get(me);void 0!==oe&&qt(xt.__webglFramebuffer,me,me.texture,36064,3553),void 0!==Ge&&rt(me)},this.setupRenderTarget=function hn(me){const oe=me.texture,Ge=c.get(me),xt=c.get(oe);me.addEventListener("dispose",gt),!0!==me.isWebGLMultipleRenderTargets&&(void 0===xt.__webglTexture&&(xt.__webglTexture=_.createTexture()),xt.__version=oe.version,m.memory.textures++);const Pt=!0===me.isWebGLCubeRenderTarget,Jt=!0===me.isWebGLMultipleRenderTargets,Fn=K(me)||y;if(Pt){Ge.__webglFramebuffer=[];for(let en=0;en<6;en++)Ge.__webglFramebuffer[en]=_.createFramebuffer()}else{if(Ge.__webglFramebuffer=_.createFramebuffer(),Jt)if(d.drawBuffers){const en=me.texture;for(let nt=0,En=en.length;nt<En;nt++){const Hn=c.get(en[nt]);void 0===Hn.__webglTexture&&(Hn.__webglTexture=_.createTexture(),m.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(y&&me.samples>0&&!1===Pn(me)){const en=Jt?oe:[oe];Ge.__webglMultisampledFramebuffer=_.createFramebuffer(),Ge.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,Ge.__webglMultisampledFramebuffer);for(let nt=0;nt<en.length;nt++){const En=en[nt];Ge.__webglColorRenderbuffer[nt]=_.createRenderbuffer(),_.bindRenderbuffer(36161,Ge.__webglColorRenderbuffer[nt]);const Hn=p.convert(En.format,En.encoding),mn=p.convert(En.type),In=te(En.internalFormat,Hn,mn,En.encoding,!0===me.isXRRenderTarget),Tn=kn(me);_.renderbufferStorageMultisample(36161,Tn,In,me.width,me.height),_.framebufferRenderbuffer(36160,36064+nt,36161,Ge.__webglColorRenderbuffer[nt])}_.bindRenderbuffer(36161,null),me.depthBuffer&&(Ge.__webglDepthRenderbuffer=_.createRenderbuffer(),Tr(Ge.__webglDepthRenderbuffer,me,!0)),i.bindFramebuffer(36160,null)}}if(Pt){i.bindTexture(34067,xt.__webglTexture),st(34067,oe,Fn);for(let en=0;en<6;en++)qt(Ge.__webglFramebuffer[en],me,oe,36064,34069+en);ue(oe,Fn)&&ve(34067),i.unbindTexture()}else if(Jt){const en=me.texture;for(let nt=0,En=en.length;nt<En;nt++){const Hn=en[nt],mn=c.get(Hn);i.bindTexture(3553,mn.__webglTexture),st(3553,Hn,Fn),qt(Ge.__webglFramebuffer,me,Hn,36064+nt,3553),ue(Hn,Fn)&&ve(3553)}i.unbindTexture()}else{let en=3553;(me.isWebGL3DRenderTarget||me.isWebGLArrayRenderTarget)&&(y?en=me.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(en,xt.__webglTexture),st(en,oe,Fn),qt(Ge.__webglFramebuffer,me,oe,36064,en),ue(oe,Fn)&&ve(en),i.unbindTexture()}me.depthBuffer&&rt(me)},this.updateRenderTargetMipmap=function Zt(me){const oe=K(me)||y,Ge=!0===me.isWebGLMultipleRenderTargets?me.texture:[me.texture];for(let xt=0,Pt=Ge.length;xt<Pt;xt++){const Jt=Ge[xt];if(ue(Jt,oe)){const Fn=me.isWebGLCubeRenderTarget?34067:3553,en=c.get(Jt).__webglTexture;i.bindTexture(Fn,en),ve(Fn),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function lr(me){if(y&&me.samples>0&&!1===Pn(me)){const oe=me.isWebGLMultipleRenderTargets?me.texture:[me.texture],Ge=me.width,xt=me.height;let Pt=16384;const Jt=[],Fn=me.stencilBuffer?33306:36096,en=c.get(me),nt=!0===me.isWebGLMultipleRenderTargets;if(nt)for(let En=0;En<oe.length;En++)i.bindFramebuffer(36160,en.__webglMultisampledFramebuffer),_.framebufferRenderbuffer(36160,36064+En,36161,null),i.bindFramebuffer(36160,en.__webglFramebuffer),_.framebufferTexture2D(36009,36064+En,3553,null,0);i.bindFramebuffer(36008,en.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,en.__webglFramebuffer);for(let En=0;En<oe.length;En++){Jt.push(36064+En),me.depthBuffer&&Jt.push(Fn);const Hn=void 0!==en.__ignoreDepthValues&&en.__ignoreDepthValues;if(!1===Hn&&(me.depthBuffer&&(Pt|=256),me.stencilBuffer&&(Pt|=1024)),nt&&_.framebufferRenderbuffer(36008,36064,36161,en.__webglColorRenderbuffer[En]),!0===Hn&&(_.invalidateFramebuffer(36008,[Fn]),_.invalidateFramebuffer(36009,[Fn])),nt){const mn=c.get(oe[En]).__webglTexture;_.framebufferTexture2D(36009,36064,3553,mn,0)}_.blitFramebuffer(0,0,Ge,xt,0,0,Ge,xt,Pt,9728),k&&_.invalidateFramebuffer(36008,Jt)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),nt)for(let En=0;En<oe.length;En++){i.bindFramebuffer(36160,en.__webglMultisampledFramebuffer),_.framebufferRenderbuffer(36160,36064+En,36161,en.__webglColorRenderbuffer[En]);const Hn=c.get(oe[En]).__webglTexture;i.bindFramebuffer(36160,en.__webglFramebuffer),_.framebufferTexture2D(36009,36064+En,3553,Hn,0)}i.bindFramebuffer(36009,en.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=rt,this.setupFrameBufferTexture=qt,this.useMultisampledRTT=Pn}function sb(_,t,i){const c=i.isWebGL2;return{convert:function d(p,m=null){let y;if(p===Ws)return 5121;if(1017===p)return 32819;if(1018===p)return 32820;if(1010===p)return 5120;if(1011===p)return 5122;if(1012===p)return 5123;if(1013===p)return 5124;if(p===ai)return 5125;if(p===nn)return 5126;if(p===Qi)return c?5131:(y=t.get("OES_texture_half_float"),null!==y?y.HALF_FLOAT_OES:null);if(1021===p)return 6406;if(p===we)return 6408;if(1024===p)return 6409;if(1025===p)return 6410;if(p===Te)return 6402;if(p===Ve)return 34041;if(1028===p)return 6403;if(1022===p)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===p)return y=t.get("EXT_sRGB"),null!==y?y.SRGB_ALPHA_EXT:null;if(1029===p)return 36244;if(1030===p)return 33319;if(1031===p)return 33320;if(1033===p)return 36249;if(33776===p||33777===p||33778===p||33779===p)if(m===pi){if(y=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===y)return null;if(33776===p)return y.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===p)return y.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===p)return y.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===p)return y.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(y=t.get("WEBGL_compressed_texture_s3tc"),null===y)return null;if(33776===p)return y.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===p)return y.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===p)return y.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===p)return y.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===p||35841===p||35842===p||35843===p){if(y=t.get("WEBGL_compressed_texture_pvrtc"),null===y)return null;if(35840===p)return y.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===p)return y.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===p)return y.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===p)return y.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===p)return y=t.get("WEBGL_compressed_texture_etc1"),null!==y?y.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===p||37496===p){if(y=t.get("WEBGL_compressed_texture_etc"),null===y)return null;if(37492===p)return m===pi?y.COMPRESSED_SRGB8_ETC2:y.COMPRESSED_RGB8_ETC2;if(37496===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:y.COMPRESSED_RGBA8_ETC2_EAC}if(37808===p||37809===p||37810===p||37811===p||37812===p||37813===p||37814===p||37815===p||37816===p||37817===p||37818===p||37819===p||37820===p||37821===p){if(y=t.get("WEBGL_compressed_texture_astc"),null===y)return null;if(37808===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:y.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:y.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:y.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:y.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:y.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:y.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:y.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:y.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:y.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:y.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:y.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:y.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:y.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===p)return m===pi?y.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:y.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===p){if(y=t.get("EXT_texture_compression_bptc"),null===y)return null;if(36492===p)return m===pi?y.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:y.COMPRESSED_RGBA_BPTC_UNORM_EXT}return p===Mo?c?34042:(y=t.get("WEBGL_depth_texture"),null!==y?y.UNSIGNED_INT_24_8_WEBGL:null):void 0!==_[p]?_[p]:null}}}class jv extends Zr{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class ru extends ms{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Zu={type:"move"};class hg{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ru,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ru,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new re),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ru,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new re),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,i,c){let d=null,p=null,m=null;const y=this._targetRay,w=this._grip,b=this._hand;if(t&&"visible-blurred"!==i.session.visibilityState){if(b&&t.hand){m=!0;for(const U of t.hand.values()){const F=i.getJointPose(U,c);if(void 0===b.joints[U.jointName]){const X=new ru;X.matrixAutoUpdate=!1,X.visible=!1,b.joints[U.jointName]=X,b.add(X)}const j=b.joints[U.jointName];null!==F&&(j.matrix.fromArray(F.transform.matrix),j.matrix.decompose(j.position,j.rotation,j.scale),j.jointRadius=F.radius),j.visible=null!==F}const R=b.joints["index-finger-tip"].position.distanceTo(b.joints["thumb-tip"].position),k=.02,V=.005;b.inputState.pinching&&R>k+V?(b.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!b.inputState.pinching&&R<=k-V&&(b.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==w&&t.gripSpace&&(p=i.getPose(t.gripSpace,c),null!==p&&(w.matrix.fromArray(p.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),p.linearVelocity?(w.hasLinearVelocity=!0,w.linearVelocity.copy(p.linearVelocity)):w.hasLinearVelocity=!1,p.angularVelocity?(w.hasAngularVelocity=!0,w.angularVelocity.copy(p.angularVelocity)):w.hasAngularVelocity=!1));null!==y&&(d=i.getPose(t.targetRaySpace,c),null===d&&null!==p&&(d=p),null!==d&&(y.matrix.fromArray(d.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),d.linearVelocity?(y.hasLinearVelocity=!0,y.linearVelocity.copy(d.linearVelocity)):y.hasLinearVelocity=!1,d.angularVelocity?(y.hasAngularVelocity=!0,y.angularVelocity.copy(d.angularVelocity)):y.hasAngularVelocity=!1,this.dispatchEvent(Zu)))}return null!==y&&(y.visible=null!==d),null!==w&&(w.visible=null!==p),null!==b&&(b.visible=null!==m),this}}class Dy extends ee{constructor(t,i,c,d,p,m,y,w,b,C){if((C=void 0!==C?C:Te)!==Te&&C!==Ve)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===c&&C===Te&&(c=ai),void 0===c&&C===Ve&&(c=Mo),super(null,d,p,m,y,w,C,c,b),this.isDepthTexture=!0,this.image={width:t,height:i},this.magFilter=void 0!==y?y:Xn,this.minFilter=void 0!==w?w:Xn,this.flipY=!1,this.generateMipmaps=!1}}class Ay extends Ro{constructor(t,i){super();const c=this;let d=null,p=1,m=null,y="local-floor",w=null,b=null,C=null,D=null,R=null,k=null;const V=i.getContextAttributes();let U=null,F=null;const j=[],X=[],Y=new Zr;Y.layers.enable(1),Y.viewport=new pe;const K=new Zr;K.layers.enable(2),K.viewport=new pe;const ie=[Y,K],ue=new jv;ue.layers.enable(1),ue.layers.enable(2);let ve=null,te=null;function fe(Re){const Fe=X.indexOf(Re.inputSource);if(-1===Fe)return;const It=j[Fe];void 0!==It&&It.dispatchEvent({type:Re.type,data:Re.inputSource})}function be(){d.removeEventListener("select",fe),d.removeEventListener("selectstart",fe),d.removeEventListener("selectend",fe),d.removeEventListener("squeeze",fe),d.removeEventListener("squeezestart",fe),d.removeEventListener("squeezeend",fe),d.removeEventListener("end",be),d.removeEventListener("inputsourceschange",qe);for(let Re=0;Re<j.length;Re++){const Fe=X[Re];null!==Fe&&(X[Re]=null,j[Re].disconnect(Fe))}ve=null,te=null,t.setRenderTarget(U),R=null,D=null,C=null,d=null,F=null,it.stop(),c.isPresenting=!1,c.dispatchEvent({type:"sessionend"})}function qe(Re){for(let Fe=0;Fe<Re.removed.length;Fe++){const It=Re.removed[Fe],yt=X.indexOf(It);yt>=0&&(X[yt]=null,j[yt].dispatchEvent({type:"disconnected",data:It}))}for(let Fe=0;Fe<Re.added.length;Fe++){const It=Re.added[Fe];let yt=X.indexOf(It);if(-1===yt){for(let ln=0;ln<j.length;ln++){if(ln>=X.length){X.push(It),yt=ln;break}if(null===X[ln]){X[ln]=It,yt=ln;break}}if(-1===yt)break}const Gt=j[yt];Gt&&Gt.dispatchEvent({type:"connected",data:It})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Re){let Fe=j[Re];return void 0===Fe&&(Fe=new hg,j[Re]=Fe),Fe.getTargetRaySpace()},this.getControllerGrip=function(Re){let Fe=j[Re];return void 0===Fe&&(Fe=new hg,j[Re]=Fe),Fe.getGripSpace()},this.getHand=function(Re){let Fe=j[Re];return void 0===Fe&&(Fe=new hg,j[Re]=Fe),Fe.getHandSpace()},this.setFramebufferScaleFactor=function(Re){p=Re,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Re){y=Re,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return w||m},this.setReferenceSpace=function(Re){w=Re},this.getBaseLayer=function(){return null!==D?D:R},this.getBinding=function(){return C},this.getFrame=function(){return k},this.getSession=function(){return d},this.setSession=function(){var Re=(0,Ft.Z)(function*(Fe){if(d=Fe,null!==d){if(U=t.getRenderTarget(),d.addEventListener("select",fe),d.addEventListener("selectstart",fe),d.addEventListener("selectend",fe),d.addEventListener("squeeze",fe),d.addEventListener("squeezestart",fe),d.addEventListener("squeezeend",fe),d.addEventListener("end",be),d.addEventListener("inputsourceschange",qe),!0!==V.xrCompatible&&(yield i.makeXRCompatible()),void 0===d.renderState.layers||!1===t.capabilities.isWebGL2)R=new XRWebGLLayer(d,i,{antialias:void 0!==d.renderState.layers||V.antialias,alpha:V.alpha,depth:V.depth,stencil:V.stencil,framebufferScaleFactor:p}),d.updateRenderState({baseLayer:R}),F=new Le(R.framebufferWidth,R.framebufferHeight,{format:we,type:Ws,encoding:t.outputEncoding,stencilBuffer:V.stencil});else{let It=null,yt=null,Gt=null;V.depth&&(Gt=V.stencil?35056:33190,It=V.stencil?Ve:Te,yt=V.stencil?Mo:ai);const ln={colorFormat:32856,depthFormat:Gt,scaleFactor:p};C=new XRWebGLBinding(d,i),D=C.createProjectionLayer(ln),d.updateRenderState({layers:[D]}),F=new Le(D.textureWidth,D.textureHeight,{format:we,type:Ws,depthTexture:new Dy(D.textureWidth,D.textureHeight,yt,void 0,void 0,void 0,void 0,void 0,void 0,It),stencilBuffer:V.stencil,encoding:t.outputEncoding,samples:V.antialias?4:0}),t.properties.get(F).__ignoreDepthValues=D.ignoreDepthValues}F.isXRRenderTarget=!0,this.setFoveation(1),w=null,m=yield d.requestReferenceSpace(y),it.setContext(d),it.start(),c.isPresenting=!0,c.dispatchEvent({type:"sessionstart"})}});return function(Fe){return Re.apply(this,arguments)}}();const gt=new re,$e=new re;function Qe(Re,Fe){null===Fe?Re.matrixWorld.copy(Re.matrix):Re.matrixWorld.multiplyMatrices(Fe.matrixWorld,Re.matrix),Re.matrixWorldInverse.copy(Re.matrixWorld).invert()}this.updateCamera=function(Re){if(null===d)return;ue.near=K.near=Y.near=Re.near,ue.far=K.far=Y.far=Re.far,(ve!==ue.near||te!==ue.far)&&(d.updateRenderState({depthNear:ue.near,depthFar:ue.far}),ve=ue.near,te=ue.far);const Fe=Re.parent,It=ue.cameras;Qe(ue,Fe);for(let Gt=0;Gt<It.length;Gt++)Qe(It[Gt],Fe);ue.matrixWorld.decompose(ue.position,ue.quaternion,ue.scale),Re.matrix.copy(ue.matrix),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale);const yt=Re.children;for(let Gt=0,ln=yt.length;Gt<ln;Gt++)yt[Gt].updateMatrixWorld(!0);2===It.length?function Ie(Re,Fe,It){gt.setFromMatrixPosition(Fe.matrixWorld),$e.setFromMatrixPosition(It.matrixWorld);const yt=gt.distanceTo($e),Gt=Fe.projectionMatrix.elements,ln=It.projectionMatrix.elements,Gn=Gt[14]/(Gt[10]-1),st=Gt[14]/(Gt[10]+1),vr=(Gt[9]+1)/Gt[5],Rn=(Gt[9]-1)/Gt[5],ir=(Gt[8]-1)/Gt[0],qt=(ln[8]+1)/ln[0],Tr=Gn*ir,ct=Gn*qt,rt=yt/(-ir+qt),Ot=rt*-ir;Fe.matrixWorld.decompose(Re.position,Re.quaternion,Re.scale),Re.translateX(Ot),Re.translateZ(rt),Re.matrixWorld.compose(Re.position,Re.quaternion,Re.scale),Re.matrixWorldInverse.copy(Re.matrixWorld).invert();const hn=Gn+rt,Zt=st+rt;Re.projectionMatrix.makePerspective(Tr-Ot,ct+(yt-Ot),vr*st/Zt*hn,Rn*st/Zt*hn,hn,Zt)}(ue,Y,K):ue.projectionMatrix.copy(Y.projectionMatrix)},this.getCamera=function(){return ue},this.getFoveation=function(){return null!==D?D.fixedFoveation:null!==R?R.fixedFoveation:void 0},this.setFoveation=function(Re){null!==D&&(D.fixedFoveation=Re),null!==R&&void 0!==R.fixedFoveation&&(R.fixedFoveation=Re)};let lt=null;const it=new Vd;it.setAnimationLoop(function Mt(Re,Fe){if(b=Fe.getViewerPose(w||m),k=Fe,null!==b){const It=b.views;null!==R&&(t.setRenderTargetFramebuffer(F,R.framebuffer),t.setRenderTarget(F));let yt=!1;It.length!==ue.cameras.length&&(ue.cameras.length=0,yt=!0);for(let Gt=0;Gt<It.length;Gt++){const ln=It[Gt];let Gn=null;if(null!==R)Gn=R.getViewport(ln);else{const vr=C.getViewSubImage(D,ln);Gn=vr.viewport,0===Gt&&(t.setRenderTargetTextures(F,vr.colorTexture,D.ignoreDepthValues?void 0:vr.depthStencilTexture),t.setRenderTarget(F))}let st=ie[Gt];void 0===st&&(st=new Zr,st.layers.enable(Gt),st.viewport=new pe,ie[Gt]=st),st.matrix.fromArray(ln.transform.matrix),st.projectionMatrix.fromArray(ln.projectionMatrix),st.viewport.set(Gn.x,Gn.y,Gn.width,Gn.height),0===Gt&&ue.matrix.copy(st.matrix),!0===yt&&ue.cameras.push(st)}}for(let It=0;It<j.length;It++){const yt=X[It],Gt=j[It];null!==yt&&void 0!==Gt&&Gt.update(yt,Fe,w||m)}lt&&lt(Re,Fe),k=null}),this.setAnimationLoop=function(Re){lt=Re},this.dispose=function(){}}}function qv(_,t){function d(U,F){U.opacity.value=F.opacity,F.color&&U.diffuse.value.copy(F.color),F.emissive&&U.emissive.value.copy(F.emissive).multiplyScalar(F.emissiveIntensity),F.map&&(U.map.value=F.map),F.alphaMap&&(U.alphaMap.value=F.alphaMap),F.bumpMap&&(U.bumpMap.value=F.bumpMap,U.bumpScale.value=F.bumpScale,1===F.side&&(U.bumpScale.value*=-1)),F.displacementMap&&(U.displacementMap.value=F.displacementMap,U.displacementScale.value=F.displacementScale,U.displacementBias.value=F.displacementBias),F.emissiveMap&&(U.emissiveMap.value=F.emissiveMap),F.normalMap&&(U.normalMap.value=F.normalMap,U.normalScale.value.copy(F.normalScale),1===F.side&&U.normalScale.value.negate()),F.specularMap&&(U.specularMap.value=F.specularMap),F.alphaTest>0&&(U.alphaTest.value=F.alphaTest);const j=t.get(F).envMap;if(j&&(U.envMap.value=j,U.flipEnvMap.value=j.isCubeTexture&&!1===j.isRenderTargetTexture?-1:1,U.reflectivity.value=F.reflectivity,U.ior.value=F.ior,U.refractionRatio.value=F.refractionRatio),F.lightMap){U.lightMap.value=F.lightMap;const K=!0!==_.physicallyCorrectLights?Math.PI:1;U.lightMapIntensity.value=F.lightMapIntensity*K}let X,Y;F.aoMap&&(U.aoMap.value=F.aoMap,U.aoMapIntensity.value=F.aoMapIntensity),F.map?X=F.map:F.specularMap?X=F.specularMap:F.displacementMap?X=F.displacementMap:F.normalMap?X=F.normalMap:F.bumpMap?X=F.bumpMap:F.roughnessMap?X=F.roughnessMap:F.metalnessMap?X=F.metalnessMap:F.alphaMap?X=F.alphaMap:F.emissiveMap?X=F.emissiveMap:F.clearcoatMap?X=F.clearcoatMap:F.clearcoatNormalMap?X=F.clearcoatNormalMap:F.clearcoatRoughnessMap?X=F.clearcoatRoughnessMap:F.iridescenceMap?X=F.iridescenceMap:F.iridescenceThicknessMap?X=F.iridescenceThicknessMap:F.specularIntensityMap?X=F.specularIntensityMap:F.specularColorMap?X=F.specularColorMap:F.transmissionMap?X=F.transmissionMap:F.thicknessMap?X=F.thicknessMap:F.sheenColorMap?X=F.sheenColorMap:F.sheenRoughnessMap&&(X=F.sheenRoughnessMap),void 0!==X&&(X.isWebGLRenderTarget&&(X=X.texture),!0===X.matrixAutoUpdate&&X.updateMatrix(),U.uvTransform.value.copy(X.matrix)),F.aoMap?Y=F.aoMap:F.lightMap&&(Y=F.lightMap),void 0!==Y&&(Y.isWebGLRenderTarget&&(Y=Y.texture),!0===Y.matrixAutoUpdate&&Y.updateMatrix(),U.uv2Transform.value.copy(Y.matrix))}return{refreshFogUniforms:function i(U,F){U.fogColor.value.copy(F.color),F.isFog?(U.fogNear.value=F.near,U.fogFar.value=F.far):F.isFogExp2&&(U.fogDensity.value=F.density)},refreshMaterialUniforms:function c(U,F,j,X,Y){F.isMeshBasicMaterial||F.isMeshLambertMaterial?d(U,F):F.isMeshToonMaterial?(d(U,F),function C(U,F){F.gradientMap&&(U.gradientMap.value=F.gradientMap)}(U,F)):F.isMeshPhongMaterial?(d(U,F),function b(U,F){U.specular.value.copy(F.specular),U.shininess.value=Math.max(F.shininess,1e-4)}(U,F)):F.isMeshStandardMaterial?(d(U,F),function D(U,F){U.roughness.value=F.roughness,U.metalness.value=F.metalness,F.roughnessMap&&(U.roughnessMap.value=F.roughnessMap),F.metalnessMap&&(U.metalnessMap.value=F.metalnessMap),t.get(F).envMap&&(U.envMapIntensity.value=F.envMapIntensity)}(U,F),F.isMeshPhysicalMaterial&&function R(U,F,j){U.ior.value=F.ior,F.sheen>0&&(U.sheenColor.value.copy(F.sheenColor).multiplyScalar(F.sheen),U.sheenRoughness.value=F.sheenRoughness,F.sheenColorMap&&(U.sheenColorMap.value=F.sheenColorMap),F.sheenRoughnessMap&&(U.sheenRoughnessMap.value=F.sheenRoughnessMap)),F.clearcoat>0&&(U.clearcoat.value=F.clearcoat,U.clearcoatRoughness.value=F.clearcoatRoughness,F.clearcoatMap&&(U.clearcoatMap.value=F.clearcoatMap),F.clearcoatRoughnessMap&&(U.clearcoatRoughnessMap.value=F.clearcoatRoughnessMap),F.clearcoatNormalMap&&(U.clearcoatNormalScale.value.copy(F.clearcoatNormalScale),U.clearcoatNormalMap.value=F.clearcoatNormalMap,1===F.side&&U.clearcoatNormalScale.value.negate())),F.iridescence>0&&(U.iridescence.value=F.iridescence,U.iridescenceIOR.value=F.iridescenceIOR,U.iridescenceThicknessMinimum.value=F.iridescenceThicknessRange[0],U.iridescenceThicknessMaximum.value=F.iridescenceThicknessRange[1],F.iridescenceMap&&(U.iridescenceMap.value=F.iridescenceMap),F.iridescenceThicknessMap&&(U.iridescenceThicknessMap.value=F.iridescenceThicknessMap)),F.transmission>0&&(U.transmission.value=F.transmission,U.transmissionSamplerMap.value=j.texture,U.transmissionSamplerSize.value.set(j.width,j.height),F.transmissionMap&&(U.transmissionMap.value=F.transmissionMap),U.thickness.value=F.thickness,F.thicknessMap&&(U.thicknessMap.value=F.thicknessMap),U.attenuationDistance.value=F.attenuationDistance,U.attenuationColor.value.copy(F.attenuationColor)),U.specularIntensity.value=F.specularIntensity,U.specularColor.value.copy(F.specularColor),F.specularIntensityMap&&(U.specularIntensityMap.value=F.specularIntensityMap),F.specularColorMap&&(U.specularColorMap.value=F.specularColorMap)}(U,F,Y)):F.isMeshMatcapMaterial?(d(U,F),function k(U,F){F.matcap&&(U.matcap.value=F.matcap)}(U,F)):F.isMeshDepthMaterial?d(U,F):F.isMeshDistanceMaterial?(d(U,F),function V(U,F){U.referencePosition.value.copy(F.referencePosition),U.nearDistance.value=F.nearDistance,U.farDistance.value=F.farDistance}(U,F)):F.isMeshNormalMaterial?d(U,F):F.isLineBasicMaterial?(function p(U,F){U.diffuse.value.copy(F.color),U.opacity.value=F.opacity}(U,F),F.isLineDashedMaterial&&function m(U,F){U.dashSize.value=F.dashSize,U.totalSize.value=F.dashSize+F.gapSize,U.scale.value=F.scale}(U,F)):F.isPointsMaterial?function y(U,F,j,X){let Y;U.diffuse.value.copy(F.color),U.opacity.value=F.opacity,U.size.value=F.size*j,U.scale.value=.5*X,F.map&&(U.map.value=F.map),F.alphaMap&&(U.alphaMap.value=F.alphaMap),F.alphaTest>0&&(U.alphaTest.value=F.alphaTest),F.map?Y=F.map:F.alphaMap&&(Y=F.alphaMap),void 0!==Y&&(!0===Y.matrixAutoUpdate&&Y.updateMatrix(),U.uvTransform.value.copy(Y.matrix))}(U,F,j,X):F.isSpriteMaterial?function w(U,F){let j;U.diffuse.value.copy(F.color),U.opacity.value=F.opacity,U.rotation.value=F.rotation,F.map&&(U.map.value=F.map),F.alphaMap&&(U.alphaMap.value=F.alphaMap),F.alphaTest>0&&(U.alphaTest.value=F.alphaTest),F.map?j=F.map:F.alphaMap&&(j=F.alphaMap),void 0!==j&&(!0===j.matrixAutoUpdate&&j.updateMatrix(),U.uvTransform.value.copy(j.matrix))}(U,F):F.isShadowMaterial?(U.color.value.copy(F.color),U.opacity.value=F.opacity):F.isShaderMaterial&&(F.uniformsNeedUpdate=!1)}}}function ob(_,t,i,c){let d={},p={},m=[];const y=i.isWebGL2?_.getParameter(35375):0;function k(X,Y,K){const ie=X.value;if(void 0===K[Y])return K[Y]="number"==typeof ie?ie:ie.clone(),!0;if("number"==typeof ie){if(K[Y]!==ie)return K[Y]=ie,!0}else{const ue=K[Y];if(!1===ue.equals(ie))return ue.copy(ie),!0}return!1}function U(X){const Y=X.value,K={boundary:0,storage:0};return"number"==typeof Y?(K.boundary=4,K.storage=4):Y.isVector2?(K.boundary=8,K.storage=8):Y.isVector3||Y.isColor?(K.boundary=16,K.storage=12):Y.isVector4?(K.boundary=16,K.storage=16):Y.isMatrix3?(K.boundary=48,K.storage=48):Y.isMatrix4?(K.boundary=64,K.storage=64):Y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Y),K}function F(X){const Y=X.target;Y.removeEventListener("dispose",F);const K=m.indexOf(Y.__bindingPointIndex);m.splice(K,1),_.deleteBuffer(d[Y.id]),delete d[Y.id],delete p[Y.id]}return{bind:function w(X,Y){c.uniformBlockBinding(X,Y.program)},update:function b(X,Y){let K=d[X.id];void 0===K&&(function V(X){const Y=X.uniforms;let K=0;let ue=0;for(let ve=0,te=Y.length;ve<te;ve++){const fe=Y[ve],be=U(fe);if(fe.__data=new Float32Array(be.storage/Float32Array.BYTES_PER_ELEMENT),fe.__offset=K,ve>0){ue=K%16;const qe=16-ue;0!==ue&&qe-be.boundary<0&&(K+=16-ue,fe.__offset=K)}K+=be.storage}ue=K%16,ue>0&&(K+=16-ue),X.__size=K,X.__cache={}}(X),K=function C(X){const Y=function D(){for(let X=0;X<y;X++)if(-1===m.indexOf(X))return m.push(X),X;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();X.__bindingPointIndex=Y;const K=_.createBuffer(),ie=X.__size,ue=X.usage;return _.bindBuffer(35345,K),_.bufferData(35345,ie,ue),_.bindBuffer(35345,null),_.bindBufferBase(35345,Y,K),K}(X),d[X.id]=K,X.addEventListener("dispose",F)),c.updateUBOMapping(X,Y.program);const ue=t.render.frame;p[X.id]!==ue&&(function R(X){const K=X.uniforms,ie=X.__cache;_.bindBuffer(35345,d[X.id]);for(let ue=0,ve=K.length;ue<ve;ue++){const te=K[ue];if(!0===k(te,ue,ie)){const fe=te.value,be=te.__offset;"number"==typeof fe?(te.__data[0]=fe,_.bufferSubData(35345,be,te.__data)):(te.value.isMatrix3?(te.__data[0]=te.value.elements[0],te.__data[1]=te.value.elements[1],te.__data[2]=te.value.elements[2],te.__data[3]=te.value.elements[0],te.__data[4]=te.value.elements[3],te.__data[5]=te.value.elements[4],te.__data[6]=te.value.elements[5],te.__data[7]=te.value.elements[0],te.__data[8]=te.value.elements[6],te.__data[9]=te.value.elements[7],te.__data[10]=te.value.elements[8],te.__data[11]=te.value.elements[0]):fe.toArray(te.__data),_.bufferSubData(35345,be,te.__data))}}_.bindBuffer(35345,null)}(X),p[X.id]=ue)},dispose:function j(){for(const X in d)_.deleteBuffer(d[X]);m=[],d={},p={}}}}function fg(_={}){this.isWebGLRenderer=!0;const t=void 0!==_.canvas?_.canvas:function Ry(){const _=sa("canvas");return _.style.display="block",_}(),i=void 0!==_.context?_.context:null,c=void 0===_.depth||_.depth,d=void 0===_.stencil||_.stencil,p=void 0!==_.antialias&&_.antialias,m=void 0===_.premultipliedAlpha||_.premultipliedAlpha,y=void 0!==_.preserveDrawingBuffer&&_.preserveDrawingBuffer,w=void 0!==_.powerPreference?_.powerPreference:"default",b=void 0!==_.failIfMajorPerformanceCaveat&&_.failIfMajorPerformanceCaveat;let C;C=null!==i?i.getContextAttributes().alpha:void 0!==_.alpha&&_.alpha;let D=null,R=null;const k=[],V=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ua,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const U=this;let F=!1,j=0,X=0,Y=null,K=-1,ie=null;const ue=new pe,ve=new pe;let te=null,fe=t.width,be=t.height,qe=1,gt=null,$e=null;const Ie=new pe(0,0,fe,be),Qe=new pe(0,0,fe,be);let lt=!1;const Mt=new Yi;let it=!1,Re=!1,Fe=null;const It=new qn,yt=new Xe,Gt=new re,ln={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Gn(){return null===Y?qe:1}let Rn,ir,qt,Tr,ct,rt,Ot,hn,Zt,lr,kn,Pn,di,ri,me,oe,Ge,xt,Pt,Jt,Fn,en,nt,En,st=i;function vr(de,Oe){for(let Ye=0;Ye<de.length;Ye++){const et=t.getContext(de[Ye],Oe);if(null!==et)return et}return null}try{const de={alpha:!0,depth:c,stencil:d,antialias:p,premultipliedAlpha:m,preserveDrawingBuffer:y,powerPreference:w,failIfMajorPerformanceCaveat:b};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r146"),t.addEventListener("webglcontextlost",In,!1),t.addEventListener("webglcontextrestored",Tn,!1),t.addEventListener("webglcontextcreationerror",Vr,!1),null===st){const Oe=["webgl2","webgl","experimental-webgl"];if(!0===U.isWebGL1Renderer&&Oe.shift(),st=vr(Oe,de),null===st)throw vr(Oe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===st.getShaderPrecisionFormat&&(st.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(de){throw console.error("THREE.WebGLRenderer: "+de.message),de}function Hn(){Rn=new eu(st),ir=new Rv(st,Rn,_),Rn.init(ir),en=new sb(st,Rn,ir),qt=new tu(st,Rn,ir),Tr=new HE,ct=new ug,rt=new nu(st,Rn,qt,ct,ir,en,Tr),Ot=new GE(U),hn=new Lv(U),Zt=new Rp(st,ir),nt=new zE(st,Rn,Zt,ir),lr=new Hw(st,Zt,Tr,nt),kn=new $w(st,lr,Zt,Tr),Pt=new Ww(st,ir,rt),oe=new ry(ct),Pn=new Hv(U,Ot,hn,Rn,ir,nt,oe),di=new qv(U,ct),ri=new Sy,me=new My(Rn,ir),xt=new ny(U,Ot,hn,qt,kn,C,m),Ge=new zn(U,kn,ir),En=new ob(st,Tr,ir,qt),Jt=new zw(st,Rn,Tr,ir),Fn=new Wu(st,Rn,Tr,ir),Tr.programs=Pn.programs,U.capabilities=ir,U.extensions=Rn,U.properties=ct,U.renderLists=ri,U.shadowMap=Ge,U.state=qt,U.info=Tr}Hn();const mn=new Ay(U,st);function In(de){de.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function Tn(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1;const de=Tr.autoReset,Oe=Ge.enabled,Ye=Ge.autoUpdate,Ce=Ge.needsUpdate,et=Ge.type;Hn(),Tr.autoReset=de,Ge.enabled=Oe,Ge.autoUpdate=Ye,Ge.needsUpdate=Ce,Ge.type=et}function Vr(de){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",de.statusMessage)}function yi(de){const Oe=de.target;Oe.removeEventListener("dispose",yi),function ss(de){(function Se(de){const Oe=ct.get(de).programs;void 0!==Oe&&(Oe.forEach(function(Ye){Pn.releaseProgram(Ye)}),de.isShaderMaterial&&Pn.releaseShaderCache(de))})(de),ct.remove(de)}(Oe)}this.xr=mn,this.getContext=function(){return st},this.getContextAttributes=function(){return st.getContextAttributes()},this.forceContextLoss=function(){const de=Rn.get("WEBGL_lose_context");de&&de.loseContext()},this.forceContextRestore=function(){const de=Rn.get("WEBGL_lose_context");de&&de.restoreContext()},this.getPixelRatio=function(){return qe},this.setPixelRatio=function(de){void 0!==de&&(qe=de,this.setSize(fe,be,!1))},this.getSize=function(de){return de.set(fe,be)},this.setSize=function(de,Oe,Ye){mn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(fe=de,be=Oe,t.width=Math.floor(de*qe),t.height=Math.floor(Oe*qe),!1!==Ye&&(t.style.width=de+"px",t.style.height=Oe+"px"),this.setViewport(0,0,de,Oe))},this.getDrawingBufferSize=function(de){return de.set(fe*qe,be*qe).floor()},this.setDrawingBufferSize=function(de,Oe,Ye){fe=de,be=Oe,qe=Ye,t.width=Math.floor(de*Ye),t.height=Math.floor(Oe*Ye),this.setViewport(0,0,de,Oe)},this.getCurrentViewport=function(de){return de.copy(ue)},this.getViewport=function(de){return de.copy(Ie)},this.setViewport=function(de,Oe,Ye,Ce){de.isVector4?Ie.set(de.x,de.y,de.z,de.w):Ie.set(de,Oe,Ye,Ce),qt.viewport(ue.copy(Ie).multiplyScalar(qe).floor())},this.getScissor=function(de){return de.copy(Qe)},this.setScissor=function(de,Oe,Ye,Ce){de.isVector4?Qe.set(de.x,de.y,de.z,de.w):Qe.set(de,Oe,Ye,Ce),qt.scissor(ve.copy(Qe).multiplyScalar(qe).floor())},this.getScissorTest=function(){return lt},this.setScissorTest=function(de){qt.setScissorTest(lt=de)},this.setOpaqueSort=function(de){gt=de},this.setTransparentSort=function(de){$e=de},this.getClearColor=function(de){return de.copy(xt.getClearColor())},this.setClearColor=function(){xt.setClearColor.apply(xt,arguments)},this.getClearAlpha=function(){return xt.getClearAlpha()},this.setClearAlpha=function(){xt.setClearAlpha.apply(xt,arguments)},this.clear=function(de=!0,Oe=!0,Ye=!0){let Ce=0;de&&(Ce|=16384),Oe&&(Ce|=256),Ye&&(Ce|=1024),st.clear(Ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",In,!1),t.removeEventListener("webglcontextrestored",Tn,!1),t.removeEventListener("webglcontextcreationerror",Vr,!1),ri.dispose(),me.dispose(),ct.dispose(),Ot.dispose(),hn.dispose(),kn.dispose(),nt.dispose(),En.dispose(),Pn.dispose(),mn.dispose(),mn.removeEventListener("sessionstart",an),mn.removeEventListener("sessionend",_n),Fe&&(Fe.dispose(),Fe=null),qr.stop()},this.renderBufferDirect=function(de,Oe,Ye,Ce,et,sn){null===Oe&&(Oe=ln);const Kn=et.isMesh&&et.matrixWorld.determinant()<0,pr=function qb(de,Oe,Ye,Ce,et){!0!==Oe.isScene&&(Oe=ln),rt.resetTextureUnits();const sn=Oe.fog,pr=null===Y?U.outputEncoding:!0===Y.isXRRenderTarget?Y.texture.encoding:Ua,sr=(Ce.isMeshStandardMaterial?hn:Ot).get(Ce.envMap||(Ce.isMeshStandardMaterial?Oe.environment:null)),Br=!0===Ce.vertexColors&&!!Ye.attributes.color&&4===Ye.attributes.color.itemSize,mr=!!Ce.normalMap&&!!Ye.attributes.tangent,Mr=!!Ye.morphAttributes.position,Pi=!!Ye.morphAttributes.normal,pd=!!Ye.morphAttributes.color,Rh=Ce.toneMapped?U.toneMapping:0,Ph=Ye.morphAttributes.position||Ye.morphAttributes.normal||Ye.morphAttributes.color,Wc=void 0!==Ph?Ph.length:0,Rr=ct.get(Ce),Lh=R.state.lights;!0!==it||!0!==Re&&de===ie||oe.setState(Ce,de,de===ie&&Ce.id===K);let Ei=!1;Ce.version===Rr.__version?(Rr.needsLights&&Rr.lightsStateVersion!==Lh.state.version||Rr.outputEncoding!==pr||et.isInstancedMesh&&!1===Rr.instancing||!et.isInstancedMesh&&!0===Rr.instancing||et.isSkinnedMesh&&!1===Rr.skinning||!et.isSkinnedMesh&&!0===Rr.skinning||Rr.envMap!==sr||!0===Ce.fog&&Rr.fog!==sn||void 0!==Rr.numClippingPlanes&&(Rr.numClippingPlanes!==oe.numPlanes||Rr.numIntersection!==oe.numIntersection)||Rr.vertexAlphas!==Br||Rr.vertexTangents!==mr||Rr.morphTargets!==Mr||Rr.morphNormals!==Pi||Rr.morphColors!==pd||Rr.toneMapping!==Rh||!0===ir.isWebGL2&&Rr.morphTargetsCount!==Wc)&&(Ei=!0):(Ei=!0,Rr.__version=Ce.version);let _a=Rr.currentProgram;!0===Ei&&(_a=Bs(Ce,Oe,et));let yu=!1,cm=!1,K0=!1;const vo=_a.getUniforms(),_u=Rr.uniforms;if(qt.useProgram(_a.program)&&(yu=!0,cm=!0,K0=!0),Ce.id!==K&&(K=Ce.id,cm=!0),yu||ie!==de){if(vo.setValue(st,"projectionMatrix",de.projectionMatrix),ir.logarithmicDepthBuffer&&vo.setValue(st,"logDepthBufFC",2/(Math.log(de.far+1)/Math.LN2)),ie!==de&&(ie=de,cm=!0,K0=!0),Ce.isShaderMaterial||Ce.isMeshPhongMaterial||Ce.isMeshToonMaterial||Ce.isMeshStandardMaterial||Ce.envMap){const Ho=vo.map.cameraPosition;void 0!==Ho&&Ho.setValue(st,Gt.setFromMatrixPosition(de.matrixWorld))}(Ce.isMeshPhongMaterial||Ce.isMeshToonMaterial||Ce.isMeshLambertMaterial||Ce.isMeshBasicMaterial||Ce.isMeshStandardMaterial||Ce.isShaderMaterial)&&vo.setValue(st,"isOrthographic",!0===de.isOrthographicCamera),(Ce.isMeshPhongMaterial||Ce.isMeshToonMaterial||Ce.isMeshLambertMaterial||Ce.isMeshBasicMaterial||Ce.isMeshStandardMaterial||Ce.isShaderMaterial||Ce.isShadowMaterial||et.isSkinnedMesh)&&vo.setValue(st,"viewMatrix",de.matrixWorldInverse)}if(et.isSkinnedMesh){vo.setOptional(st,et,"bindMatrix"),vo.setOptional(st,et,"bindMatrixInverse");const Ho=et.skeleton;Ho&&(ir.floatVertexTextures?(null===Ho.boneTexture&&Ho.computeBoneTexture(),vo.setValue(st,"boneTexture",Ho.boneTexture,rt),vo.setValue(st,"boneTextureSize",Ho.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const rp=Ye.morphAttributes;if((void 0!==rp.position||void 0!==rp.normal||void 0!==rp.color&&!0===ir.isWebGL2)&&Pt.update(et,Ye,Ce,_a),(cm||Rr.receiveShadow!==et.receiveShadow)&&(Rr.receiveShadow=et.receiveShadow,vo.setValue(st,"receiveShadow",et.receiveShadow)),Ce.isMeshGouraudMaterial&&null!==Ce.envMap&&(_u.envMap.value=sr,_u.flipEnvMap.value=sr.isCubeTexture&&!1===sr.isRenderTargetTexture?-1:1),cm&&(vo.setValue(st,"toneMappingExposure",U.toneMappingExposure),Rr.needsLights&&function Ah(de,Oe){de.ambientLightColor.needsUpdate=Oe,de.lightProbe.needsUpdate=Oe,de.directionalLights.needsUpdate=Oe,de.directionalLightShadows.needsUpdate=Oe,de.pointLights.needsUpdate=Oe,de.pointLightShadows.needsUpdate=Oe,de.spotLights.needsUpdate=Oe,de.spotLightShadows.needsUpdate=Oe,de.rectAreaLights.needsUpdate=Oe,de.hemisphereLights.needsUpdate=Oe}(_u,K0),sn&&!0===Ce.fog&&di.refreshFogUniforms(_u,sn),di.refreshMaterialUniforms(_u,Ce,qe,be,Fe),ig.upload(st,Rr.uniformsList,_u,rt)),Ce.isShaderMaterial&&!0===Ce.uniformsNeedUpdate&&(ig.upload(st,Rr.uniformsList,_u,rt),Ce.uniformsNeedUpdate=!1),Ce.isSpriteMaterial&&vo.setValue(st,"center",et.center),vo.setValue(st,"modelViewMatrix",et.modelViewMatrix),vo.setValue(st,"normalMatrix",et.normalMatrix),vo.setValue(st,"modelMatrix",et.matrixWorld),Ce.isShaderMaterial||Ce.isRawShaderMaterial){const Ho=Ce.uniformsGroups;for(let ip=0,Y0=Ho.length;ip<Y0;ip++)if(ir.isWebGL2){const Nh=Ho[ip];En.update(Nh,_a),En.bind(Nh,_a)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return _a}(de,Oe,Ye,Ce,et);qt.setMaterial(Ce,Kn);let sr=Ye.index;const Br=Ye.attributes.position;if(null===sr){if(void 0===Br||0===Br.count)return}else if(0===sr.count)return;let mr=1;!0===Ce.wireframe&&(sr=lr.getWireframeAttribute(Ye),mr=2),nt.setup(et,Ce,pr,Ye,sr);let Mr,Pi=Jt;null!==sr&&(Mr=Zt.get(sr),Pi=Fn,Pi.setIndex(Mr));const pd=null!==sr?sr.count:Br.count,Rh=Ye.drawRange.start*mr,Ph=Ye.drawRange.count*mr,Wc=null!==sn?sn.start*mr:0,Rr=null!==sn?sn.count*mr:1/0,Lh=Math.max(Rh,Wc),Ei=Math.min(pd,Rh+Ph,Wc+Rr)-1,_a=Math.max(0,Ei-Lh+1);if(0!==_a){if(et.isMesh)!0===Ce.wireframe?(qt.setLineWidth(Ce.wireframeLinewidth*Gn()),Pi.setMode(1)):Pi.setMode(4);else if(et.isLine){let yu=Ce.linewidth;void 0===yu&&(yu=1),qt.setLineWidth(yu*Gn()),Pi.setMode(et.isLineSegments?1:et.isLineLoop?2:3)}else et.isPoints?Pi.setMode(0):et.isSprite&&Pi.setMode(4);if(et.isInstancedMesh)Pi.renderInstances(Lh,_a,et.count);else if(Ye.isInstancedBufferGeometry){const yu=Math.min(Ye.instanceCount,Ye._maxInstanceCount);Pi.renderInstances(Lh,_a,yu)}else Pi.render(Lh,_a)}},this.compile=function(de,Oe){function Ye(Ce,et,sn){!0===Ce.transparent&&2===Ce.side?(Ce.side=1,Ce.needsUpdate=!0,Bs(Ce,et,sn),Ce.side=0,Ce.needsUpdate=!0,Bs(Ce,et,sn),Ce.side=2):Bs(Ce,et,sn)}R=me.get(de),R.init(),V.push(R),de.traverseVisible(function(Ce){Ce.isLight&&Ce.layers.test(Oe.layers)&&(R.pushLight(Ce),Ce.castShadow&&R.pushShadow(Ce))}),R.setupLights(U.physicallyCorrectLights),de.traverse(function(Ce){const et=Ce.material;if(et)if(Array.isArray(et))for(let sn=0;sn<et.length;sn++)Ye(et[sn],de,Ce);else Ye(et,de,Ce)}),V.pop(),R=null};let Ze=null;function an(){qr.stop()}function _n(){qr.start()}const qr=new Vd;function Zi(de,Oe,Ye,Ce){if(!1===de.visible)return;if(de.layers.test(Oe.layers))if(de.isGroup)Ye=de.renderOrder;else if(de.isLOD)!0===de.autoUpdate&&de.update(Oe);else if(de.isLight)R.pushLight(de),de.castShadow&&R.pushShadow(de);else if(de.isSprite){if(!de.frustumCulled||Mt.intersectsSprite(de)){Ce&&Gt.setFromMatrixPosition(de.matrixWorld).applyMatrix4(It);const Kn=kn.update(de),pr=de.material;pr.visible&&D.push(de,Kn,pr,Ye,Gt.z,null)}}else if((de.isMesh||de.isLine||de.isPoints)&&(de.isSkinnedMesh&&de.skeleton.frame!==Tr.render.frame&&(de.skeleton.update(),de.skeleton.frame=Tr.render.frame),!de.frustumCulled||Mt.intersectsObject(de))){Ce&&Gt.setFromMatrixPosition(de.matrixWorld).applyMatrix4(It);const Kn=kn.update(de),pr=de.material;if(Array.isArray(pr)){const sr=Kn.groups;for(let Br=0,mr=sr.length;Br<mr;Br++){const Mr=sr[Br],Pi=pr[Mr.materialIndex];Pi&&Pi.visible&&D.push(de,Kn,Pi,Ye,Gt.z,Mr)}}else pr.visible&&D.push(de,Kn,pr,Ye,Gt.z,null)}const sn=de.children;for(let Kn=0,pr=sn.length;Kn<pr;Kn++)Zi(sn[Kn],Oe,Ye,Ce)}function Us(de,Oe,Ye,Ce){const et=de.opaque,sn=de.transmissive,Kn=de.transparent;R.setupLightsView(Ye),sn.length>0&&function El(de,Oe,Ye){const Ce=ir.isWebGL2;null===Fe&&(Fe=new Le(1,1,{generateMipmaps:!0,type:Rn.has("EXT_color_buffer_half_float")?Qi:Ws,minFilter:1008,samples:Ce&&!0===p?4:0})),U.getDrawingBufferSize(yt),Ce?Fe.setSize(yt.x,yt.y):Fe.setSize(fr(yt.x),fr(yt.y));const et=U.getRenderTarget();U.setRenderTarget(Fe),U.clear();const sn=U.toneMapping;U.toneMapping=0,ur(de,Oe,Ye),U.toneMapping=sn,rt.updateMultisampleRenderTarget(Fe),rt.updateRenderTargetMipmap(Fe),U.setRenderTarget(et)}(et,Oe,Ye),Ce&&qt.viewport(ue.copy(Ce)),et.length>0&&ur(et,Oe,Ye),sn.length>0&&ur(sn,Oe,Ye),Kn.length>0&&ur(Kn,Oe,Ye),qt.buffers.depth.setTest(!0),qt.buffers.depth.setMask(!0),qt.buffers.color.setMask(!0),qt.setPolygonOffset(!1)}function ur(de,Oe,Ye){const Ce=!0===Oe.isScene?Oe.overrideMaterial:null;for(let et=0,sn=de.length;et<sn;et++){const Kn=de[et],pr=Kn.object,sr=Kn.geometry,Br=null===Ce?Kn.material:Ce,mr=Kn.group;pr.layers.test(Ye.layers)&&os(pr,Oe,Ye,sr,Br,mr)}}function os(de,Oe,Ye,Ce,et,sn){de.onBeforeRender(U,Oe,Ye,Ce,et,sn),de.modelViewMatrix.multiplyMatrices(Ye.matrixWorldInverse,de.matrixWorld),de.normalMatrix.getNormalMatrix(de.modelViewMatrix),et.onBeforeRender(U,Oe,Ye,Ce,de,sn),!0===et.transparent&&2===et.side?(et.side=1,et.needsUpdate=!0,U.renderBufferDirect(Ye,Oe,Ce,et,de,sn),et.side=0,et.needsUpdate=!0,U.renderBufferDirect(Ye,Oe,Ce,et,de,sn),et.side=2):U.renderBufferDirect(Ye,Oe,Ce,et,de,sn),de.onAfterRender(U,Oe,Ye,Ce,et,sn)}function Bs(de,Oe,Ye){!0!==Oe.isScene&&(Oe=ln);const Ce=ct.get(de),et=R.state.lights,Kn=et.state.version,pr=Pn.getParameters(de,et.state,R.state.shadowsArray,Oe,Ye),sr=Pn.getProgramCacheKey(pr);let Br=Ce.programs;Ce.environment=de.isMeshStandardMaterial?Oe.environment:null,Ce.fog=Oe.fog,Ce.envMap=(de.isMeshStandardMaterial?hn:Ot).get(de.envMap||Ce.environment),void 0===Br&&(de.addEventListener("dispose",yi),Br=new Map,Ce.programs=Br);let mr=Br.get(sr);if(void 0!==mr){if(Ce.currentProgram===mr&&Ce.lightsStateVersion===Kn)return am(de,pr),mr}else pr.uniforms=Pn.getUniforms(de),de.onBuild(Ye,pr,U),de.onBeforeCompile(pr,U),mr=Pn.acquireProgram(pr,sr),Br.set(sr,mr),Ce.uniforms=pr.uniforms;const Mr=Ce.uniforms;(!de.isShaderMaterial&&!de.isRawShaderMaterial||!0===de.clipping)&&(Mr.clippingPlanes=oe.uniform),am(de,pr),Ce.needsLights=function q0(de){return de.isMeshLambertMaterial||de.isMeshToonMaterial||de.isMeshPhongMaterial||de.isMeshStandardMaterial||de.isShadowMaterial||de.isShaderMaterial&&!0===de.lights}(de),Ce.lightsStateVersion=Kn,Ce.needsLights&&(Mr.ambientLightColor.value=et.state.ambient,Mr.lightProbe.value=et.state.probe,Mr.directionalLights.value=et.state.directional,Mr.directionalLightShadows.value=et.state.directionalShadow,Mr.spotLights.value=et.state.spot,Mr.spotLightShadows.value=et.state.spotShadow,Mr.rectAreaLights.value=et.state.rectArea,Mr.ltc_1.value=et.state.rectAreaLTC1,Mr.ltc_2.value=et.state.rectAreaLTC2,Mr.pointLights.value=et.state.point,Mr.pointLightShadows.value=et.state.pointShadow,Mr.hemisphereLights.value=et.state.hemi,Mr.directionalShadowMap.value=et.state.directionalShadowMap,Mr.directionalShadowMatrix.value=et.state.directionalShadowMatrix,Mr.spotShadowMap.value=et.state.spotShadowMap,Mr.spotLightMatrix.value=et.state.spotLightMatrix,Mr.spotLightMap.value=et.state.spotLightMap,Mr.pointShadowMap.value=et.state.pointShadowMap,Mr.pointShadowMatrix.value=et.state.pointShadowMatrix);const Pi=mr.getUniforms(),pd=ig.seqWithValue(Pi.seq,Mr);return Ce.currentProgram=mr,Ce.uniformsList=pd,mr}function am(de,Oe){const Ye=ct.get(de);Ye.outputEncoding=Oe.outputEncoding,Ye.instancing=Oe.instancing,Ye.skinning=Oe.skinning,Ye.morphTargets=Oe.morphTargets,Ye.morphNormals=Oe.morphNormals,Ye.morphColors=Oe.morphColors,Ye.morphTargetsCount=Oe.morphTargetsCount,Ye.numClippingPlanes=Oe.numClippingPlanes,Ye.numIntersection=Oe.numClipIntersection,Ye.vertexAlphas=Oe.vertexAlphas,Ye.vertexTangents=Oe.vertexTangents,Ye.toneMapping=Oe.toneMapping}qr.setAnimationLoop(function At(de){Ze&&Ze(de)}),typeof self<"u"&&qr.setContext(self),this.setAnimationLoop=function(de){Ze=de,mn.setAnimationLoop(de),null===de?qr.stop():qr.start()},mn.addEventListener("sessionstart",an),mn.addEventListener("sessionend",_n),this.render=function(de,Oe){if(void 0===Oe||!0===Oe.isCamera){if(!0!==F){if(!0===de.matrixWorldAutoUpdate&&de.updateMatrixWorld(),null===Oe.parent&&!0===Oe.matrixWorldAutoUpdate&&Oe.updateMatrixWorld(),!0===mn.enabled&&!0===mn.isPresenting&&(!0===mn.cameraAutoUpdate&&mn.updateCamera(Oe),Oe=mn.getCamera()),!0===de.isScene&&de.onBeforeRender(U,de,Oe,Y),R=me.get(de,V.length),R.init(),V.push(R),It.multiplyMatrices(Oe.projectionMatrix,Oe.matrixWorldInverse),Mt.setFromProjectionMatrix(It),Re=this.localClippingEnabled,it=oe.init(this.clippingPlanes,Re,Oe),D=ri.get(de,k.length),D.init(),k.push(D),Zi(de,Oe,0,U.sortObjects),D.finish(),!0===U.sortObjects&&D.sort(gt,$e),!0===it&&oe.beginShadows(),Ge.render(R.state.shadowsArray,de,Oe),!0===it&&oe.endShadows(),!0===this.info.autoReset&&this.info.reset(),xt.render(D,de),R.setupLights(U.physicallyCorrectLights),Oe.isArrayCamera){const Ce=Oe.cameras;for(let et=0,sn=Ce.length;et<sn;et++){const Kn=Ce[et];Us(D,de,Kn,Kn.viewport)}}else Us(D,de,Oe);null!==Y&&(rt.updateMultisampleRenderTarget(Y),rt.updateRenderTargetMipmap(Y)),!0===de.isScene&&de.onAfterRender(U,de,Oe),nt.resetDefaultState(),K=-1,ie=null,V.pop(),R=V.length>0?V[V.length-1]:null,k.pop(),D=k.length>0?k[k.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return j},this.getActiveMipmapLevel=function(){return X},this.getRenderTarget=function(){return Y},this.setRenderTargetTextures=function(de,Oe,Ye){ct.get(de.texture).__webglTexture=Oe,ct.get(de.depthTexture).__webglTexture=Ye;const Ce=ct.get(de);Ce.__hasExternalTextures=!0,Ce.__hasExternalTextures&&(Ce.__autoAllocateDepthBuffer=void 0===Ye,Ce.__autoAllocateDepthBuffer||!0===Rn.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ce.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(de,Oe){const Ye=ct.get(de);Ye.__webglFramebuffer=Oe,Ye.__useDefaultFramebuffer=void 0===Oe},this.setRenderTarget=function(de,Oe=0,Ye=0){Y=de,j=Oe,X=Ye;let Ce=!0,et=null,sn=!1,Kn=!1;if(de){const sr=ct.get(de);void 0!==sr.__useDefaultFramebuffer?(qt.bindFramebuffer(36160,null),Ce=!1):void 0===sr.__webglFramebuffer?rt.setupRenderTarget(de):sr.__hasExternalTextures&&rt.rebindTextures(de,ct.get(de.texture).__webglTexture,ct.get(de.depthTexture).__webglTexture);const Br=de.texture;(Br.isData3DTexture||Br.isDataArrayTexture||Br.isCompressedArrayTexture)&&(Kn=!0);const mr=ct.get(de).__webglFramebuffer;de.isWebGLCubeRenderTarget?(et=mr[Oe],sn=!0):et=ir.isWebGL2&&de.samples>0&&!1===rt.useMultisampledRTT(de)?ct.get(de).__webglMultisampledFramebuffer:mr,ue.copy(de.viewport),ve.copy(de.scissor),te=de.scissorTest}else ue.copy(Ie).multiplyScalar(qe).floor(),ve.copy(Qe).multiplyScalar(qe).floor(),te=lt;if(qt.bindFramebuffer(36160,et)&&ir.drawBuffers&&Ce&&qt.drawBuffers(de,et),qt.viewport(ue),qt.scissor(ve),qt.setScissorTest(te),sn){const sr=ct.get(de.texture);st.framebufferTexture2D(36160,36064,34069+Oe,sr.__webglTexture,Ye)}else if(Kn){const sr=ct.get(de.texture);st.framebufferTextureLayer(36160,36064,sr.__webglTexture,Ye||0,Oe||0)}K=-1},this.readRenderTargetPixels=function(de,Oe,Ye,Ce,et,sn,Kn){if(!de||!de.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let pr=ct.get(de).__webglFramebuffer;if(de.isWebGLCubeRenderTarget&&void 0!==Kn&&(pr=pr[Kn]),pr){qt.bindFramebuffer(36160,pr);try{const sr=de.texture,Br=sr.format,mr=sr.type;if(Br!==we&&en.convert(Br)!==st.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Mr=mr===Qi&&(Rn.has("EXT_color_buffer_half_float")||ir.isWebGL2&&Rn.has("EXT_color_buffer_float"));if(!(mr===Ws||en.convert(mr)===st.getParameter(35738)||mr===nn&&(ir.isWebGL2||Rn.has("OES_texture_float")||Rn.has("WEBGL_color_buffer_float"))||Mr))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Oe>=0&&Oe<=de.width-Ce&&Ye>=0&&Ye<=de.height-et&&st.readPixels(Oe,Ye,Ce,et,en.convert(Br),en.convert(mr),sn)}finally{const sr=null!==Y?ct.get(Y).__webglFramebuffer:null;qt.bindFramebuffer(36160,sr)}}},this.copyFramebufferToTexture=function(de,Oe,Ye=0){const Ce=Math.pow(2,-Ye),et=Math.floor(Oe.image.width*Ce),sn=Math.floor(Oe.image.height*Ce);rt.setTexture2D(Oe,0),st.copyTexSubImage2D(3553,Ye,0,0,de.x,de.y,et,sn),qt.unbindTexture()},this.copyTextureToTexture=function(de,Oe,Ye,Ce=0){const et=Oe.image.width,sn=Oe.image.height,Kn=en.convert(Ye.format),pr=en.convert(Ye.type);rt.setTexture2D(Ye,0),st.pixelStorei(37440,Ye.flipY),st.pixelStorei(37441,Ye.premultiplyAlpha),st.pixelStorei(3317,Ye.unpackAlignment),Oe.isDataTexture?st.texSubImage2D(3553,Ce,de.x,de.y,et,sn,Kn,pr,Oe.image.data):Oe.isCompressedTexture?st.compressedTexSubImage2D(3553,Ce,de.x,de.y,Oe.mipmaps[0].width,Oe.mipmaps[0].height,Kn,Oe.mipmaps[0].data):st.texSubImage2D(3553,Ce,de.x,de.y,Kn,pr,Oe.image),0===Ce&&Ye.generateMipmaps&&st.generateMipmap(3553),qt.unbindTexture()},this.copyTextureToTexture3D=function(de,Oe,Ye,Ce,et=0){if(U.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const sn=de.max.x-de.min.x+1,Kn=de.max.y-de.min.y+1,pr=de.max.z-de.min.z+1,sr=en.convert(Ce.format),Br=en.convert(Ce.type);let mr;if(Ce.isData3DTexture)rt.setTexture3D(Ce,0),mr=32879;else{if(!Ce.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");rt.setTexture2DArray(Ce,0),mr=35866}st.pixelStorei(37440,Ce.flipY),st.pixelStorei(37441,Ce.premultiplyAlpha),st.pixelStorei(3317,Ce.unpackAlignment);const Mr=st.getParameter(3314),Pi=st.getParameter(32878),pd=st.getParameter(3316),Rh=st.getParameter(3315),Ph=st.getParameter(32877),Wc=Ye.isCompressedTexture?Ye.mipmaps[0]:Ye.image;st.pixelStorei(3314,Wc.width),st.pixelStorei(32878,Wc.height),st.pixelStorei(3316,de.min.x),st.pixelStorei(3315,de.min.y),st.pixelStorei(32877,de.min.z),Ye.isDataTexture||Ye.isData3DTexture?st.texSubImage3D(mr,et,Oe.x,Oe.y,Oe.z,sn,Kn,pr,sr,Br,Wc.data):Ye.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),st.compressedTexSubImage3D(mr,et,Oe.x,Oe.y,Oe.z,sn,Kn,pr,sr,Wc.data)):st.texSubImage3D(mr,et,Oe.x,Oe.y,Oe.z,sn,Kn,pr,sr,Br,Wc),st.pixelStorei(3314,Mr),st.pixelStorei(32878,Pi),st.pixelStorei(3316,pd),st.pixelStorei(3315,Rh),st.pixelStorei(32877,Ph),0===et&&Ce.generateMipmaps&&st.generateMipmap(mr),qt.unbindTexture()},this.initTexture=function(de){de.isCubeTexture?rt.setTextureCube(de,0):de.isData3DTexture?rt.setTexture3D(de,0):de.isDataArrayTexture||de.isCompressedArrayTexture?rt.setTexture2DArray(de,0):rt.setTexture2D(de,0),qt.unbindTexture()},this.resetState=function(){j=0,X=0,Y=null,qt.reset(),nt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class iu extends fg{}).prototype.isWebGL1Renderer=!0;class gg extends ms{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,i){return super.copy(t,i),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const i=super.toJSON(t);return null!==this.fog&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.backgroundBlurriness=this.backgroundBlurriness),i}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}function nc(_,t,i){return m0(_)?new _.constructor(_.subarray(t,void 0!==i?i:_.length)):_.slice(t,i)}function Vc(_,t,i){return!_||!i&&_.constructor===t?_:"number"==typeof t.BYTES_PER_ELEMENT?new t(_):Array.prototype.slice.call(_)}function m0(_){return ArrayBuffer.isView(_)&&!(_ instanceof DataView)}class bl{constructor(t,i,c,d){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==d?d:new i.constructor(c),this.sampleValues=i,this.valueSize=c,this.settings=null,this.DefaultSettings_={}}evaluate(t){const i=this.parameterPositions;let c=this._cachedIndex,d=i[c],p=i[c-1];e:{t:{let m;n:{r:if(!(t<d)){for(let y=c+2;;){if(void 0===d){if(t<p)break r;return c=i.length,this._cachedIndex=c,this.copySampleValue_(c-1)}if(c===y)break;if(p=d,d=i[++c],t<d)break t}m=i.length;break n}if(t>=p)break e;{const y=i[1];t<y&&(c=2,p=y);for(let w=c-2;;){if(void 0===p)return this._cachedIndex=0,this.copySampleValue_(0);if(c===w)break;if(d=p,p=i[--c-1],t>=p)break t}m=c,c=0}}for(;c<m;){const y=c+m>>>1;t<i[y]?m=y:c=y+1}if(d=i[c],p=i[c-1],void 0===p)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===d)return c=i.length,this._cachedIndex=c,this.copySampleValue_(c-1)}this._cachedIndex=c,this.intervalChanged_(c,p,d)}return this.interpolate_(c,p,t,d)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const i=this.resultBuffer,c=this.sampleValues,d=this.valueSize,p=t*d;for(let m=0;m!==d;++m)i[m]=c[p+m];return i}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class _0 extends bl{constructor(t,i,c,d){super(t,i,c,d),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,i,c){const d=this.parameterPositions;let p=t-2,m=t+1,y=d[p],w=d[m];if(void 0===y)switch(this.getSettings_().endingStart){case 2401:p=t,y=2*i-c;break;case 2402:p=d.length-2,y=i+d[p]-d[p+1];break;default:p=t,y=c}if(void 0===w)switch(this.getSettings_().endingEnd){case 2401:m=t,w=2*c-i;break;case 2402:m=1,w=c+d[1]-d[0];break;default:m=t-1,w=i}const b=.5*(c-i),C=this.valueSize;this._weightPrev=b/(i-y),this._weightNext=b/(w-c),this._offsetPrev=p*C,this._offsetNext=m*C}interpolate_(t,i,c,d){const p=this.resultBuffer,m=this.sampleValues,y=this.valueSize,w=t*y,b=w-y,C=this._offsetPrev,D=this._offsetNext,R=this._weightPrev,k=this._weightNext,V=(c-i)/(d-i),U=V*V,F=U*V,j=-R*F+2*R*U-R*V,X=(1+R)*F+(-1.5-2*R)*U+(-.5+R)*V+1,Y=(-1-k)*F+(1.5+k)*U+.5*V,K=k*F-k*U;for(let ie=0;ie!==y;++ie)p[ie]=j*m[C+ie]+X*m[b+ie]+Y*m[w+ie]+K*m[D+ie];return p}}class Vf extends bl{constructor(t,i,c,d){super(t,i,c,d)}interpolate_(t,i,c,d){const p=this.resultBuffer,m=this.sampleValues,y=this.valueSize,w=t*y,b=w-y,C=(c-i)/(d-i),D=1-C;for(let R=0;R!==y;++R)p[R]=m[b+R]*D+m[w+R]*C;return p}}class iT extends bl{constructor(t,i,c,d){super(t,i,c,d)}interpolate_(t){return this.copySampleValue_(t-1)}}class rc{constructor(t,i,c,d){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===i||0===i.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Vc(i,this.TimeBufferType),this.values=Vc(c,this.ValueBufferType),this.setInterpolation(d||this.DefaultInterpolation)}static toJSON(t){const i=t.constructor;let c;if(i.toJSON!==this.toJSON)c=i.toJSON(t);else{c={name:t.name,times:Vc(t.times,Array),values:Vc(t.values,Array)};const d=t.getInterpolation();d!==t.DefaultInterpolation&&(c.interpolation=d)}return c.type=t.ValueTypeName,c}InterpolantFactoryMethodDiscrete(t){return new iT(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Vf(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new _0(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let i;switch(t){case 2300:i=this.InterpolantFactoryMethodDiscrete;break;case 2301:i=this.InterpolantFactoryMethodLinear;break;case 2302:i=this.InterpolantFactoryMethodSmooth}if(void 0===i){const c="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(c);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",c),this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const i=this.times;for(let c=0,d=i.length;c!==d;++c)i[c]+=t}return this}scale(t){if(1!==t){const i=this.times;for(let c=0,d=i.length;c!==d;++c)i[c]*=t}return this}trim(t,i){const c=this.times,d=c.length;let p=0,m=d-1;for(;p!==d&&c[p]<t;)++p;for(;-1!==m&&c[m]>i;)--m;if(++m,0!==p||m!==d){p>=m&&(m=Math.max(m,1),p=m-1);const y=this.getValueSize();this.times=nc(c,p,m),this.values=nc(this.values,p*y,m*y)}return this}validate(){let t=!0;const i=this.getValueSize();i-Math.floor(i)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const c=this.times,d=this.values,p=c.length;0===p&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let m=null;for(let y=0;y!==p;y++){const w=c[y];if("number"==typeof w&&isNaN(w)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,y,w),t=!1;break}if(null!==m&&m>w){console.error("THREE.KeyframeTrack: Out of order keys.",this,y,w,m),t=!1;break}m=w}if(void 0!==d&&m0(d))for(let y=0,w=d.length;y!==w;++y){const b=d[y];if(isNaN(b)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,y,b),t=!1;break}}return t}optimize(){const t=nc(this.times),i=nc(this.values),c=this.getValueSize(),d=2302===this.getInterpolation(),p=t.length-1;let m=1;for(let y=1;y<p;++y){let w=!1;const b=t[y];if(b!==t[y+1]&&(1!==y||b!==t[0]))if(d)w=!0;else{const D=y*c,R=D-c,k=D+c;for(let V=0;V!==c;++V){const U=i[D+V];if(U!==i[R+V]||U!==i[k+V]){w=!0;break}}}if(w){if(y!==m){t[m]=t[y];const D=y*c,R=m*c;for(let k=0;k!==c;++k)i[R+k]=i[D+k]}++m}}if(p>0){t[m]=t[p];for(let y=p*c,w=m*c,b=0;b!==c;++b)i[w+b]=i[y+b];++m}return m!==t.length?(this.times=nc(t,0,m),this.values=nc(i,0,m*c)):(this.times=t,this.values=i),this}clone(){const t=nc(this.times,0),i=nc(this.values,0),d=new(0,this.constructor)(this.name,t,i);return d.createInterpolant=this.createInterpolant,d}}rc.prototype.TimeBufferType=Float32Array,rc.prototype.ValueBufferType=Float32Array,rc.prototype.DefaultInterpolation=2301;class fu extends rc{}fu.prototype.ValueTypeName="bool",fu.prototype.ValueBufferType=Array,fu.prototype.DefaultInterpolation=2300,fu.prototype.InterpolantFactoryMethodLinear=void 0,fu.prototype.InterpolantFactoryMethodSmooth=void 0;(class zf extends rc{}).prototype.ValueTypeName="color";(class zo extends rc{}).prototype.ValueTypeName="number";class pu extends bl{constructor(t,i,c,d){super(t,i,c,d)}interpolate_(t,i,c,d){const p=this.resultBuffer,m=this.sampleValues,y=this.valueSize,w=(c-i)/(d-i);let b=t*y;for(let C=b+y;b!==C;b+=4)bn.slerpFlat(p,0,m,b-y,m,b,w);return p}}class zi extends rc{InterpolantFactoryMethodLinear(t){return new pu(this.times,this.values,this.getValueSize(),t)}}zi.prototype.ValueTypeName="quaternion",zi.prototype.DefaultInterpolation=2301,zi.prototype.InterpolantFactoryMethodSmooth=void 0;class Pa extends rc{}Pa.prototype.ValueTypeName="string",Pa.prototype.ValueBufferType=Array,Pa.prototype.DefaultInterpolation=2300,Pa.prototype.InterpolantFactoryMethodLinear=void 0,Pa.prototype.InterpolantFactoryMethodSmooth=void 0;(class cd extends rc{}).prototype.ValueTypeName="vector";const pa={enabled:!1,files:{},add:function(_,t){!1!==this.enabled&&(this.files[_]=t)},get:function(_){if(!1!==this.enabled)return this.files[_]},remove:function(_){delete this.files[_]},clear:function(){this.files={}}};class Sh{constructor(t,i,c){const d=this;let w,p=!1,m=0,y=0;const b=[];this.onStart=void 0,this.onLoad=t,this.onProgress=i,this.onError=c,this.itemStart=function(C){y++,!1===p&&void 0!==d.onStart&&d.onStart(C,m,y),p=!0},this.itemEnd=function(C){m++,void 0!==d.onProgress&&d.onProgress(C,m,y),m===y&&(p=!1,void 0!==d.onLoad&&d.onLoad())},this.itemError=function(C){void 0!==d.onError&&d.onError(C)},this.resolveURL=function(C){return w?w(C):C},this.setURLModifier=function(C){return w=C,this},this.addHandler=function(C,D){return b.push(C,D),this},this.removeHandler=function(C){const D=b.indexOf(C);return-1!==D&&b.splice(D,2),this},this.getHandler=function(C){for(let D=0,R=b.length;D<R;D+=2){const k=b[D],V=b[D+1];if(k.global&&(k.lastIndex=0),k.test(C))return V}return null}}}const Wf=new Sh;class Eh{constructor(t){this.manager=void 0!==t?t:Wf,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const c=this;return new Promise(function(d,p){c.load(t,d,i,p)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Error;class ld extends Eh{constructor(t){super(t)}load(t,i,c,d){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const p=this,m=pa.get(t);if(void 0!==m)return p.manager.itemStart(t),setTimeout(function(){i&&i(m),p.manager.itemEnd(t)},0),m;const y=sa("img");function w(){C(),pa.add(t,this),i&&i(this),p.manager.itemEnd(t)}function b(D){C(),d&&d(D),p.manager.itemError(t),p.manager.itemEnd(t)}function C(){y.removeEventListener("load",w,!1),y.removeEventListener("error",b,!1)}return y.addEventListener("load",w,!1),y.addEventListener("error",b,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(y.crossOrigin=this.crossOrigin),p.manager.itemStart(t),y.src=t,y}}class Jy extends Eh{constructor(t){super(t)}load(t,i,c,d){const p=new ee,m=new ld(this.manager);return m.setCrossOrigin(this.crossOrigin),m.setPath(this.path),m.load(t,function(y){p.image=y,p.needsUpdate=!0,void 0!==i&&i(p)},c,d),p}}const Xf="\\[\\]\\.:\\/",C0=new RegExp("["+Xf+"]","g"),o_="[^"+Xf+"]",D0="[^"+Xf.replace("\\.","")+"]",hT=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",o_)+/(WCOD+)?/.source.replace("WCOD",D0)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",o_)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",o_)+"$"),A0=["material","materials","bones","map"];class R0{constructor(t,i,c){const d=c||mi.parseTrackName(i);this._targetGroup=t,this._bindings=t.subscribe_(i,d)}getValue(t,i){this.bind();const d=this._bindings[this._targetGroup.nCachedObjects_];void 0!==d&&d.getValue(t,i)}setValue(t,i){const c=this._bindings;for(let d=this._targetGroup.nCachedObjects_,p=c.length;d!==p;++d)c[d].setValue(t,i)}bind(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,c=t.length;i!==c;++i)t[i].bind()}unbind(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,c=t.length;i!==c;++i)t[i].unbind()}}let mi=(()=>{class _{constructor(i,c,d){this.path=c,this.parsedPath=d||_.parseTrackName(c),this.node=_.findNode(i,this.parsedPath.nodeName)||i,this.rootNode=i,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(i,c,d){return i&&i.isAnimationObjectGroup?new _.Composite(i,c,d):new _(i,c,d)}static sanitizeNodeName(i){return i.replace(/\s/g,"_").replace(C0,"")}static parseTrackName(i){const c=hT.exec(i);if(null===c)throw new Error("PropertyBinding: Cannot parse trackName: "+i);const d={nodeName:c[2],objectName:c[3],objectIndex:c[4],propertyName:c[5],propertyIndex:c[6]},p=d.nodeName&&d.nodeName.lastIndexOf(".");if(void 0!==p&&-1!==p){const m=d.nodeName.substring(p+1);-1!==A0.indexOf(m)&&(d.nodeName=d.nodeName.substring(0,p),d.objectName=m)}if(null===d.propertyName||0===d.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+i);return d}static findNode(i,c){if(void 0===c||""===c||"."===c||-1===c||c===i.name||c===i.uuid)return i;if(i.skeleton){const d=i.skeleton.getBoneByName(c);if(void 0!==d)return d}if(i.children){const d=function(m){for(let y=0;y<m.length;y++){const w=m[y];if(w.name===c||w.uuid===c)return w;const b=d(w.children);if(b)return b}return null},p=d(i.children);if(p)return p}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(i,c){i[c]=this.targetObject[this.propertyName]}_getValue_array(i,c){const d=this.resolvedProperty;for(let p=0,m=d.length;p!==m;++p)i[c++]=d[p]}_getValue_arrayElement(i,c){i[c]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(i,c){this.resolvedProperty.toArray(i,c)}_setValue_direct(i,c){this.targetObject[this.propertyName]=i[c]}_setValue_direct_setNeedsUpdate(i,c){this.targetObject[this.propertyName]=i[c],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(i,c){this.targetObject[this.propertyName]=i[c],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(i,c){const d=this.resolvedProperty;for(let p=0,m=d.length;p!==m;++p)d[p]=i[c++]}_setValue_array_setNeedsUpdate(i,c){const d=this.resolvedProperty;for(let p=0,m=d.length;p!==m;++p)d[p]=i[c++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(i,c){const d=this.resolvedProperty;for(let p=0,m=d.length;p!==m;++p)d[p]=i[c++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(i,c){this.resolvedProperty[this.propertyIndex]=i[c]}_setValue_arrayElement_setNeedsUpdate(i,c){this.resolvedProperty[this.propertyIndex]=i[c],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(i,c){this.resolvedProperty[this.propertyIndex]=i[c],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(i,c){this.resolvedProperty.fromArray(i,c)}_setValue_fromArray_setNeedsUpdate(i,c){this.resolvedProperty.fromArray(i,c),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(i,c){this.resolvedProperty.fromArray(i,c),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(i,c){this.bind(),this.getValue(i,c)}_setValue_unbound(i,c){this.bind(),this.setValue(i,c)}bind(){let i=this.node;const c=this.parsedPath,d=c.objectName,p=c.propertyName;let m=c.propertyIndex;if(i||(i=_.findNode(this.rootNode,c.nodeName)||this.rootNode,this.node=i),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!i)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(d){let C=c.objectIndex;switch(d){case"materials":if(!i.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!i.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);i=i.material.materials;break;case"bones":if(!i.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);i=i.skeleton.bones;for(let D=0;D<i.length;D++)if(i[D].name===C){C=D;break}break;case"map":if("map"in i){i=i.map;break}if(!i.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!i.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);i=i.material.map;break;default:if(void 0===i[d])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);i=i[d]}if(void 0!==C){if(void 0===i[C])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,i);i=i[C]}}const y=i[p];if(void 0===y)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+c.nodeName+"."+p+" but it wasn't found.",i);let w=this.Versioning.None;this.targetObject=i,void 0!==i.needsUpdate?w=this.Versioning.NeedsUpdate:void 0!==i.matrixWorldNeedsUpdate&&(w=this.Versioning.MatrixWorldNeedsUpdate);let b=this.BindingType.Direct;if(void 0!==m){if("morphTargetInfluences"===p){if(!i.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!i.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==i.morphTargetDictionary[m]&&(m=i.morphTargetDictionary[m])}b=this.BindingType.ArrayElement,this.resolvedProperty=y,this.propertyIndex=m}else void 0!==y.fromArray&&void 0!==y.toArray?(b=this.BindingType.HasFromToArray,this.resolvedProperty=y):Array.isArray(y)?(b=this.BindingType.EntireArray,this.resolvedProperty=y):this.propertyName=p;this.getValue=this.GetterByBindingType[b],this.setValue=this.SetterByBindingTypeAndVersioning[b][w]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return _.Composite=R0,_})();mi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},mi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},mi.prototype.GetterByBindingType=[mi.prototype._getValue_direct,mi.prototype._getValue_array,mi.prototype._getValue_arrayElement,mi.prototype._getValue_toArray],mi.prototype.SetterByBindingTypeAndVersioning=[[mi.prototype._setValue_direct,mi.prototype._setValue_direct_setNeedsUpdate,mi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mi.prototype._setValue_array,mi.prototype._setValue_array_setNeedsUpdate,mi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mi.prototype._setValue_arrayElement,mi.prototype._setValue_arrayElement_setNeedsUpdate,mi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mi.prototype._setValue_fromArray,mi.prototype._setValue_fromArray_setNeedsUpdate,mi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"146"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="146");const p_=["canvas"];let g_=(()=>{class _{constructor(){this.rotationSpeedX=.05,this.rotationSpeedY=.01,this.size=200,this.texture="/assets/images/texture.jpg",this.cameraZ=400,this.fieldOfView=1,this.nearClippingPlane=1,this.farClippingPlane=1e3,this.loader=new Jy,this.geometry=new he(1,1,1),this.material=new yo({map:this.loader.load(this.texture)}),this.cube=new z(this.geometry,this.material)}get canvas(){return this.canvasRef.nativeElement}animateCube(){this.cube.rotation.x+=this.rotationSpeedX,this.cube.rotation.y+=this.rotationSpeedY}createScene(){this.scene=new gg,this.scene.background=new Yt(0),this.scene.add(this.cube);let i=this.getAspectRatio();this.camera=new Zr(this.fieldOfView,i,this.nearClippingPlane,this.farClippingPlane),this.camera.position.z=this.cameraZ}getAspectRatio(){return this.canvas.clientWidth/this.canvas.clientHeight}startRenderingLoop(){this.renderer=new fg({canvas:this.canvas}),this.renderer.setPixelRatio(devicePixelRatio),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight);let i=this;!function c(){requestAnimationFrame(c),i.animateCube(),i.renderer.render(i.scene,i.camera)}()}ngOnInit(){}ngAfterViewInit(){this.createScene(),this.startRenderingLoop()}}return _.\u0275fac=function(i){return new(i||_)},_.\u0275cmp=J.Xpm({type:_,selectors:[["threejs-component"]],viewQuery:function(i,c){if(1&i&&J.Gf(p_,5),2&i){let d;J.iGM(d=J.CRH())&&(c.canvasRef=d.first)}},inputs:{rotationSpeedX:"rotationSpeedX",rotationSpeedY:"rotationSpeedY",size:"size",texture:"texture",cameraZ:"cameraZ",fieldOfView:"fieldOfView",nearClippingPlane:["nearClipping","nearClippingPlane"],farClippingPlane:["farClipping","farClippingPlane"]},decls:2,vars:0,consts:[["id","canvas",2,"height","100%","width","100%"],["canvas",""]],template:function(i,c){1&i&&J._UZ(0,"canvas",0,1)}}),_})();const $b=[{path:"",component:ot,children:[{path:"",component:(()=>{class _{constructor(){}ngOnInit(){}}return _.\u0275fac=function(i){return new(i||_)},_.\u0275cmp=J.Xpm({type:_,selectors:[["app-landing"]],decls:48,vars:0,consts:[[1,"container","m-10"],[1,"text-center","flex","flex-row"],[1,"basis-3/4"],[1,"flex-col","space-y-2"],[1,"font-bold","text-4xl"],[1,"font-normal","text-xl"],[1,"font-bold"],[1,"description-container","m-auto","w-3/4","sm:w-auto"],[1,"text-lg","font-thin"],[1,"basis-1/3"],["src","../../../../../assets/images/profile.jpeg",1,"rounded-md","object-cover","h-56","object-center","m-auto"],[1,"container","mt-10","interests"],[1,"font-bold","text-4xl","mb-10"],["href","https://instagram.com/kuti.vox","target","_blank",1,"flex","flex-col","items-center","bg-white","rounded-lg","border","md:max-w-max","shadow-md","md:flex-row","lg:w-full","hover:bg-gray-100","dark:border-gray-700","dark:bg-gray-800","dark:hover:bg-gray-700"],[1,"flex","flex-col","justify-between","p-4","leading-normal"],[1,"mb-2","text-2xl","font-bold","tracking-tight","text-gray-900","dark:text-white"],[1,"mb-3","font-normal","text-gray-700","dark:text-gray-400"],[1,"font-bold","text-black"],[1,"md:h-auto"],["href","https://www.instagram.com/kuti.jpeg/","target","_blank",1,"flex","flex-col","items-center","bg-white","mt-5","rounded-lg","border","md:max-w-max","shadow-md","md:flex-row","lg:w-full","hover:bg-gray-100","dark:border-gray-700","dark:bg-gray-800","dark:hover:bg-gray-700"],[1,"grid","grid-flow-col","grid-rows-2","grid-cols-2","gap-8","m-10"],["src","../../../../../assets/images/kuti.jpeg/image-1.jpeg","alt","","loading","lazy",1,"object-cover","rounded-lg","h-48","w-96"],["src","../../../../../assets/images/kuti.jpeg/image-2.jpeg","alt","","loading","lazy",1,"object-cover","rounded-lg","h-48","w-96"],["src","../../../../../assets/images/kuti.jpeg/image-3.jpeg","alt","","loading","lazy",1,"object-cover","rounded-lg","h-48","w-96"],["src","../../../../../assets/images/kuti.jpeg/image-5.jpeg","alt","","loading","lazy",1,"object-cover","rounded-lg","h-48","w-96"],["href","https://instagram.com/kuti.jpeg"]],template:function(i,c){1&i&&(J.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),J._uU(5,"Hi, I'm Kutay."),J.qZA(),J.TgZ(6,"p",5),J._uU(7," Software Engineer at "),J.TgZ(8,"span",6),J._uU(9,"Gelal"),J.qZA(),J._uU(10,". "),J.qZA(),J.TgZ(11,"div",7)(12,"p",8),J._uU(13," Curious, self learner, traveler. Let me introduce you myself. Dedicated myself to discover the life and see new opportunities. "),J.qZA()()()(),J.TgZ(14,"div",9),J._UZ(15,"img",10),J.qZA()(),J.TgZ(16,"div",11)(17,"p",12),J._uU(18,"Interests"),J.qZA(),J.TgZ(19,"a",13)(20,"div",14)(21,"h5",15),J._uU(22," Voxel Modelling "),J.qZA(),J.TgZ(23,"p",16),J._uU(24," I would like to create something new with voxel! Check my instagram account "),J.TgZ(25,"span",17),J._uU(26,"@kuti.vox"),J.qZA(),J._uU(27," for more information. "),J.qZA()(),J._UZ(28,"threejs-component",18),J.qZA(),J.TgZ(29,"a",19)(30,"div",20)(31,"div"),J._UZ(32,"img",21),J.qZA(),J.TgZ(33,"div"),J._UZ(34,"img",22),J.qZA(),J.TgZ(35,"div"),J._UZ(36,"img",23),J.qZA(),J.TgZ(37,"div"),J._UZ(38,"img",24),J.qZA()(),J.TgZ(39,"div",14)(40,"h5",15),J._uU(41," Photography "),J.qZA(),J.TgZ(42,"p",16),J._uU(43," I always chase spontaneous moments capture photos. "),J.TgZ(44,"span",17)(45,"a",25),J._uU(46,"@kuti.jpeg"),J.qZA()(),J._uU(47," for more information. "),J.qZA()()()()())},dependencies:[g_],styles:[".col[_ngcontent-%COMP%]{background-color:#7fff00}"]}),_})()},{path:"projects",component:(()=>{class _{constructor(){}ngOnInit(){}}return _.\u0275fac=function(i){return new(i||_)},_.\u0275cmp=J.Xpm({type:_,selectors:[["app-projects"]],decls:2,vars:0,consts:[[1,"m-auto"]],template:function(i,c){1&i&&(J.TgZ(0,"p",0),J._uU(1," In progress..\n"),J.qZA())}}),_})()},{path:"contact",component:Ke}]}];let jb=(()=>{class _{}return _.\u0275fac=function(i){return new(i||_)},_.\u0275mod=J.oAB({type:_}),_.\u0275inj=J.cJS({imports:[le.Bz.forChild($b),le.Bz]}),_})(),bT=(()=>{class _{}return _.\u0275fac=function(i){return new(i||_)},_.\u0275mod=J.oAB({type:_}),_.\u0275inj=J.cJS({imports:[W.ez,jb]}),_})()},3804:(Wn,vt,ge)=>{var W=ge(1481),le=ge(8256),J=ge(5861);const Tt=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let u=r.charCodeAt(s);u<128?e[n++]=u:u<2048?(e[n++]=u>>6|192,e[n++]=63&u|128):55296==(64512&u)&&s+1<r.length&&56320==(64512&r.charCodeAt(s+1))?(u=65536+((1023&u)<<10)+(1023&r.charCodeAt(++s)),e[n++]=u>>18|240,e[n++]=u>>12&63|128,e[n++]=u>>6&63|128,e[n++]=63&u|128):(e[n++]=u>>12|224,e[n++]=u>>6&63|128,e[n++]=63&u|128)}return e},Dt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let u=0;u<r.length;u+=3){const f=r[u],v=u+1<r.length,S=v?r[u+1]:0,P=u+2<r.length,G=P?r[u+2]:0;let _e=(15&S)<<2|G>>6,Ee=63&G;P||(Ee=64,v||(_e=64)),s.push(n[f>>2],n[(3&f)<<4|S>>4],n[_e],n[Ee])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Tt(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):function(r){const e=[];let n=0,s=0;for(;n<r.length;){const u=r[n++];if(u<128)e[s++]=String.fromCharCode(u);else if(u>191&&u<224){const f=r[n++];e[s++]=String.fromCharCode((31&u)<<6|63&f)}else if(u>239&&u<365){const P=((7&u)<<18|(63&r[n++])<<12|(63&r[n++])<<6|63&r[n++])-65536;e[s++]=String.fromCharCode(55296+(P>>10)),e[s++]=String.fromCharCode(56320+(1023&P))}else{const f=r[n++],v=r[n++];e[s++]=String.fromCharCode((15&u)<<12|(63&f)<<6|63&v)}}return e.join("")}(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let u=0;u<r.length;){const f=n[r.charAt(u++)],S=u<r.length?n[r.charAt(u)]:0;++u;const G=u<r.length?n[r.charAt(u)]:64;++u;const ne=u<r.length?n[r.charAt(u)]:64;if(++u,null==f||null==S||null==G||null==ne)throw Error();s.push(f<<2|S>>4),64!==G&&(s.push(S<<4&240|G>>2),64!==ne&&s.push(G<<6&192|ne))}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}},ze=function(r){return function(r){const e=Tt(r);return Dt.encodeByteArray(e,!0)}(r).replace(/\./g,"")},wt=function(r){try{return Dt.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ut(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ut(){const r="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof r&&void 0!==r.id}function Bn(){return"object"==typeof indexedDB}function Ne(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(s);u.onsuccess=()=>{u.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},u.onupgradeneeded=()=>{n=!1},u.onerror=()=>{var f;e((null===(f=u.error)||void 0===f?void 0:f.message)||"")}}catch(n){e(n)}})}function Pe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Ln=()=>{try{return function We(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const r=process.env.__FIREBASE_DEFAULTS__;return r?JSON.parse(r):void 0})()||(()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&wt(r[1]);return e&&JSON.parse(e)})()}catch(r){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`)}};class hi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,s))}}}class jr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name="FirebaseError",Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,er.prototype.create)}}class er{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},u=`${this.service}/${e}`,f=this.errors[e],v=f?function Mi(r,e){return r.replace(Cr,(n,s)=>{const u=e[s];return null!=u?String(u):`<${s}?>`})}(f,s):"Error";return new jr(u,`${this.serviceName}: ${v} (${u}).`,s)}}const Cr=/\{\$([^}]+)}/g;function Na(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const u of n){if(!s.includes(u))return!1;const f=r[u],v=e[u];if(Eo(f)&&Eo(v)){if(!Na(f,v))return!1}else if(f!==v)return!1}for(const u of s)if(!n.includes(u))return!1;return!0}function Eo(r){return null!==r&&"object"==typeof r}function vn(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(u=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(u))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}class $i{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let u;if(void 0===e&&void 0===n&&void 0===s)throw new Error("Missing Observer.");u=function Sr(r,e){if("object"!=typeof r||null===r)return!1;for(const n of e)if(n in r&&"function"==typeof r[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:s},void 0===u.next&&(u.next=Ci),void 0===u.error&&(u.error=Ci),void 0===u.complete&&(u.complete=Ci);const f=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?u.error(this.finalError):u.complete()}catch{}}),this.observers.push(u),f}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ci(){}function To(r,e=1e3,n=2){const s=e*Math.pow(n,r),u=Math.round(.5*s*(Math.random()-.5)*2);return Math.min(144e5,s+u)}function ai(r){return r&&r._delegate?r._delegate:r}class nn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Qi="[DEFAULT]";class Eu{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new hi;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:n});u&&s.resolve(u)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e?.identifier),u=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(s)&&!this.shouldAutoInitialize()){if(u)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:s})}catch(f){if(u)return null;throw f}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Mo(r){return"EAGER"===r.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Qi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(n);try{const f=this.getOrInitializeService({instanceIdentifier:u});s.resolve(f)}catch{}}}}clearInstance(e=Qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,J.Z)(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...n.filter(s=>"_delete"in s).map(s=>s._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Qi){return this.instances.has(e)}getOptions(e=Qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[f,v]of this.instancesDeferred.entries())s===this.normalizeInstanceIdentifier(f)&&v.resolve(u);return u}onInit(e,n){var s;const u=this.normalizeInstanceIdentifier(n),f=null!==(s=this.onInitCallbacks.get(u))&&void 0!==s?s:new Set;f.add(e),this.onInitCallbacks.set(u,f);const v=this.instances.get(u);return v&&e(v,u),()=>{f.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const u of s)try{u(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Qi?void 0:r),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}var r;return s||null}normalizeInstanceIdentifier(e=Qi){return this.component?this.component.multipleInstances?e:Qi:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Dl{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Eu(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const Sa=[];var we=(()=>{return(r=we||(we={}))[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT",we;var r})();const xe={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},ce=we.INFO,Te={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},Ve=(r,e,...n)=>{if(e<r.logLevel)return;const s=(new Date).toISOString(),u=Te[e];if(!u)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[u](`[${s}]  ${r.name}:`,...n)};class un{constructor(e){this.name=e,this._logLevel=ce,this._logHandler=Ve,this._userLogHandler=null,Sa.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?xe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}let Mn,Lr;const ni=new WeakMap,Io=new WeakMap,Yr=new WeakMap,Co=new WeakMap,Jo=new WeakMap;let $s={get(r,e,n){if(r instanceof IDBTransaction){if("done"===e)return Io.get(r);if("objectStoreNames"===e)return r.objectStoreNames||Yr.get(r);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ss(r[e])},set:(r,e,n)=>(r[e]=n,!0),has:(r,e)=>r instanceof IDBTransaction&&("done"===e||"store"===e)||e in r};function vi(r){return"function"==typeof r?function bs(r){return r!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Qo(){return Lr||(Lr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(r)?function(...e){return r.apply(ea(this),e),Ss(ni.get(this))}:function(...e){return Ss(r.apply(ea(this),e))}:function(e,...n){const s=r.call(ea(this),e,...n);return Yr.set(s,e.sort?e.sort():[e]),Ss(s)}}(r):(r instanceof IDBTransaction&&function mc(r){if(Io.has(r))return;const e=new Promise((n,s)=>{const u=()=>{r.removeEventListener("complete",f),r.removeEventListener("error",v),r.removeEventListener("abort",v)},f=()=>{n(),u()},v=()=>{s(r.error||new DOMException("AbortError","AbortError")),u()};r.addEventListener("complete",f),r.addEventListener("error",v),r.addEventListener("abort",v)});Io.set(r,e)}(r),((r,e)=>e.some(n=>r instanceof n))(r,function ji(){return Mn||(Mn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(r,$s):r)}function Ss(r){if(r instanceof IDBRequest)return function tr(r){const e=new Promise((n,s)=>{const u=()=>{r.removeEventListener("success",f),r.removeEventListener("error",v)},f=()=>{n(Ss(r.result)),u()},v=()=>{s(r.error),u()};r.addEventListener("success",f),r.addEventListener("error",v)});return e.then(n=>{n instanceof IDBCursor&&ni.set(n,r)}).catch(()=>{}),Jo.set(e,r),e}(r);if(Co.has(r))return Co.get(r);const e=vi(r);return e!==r&&(Co.set(r,e),Jo.set(e,r)),e}const ea=r=>Jo.get(r);function us(r,e,{blocked:n,upgrade:s,blocking:u,terminated:f}={}){const v=indexedDB.open(r,e),S=Ss(v);return s&&v.addEventListener("upgradeneeded",P=>{s(Ss(v.result),P.oldVersion,P.newVersion,Ss(v.transaction))}),n&&v.addEventListener("blocked",()=>n()),S.then(P=>{f&&P.addEventListener("close",()=>f()),u&&P.addEventListener("versionchange",()=>u())}).catch(()=>{}),S}function Do(r,{blocked:e}={}){const n=indexedDB.deleteDatabase(r);return e&&n.addEventListener("blocked",()=>e()),Ss(n).then(()=>{})}const ka=["get","getKey","getAll","getAllKeys","count"],Ar=["put","add","delete","clear"],ta=new Map;function Qc(r,e){if(!(r instanceof IDBDatabase)||e in r||"string"!=typeof e)return;if(ta.get(e))return ta.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,u=Ar.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!u&&!ka.includes(n))return;const f=function(){var v=(0,J.Z)(function*(S,...P){const G=this.transaction(S,u?"readwrite":"readonly");let q=G.store;return s&&(q=q.index(P.shift())),(yield Promise.all([q[n](...P),u&&G.done]))[0]});return function(P){return v.apply(this,arguments)}}();return ta.set(e,f),f}!function Al(r){$s=r($s)}(r=>({...r,get:(e,n,s)=>Qc(e,n)||r.get(e,n,s),has:(e,n)=>!!Qc(e,n)||r.has(e,n)}));class Ea{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function Fa(r){return"VERSION"===r.getComponent()?.type}(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}return null}).filter(n=>n).join(" ")}}const ks="@firebase/app",js=new un("@firebase/app"),Mu="[DEFAULT]",qh={[ks]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},lo=new Map,wc=new Map;function Kh(r,e){try{r.container.addComponent(e)}catch(n){js.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Jr(r){const e=r.name;if(wc.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;wc.set(e,r);for(const n of lo.values())Kh(n,r);return!0}function el(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}const Ma=new er("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Yh{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new nn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ma.create("app-deleted",{appName:this._name})}}const Ao="9.13.0";function Zh(r,e={}){let n=r;"object"!=typeof e&&(e={name:e});const s=Object.assign({name:Mu,automaticDataCollectionEnabled:!1},e),u=s.name;if("string"!=typeof u||!u)throw Ma.create("bad-app-name",{appName:String(u)});if(n||(n=(()=>{var r;return null===(r=Ln())||void 0===r?void 0:r.config})()),!n)throw Ma.create("no-options");const f=lo.get(u);if(f){if(Na(n,f.options)&&Na(s,f.config))return f;throw Ma.create("duplicate-app",{appName:u})}const v=new Dl(u);for(const P of wc.values())v.addComponent(P);const S=new Yh(n,s,v);return lo.set(u,S),S}function Ll(r=Mu){const e=lo.get(r);if(!e&&r===Mu)return Zh();if(!e)throw Ma.create("no-app",{appName:r});return e}function Ed(){return Array.from(lo.values())}function ci(r,e,n){var s;let u=null!==(s=qh[r])&&void 0!==s?s:r;n&&(u+=`-${n}`);const f=u.match(/\s|\//),v=e.match(/\s|\//);if(f||v){const S=[`Unable to register library "${u}" with version "${e}":`];return f&&S.push(`library name "${u}" contains illegal characters (whitespace or "/")`),f&&v&&S.push("and"),v&&S.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void js.warn(S.join(" "))}Jr(new nn(`${u}-version`,()=>({library:u,version:e}),"VERSION"))}const Va="firebase-heartbeat-store";let Ro=null;function xi(){return Ro||(Ro=us("firebase-heartbeat-database",1,{upgrade:(r,e)=>{0===e&&r.createObjectStore(Va)}}).catch(r=>{throw Ma.create("idb-open",{originalErrorMessage:r.message})})),Ro}function ia(){return(ia=(0,J.Z)(function*(r){var e;try{return(yield xi()).transaction(Va).objectStore(Va).get(gr(r))}catch(n){if(n instanceof jr)js.warn(n.message);else{const s=Ma.create("idb-get",{originalErrorMessage:null===(e=n)||void 0===e?void 0:e.message});js.warn(s.message)}}})).apply(this,arguments)}function Ks(r,e){return li.apply(this,arguments)}function li(){return(li=(0,J.Z)(function*(r,e){var n;try{const u=(yield xi()).transaction(Va,"readwrite");return yield u.objectStore(Va).put(e,gr(r)),u.done}catch(s){if(s instanceof jr)js.warn(s.message);else{const u=Ma.create("idb-set",{originalErrorMessage:null===(n=s)||void 0===n?void 0:n.message});js.warn(u.message)}}})).apply(this,arguments)}function gr(r){return`${r.name}!${r.options.appId}`}class kl{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Md(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}triggerHeartbeat(){var e=this;return(0,J.Z)(function*(){const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Ts();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==u&&!e._heartbeatsCache.heartbeats.some(f=>f.date===u))return e._heartbeatsCache.heartbeats.push({date:u,agent:s}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(f=>{const v=new Date(f.date).valueOf();return Date.now()-v<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,J.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=Ts(),{heartbeatsToSend:s,unsentEntries:u}=function Fl(r,e=1024){const n=[];let s=r.slice();for(const u of r){const f=n.find(v=>v.agent===u.agent);if(f){if(f.dates.push(u.date),On(n)>e){f.dates.pop();break}}else if(n.push({agent:u.agent,dates:[u.date]}),On(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}(e._heartbeatsCache.heartbeats),f=ze(JSON.stringify({version:2,heartbeats:s}));return e._heartbeatsCache.lastSentHeartbeatDate=n,u.length>0?(e._heartbeatsCache.heartbeats=u,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),f})()}}function Ts(){return(new Date).toISOString().substring(0,10)}class Md{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,J.Z)(function*(){return!!Bn()&&Ne().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,J.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Es(r){return ia.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return(0,J.Z)(function*(){var s;if(yield n._canUseIndexedDBPromise){const f=yield n.read();return Ks(n.app,{lastSentHeartbeatDate:null!==(s=e.lastSentHeartbeatDate)&&void 0!==s?s:f.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return(0,J.Z)(function*(){var s;if(yield n._canUseIndexedDBPromise){const f=yield n.read();return Ks(n.app,{lastSentHeartbeatDate:null!==(s=e.lastSentHeartbeatDate)&&void 0!==s?s:f.lastSentHeartbeatDate,heartbeats:[...f.heartbeats,...e.heartbeats]})}})()}}function On(r){return ze(JSON.stringify({version:2,heartbeats:r})).length}!function wp(r){Jr(new nn("platform-logger",e=>new Ea(e),"PRIVATE")),Jr(new nn("heartbeat",e=>new kl(e),"PRIVATE")),ci(ks,"0.8.3",r),ci(ks,"0.8.3","esm2017"),ci("fire-js","")}(""),ci("firebase","9.13.0","app");const Cd="@firebase/installations",Dd="0.5.16",Ys=`w:${Dd}`,nl="FIS_v2",uo=new er("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xe(r){return r instanceof jr&&r.code.includes("request-failed")}function Nr({projectId:r}){return`https://firebaseinstallations.googleapis.com/v1/projects/${r}/installations`}function Lo(r){return{token:r.token,requestStatus:2,expiresIn:Bi(r.expiresIn),creationTime:Date.now()}}function Ul(r,e){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,J.Z)(function*(r,e){const s=(yield e.json()).error;return uo.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})})).apply(this,arguments)}function sa({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function No(r,{refreshToken:e}){const n=sa(r);return n.append("Authorization",function Iu(r){return`${nl} ${r}`}(e)),n}function Ec(r){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,J.Z)(function*(r){const e=yield r();return e.status>=500&&e.status<600?r():e})).apply(this,arguments)}function Bi(r){return Number(r.replace("s","000"))}function si(r,e){return gi.apply(this,arguments)}function gi(){return(gi=(0,J.Z)(function*({appConfig:r,heartbeatServiceProvider:e},{fid:n}){const s=Nr(r),u=sa(r),f=e.getImmediate({optional:!0});if(f){const G=yield f.getHeartbeatsHeader();G&&u.append("x-firebase-client",G)}const S={method:"POST",headers:u,body:JSON.stringify({fid:n,authVersion:nl,appId:r.appId,sdkVersion:Ys})},P=yield Ec(()=>fetch(s,S));if(P.ok){const G=yield P.json();return{fid:G.fid||n,registrationStatus:2,refreshToken:G.refreshToken,authToken:Lo(G.authToken)}}throw yield Ul("Create Installation",P)})).apply(this,arguments)}function Bl(r){return new Promise(e=>{setTimeout(e,r)})}const rl=/^[cdef][\w-]{21}$/;function Zs(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const n=function Du(r){return function Cu(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}(r).substr(0,22)}(r);return rl.test(n)?n:""}catch{return""}}function N(r){return`${r.appName}!${r.appId}`}const $=new Map;function B(r,e){const n=N(r);Le(n,e),function Je(r,e){const n=function _r(){return!Wt&&"BroadcastChannel"in self&&(Wt=new BroadcastChannel("[Firebase] FID Change"),Wt.onmessage=r=>{Le(r.data.key,r.data.fid)}),Wt}();n&&n.postMessage({key:r,fid:e}),function Er(){0===$.size&&Wt&&(Wt.close(),Wt=null)}()}(n,e)}function Le(r,e){const n=$.get(r);if(n)for(const s of n)s(e)}let Wt=null;const re="firebase-installations-store";let nr=null;function Jn(){return nr||(nr=us("firebase-installations-database",1,{upgrade:(r,e)=>{0===e&&r.createObjectStore(re)}})),nr}function hs(r,e){return wi.apply(this,arguments)}function wi(){return(wi=(0,J.Z)(function*(r,e){const n=N(r),u=(yield Jn()).transaction(re,"readwrite"),f=u.objectStore(re),v=yield f.get(n);return yield f.put(e,n),yield u.done,(!v||v.fid!==e.fid)&&B(r,e.fid),e})).apply(this,arguments)}function fs(r){return ps.apply(this,arguments)}function ps(){return(ps=(0,J.Z)(function*(r){const e=N(r),s=(yield Jn()).transaction(re,"readwrite");yield s.objectStore(re).delete(e),yield s.done})).apply(this,arguments)}function Ms(r,e){return ho.apply(this,arguments)}function ho(){return(ho=(0,J.Z)(function*(r,e){const n=N(r),u=(yield Jn()).transaction(re,"readwrite"),f=u.objectStore(re),v=yield f.get(n),S=e(v);return void 0===S?yield f.delete(n):yield f.put(S,n),yield u.done,S&&(!v||v.fid!==S.fid)&&B(r,S.fid),S})).apply(this,arguments)}function gs(r){return Is.apply(this,arguments)}function Is(){return(Is=(0,J.Z)(function*(r){let e;const n=yield Ms(r.appConfig,s=>{const u=Oo(s),f=fo(r,u);return e=f.registrationPromise,f.installationEntry});return""===n.fid?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})).apply(this,arguments)}function Oo(r){return Sp(r||{fid:Zs(),registrationStatus:0})}function fo(r,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(uo.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=function il(r,e){return Vl.apply(this,arguments)}(r,n);return{installationEntry:n,registrationPromise:s}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:oa(r)}:{installationEntry:e}}function Vl(){return(Vl=(0,J.Z)(function*(r,e){try{const n=yield si(r,e);return hs(r.appConfig,n)}catch(n){throw Xe(n)&&409===n.customData.serverCode?yield fs(r.appConfig):yield hs(r.appConfig,{fid:e.fid,registrationStatus:0}),n}})).apply(this,arguments)}function oa(r){return po.apply(this,arguments)}function po(){return(po=(0,J.Z)(function*(r){let e=yield Rd(r.appConfig);for(;1===e.registrationStatus;)yield Bl(100),e=yield Rd(r.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:s}=yield gs(r);return s||n}return e})).apply(this,arguments)}function Rd(r){return Ms(r,e=>{if(!e)throw uo.create("installation-not-found");return Sp(e)})}function Sp(r){return function ko(r){return 1===r.registrationStatus&&r.registrationTime+1e4<Date.now()}(r)?{fid:r.fid,registrationStatus:0}:r}function Au(r,e){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,J.Z)(function*({appConfig:r,heartbeatServiceProvider:e},n){const s=za(r,n),u=No(r,n),f=e.getImmediate({optional:!0});if(f){const G=yield f.getHeartbeatsHeader();G&&u.append("x-firebase-client",G)}const S={method:"POST",headers:u,body:JSON.stringify({installation:{sdkVersion:Ys,appId:r.appId}})},P=yield Ec(()=>fetch(s,S));if(P.ok)return Lo(yield P.json());throw yield Ul("Generate Auth Token",P)})).apply(this,arguments)}function za(r,{fid:e}){return`${Nr(r)}/${e}/authTokens:generate`}function Pd(r){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,J.Z)(function*(r,e=!1){let n;const s=yield Ms(r.appConfig,f=>{if(!qn(f))throw uo.create("not-registered");const v=f.authToken;if(!e&&Fo(v))return f;if(1===v.requestStatus)return n=aa(r,e),f;{if(!navigator.onLine)throw uo.create("app-offline");const S=ol(f);return n=Gl(r,S),S}});return n?yield n:s.authToken})).apply(this,arguments)}function aa(r,e){return zl.apply(this,arguments)}function zl(){return(zl=(0,J.Z)(function*(r,e){let n=yield sl(r.appConfig);for(;1===n.authToken.requestStatus;)yield Bl(100),n=yield sl(r.appConfig);const s=n.authToken;return 0===s.requestStatus?Pd(r,e):s})).apply(this,arguments)}function sl(r){return Ms(r,e=>{if(!qn(e))throw uo.create("not-registered");return function Xh(r){return 1===r.requestStatus&&r.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Gl(r,e){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,J.Z)(function*(r,e){try{const n=yield Au(r,e),s=Object.assign(Object.assign({},e),{authToken:n});return yield hs(r.appConfig,s),n}catch(n){if(!Xe(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield hs(r.appConfig,s)}else yield fs(r.appConfig);throw n}})).apply(this,arguments)}function qn(r){return void 0!==r&&2===r.registrationStatus}function Fo(r){return 2===r.requestStatus&&!function Uo(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+36e5}(r)}function ol(r){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function Pu(){return(Pu=(0,J.Z)(function*(r){const e=r,{installationEntry:n,registrationPromise:s}=yield gs(e);return s?s.catch(console.error):Pd(e).catch(console.error),n.fid})).apply(this,arguments)}function Lu(){return(Lu=(0,J.Z)(function*(r,e=!1){const n=r;return yield Ep(n),(yield Pd(n,e)).token})).apply(this,arguments)}function Ep(r){return go.apply(this,arguments)}function go(){return(go=(0,J.Z)(function*(r){const{registrationPromise:e}=yield gs(r);e&&(yield e)})).apply(this,arguments)}function al(r){return uo.create("missing-app-config-values",{valueName:r})}const ku="installations",Nd=r=>{const e=r.getProvider("app").getImmediate(),n=function Tp(r){if(!r||!r.options)throw al("App Configuration");if(!r.name)throw al("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!r.options[n])throw al(n);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:el(e,"heartbeat"),_delete:()=>Promise.resolve()}},Od=r=>{const n=el(r.getProvider("app").getImmediate(),ku).getImmediate();return{getId:()=>function ca(r){return Pu.apply(this,arguments)}(n),getToken:u=>function Xs(r){return Lu.apply(this,arguments)}(n,u)}};(function $l(){Jr(new nn(ku,Nd,"PUBLIC")),Jr(new nn("installations-internal",Od,"PRIVATE"))})(),ci(Cd,Dd),ci(Cd,Dd,"esm2017");const ms="@firebase/remote-config",qi=new er("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class bE{constructor(e,n,s,u){this.client=e,this.storage=n,this.storageCache=s,this.logger=u}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const s=Date.now()-n,u=s<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${s}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${u}.`),u}fetch(e){var n=this;return(0,J.Z)(function*(){const[s,u]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(u&&n.isCachedDataFresh(e.cacheMaxAgeMillis,s))return u;e.eTag=u&&u.eTag;const f=yield n.client.fetch(e),v=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===f.status&&v.push(n.storage.setLastSuccessfulFetchResponse(f)),yield Promise.all(v),f})()}}function rn(r=navigator){return r.languages&&r.languages[0]||r.language}class nv{constructor(e,n,s,u,f,v){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=s,this.projectId=u,this.apiKey=f,this.appId=v}fetch(e){var n=this;return(0,J.Z)(function*(){var s,u,f;const[v,S]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),G=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,q={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},ne={sdk_version:n.sdkVersion,app_instance_id:v,app_instance_id_token:S,app_id:n.appId,language_code:rn()},_e={method:"POST",headers:q,body:JSON.stringify(ne)},Ee=fetch(G,_e),Ue=new Promise((_i,zr)=>{e.signal.addEventListener(()=>{const Gr=new Error("The operation was aborted.");Gr.name="AbortError",zr(Gr)})});let Ct;try{yield Promise.race([Ee,Ue]),Ct=yield Ee}catch(_i){let zr="fetch-client-network";throw"AbortError"===(null===(s=_i)||void 0===s?void 0:s.name)&&(zr="fetch-timeout"),qi.create(zr,{originalErrorMessage:null===(u=_i)||void 0===u?void 0:u.message})}let Rt=Ct.status;const wr=Ct.headers.get("ETag")||void 0;let Ir,Pr;if(200===Ct.status){let _i;try{_i=yield Ct.json()}catch(zr){throw qi.create("fetch-client-parse",{originalErrorMessage:null===(f=zr)||void 0===f?void 0:f.message})}Ir=_i.entries,Pr=_i.state}if("INSTANCE_STATE_UNSPECIFIED"===Pr?Rt=500:"NO_CHANGE"===Pr?Rt=304:("NO_TEMPLATE"===Pr||"EMPTY_CONFIG"===Pr)&&(Ir={}),304!==Rt&&200!==Rt)throw qi.create("fetch-status",{httpStatus:Rt});return{status:Rt,eTag:wr,config:Ir}})()}}class Bu{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return(0,J.Z)(function*(){const s=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,s)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:s}){var u=this;return(0,J.Z)(function*(){yield function Ip(r,e){return new Promise((n,s)=>{const u=Math.max(e-Date.now(),0),f=setTimeout(n,u);r.addEventListener(()=>{clearTimeout(f),s(qi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const f=yield u.client.fetch(e);return yield u.storage.deleteThrottleMetadata(),f}catch(f){if(!function Hr(r){if(!(r instanceof jr&&r.customData))return!1;const e=Number(r.customData.httpStatus);return 429===e||500===e||503===e||504===e}(f))throw f;const v={throttleEndTimeMillis:Date.now()+To(s),backoffCount:s+1};return yield u.storage.setThrottleMetadata(v),u.attemptFetch(e,v)}})()}}class Vu{constructor(e,n,s,u,f){this.app=e,this._client=n,this._storageCache=s,this._storage=u,this._logger=f,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function kr(r,e){var n;const s=r.target.error||void 0;return qi.create(e,{originalErrorMessage:s&&(null===(n=s)||void 0===n?void 0:n.message)})}const yn="app_namespace_store";class $a{constructor(e,n,s,u=function ll(){return new Promise((r,e)=>{var n;try{const s=indexedDB.open("firebase_remote_config",1);s.onerror=u=>{e(kr(u,"storage-open"))},s.onsuccess=u=>{r(u.target.result)},s.onupgradeneeded=u=>{0===u.oldVersion&&u.target.result.createObjectStore(yn,{keyPath:"compositeKey"})}}catch(s){e(qi.create("storage-open",{originalErrorMessage:null===(n=s)||void 0===n?void 0:n.message}))}})}()){this.appId=e,this.appName=n,this.namespace=s,this.openDbPromise=u}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return(0,J.Z)(function*(){const s=yield n.openDbPromise;return new Promise((u,f)=>{var v;const P=s.transaction([yn],"readonly").objectStore(yn),G=n.createCompositeKey(e);try{const q=P.get(G);q.onerror=ne=>{f(kr(ne,"storage-get"))},q.onsuccess=ne=>{const _e=ne.target.result;u(_e?_e.value:void 0)}}catch(q){f(qi.create("storage-get",{originalErrorMessage:null===(v=q)||void 0===v?void 0:v.message}))}})})()}set(e,n){var s=this;return(0,J.Z)(function*(){const u=yield s.openDbPromise;return new Promise((f,v)=>{var S;const G=u.transaction([yn],"readwrite").objectStore(yn),q=s.createCompositeKey(e);try{const ne=G.put({compositeKey:q,value:n});ne.onerror=_e=>{v(kr(_e,"storage-set"))},ne.onsuccess=()=>{f()}}catch(ne){v(qi.create("storage-set",{originalErrorMessage:null===(S=ne)||void 0===S?void 0:S.message}))}})})()}delete(e){var n=this;return(0,J.Z)(function*(){const s=yield n.openDbPromise;return new Promise((u,f)=>{var v;const P=s.transaction([yn],"readwrite").objectStore(yn),G=n.createCompositeKey(e);try{const q=P.delete(G);q.onerror=ne=>{f(kr(ne,"storage-delete"))},q.onsuccess=()=>{u()}}catch(q){f(qi.create("storage-delete",{originalErrorMessage:null===(v=q)||void 0===v?void 0:v.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Cc{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,J.Z)(function*(){const n=e.storage.getLastFetchStatus(),s=e.storage.getLastSuccessfulFetchTimestampMillis(),u=e.storage.getActiveConfig(),f=yield n;f&&(e.lastFetchStatus=f);const v=yield s;v&&(e.lastSuccessfulFetchTimestampMillis=v);const S=yield u;S&&(e.activeConfig=S)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Ud(){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,J.Z)(function*(){if(!Bn())return!1;try{return yield Ne()}catch{return!1}})).apply(this,arguments)}!function Dc(){Jr(new nn("remote-config",function r(e,{instanceIdentifier:n}){const s=e.getProvider("app").getImmediate(),u=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw qi.create("registration-window");if(!Bn())throw qi.create("indexed-db-unavailable");const{projectId:f,apiKey:v,appId:S}=s.options;if(!f)throw qi.create("registration-project-id");if(!v)throw qi.create("registration-api-key");if(!S)throw qi.create("registration-app-id");const P=new $a(S,s.name,n=n||"firebase"),G=new Cc(P),q=new un(ms);q.logLevel=we.ERROR;const ne=new nv(u,Ao,n,f,v,S),_e=new Bu(ne,P),Ee=new bE(_e,P,G,q),Ue=new Vu(s,Ee,G,P,q);return function ui(r){const e=ai(r);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(Ue),Ue},"PUBLIC").setMultipleInstances(!0)),ci(ms,"0.3.15"),ci(ms,"0.3.15","esm2017")}();const ul="/firebase-messaging-sw.js",ja="/firebase-cloud-messaging-push-scope",ef="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",I="google.c.a.c_id",E="google.c.a.c_l",L="google.c.a.ts",z="google.c.a.e";var ae=(()=>{return(r=ae||(ae={})).PUSH_RECEIVED="push-received",r.NOTIFICATION_CLICKED="notification-clicked",ae;var r})();function he(r){const e=new Uint8Array(r);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ae(r){const n=(r+"=".repeat((4-r.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(n),u=new Uint8Array(s.length);for(let f=0;f<s.length;++f)u[f]=s.charCodeAt(f);return u}const ft="fcm_token_details_db",jt="fcm_token_object_Store";function Fr(r){return Cs.apply(this,arguments)}function Cs(){return Cs=(0,J.Z)(function*(r){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(f=>f.name).includes(ft))return null;let e=null;return(yield us(ft,5,{upgrade:(s=(0,J.Z)(function*(u,f,v,S){var P;if(f<2||!u.objectStoreNames.contains(jt))return;const G=S.objectStore(jt),q=yield G.index("fcmSenderId").get(r);if(yield G.clear(),q)if(2===f){const ne=q;if(!ne.auth||!ne.p256dh||!ne.endpoint)return;e={token:ne.fcmToken,createTime:null!==(P=ne.createTime)&&void 0!==P?P:Date.now(),subscriptionOptions:{auth:ne.auth,p256dh:ne.p256dh,endpoint:ne.endpoint,swScope:ne.swScope,vapidKey:"string"==typeof ne.vapidKey?ne.vapidKey:he(ne.vapidKey)}}}else if(3===f){const ne=q;e={token:ne.fcmToken,createTime:ne.createTime,subscriptionOptions:{auth:he(ne.auth),p256dh:he(ne.p256dh),endpoint:ne.endpoint,swScope:ne.swScope,vapidKey:he(ne.vapidKey)}}}else if(4===f){const ne=q;e={token:ne.fcmToken,createTime:ne.createTime,subscriptionOptions:{auth:he(ne.auth),p256dh:he(ne.p256dh),endpoint:ne.endpoint,swScope:ne.swScope,vapidKey:he(ne.vapidKey)}}}}),function(f,v,S,P){return s.apply(this,arguments)})})).close(),yield Do(ft),yield Do("fcm_vapid_details_db"),yield Do("undefined"),Ds(e)?e:null;var s}),Cs.apply(this,arguments)}function Ds(r){if(!r||!r.subscriptionOptions)return!1;const{subscriptionOptions:e}=r;return"number"==typeof r.createTime&&r.createTime>0&&"string"==typeof r.token&&r.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const ys="firebase-messaging-store";let _s=null;function tf(){return _s||(_s=us("firebase-messaging-database",1,{upgrade:(r,e)=>{0===e&&r.createObjectStore(ys)}})),_s}function bi(r){return Dp.apply(this,arguments)}function Dp(){return(Dp=(0,J.Z)(function*(r){const e=Kl(r),s=yield(yield tf()).transaction(ys).objectStore(ys).get(e);if(s)return s;{const u=yield Fr(r.appConfig.senderId);if(u)return yield Bd(r,u),u}})).apply(this,arguments)}function Bd(r,e){return nf.apply(this,arguments)}function nf(){return(nf=(0,J.Z)(function*(r,e){const n=Kl(r),u=(yield tf()).transaction(ys,"readwrite");return yield u.objectStore(ys).put(e,n),yield u.done,e})).apply(this,arguments)}function rf(r){return dl.apply(this,arguments)}function dl(){return(dl=(0,J.Z)(function*(r){const e=Kl(r),s=(yield tf()).transaction(ys,"readwrite");yield s.objectStore(ys).delete(e),yield s.done})).apply(this,arguments)}function Kl({appConfig:r}){return r.appId}const Yi=new er("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vd(r,e){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,J.Z)(function*(r,e){var n;const s=yield Pp(r),u=rv(e),f={method:"POST",headers:s,body:JSON.stringify(u)};let v;try{v=yield(yield fetch(zd(r.appConfig),f)).json()}catch(S){throw Yi.create("token-subscribe-failed",{errorInfo:null===(n=S)||void 0===n?void 0:n.toString()})}if(v.error)throw Yi.create("token-subscribe-failed",{errorInfo:v.error.message});if(!v.token)throw Yi.create("token-subscribe-no-token");return v.token})).apply(this,arguments)}function Yl(r,e){return Um.apply(this,arguments)}function Um(){return(Um=(0,J.Z)(function*(r,e){var n;const s=yield Pp(r),u=rv(e.subscriptionOptions),f={method:"PATCH",headers:s,body:JSON.stringify(u)};let v;try{v=yield(yield fetch(`${zd(r.appConfig)}/${e.token}`,f)).json()}catch(S){throw Yi.create("token-update-failed",{errorInfo:null===(n=S)||void 0===n?void 0:n.toString()})}if(v.error)throw Yi.create("token-update-failed",{errorInfo:v.error.message});if(!v.token)throw Yi.create("token-update-no-token");return v.token})).apply(this,arguments)}function Bm(r,e){return zu.apply(this,arguments)}function zu(){return(zu=(0,J.Z)(function*(r,e){var n;const u={method:"DELETE",headers:yield Pp(r)};try{const v=yield(yield fetch(`${zd(r.appConfig)}/${e}`,u)).json();if(v.error)throw Yi.create("token-unsubscribe-failed",{errorInfo:v.error.message})}catch(f){throw Yi.create("token-unsubscribe-failed",{errorInfo:null===(n=f)||void 0===n?void 0:n.toString()})}})).apply(this,arguments)}function zd({projectId:r}){return`https://fcmregistrations.googleapis.com/v1/projects/${r}/registrations`}function Pp(r){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,J.Z)(function*({appConfig:r,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function rv({p256dh:r,auth:e,endpoint:n,vapidKey:s}){const u={web:{endpoint:n,auth:e,p256dh:r}};return s!==ef&&(u.web.applicationPubKey=s),u}const Gd=6048e5;function sf(r){return zm.apply(this,arguments)}function zm(){return(zm=(0,J.Z)(function*(r){const e=yield xw(r.swRegistration,r.vapidKey),n={vapidKey:r.vapidKey,swScope:r.swRegistration.scope,endpoint:e.endpoint,auth:he(e.getKey("auth")),p256dh:he(e.getKey("p256dh"))},s=yield bi(r.firebaseDependencies);if(s){if(ov(s.subscriptionOptions,n))return Date.now()>=s.createTime+Gd?vw(r,{token:s.token,createTime:Date.now(),subscriptionOptions:n}):s.token;try{yield Bm(r.firebaseDependencies,s.token)}catch(u){console.warn(u)}return sv(r.firebaseDependencies,n)}return sv(r.firebaseDependencies,n)})).apply(this,arguments)}function _w(r){return Lp.apply(this,arguments)}function Lp(){return(Lp=(0,J.Z)(function*(r){const e=yield bi(r.firebaseDependencies);e&&(yield Bm(r.firebaseDependencies,e.token),yield rf(r.firebaseDependencies));const n=yield r.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function vw(r,e){return iv.apply(this,arguments)}function iv(){return(iv=(0,J.Z)(function*(r,e){try{const n=yield Yl(r.firebaseDependencies,e),s=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield Bd(r.firebaseDependencies,s),n}catch(n){throw yield _w(r),n}})).apply(this,arguments)}function sv(r,e){return Gm.apply(this,arguments)}function Gm(){return(Gm=(0,J.Z)(function*(r,e){const s={token:yield Vd(r,e),createTime:Date.now(),subscriptionOptions:e};return yield Bd(r,s),s.token})).apply(this,arguments)}function xw(r,e){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,J.Z)(function*(r,e){return(yield r.pushManager.getSubscription())||r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ae(e)})})).apply(this,arguments)}function ov(r,e){return e.vapidKey===r.vapidKey&&e.endpoint===r.endpoint&&e.auth===r.auth&&e.p256dh===r.p256dh}function av(r){const e={from:r.from,collapseKey:r.collapse_key,messageId:r.fcmMessageId};return function cv(r,e){if(!e.notification)return;r.notification={};const n=e.notification.title;n&&(r.notification.title=n);const s=e.notification.body;s&&(r.notification.body=s);const u=e.notification.image;u&&(r.notification.image=u);const f=e.notification.icon;f&&(r.notification.icon=f)}(e,r),function SE(r,e){!e.data||(r.data=e.data)}(e,r),function lv(r,e){var n,s,u,f,v;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;r.fcmOptions={};const S=null!==(u=null===(s=e.fcmOptions)||void 0===s?void 0:s.link)&&void 0!==u?u:null===(f=e.notification)||void 0===f?void 0:f.click_action;S&&(r.fcmOptions.link=S);const P=null===(v=e.fcmOptions)||void 0===v?void 0:v.analytics_label;P&&(r.fcmOptions.analyticsLabel=P)}(e,r),e}function EE(r){return"object"==typeof r&&!!r&&I in r}function Np(r,e){const n=[];for(let s=0;s<r.length;s++)n.push(r.charAt(s)),s<e.length&&n.push(e.charAt(s));return n.join("")}function Op(r){return Yi.create("missing-app-config-values",{valueName:r})}Np("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Np("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class kp{constructor(e,n,s){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const u=function ww(r){if(!r||!r.options)throw Op("App Configuration Object");if(!r.name)throw Op("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=r;for(const s of e)if(!n[s])throw Op(s);return{appName:r.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:u,installations:n,analyticsProvider:s}}_delete(){return Promise.resolve()}}function Fp(r){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,J.Z)(function*(r){var e;try{r.swRegistration=yield navigator.serviceWorker.register(ul,{scope:ja}),r.swRegistration.update().catch(()=>{})}catch(n){throw Yi.create("failed-service-worker-registration",{browserErrorMessage:null===(e=n)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function bw(r,e){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,J.Z)(function*(r,e){if(!e&&!r.swRegistration&&(yield Fp(r)),e||!r.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Yi.create("invalid-sw-registration");r.swRegistration=e}})).apply(this,arguments)}function TE(r,e){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,J.Z)(function*(r,e){e?r.vapidKey=e:r.vapidKey||(r.vapidKey=ef)})).apply(this,arguments)}function Bp(){return(Bp=(0,J.Z)(function*(r,e){if(!navigator)throw Yi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yi.create("permission-blocked");return yield TE(r,e?.vapidKey),yield bw(r,e?.serviceWorkerRegistration),sf(r)})).apply(this,arguments)}function uv(r,e,n){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,J.Z)(function*(r,e,n){const s=dv(e);(yield r.firebaseDependencies.analyticsProvider.get()).logEvent(s,{message_id:n[I],message_name:n[E],message_time:n[L],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function dv(r){switch(r){case ae.NOTIFICATION_CLICKED:return"notification_open";case ae.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Wm(){return(Wm=(0,J.Z)(function*(r,e){const n=e.data;if(!n.isFirebaseMessaging)return;r.onMessageHandler&&n.messageType===ae.PUSH_RECEIVED&&("function"==typeof r.onMessageHandler?r.onMessageHandler(av(n)):r.onMessageHandler.next(av(n)));const s=n.data;EE(s)&&"1"===s[z]&&(yield uv(r,n.messageType,s))})).apply(this,arguments)}const hv="@firebase/messaging",Ew=r=>{const e=new kp(r.getProvider("app").getImmediate(),r.getProvider("installations-internal").getImmediate(),r.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function Sw(r,e){return Wm.apply(this,arguments)}(e,n)),e},Xl=r=>{const e=r.getProvider("messaging").getImmediate();return{getToken:s=>function Up(r,e){return Bp.apply(this,arguments)}(e,s)}};function pv(){return gv.apply(this,arguments)}function gv(){return(gv=(0,J.Z)(function*(){try{yield Ne()}catch{return!1}return typeof window<"u"&&Bn()&&Pe()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function af(){Jr(new nn("messaging",Ew,"PUBLIC")),Jr(new nn("messaging-internal",Xl,"PRIVATE")),ci(hv,"0.10.0"),ci(hv,"0.10.0","esm2017")}();const zp="analytics",jm="firebase_id",yv="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qm="https://www.googletagmanager.com/gtag/js",As=new un("@firebase/analytics");function Mw(r){return Promise.all(r.map(e=>e.catch(n=>n)))}function AE(r,e){const n=document.createElement("script");n.src=`${qm}?l=${r}&id=${e}`,n.async=!0,document.head.appendChild(n)}function Km(r,e,n,s,u,f){return lf.apply(this,arguments)}function lf(){return(lf=(0,J.Z)(function*(r,e,n,s,u,f){const v=s[u];try{if(v)yield e[v];else{const P=(yield Mw(n)).find(G=>G.measurementId===u);P&&(yield e[P.appId])}}catch(S){As.error(S)}r("config",u,f)})).apply(this,arguments)}function PE(r,e,n,s,u){return _v.apply(this,arguments)}function _v(){return(_v=(0,J.Z)(function*(r,e,n,s,u){try{let f=[];if(u&&u.send_to){let v=u.send_to;Array.isArray(v)||(v=[v]);const S=yield Mw(n);for(const P of v){const G=S.find(ne=>ne.measurementId===P),q=G&&e[G.appId];if(!q){f=[];break}f.push(q)}}0===f.length&&(f=Object.values(e)),yield Promise.all(f),r("event",s,u||{})}catch(f){As.error(f)}})).apply(this,arguments)}function Cw(r){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(qm)&&n.src.includes(r))return n;return null}const la=new er("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Hp=new class Aw{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Rw(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}function es(r){return Ym.apply(this,arguments)}function Ym(){return(Ym=(0,J.Z)(function*(r){var e;const{appId:n,apiKey:s}=r,u={method:"GET",headers:Rw(s)},f=yv.replace("{app-id}",n),v=yield fetch(f,u);if(200!==v.status&&304!==v.status){let S="";try{const P=yield v.json();null!==(e=P.error)&&void 0!==e&&e.message&&(S=P.error.message)}catch{}throw la.create("config-fetch-failed",{httpStatus:v.status,responseMessage:S})}return v.json()})).apply(this,arguments)}function Pw(r){return uf.apply(this,arguments)}function uf(){return(uf=(0,J.Z)(function*(r,e=Hp,n){const{appId:s,apiKey:u,measurementId:f}=r.options;if(!s)throw la.create("no-app-id");if(!u){if(f)return{measurementId:f,appId:s};throw la.create("no-api-key")}const v=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},S=new Ow;return setTimeout((0,J.Z)(function*(){S.abort()}),void 0!==n?n:6e4),Zm({appId:s,apiKey:u,measurementId:f},v,S,e)})).apply(this,arguments)}function Zm(r,e,n){return Xm.apply(this,arguments)}function Xm(){return(Xm=(0,J.Z)(function*(r,{throttleEndTimeMillis:e,backoffCount:n},s,u=Hp){var f,v;const{appId:S,measurementId:P}=r;try{yield Lw(s,e)}catch(G){if(P)return As.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${P} provided in the "measurementId" field in the local Firebase config. [${null===(f=G)||void 0===f?void 0:f.message}]`),{appId:S,measurementId:P};throw G}try{const G=yield es(r);return u.deleteThrottleMetadata(S),G}catch(G){const q=G;if(!Nw(q)){if(u.deleteThrottleMetadata(S),P)return As.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${P} provided in the "measurementId" field in the local Firebase config. [${q?.message}]`),{appId:S,measurementId:P};throw G}const ne=503===Number(null===(v=q?.customData)||void 0===v?void 0:v.httpStatus)?To(n,u.intervalMillis,30):To(n,u.intervalMillis),_e={throttleEndTimeMillis:Date.now()+ne,backoffCount:n+1};return u.setThrottleMetadata(S,_e),As.debug(`Calling attemptFetch again in ${ne} millis`),Zm(r,_e,s,u)}})).apply(this,arguments)}function Lw(r,e){return new Promise((n,s)=>{const u=Math.max(e-Date.now(),0),f=setTimeout(n,u);r.addEventListener(()=>{clearTimeout(f),s(la.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Nw(r){if(!(r instanceof jr&&r.customData))return!1;const e=Number(r.customData.httpStatus);return 429===e||500===e||503===e||504===e}class Ow{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Qm,ff;function wv(){return(wv=(0,J.Z)(function*(r,e,n,s,u){if(u&&u.global)r("event",n,s);else{const f=yield e;r("event",n,Object.assign(Object.assign({},s),{send_to:f}))}})).apply(this,arguments)}function Wp(){return(Wp=(0,J.Z)(function*(r,e,n,s){if(s&&s.global)return r("set",{user_id:n}),Promise.resolve();r("config",yield e,{update:!0,user_id:n})})).apply(this,arguments)}function kw(r){ff=r}function Tv(r){Qm=r}function ey(){return jp.apply(this,arguments)}function jp(){return(jp=(0,J.Z)(function*(){var r;if(!Bn())return As.warn(la.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Ne()}catch(e){return As.warn(la.create("indexeddb-unavailable",{errorInfo:null===(r=e)||void 0===r?void 0:r.toString()}).message),!1}return!0})).apply(this,arguments)}function Ql(){return(Ql=(0,J.Z)(function*(r,e,n,s,u,f,v){var S;const P=Pw(r);P.then(Ee=>{n[Ee.measurementId]=Ee.appId,r.options.measurementId&&Ee.measurementId!==r.options.measurementId&&As.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${Ee.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ee=>As.error(Ee)),e.push(P);const G=ey().then(Ee=>{if(Ee)return s.getId()}),[q,ne]=yield Promise.all([P,G]);Cw(f)||AE(f,q.measurementId),ff&&(u("consent","default",ff),kw(void 0)),u("js",new Date);const _e=null!==(S=v?.config)&&void 0!==S?S:{};return _e.origin="firebase",_e.update=!0,null!=ne&&(_e[jm]=ne),u("config",q.measurementId,_e),Qm&&(u("set",Qm),Tv(void 0)),q.measurementId})).apply(this,arguments)}class NE{constructor(e){this.app=e}_delete(){return delete Ac[this.app.options.appId],Promise.resolve()}}let Ac={},qp=[];const Fw={};let Gu,fl,pf="dataLayer",Yp=!1;function Uw(r,e,n){!function OE(){const r=[];if(Ut()&&r.push("This is a browser extension environment."),Pe()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,u)=>`(${u+1}) ${s}`).join(" "),n=la.create("invalid-analytics-context",{errorInfo:e});As.warn(n.message)}}();const s=r.options.appId;if(!s)throw la.create("no-app-id");if(!r.options.apiKey){if(!r.options.measurementId)throw la.create("no-api-key");As.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ac[s])throw la.create("already-exists",{id:s});if(!Yp){!function RE(r){let e=[];Array.isArray(window[r])?e=window[r]:window[r]=e}(pf);const{wrappedGtag:f,gtagCore:v}=function Iw(r,e,n,s,u){let f=function(...v){window[s].push(arguments)};return window[u]&&"function"==typeof window[u]&&(f=window[u]),window[u]=function vv(r,e,n,s){function f(){return(f=(0,J.Z)(function*(v,S,P){try{"event"===v?yield PE(r,e,n,S,P):"config"===v?yield Km(r,e,n,s,S,P):"consent"===v?r("consent","update",P):r("set",S)}catch(G){As.error(G)}})).apply(this,arguments)}return function u(v,S,P){return f.apply(this,arguments)}}(f,r,e,n),{gtagCore:f,wrappedGtag:window[u]}}(Ac,qp,Fw,pf,"gtag");fl=f,Gu=v,Yp=!0}return Ac[s]=function Mv(r,e,n,s,u,f,v){return Ql.apply(this,arguments)}(r,qp,Fw,e,Gu,pf,n),new NE(r)}function FE(){return Iv.apply(this,arguments)}function Iv(){return(Iv=(0,J.Z)(function*(){if(Ut()||!Pe()||!Bn())return!1;try{return yield Ne()}catch{return!1}})).apply(this,arguments)}function Cv(r,e,n){r=ai(r),function bv(r,e,n,s){return Wp.apply(this,arguments)}(fl,Ac[r.app.options.appId],e,n).catch(s=>As.error(s))}function Dv(r,e,n,s){r=ai(r),function LE(r,e,n,s,u){return wv.apply(this,arguments)}(fl,Ac[r.app.options.appId],e,n,s).catch(u=>As.error(u))}const Bw="@firebase/analytics";!function BE(){Jr(new nn(zp,(e,{options:n})=>Uw(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),Jr(new nn("analytics-internal",function r(e){try{const n=e.getProvider(zp).getImmediate();return{logEvent:(s,u,f)=>Dv(n,s,u,f)}}catch(n){throw la.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),ci(Bw,"0.8.4"),ci(Bw,"0.8.4","esm2017")}();var mf=ge(727);class Xp extends mf.w0{constructor(e,n){super()}schedule(e,n=0){return this}}const ty={setInterval(r,e,...n){const{delegate:s}=ty;return s?.setInterval?s.setInterval(r,e,...n):setInterval(r,e,...n)},clearInterval(r){const{delegate:e}=ty;return(e?.clearInterval||clearInterval)(r)},delegate:void 0};var hI=ge(8737);class Av extends Xp{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var s;if(this.closed)return this;this.state=e;const u=this.id,f=this.scheduler;return null!=u&&(this.id=this.recycleAsyncId(f,u,n)),this.pending=!0,this.delay=n,this.id=null!==(s=this.id)&&void 0!==s?s:this.requestAsyncId(f,this.id,n),this}requestAsyncId(e,n,s=0){return ty.setInterval(e.flush.bind(e,this),s)}recycleAsyncId(e,n,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return n;null!=n&&ty.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(e,n);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let u,s=!1;try{this.work(e)}catch(f){s=!0,u=f||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),u}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:s}=n;this.work=this.state=this.scheduler=null,this.pending=!1,(0,hI.P)(s,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const Vw={now:()=>(Vw.delegate||Date).now(),delegate:void 0};class rr{constructor(e,n=rr.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,s){return new this.schedulerActionCtor(this,e).schedule(s,n)}}rr.now=Vw.now;class zt extends rr{constructor(e,n=rr.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let s;this._active=!0;do{if(s=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,s){for(;e=n.shift();)e.unsubscribe();throw s}}}const ny=new class Ka extends zt{}(class VE extends Av{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,s=0){return null!=s&&s>0||null==s&&this.delay>0?super.requestAsyncId(e,n,s):(e.flush(this),0)}}),zw=new zt(Av);var ry=ge(9751),GE=ge(8505),$d=ge(9468),jd=ge(5363);const yf=new le.GfV("7.4.1"),Jl="__angularfire_symbol__analyticsIsSupportedValue",Qp="__angularfire_symbol__analyticsIsSupported",iy="__angularfire_symbol__remoteConfigIsSupportedValue",_f="__angularfire_symbol__remoteConfigIsSupported",Rc="__angularfire_symbol__messagingIsSupportedValue",Pc="__angularfire_symbol__messagingIsSupported";globalThis[Qp]||(globalThis[Qp]=FE().then(r=>globalThis[Jl]=r).catch(()=>globalThis[Jl]=!1)),globalThis[Pc]||(globalThis[Pc]=pv().then(r=>globalThis[Rc]=r).catch(()=>globalThis[Rc]=!1)),globalThis[_f]||(globalThis[_f]=Ud().then(r=>globalThis[iy]=r).catch(()=>globalThis[iy]=!1));const qd=(r,e)=>{const n=e?[e]:Ed(),s=[];return n.forEach(u=>{u.container.getProvider(r).instances.forEach(v=>{s.includes(v)||s.push(v)})}),s};function Ya(){}class sy{constructor(e,n=ny){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,s){const u=this.zone;return this.delegate.schedule(function(v){u.runGuarded(()=>{e.apply(this,[v])})},n,s)}}class oy{constructor(e){this.zone=e,this.task=null}call(e,n){const s=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ya,{},Ya,Ya)),n.pipe((0,GE.b)({next:s,complete:s,error:s})).subscribe(e).add(s)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Lv=(()=>{class r{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new sy(Zone.current)),this.insideAngular=n.run(()=>new sy(Zone.current,zw)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return r.\u0275fac=function(n){return new(n||r)(le.LFG(le.R0b))},r.\u0275prov=le.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function eu(){const r=globalThis.\u0275AngularFireScheduler;if(!r)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return r}function Hw(r){return eu().ngZone.runOutsideAngular(()=>r())}function Wu(r){return eu().ngZone.run(()=>r())}function ay(r){return eu(),function Ww(r){return function(n){return(n=n.lift(new oy(r.ngZone))).pipe((0,$d.R)(r.outsideAngular),(0,jd.Q)(r.insideAngular))}}(eu())(r)}const $w=(r,e)=>function(){const s=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Wu(()=>r.apply(void 0,s))},Kd=(r,e)=>function(){let n;const s=arguments;for(let f=0;f<arguments.length;f++)"function"==typeof s[f]&&(e&&(n||(n=Wu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ya,{},Ya,Ya)))),s[f]=$w(s[f],n));const u=Hw(()=>r.apply(this,s));if(!e){if(u instanceof ry.y){const f=eu();return u.pipe((0,$d.R)(f.outsideAngular),(0,jd.Q)(f.insideAngular))}return Wu(()=>u)}return u instanceof ry.y?u.pipe(ay):u instanceof Promise?Wu(()=>new Promise((f,v)=>u.then(S=>Wu(()=>f(S)),S=>Wu(()=>v(S))))):"function"==typeof u&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),u.apply(this,arguments)}:Wu(()=>u)};var Yd=ge(9646),cy=ge(9300),ly=ge(3900),Fs=ge(4004),Jp=ge(8421),uy=ge(7579),Zd=ge(4482),ts=ge(5403);var ns=ge(5577),vs=ge(4671);function Nv(r,e){return r===e}var jw=ge(8675);class $u{constructor(e){return e}}class dy{constructor(){return Ed()}}const hy=new le.OlP("angularfire2._apps"),Kw={provide:$u,useFactory:function qw(r){return r&&1===r.length?r[0]:new $u(Ll())},deps:[[new le.FiY,hy]]},Yw={provide:dy,deps:[[new le.FiY,hy]]};function Xd(r){return(e,n)=>{const s=e.runOutsideAngular(()=>r(n));return new $u(s)}}let pl=(()=>{class r{constructor(n){ci("angularfire",yf.full,"core"),ci("angularfire",yf.full,"app"),ci("angular",le.q4F.full,n.toString())}}return r.\u0275fac=function(n){return new(n||r)(le.LFG(le.Lbi))},r.\u0275mod=le.oAB({type:r}),r.\u0275inj=le.cJS({providers:[Kw,Yw]}),r})();function Zw(r,...e){return{ngModule:pl,providers:[{provide:hy,useFactory:Xd(r),multi:!0,deps:[le.R0b,le.zs3,Lv,...e]}]}}const kv=Kd(Zh,!0);var wf=ge(655),Nc=ge(3353);const ZE=function ng(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ju=new er("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),fy=new un("@firebase/auth");function rg(r,...e){fy.logLevel<=we.ERROR&&fy.error(`Auth (${Ao}): ${r}`,...e)}function Js(r,...e){throw py(r,...e)}function Oc(r,...e){return py(r,...e)}function Vv(r,e,n){const s=Object.assign(Object.assign({},ZE()),{[e]:n});return new er("auth","Firebase",s).create(e,{appName:r.name})}function py(r,...e){if("string"!=typeof r){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return ju.create(r,...e)}function kt(r,e,...n){if(!r)throw py(e,...n)}function kc(r){const e="INTERNAL ASSERTION FAILED: "+r;throw rg(e),new Error(e)}function ml(r,e){r||kc(e)}const Jd=new Map;function Za(r){ml(r instanceof Function,"Expected a class definition");let e=Jd.get(r);return e?(ml(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Jd.set(r,e),e)}function my(){var r;return typeof self<"u"&&(null===(r=self.location)||void 0===r?void 0:r.protocol)||null}class th{constructor(e,n){this.shortDelay=e,this.longDelay=n,ml(n>e,"Short delay should be less than long delay!"),this.isMobile=function Cn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}()||function $t(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return function qu(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function sg(){return"http:"===my()||"https:"===my()}()||Ut()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class Jw{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void kc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void kc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void kc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const og={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},eb=new th(3e4,6e4);function rs(r,e,n,s){return bf.apply(this,arguments)}function bf(){return(bf=(0,J.Z)(function*(r,e,n,s,u={}){return ag(r,u,(0,J.Z)(function*(){let f={},v={};s&&("GET"===e?v=s:f={body:JSON.stringify(s)});const S=vn(Object.assign({key:r.config.apiKey},v)).slice(1),P=yield r._getAdditionalHeaders();return P["Content-Type"]="application/json",r.languageCode&&(P["X-Firebase-Locale"]=r.languageCode),Jw.fetch()(cg(r,r.config.apiHost,n,S),Object.assign({method:e,headers:P,referrerPolicy:"no-referrer"},f))}))})).apply(this,arguments)}function ag(r,e,n){return nh.apply(this,arguments)}function nh(){return(nh=(0,J.Z)(function*(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},og),e);try{const u=new vy(r),f=yield Promise.race([n(),u.promise]);u.clearNetworkTimeout();const v=yield f.json();if("needConfirmation"in v)throw Ku(r,"account-exists-with-different-credential",v);if(f.ok&&!("errorMessage"in v))return v;{const S=f.ok?v.errorMessage:v.error.message,[P,G]=S.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===P)throw Ku(r,"credential-already-in-use",v);if("EMAIL_EXISTS"===P)throw Ku(r,"email-already-in-use",v);if("USER_DISABLED"===P)throw Ku(r,"user-disabled",v);const q=s[P]||P.toLowerCase().replace(/[_\s]+/g,"-");if(G)throw Vv(r,q,G);Js(r,q)}}catch(u){if(u instanceof jr)throw u;Js(r,"network-request-failed")}})).apply(this,arguments)}function cg(r,e,n,s){const u=`${e}${n}?${s}`;return r.config.emulator?function _y(r,e){ml(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}(r.config,u):`${r.config.apiScheme}://${u}`}class vy{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Oc(this.auth,"network-request-failed")),eb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ku(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const u=Oc(r,e,s);return u.customData._tokenResponse=n,u}function Yu(){return(Yu=(0,J.Z)(function*(r,e){return rs(r,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function nb(r,e){return wy.apply(this,arguments)}function wy(){return(wy=(0,J.Z)(function*(r,e){return rs(r,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function ih(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Hv(){return(Hv=(0,J.Z)(function*(r,e=!1){const n=ai(r),s=yield n.getIdToken(e),u=dg(s);kt(u&&u.exp&&u.auth_time&&u.iat,n.auth,"internal-error");const f="object"==typeof u.firebase?u.firebase:void 0,v=f?.sign_in_provider;return{claims:u,token:s,authTime:ih(ug(u.auth_time)),issuedAtTime:ih(ug(u.iat)),expirationTime:ih(ug(u.exp)),signInProvider:v||null,signInSecondFactor:f?.sign_in_second_factor||null}})).apply(this,arguments)}function ug(r){return 1e3*Number(r)}function dg(r){var e;const[n,s,u]=r.split(".");if(void 0===n||void 0===s||void 0===u)return rg("JWT malformed, contained fewer than 3 sections"),null;try{const f=wt(s);return f?JSON.parse(f):(rg("Failed to decode base64 JWT payload"),null)}catch(f){return rg("Caught error parsing JWT payload as JSON",null===(e=f)||void 0===e?void 0:e.toString()),null}}function Fc(r,e){return Sy.apply(this,arguments)}function Sy(){return(Sy=(0,J.Z)(function*(r,e,n=!1){if(n)return e;try{return yield e}catch(s){throw s instanceof jr&&Xa(s)&&r.auth.currentUser===r&&(yield r.auth.signOut()),s}})).apply(this,arguments)}function Xa({code:r}){return"auth/user-disabled"===r||"auth/user-token-expired"===r}class rb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),s}{this.errorBackoff=3e4;const u=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,u)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout((0,J.Z)(function*(){yield n.iteration()}),s)}iteration(){var e=this;return(0,J.Z)(function*(){var n;try{yield e.user.getIdToken(!0)}catch(s){return void("auth/network-request-failed"===(null===(n=s)||void 0===n?void 0:n.code)&&e.schedule(!0))}e.schedule()})()}}class Ey{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ih(this.lastLoginAt),this.creationTime=ih(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sf(r){return Ty.apply(this,arguments)}function Ty(){return(Ty=(0,J.Z)(function*(r){var e;const n=r.auth,s=yield r.getIdToken(),u=yield Fc(r,nb(n,{idToken:s}));kt(u?.users.length,n,"internal-error");const f=u.users[0];r._notifyReloadListener(f);const v=null!==(e=f.providerUserInfo)&&void 0!==e&&e.length?$v(f.providerUserInfo):[],S=Iy(r.providerData,v),q=!!r.isAnonymous&&!(r.email&&f.passwordHash||S?.length),ne={uid:f.localId,displayName:f.displayName||null,photoURL:f.photoUrl||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,tenantId:f.tenantId||null,providerData:S,metadata:new Ey(f.createdAt,f.lastLoginAt),isAnonymous:q};Object.assign(r,ne)})).apply(this,arguments)}function My(){return(My=(0,J.Z)(function*(r){const e=ai(r);yield Sf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function Iy(r,e){return[...r.filter(s=>!e.some(u=>u.providerId===s.providerId)),...e]}function $v(r){return r.map(e=>{var{providerId:n}=e,s=(0,wf._T)(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}function Cy(){return(Cy=(0,J.Z)(function*(r,e){const n=yield ag(r,{},(0,J.Z)(function*(){const s=vn({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:u,apiKey:f}=r.config,v=cg(r,u,"/v1/token",`key=${f}`),S=yield r._getAdditionalHeaders();return S["Content-Type"]="application/x-www-form-urlencoded",Jw.fetch()(v,{method:"POST",headers:S,body:s})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class zn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){kt(e.idToken,"internal-error"),kt(typeof e.idToken<"u","internal-error"),kt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function by(r){const e=dg(r);return kt(e,"internal-error"),kt(typeof e.exp<"u","internal-error"),kt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var s=this;return(0,J.Z)(function*(){return kt(!s.accessToken||s.refreshToken,e,"user-token-expired"),n||!s.accessToken||s.isExpired?s.refreshToken?(yield s.refresh(e,s.refreshToken),s.accessToken):null:s.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var s=this;return(0,J.Z)(function*(){const{accessToken:u,refreshToken:f,expiresIn:v}=yield function ib(r,e){return Cy.apply(this,arguments)}(e,n);s.updateTokensAndExpiration(u,f,Number(v))})()}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*s}static fromJSON(e,n){const{refreshToken:s,accessToken:u,expirationTime:f}=n,v=new zn;return s&&(kt("string"==typeof s,"internal-error",{appName:e}),v.refreshToken=s),u&&(kt("string"==typeof u,"internal-error",{appName:e}),v.accessToken=u),f&&(kt("number"==typeof f,"internal-error",{appName:e}),v.expirationTime=f),v}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zn,this.toJSON())}_performRefresh(){return kc("not implemented")}}function tu(r,e){kt("string"==typeof r||typeof r>"u","internal-error",{appName:e})}class nu{constructor(e){var{uid:n,auth:s,stsTokenManager:u}=e,f=(0,wf._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=u,this.accessToken=u.accessToken,this.displayName=f.displayName||null,this.email=f.email||null,this.emailVerified=f.emailVerified||!1,this.phoneNumber=f.phoneNumber||null,this.photoURL=f.photoURL||null,this.isAnonymous=f.isAnonymous||!1,this.tenantId=f.tenantId||null,this.providerData=f.providerData?[...f.providerData]:[],this.metadata=new Ey(f.createdAt||void 0,f.lastLoginAt||void 0)}getIdToken(e){var n=this;return(0,J.Z)(function*(){const s=yield Fc(n,n.stsTokenManager.getToken(n.auth,e));return kt(s,n.auth,"internal-error"),n.accessToken!==s&&(n.accessToken=s,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),s})()}getIdTokenResult(e){return function Gv(r){return Hv.apply(this,arguments)}(this,e)}reload(){return function Wv(r){return My.apply(this,arguments)}(this)}_assign(e){this!==e&&(kt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new nu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){kt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var s=this;return(0,J.Z)(function*(){let u=!1;e.idToken&&e.idToken!==s.stsTokenManager.accessToken&&(s.stsTokenManager.updateFromServerResponse(e),u=!0),n&&(yield Sf(s)),yield s.auth._persistUserIfCurrent(s),u&&s.auth._notifyListenersIfCurrent(s)})()}delete(){var e=this;return(0,J.Z)(function*(){const n=yield e.getIdToken();return yield Fc(e,function xy(r,e){return Yu.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,u,f,v,S,P,G,q;const ne=null!==(s=n.displayName)&&void 0!==s?s:void 0,_e=null!==(u=n.email)&&void 0!==u?u:void 0,Ee=null!==(f=n.phoneNumber)&&void 0!==f?f:void 0,Ue=null!==(v=n.photoURL)&&void 0!==v?v:void 0,Ct=null!==(S=n.tenantId)&&void 0!==S?S:void 0,Rt=null!==(P=n._redirectEventId)&&void 0!==P?P:void 0,wr=null!==(G=n.createdAt)&&void 0!==G?G:void 0,Ir=null!==(q=n.lastLoginAt)&&void 0!==q?q:void 0,{uid:Pr,emailVerified:_i,isAnonymous:zr,providerData:Gr,stsTokenManager:ao}=n;kt(Pr&&ao,e,"internal-error");const ev=zn.fromJSON(this.name,ao);kt("string"==typeof Pr,e,"internal-error"),tu(ne,e.name),tu(_e,e.name),kt("boolean"==typeof _i,e,"internal-error"),kt("boolean"==typeof zr,e,"internal-error"),tu(Ee,e.name),tu(Ue,e.name),tu(Ct,e.name),tu(Rt,e.name),tu(wr,e.name),tu(Ir,e.name);const yA=new nu({uid:Pr,auth:e,email:_e,emailVerified:_i,displayName:ne,isAnonymous:zr,photoURL:Ue,phoneNumber:Ee,tenantId:Ct,stsTokenManager:ev,createdAt:wr,lastLoginAt:Ir});return Gr&&Array.isArray(Gr)&&(yA.providerData=Gr.map(Nk=>Object.assign({},Nk))),Rt&&(yA._redirectEventId=Rt),yA}static _fromIdTokenResponse(e,n,s=!1){return(0,J.Z)(function*(){const u=new zn;u.updateFromServerResponse(n);const f=new nu({uid:n.localId,auth:e,stsTokenManager:u,isAnonymous:s});return yield Sf(f),f})()}}const jv=(()=>{class r{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,J.Z)(function*(){return!0})()}_set(n,s){var u=this;return(0,J.Z)(function*(){u.storage[n]=s})()}_get(n){var s=this;return(0,J.Z)(function*(){const u=s.storage[n];return void 0===u?null:u})()}_remove(n){var s=this;return(0,J.Z)(function*(){delete s.storage[n]})()}_addListener(n,s){}_removeListener(n,s){}}return r.type="NONE",r})();function ru(r,e,n){return`firebase:${r}:${e}:${n}`}class Zu{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:u,name:f}=this.auth;this.fullUserKey=ru(this.userKey,u.apiKey,f),this.fullPersistenceKey=ru("persistence",u.apiKey,f),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,J.Z)(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?nu._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return(0,J.Z)(function*(){if(n.persistence===e)return;const s=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,s?n.setCurrentUser(s):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,s="authUser"){return(0,J.Z)(function*(){if(!n.length)return new Zu(Za(jv),e,s);const u=(yield Promise.all(n.map(function(){var G=(0,J.Z)(function*(q){if(yield q._isAvailable())return q});return function(q){return G.apply(this,arguments)}}()))).filter(G=>G);let f=u[0]||Za(jv);const v=ru(s,e.config.apiKey,e.name);let S=null;for(const G of n)try{const q=yield G._get(v);if(q){const ne=nu._fromJSON(e,q);G!==f&&(S=ne),f=G;break}}catch{}const P=u.filter(G=>G._shouldAllowMigration);return f._shouldAllowMigration&&P.length?(f=P[0],S&&(yield f._set(v,S.toJSON())),yield Promise.all(n.map(function(){var G=(0,J.Z)(function*(q){if(q!==f)try{yield q._remove(v)}catch{}});return function(q){return G.apply(this,arguments)}}())),new Zu(f,e,s)):new Zu(f,e,s)})()}}function hg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function ob(r=ut()){return/iemobile/i.test(r)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function Dy(r=ut()){return/firefox\//i.test(r)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function fg(r=ut()){return/blackberry/i.test(r)}(e))return"Blackberry";if(function iu(r=ut()){return/webos/i.test(r)}(e))return"Webos";if(function Ay(r=ut()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function qv(r=ut()){return/crios\//i.test(r)}(e))&&!e.includes("edge/"))return"Chrome";if(function Ry(r=ut()){return/android/i.test(r)}(e))return"Android";{const s=r.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===s?.length)return s[1]}return"Other"}function Kv(r,e=[]){let n;switch(r){case"Browser":n=hg(ut());break;case"Worker":n=`${hg(ut())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ao}/${s}`}class oh{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=f=>new Promise((v,S)=>{try{v(e(f))}catch(P){S(P)}});s.onAbort=n,this.queue.push(s);const u=this.queue.length-1;return()=>{this.queue[u]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return(0,J.Z)(function*(){var s;if(n.auth.currentUser===e)return;const u=[];try{for(const f of n.queue)yield f(e),f.onAbort&&u.push(f.onAbort)}catch(f){u.reverse();for(const v of u)try{v()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:null===(s=f)||void 0===s?void 0:s.message})}})()}}class ah{constructor(e,n,s){this.app=e,this.heartbeatServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xu(this),this.idTokenSubscription=new Xu(this),this.beforeStateQueue=new oh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ju,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){var s=this;return n&&(this._popupRedirectResolver=Za(n)),this._initializationPromise=this.queue((0,J.Z)(function*(){var u,f;if(!s._deleted&&(s.persistenceManager=yield Zu.create(s,e),!s._deleted)){if(null!==(u=s._popupRedirectResolver)&&void 0!==u&&u._shouldInitProactively)try{yield s._popupRedirectResolver._initialize(s)}catch{}yield s.initializeCurrentUser(n),s.lastNotifiedUid=(null===(f=s.currentUser)||void 0===f?void 0:f.uid)||null,!s._deleted&&(s._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,J.Z)(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return(0,J.Z)(function*(){var s;const u=yield n.assertedPersistence.getCurrentUser();let f=u,v=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const S=null===(s=n.redirectUser)||void 0===s?void 0:s._redirectEventId,P=f?._redirectEventId,G=yield n.tryRedirectSignIn(e);(!S||S===P)&&G?.user&&(f=G.user,v=!0)}if(!f)return n.directlySetCurrentUser(null);if(!f._redirectEventId){if(v)try{yield n.beforeStateQueue.runMiddleware(f)}catch(S){f=u,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(S))}return f?n.reloadAndSetCurrentUserOrClear(f):n.directlySetCurrentUser(null)}return kt(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===f._redirectEventId?n.directlySetCurrentUser(f):n.reloadAndSetCurrentUserOrClear(f)})()}tryRedirectSignIn(e){var n=this;return(0,J.Z)(function*(){let s=null;try{s=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return s})()}reloadAndSetCurrentUserOrClear(e){var n=this;return(0,J.Z)(function*(){var s;try{yield Sf(e)}catch(u){if("auth/network-request-failed"!==(null===(s=u)||void 0===s?void 0:s.code))return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function yy(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}()}_delete(){var e=this;return(0,J.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return(0,J.Z)(function*(){const s=e?ai(e):null;return s&&kt(s.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(s&&s._clone(n))})()}_updateCurrentUser(e,n=!1){var s=this;return(0,J.Z)(function*(){if(!s._deleted)return e&&kt(s.tenantId===e.tenantId,s,"tenant-id-mismatch"),n||(yield s.beforeStateQueue.runMiddleware(e)),s.queue((0,J.Z)(function*(){yield s.directlySetCurrentUser(e),s.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,J.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue((0,J.Z)(function*(){yield n.assertedPersistence.setPersistence(Za(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new er("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var s=this;return(0,J.Z)(function*(){const u=yield s.getOrInitRedirectPersistenceManager(n);return null===e?u.removeCurrentUser():u.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return(0,J.Z)(function*(){if(!n.redirectPersistenceManager){const s=e&&Za(e)||n._popupRedirectResolver;kt(s,n,"argument-error"),n.redirectPersistenceManager=yield Zu.create(n,[Za(s._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return(0,J.Z)(function*(){var s,u;return n._isInitialized&&(yield n.queue((0,J.Z)(function*(){}))),(null===(s=n._currentUser)||void 0===s?void 0:s._redirectEventId)===e?n._currentUser:(null===(u=n.redirectUser)||void 0===u?void 0:u._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return(0,J.Z)(function*(){if(e===n.currentUser)return n.queue((0,J.Z)(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,u){if(this._deleted)return()=>{};const f="function"==typeof n?n:n.next.bind(n),v=this._isInitialized?Promise.resolve():this._initializationPromise;return kt(v,this,"internal-error"),v.then(()=>f(this.currentUser)),"function"==typeof n?e.addObserver(n,s,u):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return(0,J.Z)(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return kt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,J.Z)(function*(){var n;const s={"X-Client-Version":e.clientVersion};e.app.options.appId&&(s["X-Firebase-gmpid"]=e.app.options.appId);const u=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();return u&&(s["X-Firebase-Client"]=u),s})()}}class Xu{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Nn(r,e){const n=new $i(r,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return kt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}(function Jy(r){return`__${r}${Math.floor(1e6*Math.random())}`})("rcb"),new th(3e4,6e4),new th(2e3,1e4),new th(3e4,6e4),new th(5e3,15e3);var Ub="@firebase/auth",Bb="0.20.11";class _T{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return(0,J.Z)(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{var u;e((null===(u=s)||void 0===u?void 0:u.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){kt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function zb(r){return new ry.y(function(e){var n=function Ff(r,e,n,s){return ai(r).onAuthStateChanged(e,n,s)}(r,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}Ln(),function z0(r){Jr(new nn("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),u=e.getProvider("heartbeat"),{apiKey:f,authDomain:v}=s.options;return((S,P)=>{kt(f&&!f.includes(":"),"invalid-api-key",{appName:S.name}),kt(!v?.includes(":"),"argument-error",{appName:S.name});const G={apiKey:f,authDomain:v,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kv(r)},q=new ah(S,P,G);return function ig(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Za);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}(q,n),q})(s,u)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Jr(new nn("auth-internal",e=>{const n=function Rs(r){return ai(r)}(e.getProvider("auth").getImmediate());return new _T(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ci(Ub,Bb,function Sl(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(r)),ci(Ub,Bb,"esm2017")}("Browser");class sm{constructor(e){return e}}class fd{constructor(){return qd("auth")}}const II=Kd(zb,!0);class ln{constructor(e){return e}}const Rn=()=>globalThis[Qp],Tr=Kd(Dv,!0),hn=Kd(Cv,!0);let lr=(()=>{class r{constructor(n,s,u){let f;this.disposables=[],ci("angularfire",yf.full,"user-tracking"),this.initialized=s.runOutsideAngular(()=>new Promise(v=>{f=v})),Rn().then(()=>{const v=u.get(ln);v?this.disposables=[II(n).subscribe(S=>{hn(v,S?.uid),f()})]:f()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}}return r.\u0275fac=function(n){return new(n||r)(le.LFG(sm),le.LFG(le.R0b),le.LFG(le.zs3))},r.\u0275prov=le.Yz7({token:r,factory:r.\u0275fac}),r})();const oe="firebase_screen_id",xt="outlet",Fn="screen_class",en="screen_name";let mn=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const In={},Tn=r=>{const e=[r[Fn],r[xt]].join("#");if(In.hasOwnProperty(e))return In[e];{const n=mn++;return In[e]=n,n}},Vr=(r,e,n)=>r.events.pipe((0,cy.h)(u=>u instanceof Nc.jw)).pipe((0,ly.w)(u=>{var f;const S=(null===(f=r.parseUrl(r.url.replace(/(?:\().+(?:\))/g,Ee=>Ee.replace("://",":///"))).root.children[u.snapshot.outlet])||void 0===f?void 0:f.toString())||"",P=r.routerState.root.children.map(Ee=>Ee).find(Ee=>Ee.outlet===u.snapshot.outlet);if(!P)return(0,Yd.of)(null);let G=P;for(;G.firstChild;)G=G.firstChild;const q=G.pathFromRoot.map(Ee=>{var Ue;return null===(Ue=Ee.routeConfig)||void 0===Ue?void 0:Ue.path}).filter(Ee=>Ee).join("/")||"/",ne={[en]:q,page_path:`/${S}`,firebase_event_origin:"auto",firebase_screen:q,[xt]:u.snapshot.outlet};e&&(ne.page_title=e.getTitle());let _e=P.component;if(_e){if(_e===Nc.fw){let Ee=u.snapshot;for(;Ee.firstChild;)Ee=Ee.firstChild;_e=Ee.component}}else _e=u.snapshot.component;if("string"==typeof _e)return(0,Yd.of)(Object.assign(Object.assign({},ne),{[Fn]:_e}));if(_e){const Ee=n.resolveComponentFactory(_e);return(0,Yd.of)(Object.assign(Object.assign({},ne),{[Fn]:Ee.selector}))}return(0,Yd.of)(null)}),(0,cy.h)(u=>!!u),(0,Fs.U)(u=>Object.assign({firebase_screen_class:u[Fn],[oe]:Tn(u)},u)),function Lc(r,e,n,s){return(0,Zd.e)((u,f)=>{let v;e&&"function"!=typeof e?({duration:n,element:v,connector:s}=e):v=e;const S=new Map,P=Ue=>{S.forEach(Ue),Ue(f)},G=Ue=>P(Ct=>Ct.error(Ue));let q=0,ne=!1;const _e=new ts.Q(f,Ue=>{try{const Ct=r(Ue);let Rt=S.get(Ct);if(!Rt){S.set(Ct,Rt=s?s():new uy.x);const wr=function Ee(Ue,Ct){const Rt=new ry.y(wr=>{q++;const Ir=Ct.subscribe(wr);return()=>{Ir.unsubscribe(),0==--q&&ne&&_e.unsubscribe()}});return Rt.key=Ue,Rt}(Ct,Rt);if(f.next(wr),n){const Ir=(0,ts.x)(Rt,()=>{Rt.complete(),Ir?.unsubscribe()},void 0,void 0,()=>S.delete(Ct));_e.add((0,Jp.Xf)(n(wr)).subscribe(Ir))}}Rt.next(v?v(Ue):Ue)}catch(Ct){G(Ct)}},()=>P(Ue=>Ue.complete()),G,()=>S.clear(),()=>(ne=!0,0===q));u.subscribe(_e)})}(u=>u[xt]),(0,ns.z)(u=>u.pipe(function eg(r,e=vs.y){return r=r??Nv,(0,Zd.e)((n,s)=>{let u,f=!0;n.subscribe((0,ts.x)(s,v=>{const S=e(v);(f||!r(u,S))&&(f=!1,u=S,s.next(v))}))})}((f,v)=>JSON.stringify(f)===JSON.stringify(v)),(0,jw.O)(void 0),function Ov(){return(0,Zd.e)((r,e)=>{let n,s=!1;r.subscribe((0,ts.x)(e,u=>{const f=n;n=u,s&&e.next([f,u]),s=!0}))})}(),(0,Fs.U)(([f,v])=>f?Object.assign({firebase_previous_class:f[Fn],firebase_previous_screen:f[en],firebase_previous_id:f[oe]},v):v))));let yi=(()=>{class r{constructor(n,s,u,f,v,S){ci("angularfire",yf.full,"screen-tracking"),Rn().then(()=>{const P=S.get(ln);!n||!P||f.runOutsideAngular(()=>{this.disposable=Vr(n,s,u).pipe((0,ly.w)(G=>(0,wf.mG)(this,void 0,void 0,function*(){return v&&(yield v.initialized),Tr(P,"screen_view",G)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return r.\u0275fac=function(n){return new(n||r)(le.LFG(Nc.F0,8),le.LFG(W.Dx,8),le.LFG(le._Vd),le.LFG(le.R0b),le.LFG(lr,8),le.LFG(le.zs3))},r.\u0275prov=le.Yz7({token:r,factory:r.\u0275fac}),r})();const Zi=new Map,Us={activated:!1,tokenObservers:[]},El={initialized:!1,enabled:!1};function ur(r){return Zi.get(r)||Us}function os(r,e){Zi.set(r,e)}function Bs(){return El}class Ye{constructor(e,n,s,u,f){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=s,this.lowerBound=u,this.upperBound=f,this.pending=null,this.nextErrorWaitInterval=u,u>f)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return(0,J.Z)(function*(){n.stop();try{n.pending=new hi,yield function Ce(r){return new Promise(e=>{setTimeout(e,r)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new hi,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(s){n.retryPolicy(s)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const sn=new er("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function pr(r){if(!ur(r).activated)throw sn.create("use-before-activation",{appName:r.name})}function mr(r,e){return Mr.apply(this,arguments)}function Mr(){return Mr=(0,J.Z)(function*({url:r,body:e},n){var s,u;const f={"Content-Type":"application/json"},v=n.getImmediate({optional:!0});if(v){const Ee=yield v.getHeartbeatsHeader();Ee&&(f["X-Firebase-Client"]=Ee)}const S={method:"POST",body:JSON.stringify(e),headers:f};let P,G;try{P=yield fetch(r,S)}catch(Ee){throw sn.create("fetch-network-error",{originalErrorMessage:null===(s=Ee)||void 0===s?void 0:s.message})}if(200!==P.status)throw sn.create("fetch-status-error",{httpStatus:P.status});try{G=yield P.json()}catch(Ee){throw sn.create("fetch-parse-error",{originalErrorMessage:null===(u=Ee)||void 0===u?void 0:u.message})}const q=G.ttl.match(/^([\d.]+)(s)$/);if(!q||!q[2]||isNaN(Number(q[1])))throw sn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${G.ttl}`});const ne=1e3*Number(q[1]),_e=Date.now();return{token:G.token,expireTimeMillis:_e+ne,issuedAtTimeMillis:_e}}),Mr.apply(this,arguments)}function Rh(r,e){const{projectId:n,appId:s,apiKey:u}=r.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${n}/apps/${s}:exchangeDebugToken?key=${u}`,body:{debug_token:e}}}const Rr="firebase-app-check-store";let Ei=null;function _a(){return Ei||(Ei=new Promise((r,e)=>{var n;try{const s=indexedDB.open("firebase-app-check-database",1);s.onsuccess=u=>{r(u.target.result)},s.onerror=u=>{var f;e(sn.create("storage-open",{originalErrorMessage:null===(f=u.target.error)||void 0===f?void 0:f.message}))},s.onupgradeneeded=u=>{0===u.oldVersion&&u.target.result.createObjectStore(Rr,{keyPath:"compositeKey"})}}catch(s){e(sn.create("storage-open",{originalErrorMessage:null===(n=s)||void 0===n?void 0:n.message}))}}),Ei)}function rp(){return rp=(0,J.Z)(function*(r,e){const s=(yield _a()).transaction(Rr,"readwrite"),f=s.objectStore(Rr).put({compositeKey:r,value:e});return new Promise((v,S)=>{f.onsuccess=P=>{v()},s.onerror=P=>{var G;S(sn.create("storage-set",{originalErrorMessage:null===(G=P.target.error)||void 0===G?void 0:G.message}))}})}),rp.apply(this,arguments)}const Nh=new un("@firebase/app-check");function Yb(r,e){return Bn()?function cm(r,e){return function _u(r,e){return rp.apply(this,arguments)}(function Y0(r){return`${r.options.appId}-${r.name}`}(r),e)}(r,e).catch(n=>{Nh.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function lm(){return Bs().enabled}function Xb(){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,J.Z)(function*(){const r=Bs();if(r.enabled&&r.token)return r.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Z0.apply(this,arguments)}const ET={error:"UNKNOWN_ERROR"};function TT(r){return Dt.encodeString(JSON.stringify(r),!1)}function X0(r){return Qb.apply(this,arguments)}function Qb(){return Qb=(0,J.Z)(function*(r,e=!1){const n=r.app;pr(n);const s=ur(n);let f,u=s.token;if(u&&!um(u)&&(os(n,Object.assign(Object.assign({},s),{token:void 0})),u=void 0),!u){const P=yield s.cachedTokenPromise;P&&(um(P)?u=P:yield Yb(n,void 0))}if(!e&&u&&um(u))return{token:u.token};let S,v=!1;if(lm()){s.exchangeTokenPromise||(s.exchangeTokenPromise=mr(Rh(n,yield Xb()),r.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),v=!0);const P=yield s.exchangeTokenPromise;return yield Yb(n,P),os(n,Object.assign(Object.assign({},s),{token:P})),{token:P.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),v=!0),u=yield s.exchangeTokenPromise}catch(P){"appCheck/throttled"===P.code?Nh.warn(P.message):Nh.error(P),f=P}return u?f?S=um(u)?{token:u.token,internalError:f}:dm(f):(S={token:u.token},os(n,Object.assign(Object.assign({},s),{token:u})),yield Yb(n,u)):S=dm(f),v&&CT(n,S),S}),Qb.apply(this,arguments)}function Jb(r,e){const n=ur(r),s=n.tokenObservers.filter(u=>u.next!==e);0===s.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),os(r,Object.assign(Object.assign({},n),{tokenObservers:s}))}function IT(r){const{app:e}=r,n=ur(e);let s=n.tokenRefresher;s||(s=function NI(r){const{app:e}=r;return new Ye((0,J.Z)(function*(){let s;if(s=ur(e).token?yield X0(r,!0):yield X0(r),s.error)throw s.error;if(s.internalError)throw s.internalError}),()=>!0,()=>{const n=ur(e);if(n.token){let s=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,n.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(r),os(e,Object.assign(Object.assign({},n),{tokenRefresher:s}))),!s.isRunning()&&n.isTokenAutoRefreshEnabled&&s.start()}function CT(r,e){const n=ur(r).tokenObservers;for(const s of n)try{"EXTERNAL"===s.type&&null!=e.error?s.error(e.error):s.next(e)}catch{}}function um(r){return r.expireTimeMillis-Date.now()>0}function dm(r){return{token:TT(ET),error:r}}class OI{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=ur(this.app);for(const n of e)Jb(this.app,n.next);return Promise.resolve()}}const UT="app-check-internal";!function BT(){Jr(new nn("app-check",r=>function eS(r,e){return new OI(r,e)}(r.getProvider("app").getImmediate(),r.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((r,e,n)=>{r.getProvider(UT).initialize()})),Jr(new nn(UT,r=>function vu(r){return{getToken:e=>X0(r,e),addTokenListener:e=>function MT(r,e,n,s){const{app:u}=r,f=ur(u),v={next:n,error:s,type:e};if(os(u,Object.assign(Object.assign({},f),{tokenObservers:[...f.tokenObservers,v]})),f.token&&um(f.token)){const S=f.token;Promise.resolve().then(()=>{n({token:S.token}),IT(r)}).catch(()=>{})}f.cachedTokenPromise.then(()=>IT(r))}(r,"INTERNAL",e),removeTokenListener:e=>Jb(r.app,e)}}(r.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),ci("@firebase/app-check","0.5.16")}();class oS{constructor(){return qd("app-check")}}typeof window<"u"&&window;var gn,GT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ac={},__=__||{},or=GT||self;function v_(){}function nx(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function x_(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var w_="closure_uid_"+(1e9*Math.random()>>>0),HT=0;function WT(r,e,n){return r.call.apply(r.bind,arguments)}function rx(r,e,n){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),r.apply(e,u)}}return function(){return r.apply(e,arguments)}}function no(r,e,n){return(no=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?WT:rx).apply(null,arguments)}function aS(r,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function ro(r,e){function n(){}n.prototype=e.prototype,r.X=e.prototype,r.prototype=new n,r.prototype.constructor=r,r.Wb=function(s,u,f){for(var v=Array(arguments.length-2),S=2;S<arguments.length;S++)v[S-2]=arguments[S];return e.prototype[u].apply(s,v)}}function Oh(){this.s=this.s,this.o=this.o}Oh.prototype.s=!1,Oh.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function jI(r){Object.prototype.hasOwnProperty.call(r,w_)&&r[w_]||(r[w_]=++HT)}(this)},Oh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const op=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let n=0;n<r.length;n++)if(n in r&&r[n]===e)return n;return-1};function cS(r){const e=r.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=r[s];return n}return[]}function lS(r,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(nx(s)){const u=r.length||0,f=s.length||0;r.length=u+f;for(let v=0;v<f;v++)r[u+v]=s[v]}else r.push(s)}}function io(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}io.prototype.h=function(){this.defaultPrevented=!0};var IA=function(){if(!or.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{or.addEventListener("test",v_,e),or.removeEventListener("test",v_,e)}catch{}return r}();function ix(r){return/^[\s\xa0]*$/.test(r)}var qI=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function uS(r,e){return r<e?-1:r>e?1:0}function sx(){var r=or.navigator;return r&&(r=r.userAgent)?r:""}function xu(r){return-1!=sx().indexOf(r)}function ox(r){return ox[" "](r),r}ox[" "]=v_;var b_,KI=xu("Opera"),ap=xu("Trident")||xu("MSIE"),dS=xu("Edge"),hS=dS||ap,qT=xu("Gecko")&&!(-1!=sx().toLowerCase().indexOf("webkit")&&!xu("Edge"))&&!(xu("Trident")||xu("MSIE"))&&!xu("Edge"),KT=-1!=sx().toLowerCase().indexOf("webkit")&&!xu("Edge");function YT(){var r=or.document;return r?r.documentMode:void 0}e:{var ax="",cx=function(){var r=sx();return qT?/rv:([^\);]+)(\)|;)/.exec(r):dS?/Edge\/([\d\.]+)/.exec(r):ap?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):KT?/WebKit\/(\S+)/.exec(r):KI?/(?:Version)[ \/]?(\S+)/.exec(r):void 0}();if(cx&&(ax=cx?cx[1]:""),ap){var lx=YT();if(null!=lx&&lx>parseFloat(ax)){b_=String(lx);break e}}b_=ax}var YI={};var CA=or.document&&ap&&(YT()||parseInt(b_,10))||void 0;function ux(r,e){if(io.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var n=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(qT){e:{try{ox(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=r.fromElement:"mouseout"==n&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:DA[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&ux.X.h.call(this)}}ro(ux,io);var DA={2:"touch",3:"pen",4:"mouse"};ux.prototype.h=function(){ux.X.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var dx="closure_listenable_"+(1e6*Math.random()|0),AA=0;function RA(r,e,n,s,u){this.listener=r,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.ha=u,this.key=++AA,this.ba=this.ea=!1}function pS(r){r.ba=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function XT(r,e,n){for(const s in r)e.call(n,r[s],s,r)}function S_(r){const e={};for(const n in r)e[n]=r[n];return e}const XI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gS(r,e){let n,s;for(let u=1;u<arguments.length;u++){for(n in s=arguments[u],s)r[n]=s[n];for(let f=0;f<XI.length;f++)n=XI[f],Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])}}function cp(r){this.src=r,this.g={},this.h=0}function hx(r,e){var n=e.type;if(n in r.g){var f,s=r.g[n],u=op(s,e);(f=0<=u)&&Array.prototype.splice.call(s,u,1),f&&(pS(e),0==r.g[n].length&&(delete r.g[n],r.h--))}}function fx(r,e,n,s){for(var u=0;u<r.length;++u){var f=r[u];if(!f.ba&&f.listener==e&&f.capture==!!n&&f.ha==s)return u}return-1}cp.prototype.add=function(r,e,n,s,u){var f=r.toString();(r=this.g[f])||(r=this.g[f]=[],this.h++);var v=fx(r,e,s,u);return-1<v?(e=r[v],n||(e.ea=!1)):((e=new RA(e,this.src,f,!!s,u)).ea=n,r.push(e)),e};var QT="closure_lm_"+(1e6*Math.random()|0),E_={};function mS(r,e,n,s,u){if(s&&s.once)return QI(r,e,n,s,u);if(Array.isArray(e)){for(var f=0;f<e.length;f++)mS(r,e[f],n,s,u);return null}return n=rM(n),r&&r[dx]?r.N(e,n,x_(s)?!!s.capture:!!s,u):JT(r,e,n,!1,s,u)}function JT(r,e,n,s,u,f){if(!e)throw Error("Invalid event type");var v=x_(u)?!!u.capture:!!u,S=_S(r);if(S||(r[QT]=S=new cp(r)),(n=S.add(e,n,s,v,f)).proxy)return n;if(s=function eM(){const e=px;return function r(n){return e.call(r.src,r.listener,n)}}(),n.proxy=s,s.src=r,s.listener=n,r.addEventListener)IA||(u=v),void 0===u&&(u=!1),r.addEventListener(e.toString(),s,u);else if(r.attachEvent)r.attachEvent(tM(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return n}function QI(r,e,n,s,u){if(Array.isArray(e)){for(var f=0;f<e.length;f++)QI(r,e[f],n,s,u);return null}return n=rM(n),r&&r[dx]?r.O(e,n,x_(s)?!!s.capture:!!s,u):JT(r,e,n,!0,s,u)}function JI(r,e,n,s,u){if(Array.isArray(e))for(var f=0;f<e.length;f++)JI(r,e[f],n,s,u);else s=x_(s)?!!s.capture:!!s,n=rM(n),r&&r[dx]?(r=r.i,(e=String(e).toString())in r.g&&-1<(n=fx(f=r.g[e],n,s,u))&&(pS(f[n]),Array.prototype.splice.call(f,n,1),0==f.length&&(delete r.g[e],r.h--))):r&&(r=_S(r))&&(e=r.g[e.toString()],r=-1,e&&(r=fx(e,n,s,u)),(n=-1<r?e[r]:null)&&yS(n))}function yS(r){if("number"!=typeof r&&r&&!r.ba){var e=r.src;if(e&&e[dx])hx(e.i,r);else{var n=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(n,s,r.capture):e.detachEvent?e.detachEvent(tM(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=_S(e))?(hx(n,r),0==n.h&&(n.src=null,e[QT]=null)):pS(r)}}}function tM(r){return r in E_?E_[r]:E_[r]="on"+r}function px(r,e){if(r.ba)r=!0;else{e=new ux(e,this);var n=r.listener,s=r.ha||r.src;r.ea&&yS(r),r=n.call(s,e)}return r}function _S(r){return(r=r[QT])instanceof cp?r:null}var nM="__closure_events_fn_"+(1e9*Math.random()>>>0);function rM(r){return"function"==typeof r?r:(r[nM]||(r[nM]=function(e){return r.handleEvent(e)}),r[nM])}function xo(){Oh.call(this),this.i=new cp(this),this.P=this,this.I=null}function wo(r,e){var n,s=r.I;if(s)for(n=[];s;s=s.I)n.push(s);if(r=r.P,s=e.type||e,"string"==typeof e)e=new io(e,r);else if(e instanceof io)e.target=e.target||r;else{var u=e;gS(e=new io(s,r),u)}if(u=!0,n)for(var f=n.length-1;0<=f;f--){var v=e.g=n[f];u=gx(v,s,!0,e)&&u}if(u=gx(v=e.g=r,s,!0,e)&&u,u=gx(v,s,!1,e)&&u,n)for(f=0;f<n.length;f++)u=gx(v=e.g=n[f],s,!1,e)&&u}function gx(r,e,n,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,f=0;f<e.length;++f){var v=e[f];if(v&&!v.ba&&v.capture==n){var S=v.listener,P=v.ha||v.src;v.ea&&hx(r.i,v),u=!1!==S.call(P,s)&&u}}return u&&!s.defaultPrevented}ro(xo,Oh),xo.prototype[dx]=!0,xo.prototype.removeEventListener=function(r,e,n,s){JI(this,r,e,n,s)},xo.prototype.M=function(){if(xo.X.M.call(this),this.i){var e,r=this.i;for(e in r.g){for(var n=r.g[e],s=0;s<n.length;s++)pS(n[s]);delete r.g[e],r.h--}}this.I=null},xo.prototype.N=function(r,e,n,s){return this.i.add(String(r),e,!1,n,s)},xo.prototype.O=function(r,e,n,s){return this.i.add(String(r),e,!0,n,s)};var vS=or.JSON.stringify;function PA(){var r=cc;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var wS,xS=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new iM,r=>r.reset());class iM{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function LA(r){or.setTimeout(()=>{throw r},0)}function $c(r,e){wS||function bS(){var r=or.Promise.resolve(void 0);wS=function(){r.then(tC)}}(),SS||(wS(),SS=!0),cc.add(r,e)}var SS=!1,cc=new class eC{constructor(){this.h=this.g=null}add(e,n){const s=xS.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}};function tC(){for(var r;r=PA();){try{r.h.call(r.g)}catch(n){LA(n)}var e=xS;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}SS=!1}function fm(r,e){xo.call(this),this.h=r||1,this.g=e||or,this.j=no(this.lb,this),this.l=Date.now()}function ES(r){r.ca=!1,r.R&&(r.g.clearTimeout(r.R),r.R=null)}function TS(r,e,n){if("function"==typeof r)n&&(r=no(r,n));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=no(r.handleEvent,r)}return 2147483647<Number(e)?-1:or.setTimeout(r,e||0)}function mx(r){r.g=TS(()=>{r.g=null,r.i&&(r.i=!1,mx(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}ro(fm,xo),(gn=fm.prototype).ca=!1,gn.R=null,gn.lb=function(){if(this.ca){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-r):(this.R&&(this.g.clearTimeout(this.R),this.R=null),wo(this,"tick"),this.ca&&(ES(this),this.start()))}},gn.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gn.M=function(){fm.X.M.call(this),ES(this),delete this.g};class sM extends Oh{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mx(this)}M(){super.M(),this.g&&(or.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pm(r){Oh.call(this),this.h=r,this.g={}}ro(pm,Oh);var oM=[];function MS(r,e,n,s){Array.isArray(n)||(n&&(oM[0]=n.toString()),n=oM);for(var u=0;u<n.length;u++){var f=mS(e,n[u],s||r.handleEvent,!1,r.h||r);if(!f)break;r.g[f.key]=f}}function IS(r){XT(r.g,function(e,n){this.g.hasOwnProperty(n)&&yS(e)},r),r.g={}}function yx(){this.g=!0}function kh(r,e,n,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function cM(r,e){if(!r.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(r=0;r<n.length;r++)if(Array.isArray(n[r])){var s=n[r];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var f=u[0];if("noop"!=f&&"stop"!=f&&"close"!=f)for(var v=1;v<u.length;v++)u[v]=""}}}return vS(n)}catch{return e}}(r,n)+(s?" "+s:"")})}pm.prototype.M=function(){pm.X.M.call(this),IS(this)},pm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yx.prototype.Aa=function(){this.g=!1},yx.prototype.info=function(){};var gd={},wu=null;function _x(){return wu=wu||new xo}function rC(r){io.call(this,gd.Pa,r)}function T_(r){const e=_x();wo(e,new rC(e))}function lM(r,e){io.call(this,gd.STAT_EVENT,r),this.stat=e}function va(r){const e=_x();wo(e,new lM(e,r))}function uM(r,e){io.call(this,gd.Qa,r),this.size=e}function gm(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return or.setTimeout(function(){r()},e)}gd.Pa="serverreachability",ro(rC,io),gd.STAT_EVENT="statevent",ro(lM,io),gd.Qa="timingevent",ro(uM,io);var CS={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},DS={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function AS(){}function iC(){}AS.prototype.h=null;var wx,lp={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function vx(){io.call(this,"d")}function xx(){io.call(this,"c")}function M_(){}function mm(r,e,n,s){this.l=r,this.j=e,this.m=n,this.U=s||1,this.S=new pm(this),this.O=bx,this.T=new fm(r=hS?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new I_}function I_(){this.i=null,this.g="",this.h=!1}ro(vx,io),ro(xx,io),ro(M_,AS),M_.prototype.g=function(){return new XMLHttpRequest},M_.prototype.i=function(){return{}},wx=new M_;var bx=45e3,Sx={},Ex={};function Tx(r,e,n){r.K=1,r.v=ym(md(e)),r.s=n,r.P=!0,PS(r,null)}function PS(r,e){r.F=Date.now(),Mx(r),r.A=md(r.v);var n=r.A,s=r.U;Array.isArray(s)||(s=[String(s)]),gM(n.i,"t",s),r.C=0,n=r.l.H,r.h=new I_,r.g=Bx(r.l,n?e:null,!r.s),0<r.N&&(r.L=new sM(no(r.La,r,r.g),r.N)),MS(r.S,r.g,"readystatechange",r.ib),e=r.H?S_(r.H):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.da(r.A,r.u,r.s,e)):(r.u="GET",r.g.da(r.A,r.u,null,e)),T_(),function aM(r,e,n,s,u,f){r.info(function(){if(r.g)if(f)for(var v="",S=f.split("&"),P=0;P<S.length;P++){var G=S[P].split("=");if(1<G.length){var q=G[0];G=G[1];var ne=q.split("_");v=2<=ne.length&&"type"==ne[1]?v+(q+"=")+G+"&":v+(q+"=redacted&")}}else v=null;else v=f;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+e+"\n"+n+"\n"+v})}(r.j,r.u,r.A,r.m,r.U,r.s)}function sC(r){return!!r.g&&"GET"==r.u&&2!=r.K&&r.l.Da}function dM(r,e,n){let u,s=!0;for(;!r.I&&r.C<n.length;){if(u=NA(r,n),u==Ex){4==e&&(r.o=4,va(14),s=!1),kh(r.j,r.m,null,"[Incomplete Response]");break}if(u==Sx){r.o=4,va(15),kh(r.j,r.m,n,"[Invalid Chunk]"),s=!1;break}kh(r.j,r.m,u,null),hM(r,u)}sC(r)&&u!=Ex&&u!=Sx&&(r.h.g="",r.C=0),4!=e||0!=n.length||r.h.h||(r.o=1,va(16),s=!1),r.i=r.i&&s,s?0<n.length&&!r.$&&(r.$=!0,(e=r.l).g==r&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),at(e),e.K=!0,va(11))):(kh(r.j,r.m,n,"[Invalid Chunked Response]"),up(r),C_(r))}function NA(r,e){var n=r.C,s=e.indexOf("\n",n);return-1==s?Ex:(n=Number(e.substring(n,s)),isNaN(n)?Sx:(s+=1)+n>e.length?Ex:(e=e.substr(s,n),r.C=s+n,e))}function Mx(r){r.V=Date.now()+r.O,LS(r,r.O)}function LS(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=gm(no(r.gb,r),e)}function Ix(r){r.B&&(or.clearTimeout(r.B),r.B=null)}function C_(r){0==r.l.G||r.I||Ni(r.l,r)}function up(r){Ix(r);var e=r.L;e&&"function"==typeof e.na&&e.na(),r.L=null,ES(r.T),IS(r.S),r.g&&(e=r.g,r.g=null,e.abort(),e.na())}function hM(r,e){try{var n=r.l;if(0!=n.G&&(n.g==r||R_(n.h,r)))if(!r.J&&R_(n.h,r)&&3==n.G){try{var s=n.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<r.F))break e;Wr(n),Q(n)}fn(n),va(18)}}else n.Ba=u[1],0<n.Ba-n.T&&37500>u[2]&&n.L&&0==n.A&&!n.v&&(n.v=gm(no(n.cb,n),6e3));if(1>=kS(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else _d(n,11)}else if((r.J||n.g==r)&&Wr(n),!ix(e))for(u=n.Fa.g.parse(e),e=0;e<u.length;e++){let G=u[e];if(n.T=G[0],G=G[1],2==n.G)if("c"==G[0]){n.I=G[1],n.ka=G[2];const q=G[3];null!=q&&(n.ma=q,n.j.info("VER="+n.ma));const ne=G[4];null!=ne&&(n.Ca=ne,n.j.info("SVER="+n.Ca));const _e=G[5];null!=_e&&"number"==typeof _e&&0<_e&&(n.J=s=1.5*_e,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const Ee=r.g;if(Ee){const Ue=Ee.g?Ee.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ue){var f=s.h;f.g||-1==Ue.indexOf("spdy")&&-1==Ue.indexOf("quic")&&-1==Ue.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(vM(f,f.h),f.h=null))}if(s.D){const Ct=Ee.g?Ee.g.getResponseHeader("X-HTTP-Session-Id"):null;Ct&&(s.za=Ct,Li(s.F,s.D,Ct))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-r.F,n.j.info("Handshake RTT: "+n.P+"ms"));var v=r;if((s=n).sa=Ux(s,s.H?s.ka:null,s.V),v.J){FS(s.h,v);var S=v,P=s.J;P&&S.setTimeout(P),S.B&&(Ix(S),Mx(S)),s.g=v}else tn(s);0<n.i.length&&ye(n)}else"stop"!=G[0]&&"close"!=G[0]||_d(n,7);else 3==n.G&&("stop"==G[0]||"close"==G[0]?"stop"==G[0]?_d(n,7):H(n):"noop"!=G[0]&&n.l&&n.l.wa(G),n.A=0)}T_()}catch{}}function oC(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(nx(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var n=function kA(r){if(r.oa&&"function"==typeof r.oa)return r.oa();if(!r.W||"function"!=typeof r.W){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(nx(r)||"string"==typeof r){var e=[];r=r.length;for(var n=0;n<r;n++)e.push(n);return e}e=[],n=0;for(const s in r)e[n++]=s;return e}}}(r),s=function OA(r){if(r.W&&"function"==typeof r.W)return r.W();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(nx(r)){for(var e=[],n=r.length,s=0;s<n;s++)e.push(r[s]);return e}for(s in e=[],n=0,r)e[n++]=r[s];return e}(r),u=s.length,f=0;f<u;f++)e.call(void 0,s[f],n&&n[f],r)}(gn=mm.prototype).setTimeout=function(r){this.O=r},gn.ib=function(r){r=r.target;const e=this.L;e&&3==h(r)?e.l():this.La(r)},gn.La=function(r){try{if(r==this.g)e:{const q=h(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>q)&&(3!=q||hS||this.g&&(this.h.h||this.g.fa()||g(this.g)))){this.I||4!=q||7==e||T_(),Ix(this);var n=this.g.aa();this.Y=n;t:if(sC(this)){var s=g(this.g);r="";var u=s.length,f=4==h(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){up(this),C_(this);var v="";break t}this.h.i=new or.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:f&&e==u-1});s.splice(0,u),this.h.g+=r,this.C=0,v=this.h.g}else v=this.g.fa();if(this.i=200==n,function nC(r,e,n,s,u,f,v){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+f+" "+v})}(this.j,this.u,this.A,this.m,this.U,q,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var S,P=this.g;if((S=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ix(S)){var G=S;break t}}G=null}if(!(n=G)){this.i=!1,this.o=3,va(12),up(this),C_(this);break e}kh(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,hM(this,n)}this.P?(dM(this,q,v),hS&&this.i&&3==q&&(MS(this.S,this.T,"tick",this.hb),this.T.start())):(kh(this.j,this.m,v,null),hM(this,v)),4==q&&up(this),this.i&&!this.I&&(4==q?Ni(this.l,this):(this.i=!1,Mx(this)))}else 400==n&&0<v.indexOf("Unknown SID")?(this.o=3,va(12)):(this.o=0,va(13)),up(this),C_(this)}}}catch{}},gn.hb=function(){if(this.g){var r=h(this.g),e=this.g.fa();this.C<e.length&&(Ix(this),dM(this,r,e),this.i&&4!=r&&Mx(this))}},gn.cancel=function(){this.I=!0,up(this)},gn.gb=function(){this.B=null;const r=Date.now();0<=r-this.V?(function Fh(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(T_(),va(17)),up(this),this.o=2,C_(this)):LS(this,this.V-r)};var aC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bu(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof bu){this.h=void 0!==e?e:r.h,Cx(this,r.j),this.s=r.s,this.g=r.g,D_(this,r.m),this.l=r.l,e=r.i;var n=new Rx;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Uh(this,n),this.o=r.o}else r&&(n=String(r).match(aC))?(this.h=!!e,Cx(this,n[1]||"",!0),this.s=dp(n[2]||""),this.g=dp(n[3]||"",!0),D_(this,n[4]),this.l=dp(n[5]||"",!0),Uh(this,n[6]||"",!0),this.o=dp(n[7]||"")):(this.h=!!e,this.i=new Rx(null,this.h))}function md(r){return new bu(r)}function Cx(r,e,n){r.j=n?dp(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function D_(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function Uh(r,e,n){e instanceof Rx?(r.i=e,function mM(r,e){e&&!r.j&&(yd(r),r.i=null,r.g.forEach(function(n,s){var u=s.toLowerCase();s!=u&&(fM(this,s),gM(this,u,n))},r)),r.j=e}(r.i,r.h)):(n||(e=A_(e,UA)),r.i=new Rx(e,r.h))}function Li(r,e,n){r.i.set(e,n)}function ym(r){return Li(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function dp(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function A_(r,e,n){return"string"==typeof r?(r=encodeURI(r).replace(e,NS),n&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function NS(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}bu.prototype.toString=function(){var r=[],e=this.j;e&&r.push(A_(e,Dx,!0),":");var n=this.g;return(n||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(A_(e,Dx,!0),"@"),r.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&r.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&r.push("/"),r.push(A_(n,"/"==n.charAt(0)?FA:Ax,!0))),(n=this.i.toString())&&r.push("?",n),(n=this.o)&&r.push("#",A_(n,BA)),r.join("")};var Dx=/[#\/\?@]/g,Ax=/[#\?:]/g,FA=/[#\?]/g,UA=/[#\?@]/g,BA=/#/g;function Rx(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function yd(r){r.g||(r.g=new Map,r.h=0,r.i&&function cC(r,e){if(r){r=r.split("&");for(var n=0;n<r.length;n++){var s=r[n].indexOf("="),u=null;if(0<=s){var f=r[n].substring(0,s);u=r[n].substring(s+1)}else f=r[n];e(f,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(r.i,function(e,n){r.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function fM(r,e){yd(r),e=_m(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function pM(r,e){return yd(r),e=_m(r,e),r.g.has(e)}function gM(r,e,n){fM(r,e),0<n.length&&(r.i=null,r.g.set(_m(r,e),cS(n)),r.h+=n.length)}function _m(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function OS(r){this.l=r||lC,r=or.PerformanceNavigationTiming?0<(r=or.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(or.g&&or.g.Ga&&or.g.Ga()&&or.g.Ga().$b),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(gn=Rx.prototype).add=function(r,e){yd(this),this.i=null,r=_m(this,r);var n=this.g.get(r);return n||this.g.set(r,n=[]),n.push(e),this.h+=1,this},gn.forEach=function(r,e){yd(this),this.g.forEach(function(n,s){n.forEach(function(u){r.call(e,u,s,this)},this)},this)},gn.oa=function(){yd(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const u=r[s];for(let f=0;f<u.length;f++)n.push(e[s])}return n},gn.W=function(r){yd(this);let e=[];if("string"==typeof r)pM(this,r)&&(e=e.concat(this.g.get(_m(this,r))));else{r=Array.from(this.g.values());for(let n=0;n<r.length;n++)e=e.concat(r[n])}return e},gn.set=function(r,e){return yd(this),this.i=null,pM(this,r=_m(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},gn.get=function(r,e){return r&&0<(r=this.W(r)).length?String(r[0]):e},gn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const f=encodeURIComponent(String(s)),v=this.W(s);for(s=0;s<v.length;s++){var u=f;""!==v[s]&&(u+="="+encodeURIComponent(String(v[s]))),r.push(u)}}return this.i=r.join("&")};var lC=10;function _M(r){return!!r.h||!!r.g&&r.g.size>=r.j}function kS(r){return r.h?1:r.g?r.g.size:0}function R_(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function vM(r,e){r.g?r.g.add(e):r.h=e}function FS(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function Px(r){if(null!=r.h)return r.i.concat(r.h.D);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const n of r.g.values())e=e.concat(n.D);return e}return cS(r.i)}function US(){}function uC(){this.g=new US}function VA(r,e,n){const s=n||"";try{oC(r,function(u,f){let v=u;x_(u)&&(v=vS(u)),e.push(s+f+"="+encodeURIComponent(v))})}catch(u){throw e.push(s+"type="+encodeURIComponent("_badmap")),u}}function Lx(r,e,n,s,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(s)}catch{}}function P_(r){this.l=r.ac||null,this.j=r.jb||!1}function Nx(r,e){xo.call(this),this.D=r,this.u=e,this.m=void 0,this.readyState=xM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}OS.prototype.cancel=function(){if(this.i=Px(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},US.prototype.stringify=function(r){return or.JSON.stringify(r,void 0)},US.prototype.parse=function(r){return or.JSON.parse(r,void 0)},ro(P_,AS),P_.prototype.g=function(){return new Nx(this.l,this.j)},P_.prototype.i=function(r){return function(){return r}}({}),ro(Nx,xo);var xM=0;function dC(r){r.j.read().then(r.Ta.bind(r)).catch(r.ga.bind(r))}function Ox(r){r.readyState=4,r.l=null,r.j=null,r.A=null,kx(r)}function kx(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(gn=Nx.prototype).open=function(r,e){if(this.readyState!=xM)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,kx(this)},gn.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.D||or).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},gn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ox(this)),this.readyState=xM},gn.Wa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,kx(this)),this.g&&(this.readyState=3,kx(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof or.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dC(this)}else r.text().then(this.Va.bind(this),this.ga.bind(this))},gn.Ta=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?Ox(this):kx(this),3==this.readyState&&dC(this)}},gn.Va=function(r){this.g&&(this.response=this.responseText=r,Ox(this))},gn.Ua=function(r){this.g&&(this.response=r,Ox(this))},gn.ga=function(){this.g&&Ox(this)},gn.setRequestHeader=function(r,e){this.v.append(r,e)},gn.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},gn.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var n=e.next();!n.done;)r.push((n=n.value)[0]+": "+n[1]),n=e.next();return r.join("\r\n")},Object.defineProperty(Nx.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var GA=or.JSON.parse;function as(r){xo.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hC,this.K=this.L=!1}ro(as,xo);var hC="",HA=/^https?$/i,WA=["POST","PUT"];function fC(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,pC(r),a(r)}function pC(r){r.D||(r.D=!0,wo(r,"complete"),wo(r,"error"))}function o(r){if(r.h&&typeof __<"u"&&(!r.C[1]||4!=h(r)||2!=r.aa()))if(r.v&&4==h(r))TS(r.Ha,0,r);else if(wo(r,"readystatechange"),4==h(r)){r.h=!1;try{const S=r.aa();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=0===S){var u=String(r.H).match(aC)[1]||null;if(!u&&or.self&&or.self.location){var f=or.self.location.protocol;u=f.substr(0,f.length-1)}s=!HA.test(u?u.toLowerCase():"")}n=s}if(n)wo(r,"complete"),wo(r,"success");else{r.m=6;try{var v=2<h(r)?r.g.statusText:""}catch{v=""}r.j=v+" ["+r.aa()+"]",pC(r)}}finally{a(r)}}}function a(r,e){if(r.g){l(r);const n=r.g,s=r.C[0]?v_:null;r.g=null,r.C=null,e||wo(r,"ready");try{n.onreadystatechange=s}catch{}}}function l(r){r.g&&r.K&&(r.g.ontimeout=null),r.A&&(or.clearTimeout(r.A),r.A=null)}function h(r){return r.g?r.g.readyState:0}function g(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.J){case hC:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function x(r){let e="";return XT(r,function(n,s){e+=s,e+=":",e+=n,e+="\r\n"}),e}function T(r,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=x(n),"string"==typeof r?null!=n&&encodeURIComponent(String(n)):Li(r,e,n))}function A(r,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[r]||e}function O(r){this.Ca=0,this.i=[],this.j=new yx,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=A("failFast",!1,r),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=A("baseRetryDelayMs",5e3,r),this.bb=A("retryDelaySeedMs",1e4,r),this.$a=A("forwardChannelMaxRetries",2,r),this.ta=A("forwardChannelRequestTimeoutMs",2e4,r),this.ra=r&&r.xmlHttpFactory||void 0,this.Da=r&&r.Zb||!1,this.J=void 0,this.H=r&&r.supportsCrossDomainXhr||!1,this.I="",this.h=new OS(r&&r.concurrentRequestLimit),this.Fa=new uC,this.O=r&&r.fastHandshake||!1,this.N=r&&r.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=r&&r.Xb||!1,r&&r.Aa&&this.j.Aa(),r&&r.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&r&&r.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function H(r){if(se(r),3==r.G){var e=r.U++,n=md(r.F);Li(n,"SID",r.I),Li(n,"RID",e),Li(n,"TYPE","terminate"),pt(r,n),(e=new mm(r,r.j,e,void 0)).K=2,e.v=ym(md(n)),n=!1,or.navigator&&or.navigator.sendBeacon&&(n=or.navigator.sendBeacon(e.v.toString(),"")),!n&&or.Image&&((new Image).src=e.v,n=!0),n||(e.g=Bx(e.l,null),e.g.da(e.v)),e.F=Date.now(),Mx(e)}Fx(r)}function Q(r){r.g&&(at(r),r.g.cancel(),r.g=null)}function se(r){Q(r),r.u&&(or.clearTimeout(r.u),r.u=null),Wr(r),r.h.cancel(),r.m&&("number"==typeof r.m&&or.clearTimeout(r.m),r.m=null)}function ye(r){_M(r.h)||r.m||(r.m=!0,$c(r.Ja,r),r.C=0)}function je(r,e){var n;n=e?e.m:r.U++;const s=md(r.F);Li(s,"SID",r.I),Li(s,"RID",n),Li(s,"AID",r.T),pt(r,s),r.o&&r.s&&T(s,r.o,r.s),n=new mm(r,r.j,n,r.C+1),null===r.o&&(n.H=r.s),e&&(r.i=e.D.concat(r.i)),e=Lt(r,n,1e3),n.setTimeout(Math.round(.5*r.ta)+Math.round(.5*r.ta*Math.random())),vM(r.h,n),Tx(n,s,e)}function pt(r,e){r.ia&&XT(r.ia,function(n,s){Li(e,s,n)}),r.l&&oC({},function(n,s){Li(e,s,n)})}function Lt(r,e,n){n=Math.min(r.i.length,n);var s=r.l?no(r.l.Ra,r.l,r):null;e:{var u=r.i;let f=-1;for(;;){const v=["count="+n];-1==f?0<n?(f=u[0].h,v.push("ofs="+f)):f=0:v.push("ofs="+f);let S=!0;for(let P=0;P<n;P++){let G=u[P].h;const q=u[P].g;if(G-=f,0>G)f=Math.max(0,u[P].h-100),S=!1;else try{VA(q,v,"req"+G+"_")}catch{s&&s(q)}}if(S){s=v.join("&");break e}}}return r=r.i.splice(0,n),e.D=r,s}function tn(r){r.g||r.u||(r.Z=1,$c(r.Ia,r),r.A=0)}function fn(r){return!(r.g||r.u||3<=r.A||(r.Z++,r.u=gm(no(r.Ia,r),Bh(r,r.A)),r.A++,0))}function at(r){null!=r.B&&(or.clearTimeout(r.B),r.B=null)}function Un(r){r.g=new mm(r,r.j,"rpc",r.Z),null===r.o&&(r.g.H=r.s),r.g.N=0;var e=md(r.sa);Li(e,"RID","rpc"),Li(e,"SID",r.I),Li(e,"CI",r.L?"0":"1"),Li(e,"AID",r.T),Li(e,"TYPE","xmlhttp"),pt(r,e),r.o&&r.s&&T(e,r.o,r.s),r.J&&r.g.setTimeout(r.J);var n=r.g;r=r.ka,n.K=1,n.v=ym(md(e)),n.s=null,n.P=!0,PS(n,r)}function Wr(r){null!=r.v&&(or.clearTimeout(r.v),r.v=null)}function Ni(r,e){var n=null;if(r.g==e){Wr(r),at(r),r.g=null;var s=2}else{if(!R_(r.h,e))return;n=e.D,FS(r.h,e),s=1}if(0!=r.G)if(r.pa=e.Y,e.i)if(1==s){n=e.s?e.s.length:0,e=Date.now()-e.F;var u=r.C;wo(s=_x(),new uM(s,n)),ye(r)}else tn(r);else if(3==(u=e.o)||0==u&&0<r.pa||!(1==s&&function Me(r,e){return!(kS(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.D.concat(r.i),0):1==r.G||2==r.G||r.C>=(r.Za?0:r.$a)||(r.m=gm(no(r.Ja,r,e),Bh(r,r.C)),r.C++,0)))}(r,e)||2==s&&fn(r)))switch(n&&0<n.length&&(e=r.h,e.i=e.i.concat(n)),u){case 1:_d(r,5);break;case 4:_d(r,10);break;case 3:_d(r,6);break;default:_d(r,2)}}function Bh(r,e){let n=r.Xa+Math.floor(Math.random()*r.bb);return r.l||(n*=2),n*e}function _d(r,e){if(r.j.info("Error code "+e),2==e){var n=null;r.l&&(n=null);var s=no(r.kb,r);n||(n=new bu("//www.google.com/images/cleardot.gif"),or.location&&"http"==or.location.protocol||Cx(n,"https"),ym(n)),function zA(r,e){const n=new yx;if(or.Image){const s=new Image;s.onload=aS(Lx,n,s,"TestLoadImage: loaded",!0,e),s.onerror=aS(Lx,n,s,"TestLoadImage: error",!1,e),s.onabort=aS(Lx,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=aS(Lx,n,s,"TestLoadImage: timeout",!1,e),or.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(n.toString(),s)}else va(2);r.G=0,r.l&&r.l.va(e),Fx(r),se(r)}function Fx(r){if(r.G=0,r.la=[],r.l){const e=Px(r.h);(0!=e.length||0!=r.i.length)&&(lS(r.la,e),lS(r.la,r.i),r.h.i.length=0,cS(r.i),r.i.length=0),r.l.ua()}}function Ux(r,e,n){var s=n instanceof bu?md(n):new bu(n,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),D_(s,s.m);else{var u=or.location;s=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var f=new bu(null,void 0);s&&Cx(f,s),e&&(f.g=e),u&&D_(f,u),n&&(f.l=n),s=f}return e=r.za,(n=r.D)&&e&&Li(s,n,e),Li(s,"VER",r.ma),pt(r,s),s}function Bx(r,e,n){if(e&&!r.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new as(n&&r.Da&&!r.ra?new P_({jb:!0}):r.ra)).Ka(r.H),e}function Vx(){}function vm(){if(ap&&!(10<=Number(CA)))throw Error("Environmental error: no available transport.")}function xa(r,e){xo.call(this),this.g=new O(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(r?r["X-WebChannel-Client-Profile"]=e.ya:r={"X-WebChannel-Client-Profile":e.ya}),this.g.S=r,(r=e&&e.Yb)&&!ix(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ix(e)&&(this.g.D=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Hx(this)}function zx(r){vx.call(this);var e=r.__sm__;if(e){e:{for(const n in e){r=n;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function Gx(){xx.call(this),this.status=1}function Hx(r){this.g=r}(gn=as.prototype).Ka=function(r){this.L=r},gn.da=function(r,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+r);e=e?e.toUpperCase():"GET",this.H=r,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wx.g(),this.C=function RS(r){return r.h||(r.h=r.i())}(this.u?this.u:wx),this.g.onreadystatechange=no(this.Ha,this);try{this.F=!0,this.g.open(e,String(r),!0),this.F=!1}catch(f){return void fC(this,f)}if(r=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var u in s)n.set(u,s[u]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const f of s.keys())n.set(f,s.get(f))}s=Array.from(n.keys()).find(f=>"content-type"==f.toLowerCase()),u=or.FormData&&r instanceof or.FormData,!(0<=op(WA,e))||s||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[f,v]of n)this.g.setRequestHeader(f,v);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{l(this),0<this.B&&((this.K=function $A(r){return ap&&function ZI(){return function jT(r){var e=YI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=r(9)}(function(){let r=0;const e=qI(String(b_)).split("."),n=qI("9").split("."),s=Math.max(e.length,n.length);for(let v=0;0==r&&v<s;v++){var u=e[v]||"",f=n[v]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],0==u[0].length&&0==f[0].length)break;r=uS(0==u[1].length?0:parseInt(u[1],10),0==f[1].length?0:parseInt(f[1],10))||uS(0==u[2].length,0==f[2].length)||uS(u[2],f[2]),u=u[3],f=f[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=no(this.qa,this)):this.A=TS(this.qa,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(f){fC(this,f)}},gn.qa=function(){typeof __<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wo(this,"timeout"),this.abort(8))},gn.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,wo(this,"complete"),wo(this,"abort"),a(this))},gn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),a(this,!0)),as.X.M.call(this)},gn.Ha=function(){this.s||(this.F||this.v||this.l?o(this):this.fb())},gn.fb=function(){o(this)},gn.aa=function(){try{return 2<h(this)?this.g.status:-1}catch{return-1}},gn.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},gn.Sa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),GA(e)}},gn.Ea=function(){return this.m},gn.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(gn=O.prototype).ma=8,gn.G=1,gn.Ja=function(r){if(this.m)if(this.m=null,1==this.G){if(!r){this.U=Math.floor(1e5*Math.random()),r=this.U++;const u=new mm(this,this.j,r,void 0);let f=this.s;if(this.S&&(f?(f=S_(f),gS(f,this.S)):f=this.S),null!==this.o||this.N||(u.H=f,f=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){var s=this.i[n];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=n;break e}if(4096===e||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Lt(this,u,e),Li(n=md(this.F),"RID",r),Li(n,"CVER",22),this.D&&Li(n,"X-HTTP-Session-Id",this.D),pt(this,n),f&&(this.N?e="headers="+encodeURIComponent(String(x(f)))+"&"+e:this.o&&T(n,this.o,f)),vM(this.h,u),this.Ya&&Li(n,"TYPE","init"),this.O?(Li(n,"$req",e),Li(n,"SID","null"),u.Z=!0,Tx(u,n,null)):Tx(u,n,e),this.G=2}}else 3==this.G&&(r?je(this,r):0==this.i.length||_M(this.h)||je(this))},gn.Ia=function(){if(this.u=null,Un(this),this.$&&!(this.K||null==this.g||0>=this.P)){var r=2*this.P;this.j.info("BP detection timer enabled: "+r),this.B=gm(no(this.eb,this),r)}},gn.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,va(10),Q(this),Un(this))},gn.cb=function(){null!=this.v&&(this.v=null,Q(this),fn(this),va(19))},gn.kb=function(r){r?(this.j.info("Successfully pinged google.com"),va(2)):(this.j.info("Failed to ping google.com"),va(1))},(gn=Vx.prototype).xa=function(){},gn.wa=function(){},gn.va=function(){},gn.ua=function(){},gn.Ra=function(){},vm.prototype.g=function(r,e){return new xa(r,e)},ro(xa,xo),xa.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var r=this.g,e=this.l,n=this.h||void 0;va(0),r.V=e,r.ia=n||{},r.L=r.Y,r.F=Ux(r,null,r.V),ye(r)},xa.prototype.close=function(){H(this.g)},xa.prototype.u=function(r){var e=this.g;if("string"==typeof r){var n={};n.__data__=r,r=n}else this.v&&((n={}).__data__=vS(r),r=n);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.ab++,r)),3==e.G&&ye(e)},xa.prototype.M=function(){this.g.l=null,delete this.j,H(this.g),delete this.g,xa.X.M.call(this)},ro(zx,vx),ro(Gx,xx),ro(Hx,Vx),Hx.prototype.xa=function(){wo(this.g,"a")},Hx.prototype.wa=function(r){wo(this.g,new zx(r))},Hx.prototype.va=function(r){wo(this.g,new Gx)},Hx.prototype.ua=function(){wo(this.g,"b")},vm.prototype.createWebChannel=vm.prototype.g,xa.prototype.send=xa.prototype.u,xa.prototype.open=xa.prototype.m,xa.prototype.close=xa.prototype.close,CS.NO_ERROR=0,CS.TIMEOUT=8,CS.HTTP_ERROR=6,DS.COMPLETE="complete",iC.EventType=lp,lp.OPEN="a",lp.CLOSE="b",lp.ERROR="c",lp.MESSAGE="d",xo.prototype.listen=xo.prototype.N,as.prototype.listenOnce=as.prototype.O,as.prototype.getLastError=as.prototype.Oa,as.prototype.getLastErrorCode=as.prototype.Ea,as.prototype.getStatus=as.prototype.aa,as.prototype.getResponseJson=as.prototype.Sa,as.prototype.getResponseText=as.prototype.fa,as.prototype.send=as.prototype.da,as.prototype.setWithCredentials=as.prototype.Ka,ac.createWebChannelTransport=function(){return new vm},ac.getStatEventTarget=function(){return _x()},ac.ErrorCode=CS,ac.EventType=DS,ac.Event=gd,ac.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},ac.FetchXmlHttpFactory=P_,ac.WebChannel=iC,ac.XhrIo=as;const jA="@firebase/firestore";class Wo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wo.UNAUTHENTICATED=new Wo(null),Wo.GOOGLE_CREDENTIALS=new Wo("google-credentials-uid"),Wo.FIRST_PARTY=new Wo("first-party-uid"),Wo.MOCK_USER=new Wo("mock-user");let BS="9.13.0";const xm=new un("@firebase/firestore");function Et(r,...e){if(xm.logLevel<=we.DEBUG){const n=e.map(mC);xm.debug(`Firestore (${BS}): ${r}`,...n)}}function Vs(r,...e){if(xm.logLevel<=we.ERROR){const n=e.map(mC);xm.error(`Firestore (${BS}): ${r}`,...n)}}function mC(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function pn(r="Unexpected state"){const e=`FIRESTORE (${BS}) INTERNAL ASSERTION FAILED: `+r;throw Vs(e),new Error(e)}function Yn(r,e){r||pn()}const Be_CANCELLED="cancelled",Be_INVALID_ARGUMENT="invalid-argument",Be_FAILED_PRECONDITION="failed-precondition",Be_UNAVAILABLE="unavailable";class _t extends jr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class qA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Wo.UNAUTHENTICATED))}shutdown(){}}class YP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ZP{constructor(e){this.t=e,this.currentUser=Wo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var s=this;let u=this.i;const f=G=>this.i!==u?(u=this.i,n(G)):Promise.resolve();let v=new bo;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new bo,e.enqueueRetryable(()=>f(this.currentUser))};const S=()=>{const G=v;e.enqueueRetryable((0,J.Z)(function*(){yield G.promise,yield f(s.currentUser)}))},P=G=>{Et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=G,this.auth.addAuthTokenListener(this.o),S()};this.t.onInit(G=>P(G)),setTimeout(()=>{if(!this.auth){const G=this.t.getImmediate({optional:!0});G?P(G):(Et("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new bo)}},0),S()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Yn("string"==typeof s.accessToken),new qA(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Yn(null===e||"string"==typeof e),new Wo(e)}}class XP{constructor(e,n,s,u){this.h=e,this.l=n,this.m=s,this.g=u,this.type="FirstParty",this.user=Wo.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Yn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class QP{constructor(e,n,s,u){this.h=e,this.l=n,this.m=s,this.g=u}getToken(){return Promise.resolve(new XP(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(Wo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JP{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const s=f=>{null!=f.error&&Et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const v=f.token!==this.A;return this.A=f.token,Et("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?n(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>s(f))};const u=f=>{Et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.appCheck.addTokenListener(this.o)};this.T.onInit(f=>u(f)),setTimeout(()=>{if(!this.appCheck){const f=this.T.getImmediate({optional:!0});f?u(f):Et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Yn("string"==typeof n.token),this.A=n.token,new KA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function eL(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}function dr(r,e){return r<e?-1:r>e?1:0}class wM{constructor(e,n,s){void 0===n?n=0:n>e.length&&pn(),void 0===s?s=e.length-n:s>e.length-n&&pn(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return 0===wM.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wM?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let u=0;u<s;u++){const f=e.get(u),v=n.get(u);if(f<v)return-1;if(f>v)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Xr extends wM{construct(e,n,s){return new Xr(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new _t(Be_INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(u=>u.length>0))}return new Xr(n)}static emptyPath(){return new Xr([])}}class Kt{constructor(e){this.path=e}static fromPath(e){return new Kt(Xr.fromString(e))}static fromName(e){return new Kt(Xr.fromString(e).popFirst(5))}static empty(){return new Kt(Xr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Xr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Kt(new Xr(e.slice()))}}function bm(r){return"IndexedDbTransactionError"===r.name}class Ps{constructor(e,n){this.comparator=e,this.root=n||wa.EMPTY}insert(e,n){return new Ps(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wa.BLACK,null,null))}remove(e){return new Ps(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wa.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(0===s)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return n+s.left.size;u<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new TM(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new TM(this.root,e,this.comparator,!1)}getReverseIterator(){return new TM(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new TM(this.root,e,this.comparator,!0)}}class TM{constructor(e,n,s,u){this.isReverse=u,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=n?s(e.key,n):1,n&&u&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(0===f){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wa{constructor(e,n,s,u,f){this.key=e,this.value=n,this.color=s??wa.RED,this.left=u??wa.EMPTY,this.right=f??wa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,u,f){return new wa(e??this.key,n??this.value,s??this.color,u??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let u=this;const f=s(e,u.key);return u=f<0?u.copy(null,null,null,u.left.insert(e,n,s),null):0===f?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return wa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return wa.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pn();const e=this.left.check();if(e!==this.right.check())throw pn();return e+(this.isRed()?0:1)}}wa.EMPTY=null,wa.RED=!0,wa.BLACK=!1,wa.EMPTY=new class{constructor(){this.size=0}get key(){throw pn()}get value(){throw pn()}get color(){throw pn()}get left(){throw pn()}get right(){throw pn()}copy(r,e,n,s,u){return this}insert(r,e,n){return new wa(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ti{constructor(e){this.comparator=e,this.data=new Ps(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let s;for(s=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new r1(this.data.getIterator())}getIteratorFrom(e){return new r1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ti)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,f=s.getNext().key;if(0!==this.comparator(u,f))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ti(this.comparator);return n.data=e,n}}class r1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class So{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new So(n)}static fromUint8Array(e){const n=function(s){let u="";for(let f=0;f<s.length;++f)u+=String.fromCharCode(s[f]);return u}(e);return new So(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function Ls(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}So.EMPTY_BYTE_STRING=new So("");class lL{constructor(e,n,s,u,f,v,S,P){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=u,this.ssl=f,this.forceLongPolling=v,this.autoDetectLongPolling=S,this.useFetchStreams=P}}class F_{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new F_("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof F_&&e.projectId===this.projectId&&e.database===this.database}}var so,Qr;(Qr=so||(so={}))[Qr.OK=0]="OK",Qr[Qr.CANCELLED=1]="CANCELLED",Qr[Qr.UNKNOWN=2]="UNKNOWN",Qr[Qr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qr[Qr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qr[Qr.NOT_FOUND=5]="NOT_FOUND",Qr[Qr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qr[Qr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qr[Qr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qr[Qr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qr[Qr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qr[Qr.ABORTED=10]="ABORTED",Qr[Qr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qr[Qr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qr[Qr.INTERNAL=13]="INTERNAL",Qr[Qr.UNAVAILABLE=14]="UNAVAILABLE",Qr[Qr.DATA_LOSS=15]="DATA_LOSS",new Ps(Kt.comparator),new Ps(Kt.comparator),new Ps(Kt.comparator),new Ti(Kt.comparator),new Ti(dr);class j_{constructor(){}ce(e,n){this.ae(e,n),n.he()}ae(e,n){if("nullValue"in e)this.le(n,5);else if("booleanValue"in e)this.le(n,10),n.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(n,15),n.fe(Ls(e.integerValue));else if("doubleValue"in e){const s=Ls(e.doubleValue);isNaN(s)?this.le(n,13):(this.le(n,15),function $S(r){return 0===r&&1/r==-1/0}(s)?n.fe(0):n.fe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.le(n,20),"string"==typeof s?n.de(s):(n.de(`${s.seconds||""}`),n.fe(s.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,n),this.we(n);else if("bytesValue"in e)this.le(n,30),n.me(function k_(r){return"string"==typeof r?So.fromBase64String(r):So.fromUint8Array(r)}(e.bytesValue)),this.we(n);else if("referenceValue"in e)this.ge(e.referenceValue,n);else if("geoPointValue"in e){const s=e.geoPointValue;this.le(n,45),n.fe(s.latitude||0),n.fe(s.longitude||0)}else"mapValue"in e?function l1(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?this.le(n,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,n),this.we(n)):"arrayValue"in e?(this.pe(e.arrayValue,n),this.we(n)):pn()}_e(e,n){this.le(n,25),this.Ie(e,n)}Ie(e,n){n.de(e)}ye(e,n){const s=e.fields||{};this.le(n,55);for(const u of Object.keys(s))this._e(u,n),this.ae(s[u],n)}pe(e,n){const s=e.values||[];this.le(n,50);for(const u of s)this.ae(u,n)}ge(e,n){this.le(n,37),Kt.fromName(e).path.forEach(s=>{this.le(n,60),this.Ie(s,n)})}le(e,n){e.fe(n)}we(e){e.fe(2)}}j_.Te=new j_,new Uint8Array(0);class Kc{constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Kc(e,Kc.DEFAULT_COLLECTION_PERCENTILE,Kc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function qM(){return typeof document<"u"?document:null}Kc.DEFAULT_COLLECTION_PERCENTILE=10,Kc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kc.DEFAULT=new Kc(41943040,Kc.DEFAULT_COLLECTION_PERCENTILE,Kc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kc.DISABLED=new Kc(-1,0,0);class eD{constructor(e,n,s=1e3,u=1.5,f=6e4){this.Hs=e,this.timerId=n,this.mo=s,this.yo=u,this.po=f,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),s=Math.max(0,Date.now()-this.Eo),u=Math.max(0,n-s);u>0&&Et("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class vD{constructor(e,n,s,u,f){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=u,this.removalCallback=f,this.deferred=new bo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,n,s,u,f){const v=Date.now()+s,S=new vD(e,n,v,u,f);return S.start(s),S}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _t(Be_CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new _t(Be_INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=function ZM(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(n=r).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof r?"a function":pn()}(r);throw new _t(Be_INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}const hP=new Map;class fP{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new _t(Be_INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new _t(Be_INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function FO(r,e,n,s){if(!0===e&&!0===s)throw new _t(Be_INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _E{constructor(e,n,s,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _t(Be_FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _t(Be_FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fP(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new KP;switch(n.type){case"gapi":return new QP(n.client,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new _t(Be_INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=hP.get(e);n&&(Et("ComponentProvider","Removing Datastore"),hP.delete(e),n.terminate())}(this),Promise.resolve()}}function UO(r,e,n,s={}){var u;const f=(r=Kr(r,_E))._getSettings();if("firestore.googleapis.com"!==f.host&&f.host!==e&&function VS(r,...e){if(xm.logLevel<=we.WARN){const n=e.map(mC);xm.warn(`Firestore (${BS}): ${r}`,...n)}}("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},f),{host:`${e}:${n}`,ssl:!1})),s.mockUserToken){let v,S;if("string"==typeof s.mockUserToken)v=s.mockUserToken,S=Wo.MOCK_USER;else{v=function $r(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s=e||"demo-project",u=r.iat||0,f=r.sub||r.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const v=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:u,exp:u+3600,auth_time:u,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}}},r);return[ze(JSON.stringify({alg:"none",type:"JWT"})),ze(JSON.stringify(v)),""].join(".")}(s.mockUserToken,null===(u=r._app)||void 0===u?void 0:u.options.projectId);const P=s.mockUserToken.sub||s.mockUserToken.user_id;if(!P)throw new _t(Be_INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Wo(P)}r._authCredentials=new YP(new qA(v,S))}}class $O{constructor(e,n,s,u){var f=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=u,this.user=Wo.UNAUTHENTICATED,this.clientId=class YA{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const u=eL(40);for(let f=0;f<u.length;++f)s.length<20&&u[f]<n&&(s+=e.charAt(u[f]%e.length))}return s}}.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var v=(0,J.Z)(function*(S){Et("FirestoreClient","Received user=",S.uid),yield f.authCredentialListener(S),f.user=S});return function(S){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(s,v=>(Et("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,J.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _t(Be_FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new bo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,J.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(s){const u=function lw(r,e){if(Vs("AsyncQueue",`${e}: ${r}`),bm(r))return new _t(Be_UNAVAILABLE,`${e}: ${r}`);throw r}(s,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}class JO{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new eD(this,"async_queue_retry"),this.Wc=()=>{const n=qM();n&&Et("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=qM();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const n=qM();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const n=new bo;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,J.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(n){if(!bm(n))throw n;Et("AsyncQueue","Operation failed with retryable error: "+n)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(s=>{throw this.Kc=s,this.Gc=!1,Vs("INTERNAL UNHANDLED ERROR: ",function(f){let v=f.message||"";return f.stack&&(v=f.stack.includes(f.message)?f.stack:f.message+"\n"+f.stack),v}(s)),s}).then(s=>(this.Gc=!1,s))));return this.Bc=n,n}enqueueAfterDelay(e,n,s){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const u=vD.createAndSchedule(this,e,n,s,f=>this.Yc(f));return this.qc.push(u),u}zc(){this.Kc&&pn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,J.Z)(function*(){let n;do{n=e.Bc,yield n}while(n!==e.Bc)})()}Zc(e){for(const n of this.qc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.qc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.qc.indexOf(e);this.qc.splice(n,1)}}class Xi extends _E{constructor(e,n,s,u){super(e,n,s,u),this.type="firestore",this._queue=new JO,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||function bP(r){var e;const n=r._freezeSettings(),s=(f=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new lL(r._databaseId,f,r._persistenceKey,(S=n).host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,S.useFetchStreams));var f,S;r._firestoreClient=new $O(r._authCredentials,r._appCheckCredentials,r._queue,s)}(this),this._firestoreClient.terminate()}}function tk(r,e){const s="string"==typeof r?r:e||"(default)",u=el("object"==typeof r?r:Ll(),"firestore").getImmediate({identifier:s});if(!u._initialized){const f=(r=>{const e=(r=>{var e,n;return null===(n=null===(e=Ln())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[r]})(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),s]:[e.substring(0,n),s]})("firestore");f&&UO(u,...f)}return u}!function(r,e=!0){BS="9.13.0",Jr(new nn("firestore",(n,{instanceIdentifier:s,options:u})=>{const f=n.getProvider("app").getImmediate(),v=new Xi(new ZP(n.getProvider("auth-internal")),new JP(n.getProvider("app-check-internal")),function(S,P){if(!Object.prototype.hasOwnProperty.apply(S.options,["projectId"]))throw new _t(Be_INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new F_(S.options.projectId,P)}(f,s),f);return u=Object.assign({useFetchStreams:e},u),v._setSettings(u),v},"PUBLIC").setMultipleInstances(!0)),ci(jA,"3.7.2",r),ci(jA,"3.7.2","esm2017")}();class gA{constructor(e){return e}}const WP="firestore",mA=new le.OlP("angularfire2.firestore-instances");function vk(r){return(e,n)=>{const s=e.runOutsideAngular(()=>r(n));return new gA(s)}}const xk={provide:class yk{constructor(){return qd(WP)}},deps:[[new le.FiY,mA]]},wk={provide:gA,useFactory:function _k(r,e){const n=function Hu(r,e,n){if(e){if(1===e.length)return e[0];const f=e.filter(v=>v.app===n);if(1===f.length)return f[0]}return n.container.getProvider(r).getImmediate({optional:!0})}(WP,r,e);return n&&new gA(n)},deps:[[new le.FiY,mA],$u]};let bk=(()=>{class r{constructor(){ci("angularfire",yf.full,"fst")}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=le.oAB({type:r}),r.\u0275inj=le.cJS({providers:[wk,xk]}),r})();function Sk(r,...e){return{ngModule:bk,providers:[{provide:mA,useFactory:vk(r),multi:!0,deps:[le.R0b,le.zs3,Lv,dy,[new le.FiY,fd],[new le.FiY,oS],...e]}]}}const Ek=Kd(tk,!0),$P_firebase={projectId:"kuti-dev",appId:"1:532793028961:web:630de702277d3002519520",storageBucket:"kuti-dev.appspot.com",locationId:"us-central",apiKey:"AIzaSyBlrnLr_m2i_64pAwfgqo2A6EsfrL_QWoI",authDomain:"kuti-dev.firebaseapp.com",messagingSenderId:"532793028961"};let Tk=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=le.Xpm({type:r,selectors:[["app-header"]],decls:7,vars:0,consts:[[1,"navbar","text-center"],["routerLink",""],["routerLink","/projects","routerLinkActive","router-link-active"],["routerLink","/contact","routerLinkActive","router-link-active"]],template:function(n,s){1&n&&(le.TgZ(0,"div",0)(1,"a",1),le._uU(2,"landing"),le.qZA(),le.TgZ(3,"a",2),le._uU(4,"projects"),le.qZA(),le.TgZ(5,"a",3),le._uU(6,"contact"),le.qZA()())},dependencies:[Nc.yS,Nc.Od],styles:[".navbar[_ngcontent-%COMP%]{overflow:hidden;width:100%;margin:0 auto}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-align:center;padding:14px 16px;font-size:15px;font-weight:400}h2[_ngcontent-%COMP%]{text-align:center}"]}),r})(),Mk=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=le.Xpm({type:r,selectors:[["app-footer"]],decls:6,vars:0,consts:[[1,"text-center"],[1,"flex","flex-col"],[1,"text-sm","text-gray-400","sm:text-center"]],template:function(n,s){1&n&&(le.TgZ(0,"footer",0)(1,"div",1)(2,"span",2),le._uU(3,"\xa9 2022 Kutay YILDIRIM"),le.qZA(),le.TgZ(4,"span",2),le._uU(5,"yildirimkutay@outlook.com.tr"),le.qZA()()())}}),r})();const Ik=[{path:"",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=le.Xpm({type:r,selectors:[["app-project-layout"]],decls:4,vars:0,template:function(n,s){1&n&&(le.TgZ(0,"div"),le._UZ(1,"app-header")(2,"router-outlet")(3,"app-footer"),le.qZA())},dependencies:[Nc.lC,Tk,Mk],styles:["*[_ngcontent-%COMP%]{margin:10px 60px}"]}),r})(),children:[{path:"",loadChildren:()=>Promise.resolve().then(ge.bind(ge,1600)).then(r=>r.HomeModule)}]}];let Ck=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=le.oAB({type:r}),r.\u0275inj=le.cJS({imports:[Nc.Bz.forRoot(Ik),Nc.Bz]}),r})(),Dk=(()=>{class r{constructor(){this.title="kuti.dev"}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=le.Xpm({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(n,s){1&n&&le._UZ(0,"router-outlet")},dependencies:[Nc.lC]}),r})();var Ak=ge(1600),Rk=ge(6895);let Pk=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=le.oAB({type:r}),r.\u0275inj=le.cJS({imports:[Rk.ez,Nc.Bz]}),r})(),Lk=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=le.oAB({type:r,bootstrap:[Dk]}),r.\u0275inj=le.cJS({providers:[yi,lr],imports:[Zw(()=>kv($P_firebase)),Sk(()=>Ek()),W.b2,Ck,Pk,Ak.HomeModule]}),r})();(0,le.G48)(),W.q6().bootstrapModule(Lk).catch(r=>console.error(r))},9751:(Wn,vt,ge)=>{ge.d(vt,{y:()=>Qt});var W=ge(2961),le=ge(727),J=ge(8822),ot=ge(9635),Ke=ge(2416),Ft=ge(576),Tt=ge(2806);let Qt=(()=>{class wt{constructor(dt){dt&&(this._subscribe=dt)}lift(dt){const on=new wt;return on.source=this,on.operator=dt,on}subscribe(dt,on,ut){const Cn=function ze(wt){return wt&&wt instanceof W.Lv||function ht(wt){return wt&&(0,Ft.m)(wt.next)&&(0,Ft.m)(wt.error)&&(0,Ft.m)(wt.complete)}(wt)&&(0,le.Nn)(wt)}(dt)?dt:new W.Hp(dt,on,ut);return(0,Tt.x)(()=>{const{operator:ar,source:yr}=this;Cn.add(ar?ar.call(Cn,yr):yr?this._subscribe(Cn):this._trySubscribe(Cn))}),Cn}_trySubscribe(dt){try{return this._subscribe(dt)}catch(on){dt.error(on)}}forEach(dt,on){return new(on=Dt(on))((ut,Cn)=>{const ar=new W.Hp({next:yr=>{try{dt(yr)}catch(Ut){Cn(Ut),ar.unsubscribe()}},error:Cn,complete:ut});this.subscribe(ar)})}_subscribe(dt){var on;return null===(on=this.source)||void 0===on?void 0:on.subscribe(dt)}[J.L](){return this}pipe(...dt){return(0,ot.U)(dt)(this)}toPromise(dt){return new(dt=Dt(dt))((on,ut)=>{let Cn;this.subscribe(ar=>Cn=ar,ar=>ut(ar),()=>on(Cn))})}}return wt.create=$n=>new wt($n),wt})();function Dt(wt){var $n;return null!==($n=wt??Ke.v.Promise)&&void 0!==$n?$n:Promise}},7579:(Wn,vt,ge)=>{ge.d(vt,{x:()=>Tt});var W=ge(9751),le=ge(727);const ot=(0,ge(3888).d)(Dt=>function(){Dt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ke=ge(8737),Ft=ge(2806);let Tt=(()=>{class Dt extends W.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ze){const wt=new Qt(this,this);return wt.operator=ze,wt}_throwIfClosed(){if(this.closed)throw new ot}next(ze){(0,Ft.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const wt of this.currentObservers)wt.next(ze)}})}error(ze){(0,Ft.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ze;const{observers:wt}=this;for(;wt.length;)wt.shift().error(ze)}})}complete(){(0,Ft.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ze}=this;for(;ze.length;)ze.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ze;return(null===(ze=this.observers)||void 0===ze?void 0:ze.length)>0}_trySubscribe(ze){return this._throwIfClosed(),super._trySubscribe(ze)}_subscribe(ze){return this._throwIfClosed(),this._checkFinalizedStatuses(ze),this._innerSubscribe(ze)}_innerSubscribe(ze){const{hasError:wt,isStopped:$n,observers:dt}=this;return wt||$n?le.Lc:(this.currentObservers=null,dt.push(ze),new le.w0(()=>{this.currentObservers=null,(0,Ke.P)(dt,ze)}))}_checkFinalizedStatuses(ze){const{hasError:wt,thrownError:$n,isStopped:dt}=this;wt?ze.error($n):dt&&ze.complete()}asObservable(){const ze=new W.y;return ze.source=this,ze}}return Dt.create=(ht,ze)=>new Qt(ht,ze),Dt})();class Qt extends Tt{constructor(ht,ze){super(),this.destination=ht,this.source=ze}next(ht){var ze,wt;null===(wt=null===(ze=this.destination)||void 0===ze?void 0:ze.next)||void 0===wt||wt.call(ze,ht)}error(ht){var ze,wt;null===(wt=null===(ze=this.destination)||void 0===ze?void 0:ze.error)||void 0===wt||wt.call(ze,ht)}complete(){var ht,ze;null===(ze=null===(ht=this.destination)||void 0===ht?void 0:ht.complete)||void 0===ze||ze.call(ht)}_subscribe(ht){var ze,wt;return null!==(wt=null===(ze=this.source)||void 0===ze?void 0:ze.subscribe(ht))&&void 0!==wt?wt:le.Lc}}},2961:(Wn,vt,ge)=>{ge.d(vt,{Hp:()=>ut,Lv:()=>wt});var W=ge(576),le=ge(727),J=ge(2416),ot=ge(7849);function Ke(){}const Ft=Dt("C",void 0,void 0);function Dt($t,mt,He){return{kind:$t,value:mt,error:He}}var ht=ge(3410),ze=ge(2806);class wt extends le.w0{constructor(mt){super(),this.isStopped=!1,mt?(this.destination=mt,(0,le.Nn)(mt)&&mt.add(this)):this.destination=Ut}static create(mt,He,dn){return new ut(mt,He,dn)}next(mt){this.isStopped?yr(function Qt($t){return Dt("N",$t,void 0)}(mt),this):this._next(mt)}error(mt){this.isStopped?yr(function Tt($t){return Dt("E",void 0,$t)}(mt),this):(this.isStopped=!0,this._error(mt))}complete(){this.isStopped?yr(Ft,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(mt){this.destination.next(mt)}_error(mt){try{this.destination.error(mt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $n=Function.prototype.bind;function dt($t,mt){return $n.call($t,mt)}class on{constructor(mt){this.partialObserver=mt}next(mt){const{partialObserver:He}=this;if(He.next)try{He.next(mt)}catch(dn){Cn(dn)}}error(mt){const{partialObserver:He}=this;if(He.error)try{He.error(mt)}catch(dn){Cn(dn)}else Cn(mt)}complete(){const{partialObserver:mt}=this;if(mt.complete)try{mt.complete()}catch(He){Cn(He)}}}class ut extends wt{constructor(mt,He,dn){let Bt;if(super(),(0,W.m)(mt)||!mt)Bt={next:mt??void 0,error:He??void 0,complete:dn??void 0};else{let Nt;this&&J.v.useDeprecatedNextContext?(Nt=Object.create(mt),Nt.unsubscribe=()=>this.unsubscribe(),Bt={next:mt.next&&dt(mt.next,Nt),error:mt.error&&dt(mt.error,Nt),complete:mt.complete&&dt(mt.complete,Nt)}):Bt=mt}this.destination=new on(Bt)}}function Cn($t){J.v.useDeprecatedSynchronousErrorHandling?(0,ze.O)($t):(0,ot.h)($t)}function yr($t,mt){const{onStoppedNotification:He}=J.v;He&&ht.z.setTimeout(()=>He($t,mt))}const Ut={closed:!0,next:Ke,error:function ar($t){throw $t},complete:Ke}},727:(Wn,vt,ge)=>{ge.d(vt,{Lc:()=>Ft,w0:()=>Ke,Nn:()=>Tt});var W=ge(576);const J=(0,ge(3888).d)(Dt=>function(ze){Dt(this),this.message=ze?`${ze.length} errors occurred during unsubscription:\n${ze.map((wt,$n)=>`${$n+1}) ${wt.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ze});var ot=ge(8737);class Ke{constructor(ht){this.initialTeardown=ht,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ht;if(!this.closed){this.closed=!0;const{_parentage:ze}=this;if(ze)if(this._parentage=null,Array.isArray(ze))for(const dt of ze)dt.remove(this);else ze.remove(this);const{initialTeardown:wt}=this;if((0,W.m)(wt))try{wt()}catch(dt){ht=dt instanceof J?dt.errors:[dt]}const{_finalizers:$n}=this;if($n){this._finalizers=null;for(const dt of $n)try{Qt(dt)}catch(on){ht=ht??[],on instanceof J?ht=[...ht,...on.errors]:ht.push(on)}}if(ht)throw new J(ht)}}add(ht){var ze;if(ht&&ht!==this)if(this.closed)Qt(ht);else{if(ht instanceof Ke){if(ht.closed||ht._hasParent(this))return;ht._addParent(this)}(this._finalizers=null!==(ze=this._finalizers)&&void 0!==ze?ze:[]).push(ht)}}_hasParent(ht){const{_parentage:ze}=this;return ze===ht||Array.isArray(ze)&&ze.includes(ht)}_addParent(ht){const{_parentage:ze}=this;this._parentage=Array.isArray(ze)?(ze.push(ht),ze):ze?[ze,ht]:ht}_removeParent(ht){const{_parentage:ze}=this;ze===ht?this._parentage=null:Array.isArray(ze)&&(0,ot.P)(ze,ht)}remove(ht){const{_finalizers:ze}=this;ze&&(0,ot.P)(ze,ht),ht instanceof Ke&&ht._removeParent(this)}}Ke.EMPTY=(()=>{const Dt=new Ke;return Dt.closed=!0,Dt})();const Ft=Ke.EMPTY;function Tt(Dt){return Dt instanceof Ke||Dt&&"closed"in Dt&&(0,W.m)(Dt.remove)&&(0,W.m)(Dt.add)&&(0,W.m)(Dt.unsubscribe)}function Qt(Dt){(0,W.m)(Dt)?Dt():Dt.unsubscribe()}},2416:(Wn,vt,ge)=>{ge.d(vt,{v:()=>W});const W={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Wn,vt,ge)=>{ge.d(vt,{z:()=>Ke});var W=ge(8189),J=ge(7669),ot=ge(8996);function Ke(...Ft){return function le(){return(0,W.J)(1)}()((0,ot.D)(Ft,(0,J.yG)(Ft)))}},515:(Wn,vt,ge)=>{ge.d(vt,{E:()=>le});const le=new(ge(9751).y)(Ke=>Ke.complete())},8996:(Wn,vt,ge)=>{ge.d(vt,{D:()=>mt});var W=ge(8421),le=ge(5363),J=ge(9468),Ft=ge(9751),Qt=ge(2202),Dt=ge(576),ht=ge(9672);function wt(He,dn){if(!He)throw new Error("Iterable cannot be null");return new Ft.y(Bt=>{(0,ht.f)(Bt,dn,()=>{const Nt=He[Symbol.asyncIterator]();(0,ht.f)(Bt,dn,()=>{Nt.next().then(Bn=>{Bn.done?Bt.complete():Bt.next(Bn.value)})},0,!0)})})}var $n=ge(3670),dt=ge(8239),on=ge(1144),ut=ge(6495),Cn=ge(2206),ar=ge(4532),yr=ge(3260);function mt(He,dn){return dn?function $t(He,dn){if(null!=He){if((0,$n.c)(He))return function ot(He,dn){return(0,W.Xf)(He).pipe((0,J.R)(dn),(0,le.Q)(dn))}(He,dn);if((0,on.z)(He))return function Tt(He,dn){return new Ft.y(Bt=>{let Nt=0;return dn.schedule(function(){Nt===He.length?Bt.complete():(Bt.next(He[Nt++]),Bt.closed||this.schedule())})})}(He,dn);if((0,dt.t)(He))return function Ke(He,dn){return(0,W.Xf)(He).pipe((0,J.R)(dn),(0,le.Q)(dn))}(He,dn);if((0,Cn.D)(He))return wt(He,dn);if((0,ut.T)(He))return function ze(He,dn){return new Ft.y(Bt=>{let Nt;return(0,ht.f)(Bt,dn,()=>{Nt=He[Qt.h](),(0,ht.f)(Bt,dn,()=>{let Bn,Ne;try{({value:Bn,done:Ne}=Nt.next())}catch(Pe){return void Bt.error(Pe)}Ne?Bt.complete():Bt.next(Bn)},0,!0)}),()=>(0,Dt.m)(Nt?.return)&&Nt.return()})}(He,dn);if((0,yr.L)(He))return function Ut(He,dn){return wt((0,yr.Q)(He),dn)}(He,dn)}throw(0,ar.z)(He)}(He,dn):(0,W.Xf)(He)}},8421:(Wn,vt,ge)=>{ge.d(vt,{Xf:()=>$n});var W=ge(655),le=ge(1144),J=ge(8239),ot=ge(9751),Ke=ge(3670),Ft=ge(2206),Tt=ge(4532),Qt=ge(6495),Dt=ge(3260),ht=ge(576),ze=ge(7849),wt=ge(8822);function $n($t){if($t instanceof ot.y)return $t;if(null!=$t){if((0,Ke.c)($t))return function dt($t){return new ot.y(mt=>{const He=$t[wt.L]();if((0,ht.m)(He.subscribe))return He.subscribe(mt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}($t);if((0,le.z)($t))return function on($t){return new ot.y(mt=>{for(let He=0;He<$t.length&&!mt.closed;He++)mt.next($t[He]);mt.complete()})}($t);if((0,J.t)($t))return function ut($t){return new ot.y(mt=>{$t.then(He=>{mt.closed||(mt.next(He),mt.complete())},He=>mt.error(He)).then(null,ze.h)})}($t);if((0,Ft.D)($t))return ar($t);if((0,Qt.T)($t))return function Cn($t){return new ot.y(mt=>{for(const He of $t)if(mt.next(He),mt.closed)return;mt.complete()})}($t);if((0,Dt.L)($t))return function yr($t){return ar((0,Dt.Q)($t))}($t)}throw(0,Tt.z)($t)}function ar($t){return new ot.y(mt=>{(function Ut($t,mt){var He,dn,Bt,Nt;return(0,W.mG)(this,void 0,void 0,function*(){try{for(He=(0,W.KL)($t);!(dn=yield He.next()).done;)if(mt.next(dn.value),mt.closed)return}catch(Bn){Bt={error:Bn}}finally{try{dn&&!dn.done&&(Nt=He.return)&&(yield Nt.call(He))}finally{if(Bt)throw Bt.error}}mt.complete()})})($t,mt).catch(He=>mt.error(He))})}},9646:(Wn,vt,ge)=>{ge.d(vt,{of:()=>J});var W=ge(7669),le=ge(8996);function J(...ot){const Ke=(0,W.yG)(ot);return(0,le.D)(ot,Ke)}},5403:(Wn,vt,ge)=>{ge.d(vt,{Q:()=>J,x:()=>le});var W=ge(2961);function le(ot,Ke,Ft,Tt,Qt){return new J(ot,Ke,Ft,Tt,Qt)}class J extends W.Lv{constructor(Ke,Ft,Tt,Qt,Dt,ht){super(Ke),this.onFinalize=Dt,this.shouldUnsubscribe=ht,this._next=Ft?function(ze){try{Ft(ze)}catch(wt){Ke.error(wt)}}:super._next,this._error=Qt?function(ze){try{Qt(ze)}catch(wt){Ke.error(wt)}finally{this.unsubscribe()}}:super._error,this._complete=Tt?function(){try{Tt()}catch(ze){Ke.error(ze)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ke;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ft}=this;super.unsubscribe(),!Ft&&(null===(Ke=this.onFinalize)||void 0===Ke||Ke.call(this))}}}},9300:(Wn,vt,ge)=>{ge.d(vt,{h:()=>J});var W=ge(4482),le=ge(5403);function J(ot,Ke){return(0,W.e)((Ft,Tt)=>{let Qt=0;Ft.subscribe((0,le.x)(Tt,Dt=>ot.call(Ke,Dt,Qt++)&&Tt.next(Dt)))})}},4004:(Wn,vt,ge)=>{ge.d(vt,{U:()=>J});var W=ge(4482),le=ge(5403);function J(ot,Ke){return(0,W.e)((Ft,Tt)=>{let Qt=0;Ft.subscribe((0,le.x)(Tt,Dt=>{Tt.next(ot.call(Ke,Dt,Qt++))}))})}},8189:(Wn,vt,ge)=>{ge.d(vt,{J:()=>J});var W=ge(5577),le=ge(4671);function J(ot=1/0){return(0,W.z)(le.y,ot)}},5577:(Wn,vt,ge)=>{ge.d(vt,{z:()=>Qt});var W=ge(4004),le=ge(8421),J=ge(4482),ot=ge(9672),Ke=ge(5403),Tt=ge(576);function Qt(Dt,ht,ze=1/0){return(0,Tt.m)(ht)?Qt((wt,$n)=>(0,W.U)((dt,on)=>ht(wt,dt,$n,on))((0,le.Xf)(Dt(wt,$n))),ze):("number"==typeof ht&&(ze=ht),(0,J.e)((wt,$n)=>function Ft(Dt,ht,ze,wt,$n,dt,on,ut){const Cn=[];let ar=0,yr=0,Ut=!1;const $t=()=>{Ut&&!Cn.length&&!ar&&ht.complete()},mt=dn=>ar<wt?He(dn):Cn.push(dn),He=dn=>{dt&&ht.next(dn),ar++;let Bt=!1;(0,le.Xf)(ze(dn,yr++)).subscribe((0,Ke.x)(ht,Nt=>{$n?.(Nt),dt?mt(Nt):ht.next(Nt)},()=>{Bt=!0},void 0,()=>{if(Bt)try{for(ar--;Cn.length&&ar<wt;){const Nt=Cn.shift();on?(0,ot.f)(ht,on,()=>He(Nt)):He(Nt)}$t()}catch(Nt){ht.error(Nt)}}))};return Dt.subscribe((0,Ke.x)(ht,mt,()=>{Ut=!0,$t()})),()=>{ut?.()}}(wt,$n,Dt,ze)))}},5363:(Wn,vt,ge)=>{ge.d(vt,{Q:()=>ot});var W=ge(9672),le=ge(4482),J=ge(5403);function ot(Ke,Ft=0){return(0,le.e)((Tt,Qt)=>{Tt.subscribe((0,J.x)(Qt,Dt=>(0,W.f)(Qt,Ke,()=>Qt.next(Dt),Ft),()=>(0,W.f)(Qt,Ke,()=>Qt.complete(),Ft),Dt=>(0,W.f)(Qt,Ke,()=>Qt.error(Dt),Ft)))})}},8675:(Wn,vt,ge)=>{ge.d(vt,{O:()=>ot});var W=ge(7272),le=ge(7669),J=ge(4482);function ot(...Ke){const Ft=(0,le.yG)(Ke);return(0,J.e)((Tt,Qt)=>{(Ft?(0,W.z)(Ke,Tt,Ft):(0,W.z)(Ke,Tt)).subscribe(Qt)})}},9468:(Wn,vt,ge)=>{ge.d(vt,{R:()=>le});var W=ge(4482);function le(J,ot=0){return(0,W.e)((Ke,Ft)=>{Ft.add(J.schedule(()=>Ke.subscribe(Ft),ot))})}},3900:(Wn,vt,ge)=>{ge.d(vt,{w:()=>ot});var W=ge(8421),le=ge(4482),J=ge(5403);function ot(Ke,Ft){return(0,le.e)((Tt,Qt)=>{let Dt=null,ht=0,ze=!1;const wt=()=>ze&&!Dt&&Qt.complete();Tt.subscribe((0,J.x)(Qt,$n=>{Dt?.unsubscribe();let dt=0;const on=ht++;(0,W.Xf)(Ke($n,on)).subscribe(Dt=(0,J.x)(Qt,ut=>Qt.next(Ft?Ft($n,ut,on,dt++):ut),()=>{Dt=null,wt()}))},()=>{ze=!0,wt()}))})}},8505:(Wn,vt,ge)=>{ge.d(vt,{b:()=>Ke});var W=ge(576),le=ge(4482),J=ge(5403),ot=ge(4671);function Ke(Ft,Tt,Qt){const Dt=(0,W.m)(Ft)||Tt||Qt?{next:Ft,error:Tt,complete:Qt}:Ft;return Dt?(0,le.e)((ht,ze)=>{var wt;null===(wt=Dt.subscribe)||void 0===wt||wt.call(Dt);let $n=!0;ht.subscribe((0,J.x)(ze,dt=>{var on;null===(on=Dt.next)||void 0===on||on.call(Dt,dt),ze.next(dt)},()=>{var dt;$n=!1,null===(dt=Dt.complete)||void 0===dt||dt.call(Dt),ze.complete()},dt=>{var on;$n=!1,null===(on=Dt.error)||void 0===on||on.call(Dt,dt),ze.error(dt)},()=>{var dt,on;$n&&(null===(dt=Dt.unsubscribe)||void 0===dt||dt.call(Dt)),null===(on=Dt.finalize)||void 0===on||on.call(Dt)}))}):ot.y}},3410:(Wn,vt,ge)=>{ge.d(vt,{z:()=>W});const W={setTimeout(le,J,...ot){const{delegate:Ke}=W;return Ke?.setTimeout?Ke.setTimeout(le,J,...ot):setTimeout(le,J,...ot)},clearTimeout(le){const{delegate:J}=W;return(J?.clearTimeout||clearTimeout)(le)},delegate:void 0}},2202:(Wn,vt,ge)=>{ge.d(vt,{h:()=>le});const le=function W(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Wn,vt,ge)=>{ge.d(vt,{L:()=>W});const W="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Wn,vt,ge)=>{ge.d(vt,{_6:()=>Ft,jO:()=>ot,yG:()=>Ke});var W=ge(576);function J(Tt){return Tt[Tt.length-1]}function ot(Tt){return(0,W.m)(J(Tt))?Tt.pop():void 0}function Ke(Tt){return function le(Tt){return Tt&&(0,W.m)(Tt.schedule)}(J(Tt))?Tt.pop():void 0}function Ft(Tt,Qt){return"number"==typeof J(Tt)?Tt.pop():Qt}},8737:(Wn,vt,ge)=>{function W(le,J){if(le){const ot=le.indexOf(J);0<=ot&&le.splice(ot,1)}}ge.d(vt,{P:()=>W})},3888:(Wn,vt,ge)=>{function W(le){const ot=le(Ke=>{Error.call(Ke),Ke.stack=(new Error).stack});return ot.prototype=Object.create(Error.prototype),ot.prototype.constructor=ot,ot}ge.d(vt,{d:()=>W})},2806:(Wn,vt,ge)=>{ge.d(vt,{O:()=>ot,x:()=>J});var W=ge(2416);let le=null;function J(Ke){if(W.v.useDeprecatedSynchronousErrorHandling){const Ft=!le;if(Ft&&(le={errorThrown:!1,error:null}),Ke(),Ft){const{errorThrown:Tt,error:Qt}=le;if(le=null,Tt)throw Qt}}else Ke()}function ot(Ke){W.v.useDeprecatedSynchronousErrorHandling&&le&&(le.errorThrown=!0,le.error=Ke)}},9672:(Wn,vt,ge)=>{function W(le,J,ot,Ke=0,Ft=!1){const Tt=J.schedule(function(){ot(),Ft?le.add(this.schedule(null,Ke)):this.unsubscribe()},Ke);if(le.add(Tt),!Ft)return Tt}ge.d(vt,{f:()=>W})},4671:(Wn,vt,ge)=>{function W(le){return le}ge.d(vt,{y:()=>W})},1144:(Wn,vt,ge)=>{ge.d(vt,{z:()=>W});const W=le=>le&&"number"==typeof le.length&&"function"!=typeof le},2206:(Wn,vt,ge)=>{ge.d(vt,{D:()=>le});var W=ge(576);function le(J){return Symbol.asyncIterator&&(0,W.m)(J?.[Symbol.asyncIterator])}},576:(Wn,vt,ge)=>{function W(le){return"function"==typeof le}ge.d(vt,{m:()=>W})},3670:(Wn,vt,ge)=>{ge.d(vt,{c:()=>J});var W=ge(8822),le=ge(576);function J(ot){return(0,le.m)(ot[W.L])}},6495:(Wn,vt,ge)=>{ge.d(vt,{T:()=>J});var W=ge(2202),le=ge(576);function J(ot){return(0,le.m)(ot?.[W.h])}},8239:(Wn,vt,ge)=>{ge.d(vt,{t:()=>le});var W=ge(576);function le(J){return(0,W.m)(J?.then)}},3260:(Wn,vt,ge)=>{ge.d(vt,{L:()=>ot,Q:()=>J});var W=ge(655),le=ge(576);function J(Ke){return(0,W.FC)(this,arguments,function*(){const Tt=Ke.getReader();try{for(;;){const{value:Qt,done:Dt}=yield(0,W.qq)(Tt.read());if(Dt)return yield(0,W.qq)(void 0);yield yield(0,W.qq)(Qt)}}finally{Tt.releaseLock()}})}function ot(Ke){return(0,le.m)(Ke?.getReader)}},4482:(Wn,vt,ge)=>{ge.d(vt,{A:()=>le,e:()=>J});var W=ge(576);function le(ot){return(0,W.m)(ot?.lift)}function J(ot){return Ke=>{if(le(Ke))return Ke.lift(function(Ft){try{return ot(Ft,this)}catch(Tt){this.error(Tt)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(Wn,vt,ge)=>{ge.d(vt,{U:()=>J,z:()=>le});var W=ge(4671);function le(...ot){return J(ot)}function J(ot){return 0===ot.length?W.y:1===ot.length?ot[0]:function(Ft){return ot.reduce((Tt,Qt)=>Qt(Tt),Ft)}}},7849:(Wn,vt,ge)=>{ge.d(vt,{h:()=>J});var W=ge(2416),le=ge(3410);function J(ot){le.z.setTimeout(()=>{const{onUnhandledError:Ke}=W.v;if(!Ke)throw ot;Ke(ot)})}},4532:(Wn,vt,ge)=>{function W(le){return new TypeError(`You provided ${null!==le&&"object"==typeof le?"an invalid object":`'${le}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}ge.d(vt,{z:()=>W})},655:(Wn,vt,ge)=>{function ot(Ne,Pe){var We={};for(var De in Ne)Object.prototype.hasOwnProperty.call(Ne,De)&&Pe.indexOf(De)<0&&(We[De]=Ne[De]);if(null!=Ne&&"function"==typeof Object.getOwnPropertySymbols){var Vt=0;for(De=Object.getOwnPropertySymbols(Ne);Vt<De.length;Vt++)Pe.indexOf(De[Vt])<0&&Object.prototype.propertyIsEnumerable.call(Ne,De[Vt])&&(We[De[Vt]]=Ne[De[Vt]])}return We}function Qt(Ne,Pe,We,De){return new(We||(We=Promise))(function(bt,Ln){function Vn(ii){try{jn(De.next(ii))}catch(hi){Ln(hi)}}function ls(ii){try{jn(De.throw(ii))}catch(hi){Ln(hi)}}function jn(ii){ii.done?bt(ii.value):function Vt(bt){return bt instanceof We?bt:new We(function(Ln){Ln(bt)})}(ii.value).then(Vn,ls)}jn((De=De.apply(Ne,Pe||[])).next())})}function Cn(Ne){return this instanceof Cn?(this.v=Ne,this):new Cn(Ne)}function ar(Ne,Pe,We){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Vt,De=We.apply(Ne,Pe||[]),bt=[];return Vt={},Ln("next"),Ln("throw"),Ln("return"),Vt[Symbol.asyncIterator]=function(){return this},Vt;function Ln($r){De[$r]&&(Vt[$r]=function(Hs){return new Promise(function(jr,er){bt.push([$r,Hs,jr,er])>1||Vn($r,Hs)})})}function Vn($r,Hs){try{!function ls($r){$r.value instanceof Cn?Promise.resolve($r.value.v).then(jn,ii):hi(bt[0][2],$r)}(De[$r](Hs))}catch(jr){hi(bt[0][3],jr)}}function jn($r){Vn("next",$r)}function ii($r){Vn("throw",$r)}function hi($r,Hs){$r(Hs),bt.shift(),bt.length&&Vn(bt[0][0],bt[0][1])}}function Ut(Ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,Pe=Ne[Symbol.asyncIterator];return Pe?Pe.call(Ne):(Ne=function wt(Ne){var Pe="function"==typeof Symbol&&Symbol.iterator,We=Pe&&Ne[Pe],De=0;if(We)return We.call(Ne);if(Ne&&"number"==typeof Ne.length)return{next:function(){return Ne&&De>=Ne.length&&(Ne=void 0),{value:Ne&&Ne[De++],done:!Ne}}};throw new TypeError(Pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ne),We={},De("next"),De("throw"),De("return"),We[Symbol.asyncIterator]=function(){return this},We);function De(bt){We[bt]=Ne[bt]&&function(Ln){return new Promise(function(Vn,ls){!function Vt(bt,Ln,Vn,ls){Promise.resolve(ls).then(function(jn){bt({value:jn,done:Vn})},Ln)}(Vn,ls,(Ln=Ne[bt](Ln)).done,Ln.value)})}}}ge.d(vt,{FC:()=>ar,KL:()=>Ut,_T:()=>ot,mG:()=>Qt,qq:()=>Cn})},6895:(Wn,vt,ge)=>{ge.d(vt,{Do:()=>Ut,EM:()=>Ed,HT:()=>Ke,JF:()=>Om,K0:()=>Tt,Mx:()=>$s,S$:()=>Cn,V_:()=>ht,Ye:()=>$t,b0:()=>yr,bD:()=>el,ez:()=>Jr,q:()=>J,w_:()=>Ft});var W=ge(8256);let le=null;function J(){return le}function Ke(N){le||(le=N)}class Ft{}const Tt=new W.OlP("DocumentToken");let Qt=(()=>{class N{historyGo(B){throw new Error("Not implemented")}}return N.\u0275fac=function(B){return new(B||N)},N.\u0275prov=W.Yz7({token:N,factory:function(){return function Dt(){return(0,W.LFG)(ze)}()},providedIn:"platform"}),N})();const ht=new W.OlP("Location Initialized");let ze=(()=>{class N extends Qt{constructor(B){super(),this._doc=B,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return J().getBaseHref(this._doc)}onPopState(B){const ee=J().getGlobalEventTarget(this._doc,"window");return ee.addEventListener("popstate",B,!1),()=>ee.removeEventListener("popstate",B)}onHashChange(B){const ee=J().getGlobalEventTarget(this._doc,"window");return ee.addEventListener("hashchange",B,!1),()=>ee.removeEventListener("hashchange",B)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(B){this.location.pathname=B}pushState(B,ee,pe){wt()?this._history.pushState(B,ee,pe):this.location.hash=pe}replaceState(B,ee,pe){wt()?this._history.replaceState(B,ee,pe):this.location.hash=pe}forward(){this._history.forward()}back(){this._history.back()}historyGo(B=0){this._history.go(B)}getState(){return this._history.state}}return N.\u0275fac=function(B){return new(B||N)(W.LFG(Tt))},N.\u0275prov=W.Yz7({token:N,factory:function(){return function $n(){return new ze((0,W.LFG)(Tt))}()},providedIn:"platform"}),N})();function wt(){return!!window.history.pushState}function dt(N,$){if(0==N.length)return $;if(0==$.length)return N;let B=0;return N.endsWith("/")&&B++,$.startsWith("/")&&B++,2==B?N+$.substring(1):1==B?N+$:N+"/"+$}function on(N){const $=N.match(/#|\?|$/),B=$&&$.index||N.length;return N.slice(0,B-("/"===N[B-1]?1:0))+N.slice(B)}function ut(N){return N&&"?"!==N[0]?"?"+N:N}let Cn=(()=>{class N{historyGo(B){throw new Error("Not implemented")}}return N.\u0275fac=function(B){return new(B||N)},N.\u0275prov=W.Yz7({token:N,factory:function(){return(0,W.f3M)(yr)},providedIn:"root"}),N})();const ar=new W.OlP("appBaseHref");let yr=(()=>{class N extends Cn{constructor(B,ee){super(),this._platformLocation=B,this._removeListenerFns=[],this._baseHref=ee??this._platformLocation.getBaseHrefFromDOM()??(0,W.f3M)(Tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}prepareExternalUrl(B){return dt(this._baseHref,B)}path(B=!1){const ee=this._platformLocation.pathname+ut(this._platformLocation.search),pe=this._platformLocation.hash;return pe&&B?`${ee}${pe}`:ee}pushState(B,ee,pe,Le){const Je=this.prepareExternalUrl(pe+ut(Le));this._platformLocation.pushState(B,ee,Je)}replaceState(B,ee,pe,Le){const Je=this.prepareExternalUrl(pe+ut(Le));this._platformLocation.replaceState(B,ee,Je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return N.\u0275fac=function(B){return new(B||N)(W.LFG(Qt),W.LFG(ar,8))},N.\u0275prov=W.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),Ut=(()=>{class N extends Cn{constructor(B,ee){super(),this._platformLocation=B,this._baseHref="",this._removeListenerFns=[],null!=ee&&(this._baseHref=ee)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(B){this._removeListenerFns.push(this._platformLocation.onPopState(B),this._platformLocation.onHashChange(B))}getBaseHref(){return this._baseHref}path(B=!1){let ee=this._platformLocation.hash;return null==ee&&(ee="#"),ee.length>0?ee.substring(1):ee}prepareExternalUrl(B){const ee=dt(this._baseHref,B);return ee.length>0?"#"+ee:ee}pushState(B,ee,pe,Le){let Je=this.prepareExternalUrl(pe+ut(Le));0==Je.length&&(Je=this._platformLocation.pathname),this._platformLocation.pushState(B,ee,Je)}replaceState(B,ee,pe,Le){let Je=this.prepareExternalUrl(pe+ut(Le));0==Je.length&&(Je=this._platformLocation.pathname),this._platformLocation.replaceState(B,ee,Je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(B=0){this._platformLocation.historyGo?.(B)}}return N.\u0275fac=function(B){return new(B||N)(W.LFG(Qt),W.LFG(ar,8))},N.\u0275prov=W.Yz7({token:N,factory:N.\u0275fac}),N})(),$t=(()=>{class N{constructor(B){this._subject=new W.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=B;const ee=this._locationStrategy.getBaseHref();this._baseHref=on(dn(ee)),this._locationStrategy.onPopState(pe=>{this._subject.emit({url:this.path(!0),pop:!0,state:pe.state,type:pe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(B=!1){return this.normalize(this._locationStrategy.path(B))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(B,ee=""){return this.path()==this.normalize(B+ut(ee))}normalize(B){return N.stripTrailingSlash(function He(N,$){return N&&$.startsWith(N)?$.substring(N.length):$}(this._baseHref,dn(B)))}prepareExternalUrl(B){return B&&"/"!==B[0]&&(B="/"+B),this._locationStrategy.prepareExternalUrl(B)}go(B,ee="",pe=null){this._locationStrategy.pushState(pe,"",B,ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+ut(ee)),pe)}replaceState(B,ee="",pe=null){this._locationStrategy.replaceState(pe,"",B,ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(B+ut(ee)),pe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(B=0){this._locationStrategy.historyGo?.(B)}onUrlChange(B){return this._urlChangeListeners.push(B),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ee=>{this._notifyUrlChangeListeners(ee.url,ee.state)})),()=>{const ee=this._urlChangeListeners.indexOf(B);this._urlChangeListeners.splice(ee,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(B="",ee){this._urlChangeListeners.forEach(pe=>pe(B,ee))}subscribe(B,ee,pe){return this._subject.subscribe({next:B,error:ee,complete:pe})}}return N.normalizeQueryParams=ut,N.joinWithSlash=dt,N.stripTrailingSlash=on,N.\u0275fac=function(B){return new(B||N)(W.LFG(Cn))},N.\u0275prov=W.Yz7({token:N,factory:function(){return function mt(){return new $t((0,W.LFG)(Cn))}()},providedIn:"root"}),N})();function dn(N){return N.replace(/\/index.html$/,"")}function $s(N,$){$=encodeURIComponent($);for(const B of N.split(";")){const ee=B.indexOf("="),[pe,Le]=-1==ee?[B,""]:[B.slice(0,ee),B.slice(ee+1)];if(pe.trim()===$)return decodeURIComponent(Le)}return null}let Jr=(()=>{class N{}return N.\u0275fac=function(B){return new(B||N)},N.\u0275mod=W.oAB({type:N}),N.\u0275inj=W.cJS({}),N})();const el="browser";let Ed=(()=>{class N{}return N.\u0275prov=(0,W.Yz7)({token:N,providedIn:"root",factory:()=>new qs((0,W.LFG)(Tt),window)}),N})();class qs{constructor($,B){this.document=$,this.window=B,this.offset=()=>[0,0]}setOffset($){this.offset=Array.isArray($)?()=>$:$}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition($){this.supportsScrolling()&&this.window.scrollTo($[0],$[1])}scrollToAnchor($){if(!this.supportsScrolling())return;const B=function ci(N,$){const B=N.getElementById($)||N.getElementsByName($)[0];if(B)return B;if("function"==typeof N.createTreeWalker&&N.body&&(N.body.createShadowRoot||N.body.attachShadow)){const ee=N.createTreeWalker(N.body,NodeFilter.SHOW_ELEMENT);let pe=ee.currentNode;for(;pe;){const Le=pe.shadowRoot;if(Le){const Je=Le.getElementById($)||Le.querySelector(`[name="${$}"]`);if(Je)return Je}pe=ee.nextNode()}}return null}(this.document,$);B&&(this.scrollToElement(B),B.focus())}setHistoryScrollRestoration($){if(this.supportScrollRestoration()){const B=this.window.history;B&&B.scrollRestoration&&(B.scrollRestoration=$)}}scrollToElement($){const B=$.getBoundingClientRect(),ee=B.left+this.window.pageXOffset,pe=B.top+this.window.pageYOffset,Le=this.offset();this.window.scrollTo(ee-Le[0],pe-Le[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const $=Ba(this.window.history)||Ba(Object.getPrototypeOf(this.window.history));return!(!$||!$.writable&&!$.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ba(N){return Object.getOwnPropertyDescriptor(N,"scrollRestoration")}class Om{}},8256:(Wn,vt,ge)=>{ge.d(vt,{tb:()=>eM,AFp:()=>hx,ip1:()=>gS,CZH:()=>cp,hGG:()=>P_,z2F:()=>I_,sBO:()=>Ix,Sil:()=>gx,_Vd:()=>gf,EJc:()=>_S,Xts:()=>hf,SBq:()=>Xp,lqb:()=>Gu,qLn:()=>Ya,vpe:()=>vu,XFs:()=>Ht,OlP:()=>ei,zs3:()=>iu,ZZ4:()=>R_,aQg:()=>Px,soG:()=>px,YKP:()=>q0,h0i:()=>Ah,PXZ:()=>lM,R0b:()=>cc,FiY:()=>Vd,Lbi:()=>JT,g9A:()=>mS,Qsj:()=>VE,FYo:()=>Av,JOm:()=>gl,tp0:()=>Yl,Rgc:()=>m_,dDg:()=>yx,eoX:()=>aM,q4F:()=>Ka,GfV:()=>zt,s_b:()=>y_,ifc:()=>Oi,MMx:()=>sn,Lck:()=>de,eFA:()=>DS,G48:()=>dM,f3M:()=>Bd,_c5:()=>Lx,c2e:()=>yS,zSh:()=>Ac,wAp:()=>An,vHH:()=>He,lri:()=>MS,rWj:()=>IS,D6c:()=>Nx,cg1:()=>Hb,kL8:()=>Wb,dqk:()=>Dn,Z0I:()=>Il,sIi:()=>Vf,CqO:()=>$g,QGY:()=>Ih,QP$:()=>un,F4k:()=>Ib,RDi:()=>ww,AaK:()=>ut,TTD:()=>Sd,jDz:()=>pr,uIk:()=>Gf,Suo:()=>GI,Xpm:()=>nn,lG2:()=>we,Yz7:()=>br,cJS:()=>Yo,oAB:()=>Mo,Yjl:()=>xe,Y36:()=>Ju,_UZ:()=>S0,qZA:()=>Hg,TgZ:()=>qf,LFG:()=>bi,$8M:()=>cl,$Z:()=>ou,NdJ:()=>jg,CRH:()=>tx,iGM:()=>ex,LSH:()=>uf,_uU:()=>em,Gf:()=>oS});var W=ge(7579),le=ge(727),J=ge(9751),ot=ge(8189),Ke=ge(8421),Ft=ge(515),Tt=ge(7669),Qt=ge(8996),ht=ge(2961),ze=ge(4482);function $n(o,a,...l){if(!0===a)return void o();if(!1===a)return;const h=new ht.Hp({next:()=>{h.unsubscribe(),o()}});return a(...l).subscribe(h)}function dt(o){for(let a in o)if(o[a]===dt)return a;throw Error("Could not find renamed property on target object.")}function ut(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ut).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function Cn(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const ar=dt({__forward_ref__:dt});function yr(o){return o.__forward_ref__=yr,o.toString=function(){return ut(this())},o}function Ut(o){return function $t(o){return"function"==typeof o&&o.hasOwnProperty(ar)&&o.__forward_ref__===yr}(o)?o():o}class He extends Error{constructor(a,l){super(function dn(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function Bt(o){return"string"==typeof o?o:null==o?"":String(o)}function We(o,a){throw new He(-201,!1)}function Mi(o,a){null==o&&function Cr(o,a,l,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${l} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function br(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Yo(o){return{providers:o.providers||[],imports:o.imports||[]}}function fc(o){return ti(o,Eo)||ti(o,vn)}function Il(o){return null!==fc(o)}function ti(o,a){return o.hasOwnProperty(a)?o[a]:null}function Na(o){return o&&(o.hasOwnProperty(Su)||o.hasOwnProperty(Ns))?o[Su]:null}const Eo=dt({\u0275prov:dt}),Su=dt({\u0275inj:dt}),vn=dt({ngInjectableDef:dt}),Ns=dt({ngInjectorDef:dt});var Ht=(()=>((Ht=Ht||{})[Ht.Default=0]="Default",Ht[Ht.Host=1]="Host",Ht[Ht.Self=2]="Self",Ht[Ht.SkipSelf=4]="SkipSelf",Ht[Ht.Optional=8]="Optional",Ht))();let cn;function $i(o){const a=cn;return cn=o,a}function Ii(o,a,l){const h=fc(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:l&Ht.Optional?null:void 0!==a?a:void We(ut(o))}function Ci(o){return{toString:o}.toString()}var Xn=(()=>((Xn=Xn||{})[Xn.OnPush=0]="OnPush",Xn[Xn.Default=1]="Default",Xn))(),Oi=(()=>{return(o=Oi||(Oi={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Oi;var o})();const Dn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),pc={},Qn=[],Cl=dt({\u0275cmp:dt}),Ws=dt({\u0275dir:dt}),gc=dt({\u0275pipe:dt}),To=dt({\u0275mod:dt}),Os=dt({\u0275fac:dt}),Zo=dt({__NG_ELEMENT_ID__:dt});let ai=0;function nn(o){return Ci(()=>{const l=!0===o.standalone,h={},g={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Xn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||Qn,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Oi.Emulated,id:"c"+ai++,styles:o.styles||Qn,_:null,setInput:null,schemas:o.schemas||null,tView:null},x=o.dependencies,T=o.features;return g.inputs=Sa(o.inputs,h),g.outputs=Sa(o.outputs),T&&T.forEach(A=>A(g)),g.directiveDefs=x?()=>("function"==typeof x?x():x).map(Eu).filter(Xo):null,g.pipeDefs=x?()=>("function"==typeof x?x():x).map(Ve).filter(Xo):null,g})}function Eu(o){return ce(o)||Te(o)}function Xo(o){return null!==o}function Mo(o){return Ci(()=>({type:o.type,bootstrap:o.bootstrap||Qn,declarations:o.declarations||Qn,imports:o.imports||Qn,exports:o.exports||Qn,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function Sa(o,a){if(null==o)return pc;const l={};for(const h in o)if(o.hasOwnProperty(h)){let g=o[h],x=g;Array.isArray(g)&&(x=g[1],g=g[0]),l[g]=h,a&&(a[g]=x)}return l}const we=nn;function xe(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function ce(o){return o[Cl]||null}function Te(o){return o[Ws]||null}function Ve(o){return o[gc]||null}function un(o){const a=ce(o)||Te(o)||Ve(o);return null!==a&&a.standalone}function xn(o,a){const l=o[To]||null;if(!l&&!0===a)throw new Error(`Type ${ut(o)} does not have '\u0275mod' property.`);return l}function Ai(o){return Array.isArray(o)&&"object"==typeof o[1]}function Fi(o){return Array.isArray(o)&&!0===o[1]}function Rl(o){return 0!=(8&o.flags)}function fi(o){return 2==(2&o.flags)}function na(o){return 1==(1&o.flags)}function ds(o){return null!==o.template}function Pl(o){return 0!=(256&o[2])}function Jr(o,a){return o.hasOwnProperty(Os)?o[Os]:null}class el{constructor(a,l,h){this.previousValue=a,this.currentValue=l,this.firstChange=h}isFirstChange(){return this.firstChange}}function Sd(){return xp}function xp(o){return o.type.prototype.ngOnChanges&&(o.setInput=Ma),bc}function bc(){const o=Ao(this),a=o?.current;if(a){const l=o.previous;if(l===pc)o.previous=a;else for(let h in a)l[h]=a[h];o.current=null,this.ngOnChanges(a)}}function Ma(o,a,l,h){const g=Ao(o)||function Zh(o,a){return o[Yh]=a}(o,{previous:pc,current:null}),x=g.current||(g.current={}),T=g.previous,A=this.declaredInputs[l],O=T[A];x[A]=new el(O&&O.currentValue,a,T===pc),o[h]=a}Sd.ngInherit=!0;const Yh="__ngSimpleChanges__";function Ao(o){return o[Yh]||null}function cr(o){for(;Array.isArray(o);)o=o[0];return o}function Es(o,a){return cr(a[o.index])}function Ks(o,a){return o.data[a]}function gr(o,a){const l=a[o];return Ai(l)?l:l[0]}function Ol(o){return 64==(64&o[2])}function Ts(o,a){return null==a?null:o[a]}function Fl(o){o[18]=0}function Md(o,a){o[5]+=a;let l=o,h=o[3];for(;null!==h&&(1===a&&1===l[5]||-1===a&&0===l[5]);)h[5]+=a,l=h,h=h[3]}const On={lFrame:Je(null),bindingsEnabled:!0};function tl(){return On.bindingsEnabled}function tt(){return On.lFrame.lView}function fr(){return On.lFrame.tView}function wn(){let o=uo();for(;null!==o&&64===o.type;)o=o.parent;return o}function uo(){return On.lFrame.currentTNode}function Nr(o,a){const l=On.lFrame;l.currentTNode=o,l.isParent=a}function Lo(){return On.lFrame.isParent}function rl(o,a){const l=On.lFrame;l.bindingIndex=l.bindingRootIndex=o,Zs(a)}function Zs(o){On.lFrame.currentDirectiveIndex=o}function N(){return On.lFrame.currentQueryIndex}function $(o){On.lFrame.currentQueryIndex=o}function B(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function ee(o,a,l){if(l&Ht.SkipSelf){let g=a,x=o;for(;!(g=g.parent,null!==g||l&Ht.Host||(g=B(x),null===g||(x=x[15],10&g.type))););if(null===g)return!1;a=g,o=x}const h=On.lFrame=Le();return h.currentTNode=a,h.lView=o,!0}function pe(o){const a=Le(),l=o[1];On.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Le(){const o=On.lFrame,a=null===o?null:o.child;return null===a?Je(o):a}function Je(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Wt(){const o=On.lFrame;return On.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const _r=Wt;function Er(){const o=Wt();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function nr(o){On.lFrame.selectedIndex=o}function gs(o,a){for(let l=a.directiveStart,h=a.directiveEnd;l<h;l++){const x=o.data[l].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:A,ngAfterViewInit:O,ngAfterViewChecked:H,ngOnDestroy:Q}=x;T&&(o.contentHooks||(o.contentHooks=[])).push(-l,T),A&&((o.contentHooks||(o.contentHooks=[])).push(l,A),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,A)),O&&(o.viewHooks||(o.viewHooks=[])).push(-l,O),H&&((o.viewHooks||(o.viewHooks=[])).push(l,H),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,H)),null!=Q&&(o.destroyHooks||(o.destroyHooks=[])).push(l,Q)}}function Is(o,a,l){il(o,a,3,l)}function Oo(o,a,l,h){(3&o[2])===l&&il(o,a,l,h)}function fo(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function il(o,a,l,h){const x=h??-1,T=a.length-1;let A=0;for(let O=void 0!==h?65535&o[18]:0;O<T;O++)if("number"==typeof a[O+1]){if(A=a[O],null!=h&&A>=h)break}else a[O]<0&&(o[18]+=65536),(A<x||-1==x)&&(Vl(o,l,a,O),o[18]=(4294901760&o[18])+O+2),O++}function Vl(o,a,l,h){const g=l[h]<0,x=l[h+1],A=o[g?-l[h]:l[h]];if(g){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{x.call(A)}finally{}}}else try{x.call(A)}finally{}}class po{constructor(a,l,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=h}}function aa(o,a,l){let h=0;for(;h<l.length;){const g=l[h];if("number"==typeof g){if(0!==g)break;h++;const x=l[h++],T=l[h++],A=l[h++];o.setAttribute(a,T,A,x)}else{const x=g,T=l[++h];sl(x)?o.setProperty(a,x,T):o.setAttribute(a,x,T),h++}}return h}function zl(o){return 3===o||4===o||6===o}function sl(o){return 64===o.charCodeAt(0)}function Gl(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let h=0;h<a.length;h++){const g=a[h];"number"==typeof g?l=g:0===l||Mc(o,l,g,null,-1===l||2===l?a[++h]:null)}}return o}function Mc(o,a,l,h,g){let x=0,T=o.length;if(-1===a)T=-1;else for(;x<o.length;){const A=o[x++];if("number"==typeof A){if(A===a){T=-1;break}if(A>a){T=x-1;break}}}for(;x<o.length;){const A=o[x];if("number"==typeof A)break;if(A===l){if(null===h)return void(null!==g&&(o[x+1]=g));if(h===o[x+1])return void(o[x+2]=g)}x++,null!==h&&x++,null!==g&&x++}-1!==T&&(o.splice(T,0,a),x=T+1),o.splice(x++,0,l),null!==h&&o.splice(x++,0,h),null!==g&&o.splice(x++,0,g)}function qn(o){return-1!==o}function Fo(o){return 32767&o}function ol(o,a){let l=function Uo(o){return o>>16}(o),h=a;for(;l>0;)h=h[15],l--;return h}let Xh=!0;function ca(o){const a=Xh;return Xh=o,a}let Ep=0;const go={};function Ic(o,a){const l=Hl(o,a);if(-1!==l)return l;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,Ou(h.data,o),Ou(a,null),Ou(h.blueprint,null));const g=Qs(o,a),x=o.injectorIndex;if(qn(g)){const T=Fo(g),A=ol(g,a),O=A[1].data;for(let H=0;H<8;H++)a[x+H]=A[T+H]|O[T+H]}return a[x+8]=g,x}function Ou(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Hl(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Qs(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,h=null,g=a;for(;null!==g;){if(h=kd(g),null===h)return-1;if(l++,g=g[15],-1!==h.injectorIndex)return h.injectorIndex|l<<16}return-1}function Wl(o,a,l){!function Nu(o,a,l){let h;"string"==typeof l?h=l.charCodeAt(0)||0:l.hasOwnProperty(Zo)&&(h=l[Zo]),null==h&&(h=l[Zo]=Ep++);const g=255&h;a.data[o+(g>>5)]|=1<<g}(o,a,l)}function Tp(o,a,l){if(l&Ht.Optional||void 0!==o)return o;We()}function al(o,a,l,h){if(l&Ht.Optional&&void 0===h&&(h=null),0==(l&(Ht.Self|Ht.Host))){const g=o[9],x=$i(void 0);try{return g?g.get(a,h,l&Ht.Optional):Ii(a,h,l&Ht.Optional)}finally{$i(x)}}return Tp(h,0,l)}function ku(o,a,l,h=Ht.Default,g){if(null!==o){if(1024&a[2]){const T=function Ki(o,a,l,h,g){let x=o,T=a;for(;null!==x&&null!==T&&1024&T[2]&&!(256&T[2]);){const A=Fu(x,T,l,h|Ht.Self,go);if(A!==go)return A;let O=x.parent;if(!O){const H=T[21];if(H){const Q=H.get(l,go,h);if(Q!==go)return Q}O=kd(T),T=T[15]}x=O}return g}(o,a,l,h,go);if(T!==go)return T}const x=Fu(o,a,l,h,go);if(x!==go)return x}return al(a,l,h,g)}function Fu(o,a,l,h,g){const x=function ms(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Zo)?o[Zo]:void 0;return"number"==typeof a?a>=0?255&a:Ha:a}(l);if("function"==typeof x){if(!ee(a,o,h))return h&Ht.Host?Tp(g,0,h):al(a,l,h,g);try{const T=x(h);if(null!=T||h&Ht.Optional)return T;We()}finally{_r()}}else if("number"==typeof x){let T=null,A=Hl(o,a),O=-1,H=h&Ht.Host?a[16][6]:null;for((-1===A||h&Ht.SkipSelf)&&(O=-1===A?Qs(o,a):a[A+8],-1!==O&&Ia(h,!1)?(T=a[1],A=Fo(O),a=ol(O,a)):A=-1);-1!==A;){const Q=a[1];if(mo(x,A,Q.data)){const se=Nd(A,a,l,T,h,H);if(se!==go)return se}O=a[A+8],-1!==O&&Ia(h,a[1].data[A+8]===H)&&mo(x,A,a)?(T=Q,A=Fo(O),a=ol(O,a)):A=-1}}return g}function Nd(o,a,l,h,g,x){const T=a[1],A=T.data[o+8],Q=Od(A,T,l,null==h?fi(A)&&Xh:h!=T&&0!=(3&A.type),g&Ht.Host&&x===A);return null!==Q?$l(a,T,Q,A):go}function Od(o,a,l,h,g){const x=o.providerIndexes,T=a.data,A=1048575&x,O=o.directiveStart,Q=x>>20,ye=g?A+Q:o.directiveEnd;for(let Me=h?A:A+Q;Me<ye;Me++){const je=T[Me];if(Me<O&&l===je||Me>=O&&je.type===l)return Me}if(g){const Me=T[O];if(Me&&ds(Me)&&Me.type===l)return O}return null}function $l(o,a,l,h){let g=o[l];const x=a.data;if(function Rd(o){return o instanceof po}(g)){const T=g;T.resolving&&function Bn(o,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new He(-200,`Circular dependency in DI detected for ${o}${l}`)}(function Nt(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Bt(o)}(x[l]));const A=ca(T.canSeeViewProviders);T.resolving=!0;const O=T.injectImpl?$i(T.injectImpl):null;ee(o,h,Ht.Default);try{g=o[l]=T.factory(void 0,x,o,h),a.firstCreatePass&&l>=h.directiveStart&&function ho(o,a,l){const{ngOnChanges:h,ngOnInit:g,ngDoCheck:x}=a.type.prototype;if(h){const T=xp(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,T),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,T)}g&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,g),x&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,x),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,x))}(l,x[l],a)}finally{null!==O&&$i(O),ca(A),T.resolving=!1,_r()}}return g}function mo(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function Ia(o,a){return!(o&Ht.Self||o&Ht.Host&&a)}class Ga{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,h){return ku(this._tNode,this._lView,a,h,l)}}function Ha(){return new Ga(wn(),tt())}function kd(o){const a=o[1],l=a.type;return 2===l?a.declTNode:1===l?o[6]:null}function cl(o){return function Ld(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const h=l.length;let g=0;for(;g<h;){const x=l[g];if(zl(x))break;if(0===x)g+=2;else if("number"==typeof x)for(g++;g<h&&"string"==typeof l[g];)g++;else{if(x===a)return l[g+1];g+=2}}}return null}(wn(),o)}const Ri="__parameters__";function ui(o,a,l){return Ci(()=>{const h=function yo(o){return function(...l){if(o){const h=o(...l);for(const g in h)this[g]=h[g]}}}(a);function g(...x){if(this instanceof g)return h.apply(this,x),this;const T=new g(...x);return A.annotation=T,A;function A(O,H,Q){const se=O.hasOwnProperty(Ri)?O[Ri]:Object.defineProperty(O,Ri,{value:[]})[Ri];for(;se.length<=Q;)se.push(null);return(se[Q]=se[Q]||[]).push(T),O}}return l&&(g.prototype=Object.create(l.prototype)),g.prototype.ngMetadataName=o,g.annotationCls=g,g})}class ei{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=br({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function kr(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let h=o[l];Array.isArray(h)?(a===o&&(a=o.slice(0,l)),kr(h,a)):a!==o&&a.push(h)}return a}function yn(o,a){o.forEach(l=>Array.isArray(l)?yn(l,a):a(l))}function Cp(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function Aa(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}const Sn={},jt="__NG_DI_FLAG__",Fr="ngTempTokenPath",Ds=/\n/gm,Zr="__source";let ys;function _s(o){const a=ys;return ys=o,a}function tf(o,a=Ht.Default){if(void 0===ys)throw new He(-203,!1);return null===ys?Ii(o,void 0,a):ys.get(o,a&Ht.Optional?null:void 0,a)}function bi(o,a=Ht.Default){return(function Nn(){return cn}()||tf)(Ut(o),a)}function Bd(o,a=Ht.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),bi(o,a)}function nf(o){const a=[];for(let l=0;l<o.length;l++){const h=Ut(o[l]);if(Array.isArray(h)){if(0===h.length)throw new He(900,!1);let g,x=Ht.Default;for(let T=0;T<h.length;T++){const A=h[T],O=dl(A);"number"==typeof O?-1===O?g=A.token:x|=O:g=A}a.push(bi(g,x))}else a.push(bi(h))}return a}function rf(o,a){return o[jt]=a,o.prototype[jt]=a,o}function dl(o){return o[jt]}const Vd=rf(ui("Optional"),8),Yl=rf(ui("SkipSelf"),4);let Np;function ww(o){Np=o}class dv{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const zp=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var es=(()=>((es=es||{})[es.NONE=0]="NONE",es[es.HTML=1]="HTML",es[es.STYLE=2]="STYLE",es[es.SCRIPT=3]="SCRIPT",es[es.URL=4]="URL",es[es.RESOURCE_URL=5]="RESOURCE_URL",es))();function uf(o){const a=function df(){const o=tt();return o&&o[12]}();return a?a.sanitize(es.URL,o)||"":function af(o,a){const l=function pv(o){return o instanceof dv&&o.getTypeName()||null}(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}(o,"URL")?function Xl(o){return o instanceof dv?o.changingThisBreaksApplicationSecurity:o}(o):function jm(o){return(o=String(o)).match(zp)?o:"unsafe:"+o}(Bt(o))}const hf=new ei("ENVIRONMENT_INITIALIZER"),bv=new ei("INJECTOR",-1),Wp=new ei("INJECTOR_DEF_TYPES");class Sv{get(a,l=Sn){if(l===Sn){const h=new Error(`NullInjectorError: No provider for ${ut(a)}!`);throw h.name="NullInjectorError",h}return l}}function Jm(...o){return{\u0275providers:Ev(0,o)}}function Ev(o,...a){const l=[],h=new Set;let g;return yn(a,x=>{const T=x;ff(T,l,[],h)&&(g||(g=[]),g.push(T))}),void 0!==g&&$p(g,l),l}function $p(o,a){for(let l=0;l<o.length;l++){const{providers:g}=o[l];yn(g,x=>{a.push(x)})}}function ff(o,a,l,h){if(!(o=Ut(o)))return!1;let g=null,x=Na(o);const T=!x&&ce(o);if(x||T){if(T&&!T.standalone)return!1;g=o}else{const O=o.ngModule;if(x=Na(O),!x)return!1;g=O}const A=h.has(g);if(T){if(A)return!1;if(h.add(g),T.dependencies){const O="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const H of O)ff(H,a,l,h)}}else{if(!x)return!1;{if(null!=x.imports&&!A){let H;h.add(g);try{yn(x.imports,Q=>{ff(Q,a,l,h)&&(H||(H=[]),H.push(Q))})}finally{}void 0!==H&&$p(H,a)}if(!A){const H=Jr(g)||(()=>new g);a.push({provide:g,useFactory:H,deps:Qn},{provide:Wp,useValue:g,multi:!0},{provide:hf,useValue:()=>bi(g),multi:!0})}const O=x.providers;null==O||A||yn(O,Q=>{a.push(Q)})}}return g!==o&&void 0!==o.providers}const Tv=dt({provide:String,useValue:dt});function ey(o){return null!==o&&"object"==typeof o&&Tv in o}function Ql(o){return"function"==typeof o}const Ac=new ei("Set Injector scope."),qp={},Fw={};let pf;function Kp(){return void 0===pf&&(pf=new Sv),pf}class Gu{}class fl extends Gu{constructor(a,l,h,g){super(),this.parent=l,this.source=h,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Cv(a,T=>this.processProvider(T)),this.records.set(bv,Zp(void 0,this)),g.has("environment")&&this.records.set(Gu,Zp(void 0,this));const x=this.records.get(Ac);null!=x&&"string"==typeof x.value&&this.scopes.add(x.value),this.injectorDefTypes=new Set(this.get(Wp.multi,Qn,Ht.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=_s(this),h=$i(void 0);try{return a()}finally{_s(l),$i(h)}}get(a,l=Sn,h=Ht.Default){this.assertNotDestroyed();const g=_s(this),x=$i(void 0);try{if(!(h&Ht.SkipSelf)){let A=this.records.get(a);if(void 0===A){const O=function Iv(o){return"function"==typeof o||"object"==typeof o&&o instanceof ei}(a)&&fc(a);A=O&&this.injectableDefInScope(O)?Zp(Yp(a),qp):null,this.records.set(a,A)}if(null!=A)return this.hydrate(a,A)}return(h&Ht.Self?Kp():this.parent).get(a,l=h&Ht.Optional&&l===Sn?null:l)}catch(T){if("NullInjectorError"===T.name){if((T[Fr]=T[Fr]||[]).unshift(ut(a)),g)throw T;return function Kl(o,a,l,h){const g=o[Fr];throw a[Zr]&&g.unshift(a[Zr]),o.message=function Ap(o,a,l,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let g=ut(a);if(Array.isArray(a))g=a.map(ut).join(" -> ");else if("object"==typeof a){let x=[];for(let T in a)if(a.hasOwnProperty(T)){let A=a[T];x.push(T+":"+("string"==typeof A?JSON.stringify(A):ut(A)))}g=`{${x.join(", ")}}`}return`${l}${h?"("+h+")":""}[${g}]: ${o.replace(Ds,"\n  ")}`}("\n"+o.message,g,l,h),o.ngTokenPath=g,o[Fr]=null,o}(T,a,"R3InjectorError",this.source)}throw T}finally{$i(x),_s(g)}}resolveInjectorInitializers(){const a=_s(this),l=$i(void 0);try{const h=this.get(hf.multi,Qn,Ht.Self);for(const g of h)g()}finally{_s(a),$i(l)}}toString(){const a=[],l=this.records;for(const h of l.keys())a.push(ut(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new He(205,!1)}processProvider(a){let l=Ql(a=Ut(a))?a:Ut(a&&a.provide);const h=function OE(o){return ey(o)?Zp(void 0,o.useValue):Zp(function Uw(o,a,l){let h;if(Ql(o)){const g=Ut(o);return Jr(g)||Yp(g)}if(ey(o))h=()=>Ut(o.useValue);else if(function Mv(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...nf(o.deps||[]));else if(function jp(o){return!(!o||!o.useExisting)}(o))h=()=>bi(Ut(o.useExisting));else{const g=Ut(o&&(o.useClass||o.provide));if(!function kE(o){return!!o.deps}(o))return Jr(g)||Yp(g);h=()=>new g(...nf(o.deps))}return h}(o),qp)}(a);if(Ql(a)||!0!==a.multi)this.records.get(l);else{let g=this.records.get(l);g||(g=Zp(void 0,qp,!0),g.factory=()=>nf(g.multi),this.records.set(l,g)),l=a,g.multi.push(a)}this.records.set(l,h)}hydrate(a,l){return l.value===qp&&(l.value=Fw,l.value=l.factory()),"object"==typeof l.value&&l.value&&function FE(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=Ut(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Yp(o){const a=fc(o),l=null!==a?a.factory:Jr(o);if(null!==l)return l;if(o instanceof ei)throw new He(204,!1);if(o instanceof Function)return function cI(o){const a=o.length;if(a>0)throw function ll(o,a){const l=[];for(let h=0;h<o;h++)l.push(a);return l}(a,"?"),new He(204,!1);const l=function Zc(o){const a=o&&(o[Eo]||o[vn]);if(a){const l=function xd(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new He(204,!1)}function Zp(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function lI(o){return!!o.\u0275providers}function Cv(o,a){for(const l of o)Array.isArray(l)?Cv(l,a):lI(l)?Cv(l.\u0275providers,a):a(l)}class UE{}class Bw{resolveComponentFactory(a){throw function dI(o){const a=Error(`No component factory found for ${ut(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let gf=(()=>{class o{}return o.NULL=new Bw,o})();function BE(){return mf(wn(),tt())}function mf(o,a){return new Xp(Es(o,a))}let Xp=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=BE,o})();function ty(o){return o instanceof Xp?o.nativeElement:o}class Av{}let VE=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function Vw(){const o=tt(),l=gr(wn().index,o);return(Ai(l)?l:o)[11]}(),o})(),rr=(()=>{class o{}return o.\u0275prov=br({token:o,providedIn:"root",factory:()=>null}),o})();class zt{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Ka=new zt("14.2.9"),ny={};function qd(o){return o.ngOriginalError}class Ya{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&qd(a);for(;l&&qd(l);)l=qd(l);return l||null}}const ay=new Map;let Ww=0;const Zd="__ngContext__";function ts(o,a){Ai(a)?(o[Zd]=a[20],function Kd(o){ay.set(o[20],o)}(a)):o[Zd]=a}function pl(o){return o instanceof Function?o():o}var gl=(()=>((gl=gl||{})[gl.Important=1]="Important",gl[gl.DashCase=2]="DashCase",gl))();function wf(o,a){return undefined(o,a)}function tg(o){const a=o[3];return Fi(a)?a[3]:a}function Uv(o){return Qw(o[13])}function ng(o){return Qw(o[4])}function Qw(o){for(;null!==o&&!Fi(o);)o=o[4];return o}function ju(o,a,l,h,g){if(null!=h){let x,T=!1;Fi(h)?x=h:Ai(h)&&(T=!0,h=h[0]);const A=cr(h);0===o&&null!==l?null==g?yy(a,l,A):qu(a,l,A,g||null,!0):1===o&&null!==l?qu(a,l,A,g||null,!0):2===o?function Ku(o,a,l){const h=og(o,a);h&&function _y(o,a,l,h){o.removeChild(a,l,h)}(o,h,a,l)}(a,A,T):3===o&&a.destroyNode(A),null!=x&&function nb(o,a,l,h,g){const x=l[7];x!==cr(l)&&ju(a,o,h,x,g);for(let A=10;A<l.length;A++){const O=l[A];Yu(O[1],O,o,a,h,x)}}(a,o,x,l,g)}}function Js(o,a,l){return o.createElement(a,l)}function ml(o,a){const l=o[9],h=l.indexOf(a),g=a[3];512&a[2]&&(a[2]&=-513,Md(g,-1)),l.splice(h,1)}function Jd(o,a){if(o.length<=10)return;const l=10+a,h=o[l];if(h){const g=h[17];null!==g&&g!==o&&ml(g,h),a>0&&(o[l-1][4]=h[4]);const x=Aa(o,10+a);!function Oc(o,a){Yu(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const T=x[19];null!==T&&T.detachView(x[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function Za(o,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&Yu(o,a,l,3,null,null),function py(o){let a=o[13];if(!a)return gy(o[1],o);for(;a;){let l=null;if(Ai(a))l=a[13];else{const h=a[10];h&&(l=h)}if(!l){for(;a&&!a[4]&&a!==o;)Ai(a)&&gy(a[1],a),a=a[3];null===a&&(a=o),Ai(a)&&gy(a[1],a),l=a&&a[4]}a=l}}(a)}}function gy(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function eh(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let h=0;h<l.length;h+=2){const g=a[l[h]];if(!(g instanceof po)){const x=l[h+1];if(Array.isArray(x))for(let T=0;T<x.length;T+=2){const A=g[x[T]],O=x[T+1];try{O.call(A)}finally{}}else try{x.call(g)}finally{}}}}(o,a),function ig(o,a){const l=o.cleanup,h=a[7];let g=-1;if(null!==l)for(let x=0;x<l.length-1;x+=2)if("string"==typeof l[x]){const T=l[x+1],A="function"==typeof T?T(a):cr(a[T]),O=h[g=l[x+2]],H=l[x+3];"boolean"==typeof H?A.removeEventListener(l[x],O,H):H>=0?h[g=H]():h[g=-H].unsubscribe(),x+=2}else{const T=h[g=l[x+1]];l[x].call(T)}if(null!==h){for(let x=g+1;x<h.length;x++)(0,h[x])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&Fi(a[3])){l!==a[3]&&ml(l,a);const h=a[19];null!==h&&h.detachView(o)}!function cy(o){ay.delete(o[20])}(a)}}function sg(o,a,l){return function my(o,a,l){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return l[0];if(2&h.flags){const g=o.data[h.directiveStart].encapsulation;if(g===Oi.None||g===Oi.Emulated)return null}return Es(h,l)}(o,a.parent,l)}function qu(o,a,l,h,g){o.insertBefore(a,l,h,g)}function yy(o,a,l){o.appendChild(a,l)}function th(o,a,l,h,g){null!==h?qu(o,a,l,h,g):yy(o,a,l)}function og(o,a){return o.parentNode(a)}let bf=function rs(o,a,l){return 40&o.type?Es(o,l):null};function Ra(o,a,l,h){const g=sg(o,h,a),x=a[11],A=function Si(o,a,l){return bf(o,a,l)}(h.parent||a[6],h,a);if(null!=g)if(Array.isArray(l))for(let O=0;O<l.length;O++)th(x,g,l[O],A,!1);else th(x,g,l,A,!1)}function rh(o,a){if(null!==a){const l=a.type;if(3&l)return Es(a,o);if(4&l)return vy(-1,o[a.index]);if(8&l){const h=a.child;if(null!==h)return rh(o,h);{const g=o[a.index];return Fi(g)?vy(-1,g):cr(g)}}if(32&l)return wf(a,o)()||cr(o[a.index]);{const h=cg(o,a);return null!==h?Array.isArray(h)?h[0]:rh(tg(o[16]),h):rh(o,a.next)}}return null}function cg(o,a){return null!==a?o[16][6].projection[a.projection]:null}function vy(o,a){const l=10+o+1;if(l<a.length){const h=a[l],g=h[1].firstChild;if(null!==g)return rh(h,g)}return a[7]}function xy(o,a,l,h,g,x,T){for(;null!=l;){const A=h[l.index],O=l.type;if(T&&0===a&&(A&&ts(cr(A),h),l.flags|=4),64!=(64&l.flags))if(8&O)xy(o,a,l.child,h,g,x,!1),ju(a,o,g,A,x);else if(32&O){const H=wf(l,h);let Q;for(;Q=H();)ju(a,o,g,Q,x);ju(a,o,g,A,x)}else 16&O?lg(o,a,h,l,g,x):ju(a,o,g,A,x);l=T?l.projectionNext:l.next}}function Yu(o,a,l,h,g,x){xy(l,h,o.firstChild,a,g,x,!1)}function lg(o,a,l,h,g,x){const T=l[16],O=T[6].projection[h.projection];if(Array.isArray(O))for(let H=0;H<O.length;H++)ju(a,o,g,O[H],x);else xy(o,a,O,T[3],g,x,!0)}function ih(o,a,l){o.setAttribute(a,"style",l)}function zv(o,a,l){""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l)}function Gv(o,a,l){let h=o.length;for(;;){const g=o.indexOf(a,l);if(-1===g)return g;if(0===g||o.charCodeAt(g-1)<=32){const x=a.length;if(g+x===h||o.charCodeAt(g+x)<=32)return g}l=g+1}}const ug="ng-template";function dg(o,a,l){let h=0;for(;h<o.length;){let g=o[h++];if(l&&"class"===g){if(g=o[h],-1!==Gv(g.toLowerCase(),a,0))return!0}else if(1===g){for(;h<o.length&&"string"==typeof(g=o[h++]);)if(g.toLowerCase()===a)return!0;return!1}}return!1}function by(o){return 4===o.type&&o.value!==ug}function Fc(o,a,l){return a===(4!==o.type||l?o.value:ug)}function Sy(o,a,l){let h=4;const g=o.attrs||[],x=function Ty(o){for(let a=0;a<o.length;a++)if(zl(o[a]))return a;return o.length}(g);let T=!1;for(let A=0;A<a.length;A++){const O=a[A];if("number"!=typeof O){if(!T)if(4&h){if(h=2|1&h,""!==O&&!Fc(o,O,l)||""===O&&1===a.length){if(Xa(h))return!1;T=!0}}else{const H=8&h?O:a[++A];if(8&h&&null!==o.attrs){if(!dg(o.attrs,H,l)){if(Xa(h))return!1;T=!0}continue}const se=rb(8&h?"class":O,g,by(o),l);if(-1===se){if(Xa(h))return!1;T=!0;continue}if(""!==H){let ye;ye=se>x?"":g[se+1].toLowerCase();const Me=8&h?ye:null;if(Me&&-1!==Gv(Me,H,0)||2&h&&H!==ye){if(Xa(h))return!1;T=!0}}}}else{if(!T&&!Xa(h)&&!Xa(O))return!1;if(T&&Xa(O))continue;T=!1,h=O|1&h}}return Xa(h)||T}function Xa(o){return 0==(1&o)}function rb(o,a,l,h){if(null===a)return-1;let g=0;if(h||!l){let x=!1;for(;g<a.length;){const T=a[g];if(T===o)return g;if(3===T||6===T)x=!0;else{if(1===T||2===T){let A=a[++g];for(;"string"==typeof A;)A=a[++g];continue}if(4===T)break;if(0===T){g+=4;continue}}g+=x?1:2}return-1}return function Wv(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const h=o[l];if("number"==typeof h)return-1;if(h===a)return l;l++}return-1}(a,o)}function Ey(o,a,l=!1){for(let h=0;h<a.length;h++)if(Sy(o,a[h],l))return!0;return!1}function Iy(o,a){return o?":not("+a.trim()+")":a}function $v(o){let a=o[0],l=1,h=2,g="",x=!1;for(;l<o.length;){let T=o[l];if("string"==typeof T)if(2&h){const A=o[++l];g+="["+T+(A.length>0?'="'+A+'"':"")+"]"}else 8&h?g+="."+T:4&h&&(g+=" "+T);else""!==g&&!Xa(T)&&(a+=Iy(x,g),g=""),h=T,x=x||!Xa(h);l++}return""!==g&&(a+=Iy(x,g)),a}const zn={};function Ry(o,a=null,l=null,h){const g=fg(o,a,l,h);return g.resolveInjectorInitializers(),g}function fg(o,a=null,l=null,h,g=new Set){const x=[l||Qn,Jm(o)];return h=h||("object"==typeof o?void 0:ut(o)),new fl(x,a||Kp(),h||null,g)}let iu=(()=>{class o{static create(l,h){if(Array.isArray(l))return Ry({name:""},h,l,"");{const g=l.name??"";return Ry({name:g},l.parent,l.providers,g)}}}return o.THROW_IF_NOT_FOUND=Sn,o.NULL=new Sv,o.\u0275prov=br({token:o,providedIn:"any",factory:()=>bi(bv)}),o.__NG_ELEMENT_ID__=-1,o})();function Ju(o,a=Ht.Default){const l=tt();return null===l?bi(o,a):ku(wn(),l,Ut(o),a)}function ou(){throw new Error("invalid")}function Ig(o,a){const l=o.contentQueries;if(null!==l)for(let h=0;h<l.length;h+=2){const g=l[h],x=l[h+1];if(-1!==x){const T=o.data[x];$(g),T.contentQueries(2,a[x],x)}}}function rd(o,a,l,h,g,x,T,A,O,H,Q){const se=a.blueprint.slice();return se[0]=g,se[2]=76|h,(null!==Q||o&&1024&o[2])&&(se[2]|=1024),Fl(se),se[3]=se[15]=o,se[8]=l,se[10]=T||o&&o[10],se[11]=A||o&&o[11],se[12]=O||o&&o[12]||null,se[9]=H||o&&o[9]||null,se[6]=x,se[20]=function $w(){return Ww++}(),se[21]=Q,se[16]=2==a.type?o[16]:se,se}function yl(o,a,l,h,g){let x=o.data[a];if(null===x)x=function Dg(o,a,l,h,g){const x=uo(),T=Lo(),O=o.data[a]=function xh(o,a,l,h,g,x){return{type:l,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:x,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?x:x&&x.parent,l,a,h,g);return null===o.firstChild&&(o.firstChild=O),null!==x&&(T?null==x.child&&null!==O.parent&&(x.child=O):null===x.next&&(x.next=O)),O}(o,a,l,h,g),function Bl(){return On.lFrame.inI18n}()&&(x.flags|=64);else if(64&x.type){x.type=l,x.value=h,x.attrs=g;const T=function Xe(){const o=On.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();x.injectorIndex=null===T?-1:T.injectorIndex}return Nr(x,!0),x}function Bc(o,a,l,h){if(0===l)return-1;const g=a.length;for(let x=0;x<l;x++)a.push(h),o.blueprint.push(h),o.data.push(null);return g}function jy(o,a,l){pe(a);try{const h=o.viewQuery;null!==h&&Ug(1,h,l);const g=o.template;null!==g&&Lf(o,a,g,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Ig(o,a),o.staticViewQueries&&Ug(2,o.viewQuery,l);const x=o.components;null!==x&&function $y(o,a){for(let l=0;l<a.length;l++)od(o,a[l])}(a,x)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Er()}}function _l(o,a,l,h){const g=a[2];if(128!=(128&g)){pe(a);try{Fl(a),function Iu(o){return On.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&Lf(o,a,l,2,h);const T=3==(3&g);if(T){const H=o.preOrderCheckHooks;null!==H&&Is(a,H,null)}else{const H=o.preOrderHooks;null!==H&&Oo(a,H,0,null),fo(a,0)}if(function c0(o){for(let a=Uv(o);null!==a;a=ng(a)){if(!a[2])continue;const l=a[9];for(let h=0;h<l.length;h++){const g=l[h],x=g[3];0==(512&g[2])&&Md(x,1),g[2]|=512}}}(a),function Ng(o){for(let a=Uv(o);null!==a;a=ng(a))for(let l=10;l<a.length;l++){const h=a[l],g=h[1];Ol(h)&&_l(g,h,g.template,h[8])}}(a),null!==o.contentQueries&&Ig(o,a),T){const H=o.contentCheckHooks;null!==H&&Is(a,H)}else{const H=o.contentHooks;null!==H&&Oo(a,H,1),fo(a,1)}!function Wy(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let h=0;h<l.length;h++){const g=l[h];if(g<0)nr(~g);else{const x=g,T=l[++h],A=l[++h];rl(T,x),A(2,a[x])}}}finally{nr(-1)}}(o,a);const A=o.components;null!==A&&function Cg(o,a){for(let l=0;l<a.length;l++)Og(o,a[l])}(a,A);const O=o.viewQuery;if(null!==O&&Ug(2,O,h),T){const H=o.viewCheckHooks;null!==H&&Is(a,H)}else{const H=o.viewHooks;null!==H&&Oo(a,H,2),fo(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Md(a[3],-1))}finally{Er()}}}function Lf(o,a,l,h,g){const x=function re(){return On.lFrame.selectedIndex}(),T=2&h;try{nr(-1),T&&a.length>22&&function nu(o,a,l,h){if(!h)if(3==(3&a[2])){const x=o.preOrderCheckHooks;null!==x&&Is(a,x,l)}else{const x=o.preOrderHooks;null!==x&&Oo(a,x,0,l)}nr(l)}(o,a,22,!1),l(h,g)}finally{nr(x)}}function yh(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=ec(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function ec(o,a,l,h,g,x,T,A,O,H){const Q=22+h,se=Q+g,ye=function _h(o,a){const l=[];for(let h=0;h<a;h++)l.push(h<o?null:zn);return l}(Q,se),Me="function"==typeof H?H():H;return ye[1]={type:o,blueprint:ye,template:l,queries:null,viewQuery:A,declTNode:a,data:ye.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof x?x():x,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:O,consts:Me,incompleteFirstPass:!1}}function qy(o,a,l,h){const g=u0(a);null===l?g.push(h):(g.push(l),o.firstCreatePass&&Bg(o).push(h,g.length-1))}function db(o,a,l){for(let h in o)if(o.hasOwnProperty(h)){const g=o[h];(l=null===l?{}:l).hasOwnProperty(h)?l[h].push(a,g):l[h]=[a,g]}return l}function xl(o,a){const h=a.directiveEnd,g=o.data,x=a.attrs,T=[];let A=null,O=null;for(let H=a.directiveStart;H<h;H++){const Q=g[H],se=Q.inputs,ye=null===x||by(a)?null:Zy(se,x);T.push(ye),A=db(se,H,A),O=db(Q.outputs,H,O)}null!==A&&(A.hasOwnProperty("class")&&(a.flags|=16),A.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=T,a.inputs=A,a.outputs=O}function fb(o,a,l,h,g,x){const T=x.hostBindings;if(T){let A=o.hostBindingOpCodes;null===A&&(A=o.hostBindingOpCodes=[]);const O=~a.index;(function Yy(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(A)!=O&&A.push(O),A.push(h,g,T)}}function Rg(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Pg(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function Nf(o,a,l){if(l){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)l[a.exportAs[h]]=o;ds(a)&&(l[""]=o)}}function gb(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}function wl(o,a,l,h,g){o.data[h]=g;const x=g.factory||(g.factory=Jr(g.type)),T=new po(x,ds(g),Ju);o.blueprint[h]=T,l[h]=T,fb(o,a,0,h,Bc(o,l,g.hostVars,zn),g)}function eT(o,a,l){const h=Es(a,o),g=yh(l),x=o[10],T=Fg(o,rd(o,g,null,l.onPush?32:16,h,a,x,x.createRenderer(h,l),null,null,null));o[a.index]=T}function Ur(o,a,l,h,g,x){const T=Es(o,a);!function wh(o,a,l,h,g,x,T){if(null==x)o.removeAttribute(a,g,l);else{const A=null==T?Bt(x):T(x,h||"",g);o.setAttribute(a,g,A,l)}}(a[11],T,x,o.value,l,h,g)}function Lg(o,a,l,h,g,x){const T=x[a];if(null!==T){const A=h.setInput;for(let O=0;O<T.length;){const H=T[O++],Q=T[O++],se=T[O++];null!==A?h.setInput(l,se,H,Q):l[Q]=se}}}function Zy(o,a){let l=null,h=0;for(;h<a.length;){const g=a[h];if(0!==g)if(5!==g){if("number"==typeof g)break;o.hasOwnProperty(g)&&(null===l&&(l=[]),l.push(g,o[g],a[h+1])),h+=2}else h+=2;else h+=4}return l}function Og(o,a){const l=gr(a,o);if(Ol(l)){const h=l[1];48&l[2]?_l(h,l,h.template,l[8]):l[5]>0&&kg(l)}}function kg(o){for(let h=Uv(o);null!==h;h=ng(h))for(let g=10;g<h.length;g++){const x=h[g];if(Ol(x))if(512&x[2]){const T=x[1];_l(T,x,T.template,x[8])}else x[5]>0&&kg(x)}const l=o[1].components;if(null!==l)for(let h=0;h<l.length;h++){const g=gr(l[h],o);Ol(g)&&g[5]>0&&kg(g)}}function od(o,a){const l=gr(a,o),h=l[1];(function l0(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(h,l),jy(h,l,l[8])}function Fg(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function tc(o){for(;o;){o[2]|=32;const a=tg(o);if(Pl(o)&&!a)return o;o=a}return null}function kf(o,a,l,h=!0){const g=a[10];g.begin&&g.begin();try{_l(o,a,o.template,l)}catch(T){throw h&&Xy(a,T),T}finally{g.end&&g.end()}}function Ug(o,a,l){$(0),a(o,l)}function u0(o){return o[7]||(o[7]=[])}function Bg(o){return o.cleanup||(o.cleanup=[])}function Xy(o,a){const l=o[9],h=l?l.get(Ya,null):null;h&&h.handleError(a)}function Vg(o,a,l,h,g){for(let x=0;x<l.length;){const T=l[x++],A=l[x++],O=a[T],H=o.data[T];null!==H.setInput?H.setInput(O,g,h,A):O[A]=g}}function bh(o,a,l){let h=l?o.styles:null,g=l?o.classes:null,x=0;if(null!==a)for(let T=0;T<a.length;T++){const A=a[T];"number"==typeof A?x=A:1==x?g=Cn(g,A):2==x&&(h=Cn(h,A+": "+a[++T]+";"))}l?o.styles=h:o.stylesWithoutHost=h,l?o.classes=g:o.classesWithoutHost=g}function hu(o,a,l,h,g=!1){for(;null!==l;){const x=a[l.index];if(null!==x&&h.push(cr(x)),Fi(x))for(let A=10;A<x.length;A++){const O=x[A],H=O[1].firstChild;null!==H&&hu(O[1],O,H,h)}const T=l.type;if(8&T)hu(o,a,l.child,h);else if(32&T){const A=wf(l,a);let O;for(;O=A();)h.push(O)}else if(16&T){const A=cg(a,l);if(Array.isArray(A))h.push(...A);else{const O=tg(a[16]);hu(O[1],O,A,h,!0)}}l=g?l.projectionNext:l.next}return h}class fa{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return hu(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Fi(a)){const l=a[8],h=l?l.indexOf(this):-1;h>-1&&(Jd(a,h),Aa(l,h))}this._attachedToViewContainer=!1}Za(this._lView[1],this._lView)}onDestroy(a){qy(this._lView[1],this._lView,null,a)}markForCheck(){tc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){kf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new He(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Qd(o,a){Yu(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new He(902,!1);this._appRef=a}}class Uf extends fa{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;kf(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class zg extends gf{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=ce(a);return new ad(l,this.ngModule)}}function d0(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}class f0{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,h){const g=this.injector.get(a,ny,h);return g!==ny||l===ny?g:this.parentInjector.get(a,l,h)}}class ad extends UE{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function ib(o){return o.map($v).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return d0(this.componentDef.inputs)}get outputs(){return d0(this.componentDef.outputs)}create(a,l,h,g){let x=(g=g||this.ngModule)instanceof Gu?g:g?.injector;x&&null!==this.componentDef.getStandaloneInjector&&(x=this.componentDef.getStandaloneInjector(x)||x);const T=x?new f0(a,x):a,A=T.get(Av,null);if(null===A)throw new He(407,!1);const O=T.get(rr,null),H=A.createRenderer(null,this.componentDef),Q=this.componentDef.selectors[0][0]||"div",se=h?function vh(o,a,l){return o.selectRootElement(a,l===Oi.ShadowDom)}(H,h,this.componentDef.encapsulation):Js(A.createRenderer(null,this.componentDef),Q,function h0(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(Q)),ye=this.componentDef.onPush?288:272,Me=ec(0,null,null,1,0,null,null,null,null,null),je=rd(null,Me,null,ye,null,null,A,H,O,T,null);let pt,Lt;pe(je);try{const tn=function tT(o,a,l,h,g,x){const T=l[1];l[22]=o;const O=yl(T,22,2,"#host",null),H=O.mergedAttrs=a.hostAttrs;null!==H&&(bh(O,H,!0),null!==o&&(aa(g,o,H),null!==O.classes&&zv(g,o,O.classes),null!==O.styles&&ih(g,o,O.styles)));const Q=h.createRenderer(o,a),se=rd(l,yh(a),null,a.onPush?32:16,l[22],O,h,Q,x||null,null,null);return T.firstCreatePass&&(Wl(Ic(O,l),T,a.type),Pg(T,O),gb(O,l.length,1)),Fg(l,se),l[22]=se}(se,this.componentDef,je,A,H);if(se)if(h)aa(H,se,["ng-version",Ka.full]);else{const{attrs:fn,classes:at}=function Cy(o){const a=[],l=[];let h=1,g=2;for(;h<o.length;){let x=o[h];if("string"==typeof x)2===g?""!==x&&a.push(x,o[++h]):8===g&&l.push(x);else{if(!Xa(g))break;g=x}h++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);fn&&aa(H,se,fn),at&&at.length>0&&zv(H,se,at.join(" "))}if(Lt=Ks(Me,22),void 0!==l){const fn=Lt.projection=[];for(let at=0;at<this.ngContentSelectors.length;at++){const Un=l[at];fn.push(null!=Un?Array.from(Un):null)}}pt=function nT(o,a,l,h){const g=l[1],x=function Ky(o,a,l){const h=wn();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),wl(o,h,a,Bc(o,a,1,null),l),xl(o,h));const g=$l(a,o,h.directiveStart,h);ts(g,a);const x=Es(h,a);return x&&ts(x,a),g}(g,l,a);if(o[8]=l[8]=x,null!==h)for(const A of h)A(x,a);if(a.contentQueries){const A=wn();a.contentQueries(1,x,A.directiveStart)}const T=wn();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(nr(T.index),fb(l[1],T,0,T.directiveStart,T.directiveEnd,a),Rg(a,x)),x}(tn,this.componentDef,je,[rT]),jy(Me,je,null)}finally{Er()}return new p0(this.componentType,pt,mf(Lt,je),je,Lt)}}class p0 extends class uI{}{constructor(a,l,h,g,x){super(),this.location=h,this._rootLView=g,this._tNode=x,this.instance=l,this.hostView=this.changeDetectorRef=new Uf(g),this.componentType=a}setInput(a,l){const h=this._tNode.inputs;let g;if(null!==h&&(g=h[a])){const x=this._rootLView;Vg(x[1],x,g,a,l),function id(o,a){const l=gr(a,o);16&l[2]||(l[2]|=32)}(x,this._tNode.index)}}get injector(){return new Ga(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function rT(){const o=wn();gs(tt()[1],o)}let Gg=null;function bl(){if(!Gg){const o=Dn.Symbol;if(o&&o.iterator)Gg=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const h=a[l];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Gg=h)}}}return Gg}function Vf(o){return!!fu(o)&&(Array.isArray(o)||!(o instanceof Map)&&bl()in o)}function fu(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Gf(o,a,l,h){const g=tt();return function zi(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}(g,function si(){return On.lFrame.bindingIndex++}(),a)&&(fr(),Ur(function Jn(){const o=On.lFrame;return Ks(o.tView,o.selectedIndex)}(),g,o,a,l,h)),Gf}function jf(o,a,l,h,g){const T=g?"class":"style";Vg(o,l,a.inputs[T],T,h)}function qf(o,a,l,h){const g=tt(),x=fr(),T=22+o,A=g[11],O=g[T]=Js(A,a,function Ms(){return On.lFrame.currentNamespace}()),H=x.firstCreatePass?function Tb(o,a,l,h,g,x,T){const A=a.consts,H=yl(a,o,2,g,Ts(A,x));return function a0(o,a,l,h){let g=!1;if(tl()){const x=function pb(o,a,l){const h=o.directiveRegistry;let g=null;if(h)for(let x=0;x<h.length;x++){const T=h[x];Ey(l,T.selectors,!1)&&(g||(g=[]),Wl(Ic(l,a),o,T.type),ds(T)?(Pg(o,l),g.unshift(T)):g.push(T))}return g}(o,a,l),T=null===h?null:{"":-1};if(null!==x){g=!0,gb(l,o.data.length,x.length);for(let Q=0;Q<x.length;Q++){const se=x[Q];se.providersResolver&&se.providersResolver(se)}let A=!1,O=!1,H=Bc(o,a,x.length,null);for(let Q=0;Q<x.length;Q++){const se=x[Q];l.mergedAttrs=Gl(l.mergedAttrs,se.hostAttrs),wl(o,l,a,H,se),Nf(H,se,T),null!==se.contentQueries&&(l.flags|=8),(null!==se.hostBindings||null!==se.hostAttrs||0!==se.hostVars)&&(l.flags|=128);const ye=se.type.prototype;!A&&(ye.ngOnChanges||ye.ngOnInit||ye.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),A=!0),!O&&(ye.ngOnChanges||ye.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),O=!0),H++}xl(o,l)}T&&function JE(o,a,l){if(a){const h=o.localNames=[];for(let g=0;g<a.length;g+=2){const x=l[a[g+1]];if(null==x)throw new He(-301,!1);h.push(a[g],x)}}}(l,h,T)}return l.mergedAttrs=Gl(l.mergedAttrs,l.attrs),g}(a,l,H,Ts(A,T)),null!==H.attrs&&bh(H,H.attrs,!1),null!==H.mergedAttrs&&bh(H,H.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,H),H}(T,x,g,0,a,l,h):x.data[T];Nr(H,!0);const Q=H.mergedAttrs;null!==Q&&aa(A,O,Q);const se=H.classes;null!==se&&zv(A,O,se);const ye=H.styles;return null!==ye&&ih(A,O,ye),64!=(64&H.flags)&&Ra(x,g,O,H),0===function bp(){return On.lFrame.elementDepthCount}()&&ts(O,g),function Cd(){On.lFrame.elementDepthCount++}(),na(H)&&(function Ag(o,a,l){!tl()||(function XE(o,a,l,h){const g=l.directiveStart,x=l.directiveEnd;o.firstCreatePass||Ic(l,a),ts(h,a);const T=l.initialInputs;for(let A=g;A<x;A++){const O=o.data[A],H=ds(O);H&&eT(a,l,O);const Q=$l(a,o,A,l);ts(Q,a),null!==T&&Lg(0,A-g,Q,O,0,T),H&&(gr(l.index,a)[8]=Q)}}(o,a,l,Es(l,a)),128==(128&l.flags)&&function QE(o,a,l){const h=l.directiveStart,g=l.directiveEnd,x=l.index,T=function Yt(){return On.lFrame.currentDirectiveIndex}();try{nr(x);for(let A=h;A<g;A++){const O=o.data[A],H=a[A];Zs(A),(null!==O.hostBindings||0!==O.hostVars||null!==O.hostAttrs)&&Rg(O,H)}}finally{nr(-1),Zs(T)}}(o,a,l))}(x,g,H),function mh(o,a,l){if(Rl(a)){const g=a.directiveEnd;for(let x=a.directiveStart;x<g;x++){const T=o.data[x];T.contentQueries&&T.contentQueries(1,l[x],x)}}}(x,H,g)),null!==h&&function vl(o,a,l=Es){const h=a.localNames;if(null!==h){let g=a.index+1;for(let x=0;x<h.length;x+=2){const T=h[x+1],A=-1===T?l(a,o):o[T];o[g++]=A}}}(g,H),qf}function Hg(){let o=wn();Lo()?function Ul(){On.lFrame.isParent=!1}():(o=o.parent,Nr(o,!1));const a=o;!function Dd(){On.lFrame.elementDepthCount--}();const l=fr();return l.firstCreatePass&&(gs(l,o),Rl(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Tc(o){return 0!=(16&o.flags)}(a)&&jf(l,a,tt(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function za(o){return 0!=(32&o.flags)}(a)&&jf(l,a,tt(),a.stylesWithoutHost,!1),Hg}function S0(o,a,l,h){return qf(o,a,l,h),Hg(),S0}function Ih(o){return!!o&&"function"==typeof o.then}function Ib(o){return!!o&&"function"==typeof o.subscribe}const $g=Ib;function jg(o,a,l,h){const g=tt(),x=fr(),T=wn();return function Yf(o,a,l,h,g,x,T,A){const O=na(h),Q=o.firstCreatePass&&Bg(o),se=a[8],ye=u0(a);let Me=!0;if(3&h.type||A){const Lt=Es(h,a),tn=A?A(Lt):Lt,fn=ye.length,at=A?Wr=>A(cr(Wr[h.index])):h.index;let Un=null;if(!A&&O&&(Un=function Cb(o,a,l,h){const g=o.cleanup;if(null!=g)for(let x=0;x<g.length-1;x+=2){const T=g[x];if(T===l&&g[x+1]===h){const A=a[7],O=g[x+2];return A.length>O?A[O]:null}"string"==typeof T&&(x+=2)}return null}(o,a,g,h.index)),null!==Un)(Un.__ngLastListenerFn__||Un).__ngNextListenerFn__=x,Un.__ngLastListenerFn__=x,Me=!1;else{x=ic(h,a,se,x,!1);const Wr=l.listen(tn,g,x);ye.push(x,Wr),Q&&Q.push(g,at,fn,fn+1)}}else x=ic(h,a,se,x,!1);const je=h.outputs;let pt;if(Me&&null!==je&&(pt=je[g])){const Lt=pt.length;if(Lt)for(let tn=0;tn<Lt;tn+=2){const Ni=a[pt[tn]][pt[tn+1]].subscribe(x),Bh=ye.length;ye.push(x,Ni),Q&&Q.push(g,h.index,Bh,-(Bh+1))}}}(x,g,g[11],T,o,a,0,h),jg}function oT(o,a,l,h){try{return!1!==l(h)}catch(g){return Xy(o,g),!1}}function ic(o,a,l,h,g){return function x(T){if(T===Function)return h;tc(2&o.flags?gr(o.index,a):a);let O=oT(a,0,h,T),H=x.__ngNextListenerFn__;for(;H;)O=oT(a,0,H,T)&&O,H=H.__ngNextListenerFn__;return g&&!1===O&&(T.preventDefault(),T.returnValue=!1),O}}function em(o,a=""){const l=tt(),h=fr(),g=o+22,x=h.firstCreatePass?yl(h,g,1,a,null):h.data[g],T=l[g]=function Bv(o,a){return o.createText(a)}(l[11],a);Ra(h,l,T,x),Nr(x,!1)}const fd=void 0;var j0=["en",[["a","p"],["AM","PM"],fd],[["AM","PM"],fd,fd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fd,"{1} 'at' {0}",fd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function TI(o){const l=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===h?1:5}];let np={};function Hb(o){const a=function CI(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=wT(a);if(l)return l;const h=a.split("-")[0];if(l=wT(h),l)return l;if("en"===h)return j0;throw new He(701,!1)}function Wb(o){return Hb(o)[An.PluralCase]}function wT(o){return o in np||(np[o]=Dn.ng&&Dn.ng.common&&Dn.ng.common.locales&&Dn.ng.common.locales[o]),np[o]}var An=(()=>((An=An||{})[An.LocaleId=0]="LocaleId",An[An.DayPeriodsFormat=1]="DayPeriodsFormat",An[An.DayPeriodsStandalone=2]="DayPeriodsStandalone",An[An.DaysFormat=3]="DaysFormat",An[An.DaysStandalone=4]="DaysStandalone",An[An.MonthsFormat=5]="MonthsFormat",An[An.MonthsStandalone=6]="MonthsStandalone",An[An.Eras=7]="Eras",An[An.FirstDayOfWeek=8]="FirstDayOfWeek",An[An.WeekendRange=9]="WeekendRange",An[An.DateFormat=10]="DateFormat",An[An.TimeFormat=11]="TimeFormat",An[An.DateTimeFormat=12]="DateTimeFormat",An[An.NumberSymbols=13]="NumberSymbols",An[An.NumberFormats=14]="NumberFormats",An[An.CurrencyCode=15]="CurrencyCode",An[An.CurrencySymbol=16]="CurrencySymbol",An[An.CurrencyName=17]="CurrencyName",An[An.Currencies=18]="Currencies",An[An.Directionality=19]="Directionality",An[An.PluralCase=20]="PluralCase",An[An.ExtraData=21]="ExtraData",An))();const om="en-US";let $b=om;class Ah{}class q0{}function de(o,a){return new Ye(o,a??null)}class Ye extends Ah{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new zg(this);const h=xn(a);this._bootstrapComponents=pl(h.bootstrap),this._r3Injector=fg(a,l,[{provide:Ah,useValue:this},{provide:gf,useValue:this.componentFactoryResolver}],ut(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Ce extends q0{constructor(a){super(),this.moduleType=a}create(a){return new Ye(this.moduleType,a)}}class et extends Ah{constructor(a,l,h){super(),this.componentFactoryResolver=new zg(this),this.instance=null;const g=new fl([...a,{provide:Ah,useValue:this},{provide:gf,useValue:this.componentFactoryResolver}],l||Kp(),h,new Set(["environment"]));this.injector=g,g.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function sn(o,a,l=null){return new et(o,a,l).injector}let Kn=(()=>{class o{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const h=Ev(0,l.type),g=h.length>0?sn([h],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,g)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=br({token:o,providedIn:"environment",factory:()=>new o(bi(Gu))}),o})();function pr(o){o.getStandaloneInjector=a=>a.get(Kn).getOrCreateStandaloneInjector(o)}function eS(o){return a=>{setTimeout(o,void 0,a)}}const vu=class OI extends W.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,h){let g=a,x=l||(()=>null),T=h;if(a&&"object"==typeof a){const O=a;g=O.next?.bind(O),x=O.error?.bind(O),T=O.complete?.bind(O)}this.__isAsync&&(x=eS(x),g&&(g=eS(g)),T&&(T=eS(T)));const A=super.subscribe({next:g,error:x,complete:T});return a instanceof le.w0&&a.add(A),A}};function kI(){return this._results[bl()]()}class tS{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=bl(),h=tS.prototype;h[l]||(h[l]=kI)}get changes(){return this._changes||(this._changes=new vu)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const h=this;h.dirty=!1;const g=kr(a);(this._changesDetected=!function Vu(o,a,l){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let g=o[h],x=a[h];if(l&&(g=l(g),x=l(x)),x!==g)return!1}return!0}(h._results,g,l))&&(h._results=g,h.length=g.length,h.last=g[this.length-1],h.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let m_=(()=>{class o{}return o.__NG_ELEMENT_ID__=BI,o})();const FI=m_,UI=class extends FI{constructor(a,l,h){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=h}createEmbeddedView(a,l){const h=this._declarationTContainer.tViews,g=rd(this._declarationLView,h,a,16,null,h.declTNode,null,null,null,null,l||null);g[17]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[19];return null!==T&&(g[19]=T.createEmbeddedView(h)),jy(h,g,a),new fa(g)}};function BI(){return sp(wn(),tt())}function sp(o,a){return 4&o.type?new UI(a,o,mf(o,a)):null}let y_=(()=>{class o{}return o.__NG_ELEMENT_ID__=DT,o})();function DT(){return iS(wn(),tt())}const nS=y_,AT=class extends nS{constructor(a,l,h){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=h}get element(){return mf(this._hostTNode,this._hostLView)}get injector(){return new Ga(this._hostTNode,this._hostLView)}get parentInjector(){const a=Qs(this._hostTNode,this._hostLView);if(qn(a)){const l=ol(a,this._hostLView),h=Fo(a);return new Ga(l[1].data[h+8],l)}return new Ga(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=RT(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,h){let g,x;"number"==typeof h?g=h:null!=h&&(g=h.index,x=h.injector);const T=a.createEmbeddedView(l||{},x);return this.insert(T,g),T}createComponent(a,l,h,g,x){const T=a&&!function Da(o){return"function"==typeof o}(a);let A;if(T)A=l;else{const se=l||{};A=se.index,h=se.injector,g=se.projectableNodes,x=se.environmentInjector||se.ngModuleRef}const O=T?a:new ad(ce(a)),H=h||this.parentInjector;if(!x&&null==O.ngModule){const ye=(T?H:this.parentInjector).get(Gu,null);ye&&(x=ye)}const Q=O.create(H,g,void 0,x);return this.insert(Q.hostView,A),Q}insert(a,l){const h=a._lView,g=h[1];if(function kl(o){return Fi(o[3])}(h)){const Q=this.indexOf(a);if(-1!==Q)this.detach(Q);else{const se=h[3],ye=new AT(se,se[6],se[3]);ye.detach(ye.indexOf(a))}}const x=this._adjustIndex(l),T=this._lContainer;!function kt(o,a,l,h){const g=10+h,x=l.length;h>0&&(l[g-1][4]=a),h<x-10?(a[4]=l[g],Cp(l,10+h,a)):(l.push(a),a[4]=null),a[3]=l;const T=a[17];null!==T&&l!==T&&function kc(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(T,a);const A=a[19];null!==A&&A.insertView(o),a[2]|=64}(g,h,T,x);const A=vy(x,T),O=h[11],H=og(O,T[7]);return null!==H&&function Vv(o,a,l,h,g,x){h[0]=g,h[6]=a,Yu(o,h,l,1,g,x)}(g,T[6],O,h,H,A),a.attachToViewContainerRef(),Cp(rS(T),x,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=RT(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),h=Jd(this._lContainer,l);h&&(Aa(rS(this._lContainer),l),Za(h[1],h))}detach(a){const l=this._adjustIndex(a,-1),h=Jd(this._lContainer,l);return h&&null!=Aa(rS(this._lContainer),l)?new fa(h):null}_adjustIndex(a,l=0){return a??this.length+l}};function RT(o){return o[8]}function rS(o){return o[8]||(o[8]=[])}function iS(o,a){let l;const h=a[o.index];if(Fi(h))l=h;else{let g;if(8&o.type)g=cr(h);else{const x=a[11];g=x.createComment("");const T=Es(o,a);qu(x,og(x,T),g,function eb(o,a){return o.nextSibling(a)}(x,T),!1)}a[o.index]=l=function mb(o,a,l,h){return new Array(o,!0,!1,a,null,0,h,l,null,null)}(h,a,g,o),Fg(a,l)}return new AT(l,o,a)}class Q0{constructor(a){this.queryList=a,this.matches=null}clone(){return new Q0(this.queryList)}setDirty(){this.queryList.setDirty()}}class NT{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const h=null!==a.contentQueries?a.contentQueries[0]:l.length,g=[];for(let x=0;x<h;x++){const T=l.getByIndex(x);g.push(this.queries[T.indexInDeclarationView].clone())}return new NT(g)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==zT(a,l).matches&&this.queries[l].setDirty()}}class OT{constructor(a,l,h=null){this.predicate=a,this.flags=l,this.read=h}}class kT{constructor(a=[]){this.queries=a}elementStart(a,l){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let h=0;h<this.length;h++){const g=null!==l?l.length:0,x=this.getByIndex(h).embeddedTView(a,g);x&&(x.indexInDeclarationView=h,null!==l?l.push(x):l=[x])}return null!==l?new kT(l):null}template(a,l){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class FT{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new FT(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==l;)h=h.parent;return l===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const h=this.metadata.predicate;if(Array.isArray(h))for(let g=0;g<h.length;g++){const x=h[g];this.matchTNodeWithReadOption(a,l,sS(l,x)),this.matchTNodeWithReadOption(a,l,Od(l,a,x,!1,!1))}else h===m_?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Od(l,a,h,!1,!1))}matchTNodeWithReadOption(a,l,h){if(null!==h){const g=this.metadata.read;if(null!==g)if(g===Xp||g===y_||g===m_&&4&l.type)this.addMatch(l.index,-2);else{const x=Od(l,a,g,!1,!1);null!==x&&this.addMatch(l.index,x)}else this.addMatch(l.index,h)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function sS(o,a){const l=o.localNames;if(null!==l)for(let h=0;h<l.length;h+=2)if(l[h]===a)return l[h+1];return null}function zI(o,a,l,h){return-1===l?function bA(o,a){return 11&o.type?mf(o,a):4&o.type?sp(o,a):null}(a,o):-2===l?function UT(o,a,l){return l===Xp?mf(a,o):l===m_?sp(a,o):l===y_?iS(a,o):void 0}(o,a,h):$l(o,o[1],l,a)}function BT(o,a,l,h){const g=a[19].queries[h];if(null===g.matches){const x=o.data,T=l.matches,A=[];for(let O=0;O<T.length;O+=2){const H=T[O];A.push(H<0?null:zI(a,x[H],T[O+1],l.metadata.read))}g.matches=A}return g.matches}function J0(o,a,l,h){const g=o.queries.getByIndex(l),x=g.matches;if(null!==x){const T=BT(o,a,g,l);for(let A=0;A<x.length;A+=2){const O=x[A];if(O>0)h.push(T[A/2]);else{const H=x[A+1],Q=a[-O];for(let se=10;se<Q.length;se++){const ye=Q[se];ye[17]===ye[3]&&J0(ye[1],ye,H,h)}if(null!==Q[9]){const se=Q[9];for(let ye=0;ye<se.length;ye++){const Me=se[ye];J0(Me[1],Me,H,h)}}}}}return h}function ex(o){const a=tt(),l=fr(),h=N();$(h+1);const g=zT(l,h);if(o.dirty&&function Td(o){return 4==(4&o[2])}(a)===(2==(2&g.metadata.flags))){if(null===g.matches)o.reset([]);else{const x=g.crossesNgTemplate?J0(l,a,h,[]):BT(l,a,g,h);o.reset(x,ty),o.notifyOnChanges()}return!0}return!1}function oS(o,a,l){const h=fr();h.firstCreatePass&&(HI(h,new OT(o,a,l),-1),2==(2&a)&&(h.staticViewQueries=!0)),VT(h,tt(),a)}function GI(o,a,l,h){const g=fr();if(g.firstCreatePass){const x=wn();HI(g,new OT(a,l,h),x.index),function WI(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(g,o),2==(2&l)&&(g.staticContentQueries=!0)}VT(g,tt(),l)}function tx(){return function SA(o,a){return o[19].queries[a].queryList}(tt(),N())}function VT(o,a,l){const h=new tS(4==(4&l));qy(o,a,h,h.destroy),null===a[19]&&(a[19]=new NT),a[19].queries.push(new Q0(h))}function HI(o,a,l){null===o.queries&&(o.queries=new kT),o.queries.track(new FT(a,l))}function zT(o,a){return o.queries.getByIndex(a)}function S_(...o){}const gS=new ei("Application Initializer");let cp=(()=>{class o{constructor(l){this.appInits=l,this.resolve=S_,this.reject=S_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,g)=>{this.resolve=h,this.reject=g})}runInitializers(){if(this.initialized)return;const l=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const x=this.appInits[g]();if(Ih(x))l.push(x);else if($g(x)){const T=new Promise((A,O)=>{x.subscribe({complete:A,error:O})});l.push(T)}}Promise.all(l).then(()=>{h()}).catch(g=>{this.reject(g)}),0===l.length&&h(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(bi(gS,8))},o.\u0275prov=br({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const hx=new ei("AppId",{providedIn:"root",factory:function fx(){return`${E_()}${E_()}${E_()}`}});function E_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const mS=new ei("Platform Initializer"),JT=new ei("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),eM=new ei("appBootstrapListener");let yS=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=br({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const px=new ei("LocaleId",{providedIn:"root",factory:()=>Bd(px,Ht.Optional|Ht.SkipSelf)||function tM(){return typeof $localize<"u"&&$localize.locale||om}()}),_S=new ei("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class wo{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let gx=(()=>{class o{compileModuleSync(l){return new Ce(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const h=this.compileModuleSync(l),x=pl(xn(l).declarations).reduce((T,A)=>{const O=ce(A);return O&&T.push(new ad(O)),T},[]);return new wo(h,x)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=br({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const wS=(()=>Promise.resolve(0))();function bS(o){typeof Zone>"u"?wS.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class cc{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vu(!1),this.onMicrotaskEmpty=new vu(!1),this.onStable=new vu(!1),this.onError=new vu(!1),typeof Zone>"u")throw new He(908,!1);Zone.assertZonePatched();const g=this;if(g._nesting=0,g._outer=g._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const x=Zone.AsyncStackTaggingZoneSpec;g._inner=g._inner.fork(new x("Angular"))}Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!h&&l,g.shouldCoalesceRunChangeDetection=h,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function SS(){let o=Dn.requestAnimationFrame,a=Dn.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function TS(o){const a=()=>{!function ES(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Dn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,mx(o),o.isCheckStableRunning=!0,fm(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),mx(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,h,g,x,T,A)=>{try{return sM(o),l.invokeTask(g,x,T,A)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===x.type||o.shouldCoalesceRunChangeDetection)&&a(),pm(o)}},onInvoke:(l,h,g,x,T,A,O)=>{try{return sM(o),l.invoke(g,x,T,A,O)}finally{o.shouldCoalesceRunChangeDetection&&a(),pm(o)}},onHasTask:(l,h,g,x)=>{l.hasTask(g,x),h===g&&("microTask"==x.change?(o._hasPendingMicrotasks=x.microTask,mx(o),fm(o)):"macroTask"==x.change&&(o.hasPendingMacrotasks=x.macroTask))},onHandleError:(l,h,g,x)=>(l.handleError(g,x),o.runOutsideAngular(()=>o.onError.emit(x)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cc.isInAngularZone())throw new He(909,!1)}static assertNotInAngularZone(){if(cc.isInAngularZone())throw new He(909,!1)}run(a,l,h){return this._inner.run(a,l,h)}runTask(a,l,h,g){const x=this._inner,T=x.scheduleEventTask("NgZoneEvent: "+g,a,tC,S_,S_);try{return x.runTask(T,l,h)}finally{x.cancelTask(T)}}runGuarded(a,l,h){return this._inner.runGuarded(a,l,h)}runOutsideAngular(a){return this._outer.run(a)}}const tC={};function fm(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function mx(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function sM(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function pm(o){o._nesting--,fm(o)}class oM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vu,this.onMicrotaskEmpty=new vu,this.onStable=new vu,this.onError=new vu}run(a,l,h){return a.apply(l,h)}runGuarded(a,l,h){return a.apply(l,h)}runOutsideAngular(a){return a()}runTask(a,l,h,g){return a.apply(l,h)}}const MS=new ei(""),IS=new ei("");let kh,yx=(()=>{class o{constructor(l,h,g){this._ngZone=l,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,kh||(function nC(o){kh=o}(g),g.addToWindow(h)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cc.assertNotInAngularZone(),bS(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bS(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(l)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,h,g){let x=-1;h&&h>0&&(x=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==x),l(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:l,timeoutId:x,updateCb:g})}whenStable(l,h,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,h,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,h,g){return[]}}return o.\u0275fac=function(l){return new(l||o)(bi(cc),bi(aM),bi(IS))},o.\u0275prov=br({token:o,factory:o.\u0275fac}),o})(),aM=(()=>{class o{constructor(){this._applications=new Map}registerApplication(l,h){this._applications.set(l,h)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,h=!0){return kh?.findTestabilityInTree(this,l,h)??null}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=br({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Fh=null;const cM=new ei("AllowMultipleToken"),gd=new ei("PlatformDestroyListeners");class lM{constructor(a,l){this.name=a,this.token=l}}function DS(o,a,l=[]){const h=`Platform: ${a}`,g=new ei(h);return(x=[])=>{let T=lp();if(!T||T.injector.get(cM,!1)){const A=[...l,...x,{provide:g,useValue:!0}];o?o(A):function va(o){if(Fh&&!Fh.get(cM,!1))throw new He(400,!1);Fh=o;const a=o.get(vx);(function gm(o){const a=o.get(mS,null);a&&a.forEach(l=>l())})(o)}(function RS(o=[],a){return iu.create({name:a,providers:[{provide:Ac,useValue:"platform"},{provide:gd,useValue:new Set([()=>Fh=null])},...o]})}(A,h))}return function AS(o){const a=lp();if(!a)throw new He(401,!1);return a}()}}function lp(){return Fh?.get(vx)??null}let vx=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,h){const g=function wx(o,a){let l;return l="noop"===o?new oM:("zone.js"===o?void 0:o)||new cc(a),l}(h?.ngZone,function xx(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(h)),x=[{provide:cc,useValue:g}];return g.run(()=>{const T=iu.create({providers:x,parent:this.injector,name:l.moduleType.name}),A=l.create(T),O=A.injector.get(Ya,null);if(!O)throw new He(402,!1);return g.runOutsideAngular(()=>{const H=g.onError.subscribe({next:Q=>{O.handleError(Q)}});A.onDestroy(()=>{bx(this._modules,A),H.unsubscribe()})}),function M_(o,a,l){try{const h=l();return Ih(h)?h.catch(g=>{throw a.runOutsideAngular(()=>o.handleError(g)),g}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(O,g,()=>{const H=A.injector.get(cp);return H.runInitializers(),H.donePromise.then(()=>(function jb(o){Mi(o,"Expected localeId to be defined"),"string"==typeof o&&($b=o.toLowerCase().replace(/_/g,"-"))}(A.injector.get(px,om)||om),this._moduleDoBootstrap(A),A))})})}bootstrapModule(l,h=[]){const g=mm({},h);return function _x(o,a,l){const h=new Ce(l);return Promise.resolve(h)}(0,0,l).then(x=>this.bootstrapModuleFactory(x,g))}_moduleDoBootstrap(l){const h=l.injector.get(I_);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(g=>h.bootstrap(g));else{if(!l.instance.ngDoBootstrap)throw new He(403,!1);l.instance.ngDoBootstrap(h)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new He(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const l=this._injector.get(gd,null);l&&(l.forEach(h=>h()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(bi(iu))},o.\u0275prov=br({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function mm(o,a){return Array.isArray(a)?a.reduce(mm,o):{...o,...a}}let I_=(()=>{class o{constructor(l,h,g){this._zone=l,this._injector=h,this._exceptionHandler=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const x=new J.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),T=new J.y(A=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{cc.assertNotInAngularZone(),bS(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const H=this._zone.onUnstable.subscribe(()=>{cc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{O.unsubscribe(),H.unsubscribe()}});this.isStable=function Dt(...o){const a=(0,Tt.yG)(o),l=(0,Tt._6)(o,1/0),h=o;return h.length?1===h.length?(0,Ke.Xf)(h[0]):(0,ot.J)(l)((0,Qt.D)(h,a)):Ft.E}(x,T.pipe(function wt(o={}){const{connector:a=(()=>new W.x),resetOnError:l=!0,resetOnComplete:h=!0,resetOnRefCountZero:g=!0}=o;return x=>{let T,A,O,H=0,Q=!1,se=!1;const ye=()=>{A?.unsubscribe(),A=void 0},Me=()=>{ye(),T=O=void 0,Q=se=!1},je=()=>{const pt=T;Me(),pt?.unsubscribe()};return(0,ze.e)((pt,Lt)=>{H++,!se&&!Q&&ye();const tn=O=O??a();Lt.add(()=>{H--,0===H&&!se&&!Q&&(A=$n(je,g))}),tn.subscribe(Lt),!T&&H>0&&(T=new ht.Hp({next:fn=>tn.next(fn),error:fn=>{se=!0,ye(),A=$n(Me,l,fn),tn.error(fn)},complete:()=>{Q=!0,ye(),A=$n(Me,h),tn.complete()}}),(0,Ke.Xf)(pt).subscribe(T))})(x)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,h){const g=l instanceof UE;if(!this._injector.get(cp).done)throw!g&&un(l),new He(405,false);let T;T=g?l:this._injector.get(gf).resolveComponentFactory(l),this.componentTypes.push(T.componentType);const A=function T_(o){return o.isBoundToModule}(T)?void 0:this._injector.get(Ah),H=T.create(iu.NULL,[],h||T.selector,A),Q=H.location.nativeElement,se=H.injector.get(MS,null);return se?.registerApplication(Q),H.onDestroy(()=>{this.detachView(H.hostView),bx(this.components,H),se?.unregisterApplication(Q)}),this._loadComponent(H),H}tick(){if(this._runningTick)throw new He(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const h=l;this._views.push(h),h.attachToAppRef(this)}detachView(l){const h=l;bx(this._views,h),h.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(eM,[]).concat(this._bootstrapListeners).forEach(g=>g(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>bx(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new He(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(l){return new(l||o)(bi(cc),bi(Gu),bi(Ya))},o.\u0275prov=br({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function bx(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}let Tx=!0;function dM(){Tx=!1}let Ix=(()=>{class o{}return o.__NG_ELEMENT_ID__=C_,o})();function C_(o){return function up(o,a,l){if(fi(o)&&!l){const h=gr(o.index,a);return new fa(h,h)}return 47&o.type?new fa(a[16],a):null}(wn(),tt(),16==(16&o))}class yd{constructor(){}supports(a){return Vf(a)}create(a){return new pM(a)}}const fM=(o,a)=>a;class pM{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||fM}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,h=this._removalsHead,g=0,x=null;for(;l||h;){const T=!h||l&&l.currentIndex<yM(h,g,x)?l:h,A=yM(T,g,x),O=T.currentIndex;if(T===h)g--,h=h._nextRemoved;else if(l=l._next,null==T.previousIndex)g++;else{x||(x=[]);const H=A-g,Q=O-g;if(H!=Q){for(let ye=0;ye<H;ye++){const Me=ye<x.length?x[ye]:x[ye]=0,je=Me+ye;Q<=je&&je<H&&(x[ye]=Me+1)}x[T.previousIndex]=Q-H}}A!==O&&a(T,A,O)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Vf(a))throw new He(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let g,x,T,l=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let A=0;A<this.length;A++)x=a[A],T=this._trackByFn(A,x),null!==l&&Object.is(l.trackById,T)?(h&&(l=this._verifyReinsertion(l,x,T,A)),Object.is(l.item,x)||this._addIdentityChange(l,x)):(l=this._mismatch(l,x,T,A),h=!0),l=l._next}else g=0,function rc(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[bl()]();let h;for(;!(h=l.next()).done;)a(h.value)}}(a,A=>{T=this._trackByFn(g,A),null!==l&&Object.is(l.trackById,T)?(h&&(l=this._verifyReinsertion(l,A,T,g)),Object.is(l.item,A)||this._addIdentityChange(l,A)):(l=this._mismatch(l,A,T,g),h=!0),l=l._next,g++}),this.length=g;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,h,g){let x;return null===a?x=this._itTail:(x=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,x,g)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,g))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,x,g)):a=this._addAfter(new gM(l,h),x,g),a}_verifyReinsertion(a,l,h,g){let x=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==x?a=this._reinsertAfter(x,a._prev,g):a.currentIndex!=g&&(a.currentIndex=g,this._addToMoves(a,g)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const g=a._prevRemoved,x=a._nextRemoved;return null===g?this._removalsHead=x:g._nextRemoved=x,null===x?this._removalsTail=g:x._prevRemoved=g,this._insertAfter(a,l,h),this._addToMoves(a,h),a}_moveAfter(a,l,h){return this._unlink(a),this._insertAfter(a,l,h),this._addToMoves(a,h),a}_addAfter(a,l,h){return this._insertAfter(a,l,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,h){const g=null===l?this._itHead:l._next;return a._next=g,a._prev=l,null===g?this._itTail=a:g._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new mM),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,h=a._next;return null===l?this._itHead=h:l._next=h,null===h?this._itTail=l:h._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mM),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class gM{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _m{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===l||l<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const l=a._prevDup,h=a._nextDup;return null===l?this._head=h:l._nextDup=h,null===h?this._tail=l:h._prevDup=l,null===this._head}}class mM{constructor(){this.map=new Map}put(a){const l=a.trackById;let h=this.map.get(l);h||(h=new _m,this.map.set(l,h)),h.add(a)}get(a,l){const g=this.map.get(a);return g?g.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yM(o,a,l){const h=o.previousIndex;if(null===h)return h;let g=0;return l&&h<l.length&&(g=l[h]),h+a+g}class OS{constructor(){}supports(a){return a instanceof Map||fu(a)}create(){return new lC}}class lC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||fu(a)))throw new He(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,g)=>{if(l&&l.key===g)this._maybeAddToChanges(l,h),this._appendAfter=l,l=l._next;else{const x=this._getOrCreateRecordForKey(g,h);l=this._insertBeforeOrAppend(l,x)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let h=l;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const h=a._prev;return l._next=a,l._prev=h,a._prev=l,h&&(h._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const g=this._records.get(a);this._maybeAddToChanges(g,l);const x=g._prev,T=g._next;return x&&(x._next=T),T&&(T._prev=x),g._next=null,g._prev=null,g}const h=new _M(a);return this._records.set(a,h),h.currentValue=l,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(h=>l(a[h],h))}}class _M{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kS(){return new R_([new yd])}let R_=(()=>{class o{constructor(l){this.factories=l}static create(l,h){if(null!=h){const g=h.factories.slice();l=l.concat(g)}return new o(l)}static extend(l){return{provide:o,useFactory:h=>o.create(l,h||kS()),deps:[[o,new Yl,new Vd]]}}find(l){const h=this.factories.find(g=>g.supports(l));if(null!=h)return h;throw new He(901,!1)}}return o.\u0275prov=br({token:o,providedIn:"root",factory:kS}),o})();function FS(){return new Px([new OS])}let Px=(()=>{class o{constructor(l){this.factories=l}static create(l,h){if(h){const g=h.factories.slice();l=l.concat(g)}return new o(l)}static extend(l){return{provide:o,useFactory:h=>o.create(l,h||FS()),deps:[[o,new Yl,new Vd]]}}find(l){const h=this.factories.find(g=>g.supports(l));if(h)return h;throw new He(901,!1)}}return o.\u0275prov=br({token:o,providedIn:"root",factory:FS}),o})();const Lx=DS(null,"core",[]);let P_=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(bi(I_))},o.\u0275mod=Mo({type:o}),o.\u0275inj=Yo({}),o})();function Nx(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},1481:(Wn,vt,ge)=>{ge.d(vt,{Dx:()=>Ns,b2:()=>xd,q6:()=>fc});var W=ge(6895),le=ge(8256);class J extends W.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ot extends J{static makeCurrent(){(0,W.HT)(new ot)}onAndCancel(xe,ce,Te){return xe.addEventListener(ce,Te,!1),()=>{xe.removeEventListener(ce,Te,!1)}}dispatchEvent(xe,ce){xe.dispatchEvent(ce)}remove(xe){xe.parentNode&&xe.parentNode.removeChild(xe)}createElement(xe,ce){return(ce=ce||this.getDefaultDocument()).createElement(xe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(xe){return xe.nodeType===Node.ELEMENT_NODE}isShadowRoot(xe){return xe instanceof DocumentFragment}getGlobalEventTarget(xe,ce){return"window"===ce?window:"document"===ce?xe:"body"===ce?xe.body:null}getBaseHref(xe){const ce=function Ft(){return Ke=Ke||document.querySelector("base"),Ke?Ke.getAttribute("href"):null}();return null==ce?null:function Qt(we){Tt=Tt||document.createElement("a"),Tt.setAttribute("href",we);const xe=Tt.pathname;return"/"===xe.charAt(0)?xe:`/${xe}`}(ce)}resetBaseElement(){Ke=null}getUserAgent(){return window.navigator.userAgent}getCookie(xe){return(0,W.Mx)(document.cookie,xe)}}let Tt,Ke=null;const Dt=new le.OlP("TRANSITION_ID"),ze=[{provide:le.ip1,useFactory:function ht(we,xe,ce){return()=>{ce.get(le.CZH).donePromise.then(()=>{const Te=(0,W.q)(),Ve=xe.querySelectorAll(`style[ng-transition="${we}"]`);for(let un=0;un<Ve.length;un++)Te.remove(Ve[un])})}},deps:[Dt,W.K0,le.zs3],multi:!0}];let $n=(()=>{class we{build(){return new XMLHttpRequest}}return we.\u0275fac=function(ce){return new(ce||we)},we.\u0275prov=le.Yz7({token:we,factory:we.\u0275fac}),we})();const dt=new le.OlP("EventManagerPlugins");let on=(()=>{class we{constructor(ce,Te){this._zone=Te,this._eventNameToPlugin=new Map,ce.forEach(Ve=>Ve.manager=this),this._plugins=ce.slice().reverse()}addEventListener(ce,Te,Ve){return this._findPluginFor(Te).addEventListener(ce,Te,Ve)}addGlobalEventListener(ce,Te,Ve){return this._findPluginFor(Te).addGlobalEventListener(ce,Te,Ve)}getZone(){return this._zone}_findPluginFor(ce){const Te=this._eventNameToPlugin.get(ce);if(Te)return Te;const Ve=this._plugins;for(let un=0;un<Ve.length;un++){const xn=Ve[un];if(xn.supports(ce))return this._eventNameToPlugin.set(ce,xn),xn}throw new Error(`No event manager plugin found for event ${ce}`)}}return we.\u0275fac=function(ce){return new(ce||we)(le.LFG(dt),le.LFG(le.R0b))},we.\u0275prov=le.Yz7({token:we,factory:we.\u0275fac}),we})();class ut{constructor(xe){this._doc=xe}addGlobalEventListener(xe,ce,Te){const Ve=(0,W.q)().getGlobalEventTarget(this._doc,xe);if(!Ve)throw new Error(`Unsupported event target ${Ve} for event ${ce}`);return this.addEventListener(Ve,ce,Te)}}let Cn=(()=>{class we{constructor(){this._stylesSet=new Set}addStyles(ce){const Te=new Set;ce.forEach(Ve=>{this._stylesSet.has(Ve)||(this._stylesSet.add(Ve),Te.add(Ve))}),this.onStylesAdded(Te)}onStylesAdded(ce){}getAllStyles(){return Array.from(this._stylesSet)}}return we.\u0275fac=function(ce){return new(ce||we)},we.\u0275prov=le.Yz7({token:we,factory:we.\u0275fac}),we})(),ar=(()=>{class we extends Cn{constructor(ce){super(),this._doc=ce,this._hostNodes=new Map,this._hostNodes.set(ce.head,[])}_addStylesToHost(ce,Te,Ve){ce.forEach(un=>{const xn=this._doc.createElement("style");xn.textContent=un,Ve.push(Te.appendChild(xn))})}addHost(ce){const Te=[];this._addStylesToHost(this._stylesSet,ce,Te),this._hostNodes.set(ce,Te)}removeHost(ce){const Te=this._hostNodes.get(ce);Te&&Te.forEach(yr),this._hostNodes.delete(ce)}onStylesAdded(ce){this._hostNodes.forEach((Te,Ve)=>{this._addStylesToHost(ce,Ve,Te)})}ngOnDestroy(){this._hostNodes.forEach(ce=>ce.forEach(yr))}}return we.\u0275fac=function(ce){return new(ce||we)(le.LFG(W.K0))},we.\u0275prov=le.Yz7({token:we,factory:we.\u0275fac}),we})();function yr(we){(0,W.q)().remove(we)}const Ut={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$t=/%COMP%/g;function Ne(we,xe,ce){for(let Te=0;Te<xe.length;Te++){let Ve=xe[Te];Array.isArray(Ve)?Ne(we,Ve,ce):(Ve=Ve.replace($t,we),ce.push(Ve))}return ce}function Pe(we){return xe=>{if("__ngUnwrap__"===xe)return we;!1===we(xe)&&(xe.preventDefault(),xe.returnValue=!1)}}let De=(()=>{class we{constructor(ce,Te,Ve){this.eventManager=ce,this.sharedStylesHost=Te,this.appId=Ve,this.rendererByCompId=new Map,this.defaultRenderer=new Vt(ce)}createRenderer(ce,Te){if(!ce||!Te)return this.defaultRenderer;switch(Te.encapsulation){case le.ifc.Emulated:{let Ve=this.rendererByCompId.get(Te.id);return Ve||(Ve=new ls(this.eventManager,this.sharedStylesHost,Te,this.appId),this.rendererByCompId.set(Te.id,Ve)),Ve.applyToHost(ce),Ve}case 1:case le.ifc.ShadowDom:return new jn(this.eventManager,this.sharedStylesHost,ce,Te);default:if(!this.rendererByCompId.has(Te.id)){const Ve=Ne(Te.id,Te.styles,[]);this.sharedStylesHost.addStyles(Ve),this.rendererByCompId.set(Te.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return we.\u0275fac=function(ce){return new(ce||we)(le.LFG(on),le.LFG(ar),le.LFG(le.AFp))},we.\u0275prov=le.Yz7({token:we,factory:we.\u0275fac}),we})();class Vt{constructor(xe){this.eventManager=xe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(xe,ce){return ce?document.createElementNS(Ut[ce]||ce,xe):document.createElement(xe)}createComment(xe){return document.createComment(xe)}createText(xe){return document.createTextNode(xe)}appendChild(xe,ce){(Vn(xe)?xe.content:xe).appendChild(ce)}insertBefore(xe,ce,Te){xe&&(Vn(xe)?xe.content:xe).insertBefore(ce,Te)}removeChild(xe,ce){xe&&xe.removeChild(ce)}selectRootElement(xe,ce){let Te="string"==typeof xe?document.querySelector(xe):xe;if(!Te)throw new Error(`The selector "${xe}" did not match any elements`);return ce||(Te.textContent=""),Te}parentNode(xe){return xe.parentNode}nextSibling(xe){return xe.nextSibling}setAttribute(xe,ce,Te,Ve){if(Ve){ce=Ve+":"+ce;const un=Ut[Ve];un?xe.setAttributeNS(un,ce,Te):xe.setAttribute(ce,Te)}else xe.setAttribute(ce,Te)}removeAttribute(xe,ce,Te){if(Te){const Ve=Ut[Te];Ve?xe.removeAttributeNS(Ve,ce):xe.removeAttribute(`${Te}:${ce}`)}else xe.removeAttribute(ce)}addClass(xe,ce){xe.classList.add(ce)}removeClass(xe,ce){xe.classList.remove(ce)}setStyle(xe,ce,Te,Ve){Ve&(le.JOm.DashCase|le.JOm.Important)?xe.style.setProperty(ce,Te,Ve&le.JOm.Important?"important":""):xe.style[ce]=Te}removeStyle(xe,ce,Te){Te&le.JOm.DashCase?xe.style.removeProperty(ce):xe.style[ce]=""}setProperty(xe,ce,Te){xe[ce]=Te}setValue(xe,ce){xe.nodeValue=ce}listen(xe,ce,Te){return"string"==typeof xe?this.eventManager.addGlobalEventListener(xe,ce,Pe(Te)):this.eventManager.addEventListener(xe,ce,Pe(Te))}}function Vn(we){return"TEMPLATE"===we.tagName&&void 0!==we.content}class ls extends Vt{constructor(xe,ce,Te,Ve){super(xe),this.component=Te;const un=Ne(Ve+"-"+Te.id,Te.styles,[]);ce.addStyles(un),this.contentAttr=function Nt(we){return"_ngcontent-%COMP%".replace($t,we)}(Ve+"-"+Te.id),this.hostAttr=function Bn(we){return"_nghost-%COMP%".replace($t,we)}(Ve+"-"+Te.id)}applyToHost(xe){super.setAttribute(xe,this.hostAttr,"")}createElement(xe,ce){const Te=super.createElement(xe,ce);return super.setAttribute(Te,this.contentAttr,""),Te}}class jn extends Vt{constructor(xe,ce,Te,Ve){super(xe),this.sharedStylesHost=ce,this.hostEl=Te,this.shadowRoot=Te.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const un=Ne(Ve.id,Ve.styles,[]);for(let xn=0;xn<un.length;xn++){const Dr=document.createElement("style");Dr.textContent=un[xn],this.shadowRoot.appendChild(Dr)}}nodeOrShadowRoot(xe){return xe===this.hostEl?this.shadowRoot:xe}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(xe,ce){return super.appendChild(this.nodeOrShadowRoot(xe),ce)}insertBefore(xe,ce,Te){return super.insertBefore(this.nodeOrShadowRoot(xe),ce,Te)}removeChild(xe,ce){return super.removeChild(this.nodeOrShadowRoot(xe),ce)}parentNode(xe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(xe)))}}let ii=(()=>{class we extends ut{constructor(ce){super(ce)}supports(ce){return!0}addEventListener(ce,Te,Ve){return ce.addEventListener(Te,Ve,!1),()=>this.removeEventListener(ce,Te,Ve)}removeEventListener(ce,Te,Ve){return ce.removeEventListener(Te,Ve)}}return we.\u0275fac=function(ce){return new(ce||we)(le.LFG(W.K0))},we.\u0275prov=le.Yz7({token:we,factory:we.\u0275fac}),we})();const hi=["alt","control","meta","shift"],$r={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hs={alt:we=>we.altKey,control:we=>we.ctrlKey,meta:we=>we.metaKey,shift:we=>we.shiftKey};let jr=(()=>{class we extends ut{constructor(ce){super(ce)}supports(ce){return null!=we.parseEventName(ce)}addEventListener(ce,Te,Ve){const un=we.parseEventName(Te),xn=we.eventCallback(un.fullKey,Ve,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,W.q)().onAndCancel(ce,un.domEventName,xn))}static parseEventName(ce){const Te=ce.toLowerCase().split("."),Ve=Te.shift();if(0===Te.length||"keydown"!==Ve&&"keyup"!==Ve)return null;const un=we._normalizeKey(Te.pop());let xn="",Dr=Te.indexOf("code");if(Dr>-1&&(Te.splice(Dr,1),xn="code."),hi.forEach(Mn=>{const Lr=Te.indexOf(Mn);Lr>-1&&(Te.splice(Lr,1),xn+=Mn+".")}),xn+=un,0!=Te.length||0===un.length)return null;const St={};return St.domEventName=Ve,St.fullKey=xn,St}static matchEventFullKeyCode(ce,Te){let Ve=$r[ce.key]||ce.key,un="";return Te.indexOf("code.")>-1&&(Ve=ce.code,un="code."),!(null==Ve||!Ve)&&(Ve=Ve.toLowerCase()," "===Ve?Ve="space":"."===Ve&&(Ve="dot"),hi.forEach(xn=>{xn!==Ve&&(0,Hs[xn])(ce)&&(un+=xn+".")}),un+=Ve,un===Te)}static eventCallback(ce,Te,Ve){return un=>{we.matchEventFullKeyCode(un,ce)&&Ve.runGuarded(()=>Te(un))}}static _normalizeKey(ce){return"esc"===ce?"escape":ce}}return we.\u0275fac=function(ce){return new(ce||we)(le.LFG(W.K0))},we.\u0275prov=le.Yz7({token:we,factory:we.\u0275fac}),we})();const fc=(0,le.eFA)(le._c5,"browser",[{provide:le.Lbi,useValue:W.bD},{provide:le.g9A,useValue:function co(){ot.makeCurrent()},multi:!0},{provide:W.K0,useFactory:function Ko(){return(0,le.RDi)(document),document},deps:[]}]),Il=new le.OlP(""),ti=[{provide:le.rWj,useClass:class wt{addToWindow(xe){le.dqk.getAngularTestability=(Te,Ve=!0)=>{const un=xe.findTestabilityInTree(Te,Ve);if(null==un)throw new Error("Could not find testability for element.");return un},le.dqk.getAllAngularTestabilities=()=>xe.getAllTestabilities(),le.dqk.getAllAngularRootElements=()=>xe.getAllRootElements(),le.dqk.frameworkStabilizers||(le.dqk.frameworkStabilizers=[]),le.dqk.frameworkStabilizers.push(Te=>{const Ve=le.dqk.getAllAngularTestabilities();let un=Ve.length,xn=!1;const Dr=function(St){xn=xn||St,un--,0==un&&Te(xn)};Ve.forEach(function(St){St.whenStable(Dr)})})}findTestabilityInTree(xe,ce,Te){return null==ce?null:xe.getTestability(ce)??(Te?(0,W.q)().isShadowRoot(ce)?this.findTestabilityInTree(xe,ce.host,!0):this.findTestabilityInTree(xe,ce.parentElement,!0):null)}},deps:[]},{provide:le.lri,useClass:le.dDg,deps:[le.R0b,le.eoX,le.rWj]},{provide:le.dDg,useClass:le.dDg,deps:[le.R0b,le.eoX,le.rWj]}],Zc=[{provide:le.zSh,useValue:"root"},{provide:le.qLn,useFactory:function br(){return new le.qLn},deps:[]},{provide:dt,useClass:ii,multi:!0,deps:[W.K0,le.R0b,le.Lbi]},{provide:dt,useClass:jr,multi:!0,deps:[W.K0]},{provide:De,useClass:De,deps:[on,ar,le.AFp]},{provide:le.FYo,useExisting:De},{provide:Cn,useExisting:ar},{provide:ar,useClass:ar,deps:[W.K0]},{provide:on,useClass:on,deps:[dt,le.R0b]},{provide:W.JF,useClass:$n,deps:[]},[]];let xd=(()=>{class we{constructor(ce){}static withServerTransition(ce){return{ngModule:we,providers:[{provide:le.AFp,useValue:ce.appId},{provide:Dt,useExisting:le.AFp},ze]}}}return we.\u0275fac=function(ce){return new(ce||we)(le.LFG(Il,12))},we.\u0275mod=le.oAB({type:we}),we.\u0275inj=le.cJS({providers:[...Zc,...ti],imports:[W.ez,le.hGG]}),we})(),Ns=(()=>{class we{constructor(ce){this._doc=ce}getTitle(){return this._doc.title}setTitle(ce){this._doc.title=ce||""}}return we.\u0275fac=function(ce){return new(ce||we)(le.LFG(W.K0))},we.\u0275prov=le.Yz7({token:we,factory:function(ce){let Te=null;return Te=ce?new ce:function vn(){return new Ns((0,le.LFG)(W.K0))}(),Te},providedIn:"root"}),we})();typeof window<"u"&&window},3353:(Wn,vt,ge)=>{ge.d(vt,{jw:()=>vp,F0:()=>Ki,Od:()=>jl,yS:()=>Ri,Bz:()=>Cc,lC:()=>gr,fw:()=>kl});var W=ge(8256),le=ge(8996),J=ge(9646),ot=ge(7579);class Ke extends ot.x{constructor(I){super(),this._value=I}get value(){return this.getValue()}_subscribe(I){const E=super._subscribe(I);return!E.closed&&I.next(this._value),E}getValue(){const{hasError:I,thrownError:E,_value:L}=this;if(I)throw E;return this._throwIfClosed(),L}next(I){super.next(this._value=I)}}const Tt=(0,ge(3888).d)(M=>function(){M(this),this.name="EmptyError",this.message="no elements in sequence"});var Qt=ge(9751);const{isArray:Dt}=Array,{getPrototypeOf:ht,prototype:ze,keys:wt}=Object;var on=ge(4671),ut=ge(4004);const{isArray:Cn}=Array;var Ut=ge(7669),mt=ge(5403),He=ge(9672);function dn(...M){const I=(0,Ut.yG)(M),E=(0,Ut.jO)(M),{args:L,keys:z}=function $n(M){if(1===M.length){const I=M[0];if(Dt(I))return{args:I,keys:null};if(function dt(M){return M&&"object"==typeof M&&ht(M)===ze}(I)){const E=wt(I);return{args:E.map(L=>I[L]),keys:E}}}return{args:M,keys:null}}(M);if(0===L.length)return(0,le.D)([],I);const Z=new Qt.y(function Bt(M,I,E=on.y){return L=>{Nt(I,()=>{const{length:z}=M,Z=new Array(z);let ae=z,he=z;for(let Ae=0;Ae<z;Ae++)Nt(I,()=>{const ft=(0,le.D)(M[Ae],I);let Sn=!1;ft.subscribe((0,mt.x)(L,jt=>{Z[Ae]=jt,Sn||(Sn=!0,he--),he||L.next(E(Z.slice()))},()=>{--ae||L.complete()}))},L)},L)}}(L,I,z?ae=>function $t(M,I){return M.reduce((E,L,z)=>(E[L]=I[z],E),{})}(z,ae):on.y));return E?Z.pipe(function yr(M){return(0,ut.U)(I=>function ar(M,I){return Cn(I)?M(...I):M(I)}(M,I))}(E)):Z}function Nt(M,I,E){M?(0,He.f)(E,M,I):I()}var Bn=ge(7272),Ne=ge(8421);function Pe(M){return new Qt.y(I=>{(0,Ne.Xf)(M()).subscribe(I)})}var We=ge(9635),De=ge(576);function Vt(M,I){const E=(0,De.m)(M)?M:()=>M,L=z=>z.error(E());return new Qt.y(I?z=>I.schedule(L,0,z):L)}var bt=ge(515),Ln=ge(727),Vn=ge(4482);function ls(){return(0,Vn.e)((M,I)=>{let E=null;M._refCount++;const L=(0,mt.x)(I,void 0,void 0,void 0,()=>{if(!M||M._refCount<=0||0<--M._refCount)return void(E=null);const z=M._connection,Z=E;E=null,z&&(!Z||z===Z)&&z.unsubscribe(),I.unsubscribe()});M.subscribe(L),L.closed||(E=M.connect())})}class jn extends Qt.y{constructor(I,E){super(),this.source=I,this.subjectFactory=E,this._subject=null,this._refCount=0,this._connection=null,(0,Vn.A)(I)&&(this.lift=I.lift)}_subscribe(I){return this.getSubject().subscribe(I)}getSubject(){const I=this._subject;return(!I||I.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:I}=this;this._subject=this._connection=null,I?.unsubscribe()}connect(){let I=this._connection;if(!I){I=this._connection=new Ln.w0;const E=this.getSubject();I.add(this.source.subscribe((0,mt.x)(E,void 0,()=>{this._teardown(),E.complete()},L=>{this._teardown(),E.error(L)},()=>this._teardown()))),I.closed&&(this._connection=null,I=Ln.w0.EMPTY)}return I}refCount(){return ls()(this)}}var ii=ge(6895),hi=ge(3900);function $r(M){return M<=0?()=>bt.E:(0,Vn.e)((I,E)=>{let L=0;I.subscribe((0,mt.x)(E,z=>{++L<=M&&(E.next(z),M<=L&&E.complete())}))})}var Hs=ge(8675),jr=ge(9300),er=ge(5577);function Mi(M){return(0,Vn.e)((I,E)=>{let L=!1;I.subscribe((0,mt.x)(E,z=>{L=!0,E.next(z)},()=>{L||E.next(M),E.complete()}))})}function Cr(M=Yc){return(0,Vn.e)((I,E)=>{let L=!1;I.subscribe((0,mt.x)(E,z=>{L=!0,E.next(z)},()=>L?E.complete():E.error(M())))})}function Yc(){return new Tt}function hc(M,I){const E=arguments.length>=2;return L=>L.pipe(M?(0,jr.h)((z,Z)=>M(z,Z,L)):on.y,$r(1),E?Mi(I):Cr(()=>new Tt))}function co(M,I){return(0,De.m)(I)?(0,er.z)(M,I,1):(0,er.z)(M,1)}var br=ge(8505);function Ko(M){return(0,Vn.e)((I,E)=>{let Z,L=null,z=!1;L=I.subscribe((0,mt.x)(E,void 0,void 0,ae=>{Z=(0,Ne.Xf)(M(ae,Ko(M)(I))),L?(L.unsubscribe(),L=null,Z.subscribe(E)):z=!0})),z&&(L.unsubscribe(),L=null,Z.subscribe(E))})}function Yo(M,I,E,L,z){return(Z,ae)=>{let he=E,Ae=I,ft=0;Z.subscribe((0,mt.x)(ae,Sn=>{const jt=ft++;Ae=he?M(Ae,Sn,jt):(he=!0,Sn),L&&ae.next(Ae)},z&&(()=>{he&&ae.next(Ae),ae.complete()})))}}function fc(M,I){return(0,Vn.e)(Yo(M,I,arguments.length>=2,!0))}function Il(M){return M<=0?()=>bt.E:(0,Vn.e)((I,E)=>{let L=[];I.subscribe((0,mt.x)(E,z=>{L.push(z),M<L.length&&L.shift()},()=>{for(const z of L)E.next(z);E.complete()},void 0,()=>{L=null}))})}function ti(M,I){const E=arguments.length>=2;return L=>L.pipe(M?(0,jr.h)((z,Z)=>M(z,Z,L)):on.y,Il(1),E?Mi(I):Cr(()=>new Tt))}function Na(M){return(0,Vn.e)((I,E)=>{try{I.subscribe(E)}finally{E.add(M)}})}var Eo=ge(8189),Su=ge(1481);const vn="primary",Ns=Symbol("RouteTitle");class Ht{constructor(I){this.params=I||{}}has(I){return Object.prototype.hasOwnProperty.call(this.params,I)}get(I){if(this.has(I)){const E=this.params[I];return Array.isArray(E)?E[0]:E}return null}getAll(I){if(this.has(I)){const E=this.params[I];return Array.isArray(E)?E:[E]}return[]}get keys(){return Object.keys(this.params)}}function cn(M){return new Ht(M)}function Nn(M,I,E){const L=E.path.split("/");if(L.length>M.length||"full"===E.pathMatch&&(I.hasChildren()||L.length<M.length))return null;const z={};for(let Z=0;Z<L.length;Z++){const ae=L[Z],he=M[Z];if(ae.startsWith(":"))z[ae.substring(1)]=he;else if(ae!==he.path)return null}return{consumed:M.slice(0,L.length),posParams:z}}function Ii(M,I){const E=M?Object.keys(M):void 0,L=I?Object.keys(I):void 0;if(!E||!L||E.length!=L.length)return!1;let z;for(let Z=0;Z<E.length;Z++)if(z=E[Z],!Sr(M[z],I[z]))return!1;return!0}function Sr(M,I){if(Array.isArray(M)&&Array.isArray(I)){if(M.length!==I.length)return!1;const E=[...M].sort(),L=[...I].sort();return E.every((z,Z)=>L[Z]===z)}return M===I}function Ci(M){return Array.prototype.concat.apply([],M)}function Xn(M){return M.length>0?M[M.length-1]:null}function hr(M,I){for(const E in M)M.hasOwnProperty(E)&&I(M[E],E)}function Oi(M){return(0,W.CqO)(M)?M:(0,W.QGY)(M)?(0,le.D)(Promise.resolve(M)):(0,J.of)(M)}const Xc={exact:function Ws(M,I,E){if(!Xo(M.segments,I.segments)||!Zo(M.segments,I.segments,E)||M.numberOfChildren!==I.numberOfChildren)return!1;for(const L in I.children)if(!M.children[L]||!Ws(M.children[L],I.children[L],E))return!1;return!0},subset:To},pc={exact:function Cl(M,I){return Ii(M,I)},subset:function gc(M,I){return Object.keys(I).length<=Object.keys(M).length&&Object.keys(I).every(E=>Sr(M[E],I[E]))},ignored:()=>!0};function Qn(M,I,E){return Xc[E.paths](M.root,I.root,E.matrixParams)&&pc[E.queryParams](M.queryParams,I.queryParams)&&!("exact"===E.fragment&&M.fragment!==I.fragment)}function To(M,I,E){return Os(M,I,I.segments,E)}function Os(M,I,E,L){if(M.segments.length>E.length){const z=M.segments.slice(0,E.length);return!(!Xo(z,E)||I.hasChildren()||!Zo(z,E,L))}if(M.segments.length===E.length){if(!Xo(M.segments,E)||!Zo(M.segments,E,L))return!1;for(const z in I.children)if(!M.children[z]||!To(M.children[z],I.children[z],L))return!1;return!0}{const z=E.slice(0,M.segments.length),Z=E.slice(M.segments.length);return!!(Xo(M.segments,z)&&Zo(M.segments,z,L)&&M.children[vn])&&Os(M.children[vn],I,Z,L)}}function Zo(M,I,E){return I.every((L,z)=>pc[E](M[z].parameters,L.parameters))}class ai{constructor(I,E,L){this.root=I,this.queryParams=E,this.fragment=L}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cn(this.queryParams)),this._queryParamMap}toString(){return we.serialize(this)}}class nn{constructor(I,E){this.segments=I,this.children=E,this.parent=null,hr(E,(L,z)=>L.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xe(this)}}class Qi{constructor(I,E){this.path=I,this.parameters=E}get parameterMap(){return this._parameterMap||(this._parameterMap=cn(this.parameters)),this._parameterMap}toString(){return Mn(this)}}function Xo(M,I){return M.length===I.length&&M.every((E,L)=>E.path===I[L].path)}let Dl=(()=>{class M{}return M.\u0275fac=function(E){return new(E||M)},M.\u0275prov=W.Yz7({token:M,factory:function(){return new Sa},providedIn:"root"}),M})();class Sa{parse(I){const E=new tr(I);return new ai(E.parseRootSegment(),E.parseQueryParams(),E.parseFragment())}serialize(I){const E=`/${ce(I.root,!0)}`,L=function ji(M){const I=Object.keys(M).map(E=>{const L=M[E];return Array.isArray(L)?L.map(z=>`${Ve(E)}=${Ve(z)}`).join("&"):`${Ve(E)}=${Ve(L)}`}).filter(E=>!!E);return I.length?`?${I.join("&")}`:""}(I.queryParams);return`${E}${L}${"string"==typeof I.fragment?`#${function un(M){return encodeURI(M)}(I.fragment)}`:""}`}}const we=new Sa;function xe(M){return M.segments.map(I=>Mn(I)).join("/")}function ce(M,I){if(!M.hasChildren())return xe(M);if(I){const E=M.children[vn]?ce(M.children[vn],!1):"",L=[];return hr(M.children,(z,Z)=>{Z!==vn&&L.push(`${Z}:${ce(z,!1)}`)}),L.length>0?`${E}(${L.join("//")})`:E}{const E=function Mo(M,I){let E=[];return hr(M.children,(L,z)=>{z===vn&&(E=E.concat(I(L,z)))}),hr(M.children,(L,z)=>{z!==vn&&(E=E.concat(I(L,z)))}),E}(M,(L,z)=>z===vn?[ce(M.children[vn],!1)]:[`${z}:${ce(L,!1)}`]);return 1===Object.keys(M.children).length&&null!=M.children[vn]?`${xe(M)}/${E[0]}`:`${xe(M)}/(${E.join("//")})`}}function Te(M){return encodeURIComponent(M).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ve(M){return Te(M).replace(/%3B/gi,";")}function xn(M){return Te(M).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dr(M){return decodeURIComponent(M)}function St(M){return Dr(M.replace(/\+/g,"%20"))}function Mn(M){return`${xn(M.path)}${function Lr(M){return Object.keys(M).map(I=>`;${xn(I)}=${xn(M[I])}`).join("")}(M.parameters)}`}const Qo=/^[^\/()?;=#]+/;function ni(M){const I=M.match(Qo);return I?I[0]:""}const Io=/^[^=?&#]+/,Co=/^[^&#]+/;class tr{constructor(I){this.url=I,this.remaining=I}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nn([],{}):new nn([],this.parseChildren())}parseQueryParams(){const I={};if(this.consumeOptional("?"))do{this.parseQueryParam(I)}while(this.consumeOptional("&"));return I}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const I=[];for(this.peekStartsWith("(")||I.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),I.push(this.parseSegment());let E={};this.peekStartsWith("/(")&&(this.capture("/"),E=this.parseParens(!0));let L={};return this.peekStartsWith("(")&&(L=this.parseParens(!1)),(I.length>0||Object.keys(E).length>0)&&(L[vn]=new nn(I,E)),L}parseSegment(){const I=ni(this.remaining);if(""===I&&this.peekStartsWith(";"))throw new W.vHH(4009,!1);return this.capture(I),new Qi(Dr(I),this.parseMatrixParams())}parseMatrixParams(){const I={};for(;this.consumeOptional(";");)this.parseParam(I);return I}parseParam(I){const E=ni(this.remaining);if(!E)return;this.capture(E);let L="";if(this.consumeOptional("=")){const z=ni(this.remaining);z&&(L=z,this.capture(L))}I[Dr(E)]=Dr(L)}parseQueryParam(I){const E=function Yr(M){const I=M.match(Io);return I?I[0]:""}(this.remaining);if(!E)return;this.capture(E);let L="";if(this.consumeOptional("=")){const ae=function Jo(M){const I=M.match(Co);return I?I[0]:""}(this.remaining);ae&&(L=ae,this.capture(L))}const z=St(E),Z=St(L);if(I.hasOwnProperty(z)){let ae=I[z];Array.isArray(ae)||(ae=[ae],I[z]=ae),ae.push(Z)}else I[z]=Z}parseParens(I){const E={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const L=ni(this.remaining),z=this.remaining[L.length];if("/"!==z&&")"!==z&&";"!==z)throw new W.vHH(4010,!1);let Z;L.indexOf(":")>-1?(Z=L.slice(0,L.indexOf(":")),this.capture(Z),this.capture(":")):I&&(Z=vn);const ae=this.parseChildren();E[Z]=1===Object.keys(ae).length?ae[vn]:new nn([],ae),this.consumeOptional("//")}return E}peekStartsWith(I){return this.remaining.startsWith(I)}consumeOptional(I){return!!this.peekStartsWith(I)&&(this.remaining=this.remaining.substring(I.length),!0)}capture(I){if(!this.consumeOptional(I))throw new W.vHH(4011,!1)}}function mc(M){return M.segments.length>0?new nn([],{[vn]:M}):M}function $s(M){const I={};for(const L of Object.keys(M.children)){const Z=$s(M.children[L]);(Z.segments.length>0||Z.hasChildren())&&(I[L]=Z)}return function Al(M){if(1===M.numberOfChildren&&M.children[vn]){const I=M.children[vn];return new nn(M.segments.concat(I.segments),I.children)}return M}(new nn(M.segments,I))}function bs(M){return M instanceof ai}function Do(M,I,E,L,z){if(0===E.length)return ta(I.root,I.root,I.root,L,z);const Z=function Fa(M){if("string"==typeof M[0]&&1===M.length&&"/"===M[0])return new Ea(!0,0,M);let I=0,E=!1;const L=M.reduce((z,Z,ae)=>{if("object"==typeof Z&&null!=Z){if(Z.outlets){const he={};return hr(Z.outlets,(Ae,ft)=>{he[ft]="string"==typeof Ae?Ae.split("/"):Ae}),[...z,{outlets:he}]}if(Z.segmentPath)return[...z,Z.segmentPath]}return"string"!=typeof Z?[...z,Z]:0===ae?(Z.split("/").forEach((he,Ae)=>{0==Ae&&"."===he||(0==Ae&&""===he?E=!0:".."===he?I++:""!=he&&z.push(he))}),z):[...z,Z]},[]);return new Ea(E,I,L)}(E);return Z.toRoot()?ta(I.root,I.root,new nn([],{}),L,z):function ae(Ae){const ft=function js(M,I,E,L){if(M.isAbsolute)return new ks(I.root,!0,0);if(-1===L)return new ks(E,E===I.root,0);return function ki(M,I,E){let L=M,z=I,Z=E;for(;Z>z;){if(Z-=z,L=L.parent,!L)throw new W.vHH(4005,!1);z=L.segments.length}return new ks(L,!1,z-Z)}(E,L+(ka(M.commands[0])?0:1),M.numberOfDoubleDots)}(Z,I,M.snapshot?._urlSegment,Ae),Sn=ft.processChildren?Fi(ft.segmentGroup,ft.index,Z.commands):Ai(ft.segmentGroup,ft.index,Z.commands);return ta(I.root,ft.segmentGroup,Sn,L,z)}(M.snapshot?._lastPathIndex)}function ka(M){return"object"==typeof M&&null!=M&&!M.outlets&&!M.segmentPath}function Ar(M){return"object"==typeof M&&null!=M&&M.outlets}function ta(M,I,E,L,z){let ae,Z={};L&&hr(L,(Ae,ft)=>{Z[ft]=Array.isArray(Ae)?Ae.map(Sn=>`${Sn}`):`${Ae}`}),ae=M===I?E:Qc(M,I,E);const he=mc($s(ae));return new ai(he,Z,z)}function Qc(M,I,E){const L={};return hr(M.children,(z,Z)=>{L[Z]=z===I?E:Qc(z,I,E)}),new nn(M.segments,L)}class Ea{constructor(I,E,L){if(this.isAbsolute=I,this.numberOfDoubleDots=E,this.commands=L,I&&L.length>0&&ka(L[0]))throw new W.vHH(4003,!1);const z=L.find(Ar);if(z&&z!==Xn(L))throw new W.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ks{constructor(I,E,L){this.segmentGroup=I,this.processChildren=E,this.index=L}}function Ai(M,I,E){if(M||(M=new nn([],{})),0===M.segments.length&&M.hasChildren())return Fi(M,I,E);const L=function Rl(M,I,E){let L=0,z=I;const Z={match:!1,pathIndex:0,commandIndex:0};for(;z<M.segments.length;){if(L>=E.length)return Z;const ae=M.segments[z],he=E[L];if(Ar(he))break;const Ae=`${he}`,ft=L<E.length-1?E[L+1]:null;if(z>0&&void 0===Ae)break;if(Ae&&ft&&"object"==typeof ft&&void 0===ft.outlets){if(!Pl(Ae,ft,ae))return Z;L+=2}else{if(!Pl(Ae,{},ae))return Z;L++}z++}return{match:!0,pathIndex:z,commandIndex:L}}(M,I,E),z=E.slice(L.commandIndex);if(L.match&&L.pathIndex<M.segments.length){const Z=new nn(M.segments.slice(0,L.pathIndex),{});return Z.children[vn]=new nn(M.segments.slice(L.pathIndex),M.children),Fi(Z,0,z)}return L.match&&0===z.length?new nn(M.segments,{}):L.match&&!M.hasChildren()?fi(M,I,E):L.match?Fi(M,0,z):fi(M,I,E)}function Fi(M,I,E){if(0===E.length)return new nn(M.segments,{});{const L=function jh(M){return Ar(M[0])?M[0].outlets:{[vn]:M}}(E),z={};return hr(L,(Z,ae)=>{"string"==typeof Z&&(Z=[Z]),null!==Z&&(z[ae]=Ai(M.children[ae],I,Z))}),hr(M.children,(Z,ae)=>{void 0===L[ae]&&(z[ae]=Z)}),new nn(M.segments,z)}}function fi(M,I,E){const L=M.segments.slice(0,I);let z=0;for(;z<E.length;){const Z=E[z];if(Ar(Z)){const Ae=na(Z.outlets);return new nn(L,Ae)}if(0===z&&ka(E[0])){L.push(new Qi(M.segments[I].path,ds(E[0]))),z++;continue}const ae=Ar(Z)?Z.outlets[vn]:`${Z}`,he=z<E.length-1?E[z+1]:null;ae&&he&&ka(he)?(L.push(new Qi(ae,ds(he))),z+=2):(L.push(new Qi(ae,{})),z++)}return new nn(L,{})}function na(M){const I={};return hr(M,(E,L)=>{"string"==typeof E&&(E=[E]),null!==E&&(I[L]=fi(new nn([],{}),0,E))}),I}function ds(M){const I={};return hr(M,(E,L)=>I[L]=`${E}`),I}function Pl(M,I,E){return M==E.path&&Ii(I,E.parameters)}class ra{constructor(I,E){this.id=I,this.url=E}}class wd extends ra{constructor(I,E,L="imperative",z=null){super(I,E),this.type=0,this.navigationTrigger=L,this.restoredState=z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _c extends ra{constructor(I,E,L){super(I,E),this.urlAfterRedirects=L,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class bd extends ra{constructor(I,E,L,z){super(I,E),this.reason=L,this.code=z,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ua extends ra{constructor(I,E,L,z){super(I,E),this.error=L,this.target=z,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pi extends ra{constructor(I,E,L,z){super(I,E),this.urlAfterRedirects=L,this.state=z,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mp extends ra{constructor(I,E,L,z){super(I,E),this.urlAfterRedirects=L,this.state=z,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yp extends ra{constructor(I,E,L,z,Z){super(I,E),this.urlAfterRedirects=L,this.state=z,this.shouldActivate=Z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vc extends ra{constructor(I,E,L,z){super(I,E),this.urlAfterRedirects=L,this.state=z,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _p extends ra{constructor(I,E,L,z){super(I,E),this.urlAfterRedirects=L,this.state=z,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lm{constructor(I){this.route=I,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ta{constructor(I){this.route=I,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xc{constructor(I){this.snapshot=I,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nm{constructor(I){this.snapshot=I,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tu{constructor(I){this.snapshot=I,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vp{constructor(I){this.snapshot=I,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mu{constructor(I,E,L){this.routerEvent=I,this.position=E,this.anchor=L,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class lo{constructor(I){this._root=I}get root(){return this._root.value}parent(I){const E=this.pathFromRoot(I);return E.length>1?E[E.length-2]:null}children(I){const E=wc(I,this._root);return E?E.children.map(L=>L.value):[]}firstChild(I){const E=wc(I,this._root);return E&&E.children.length>0?E.children[0].value:null}siblings(I){const E=Kh(I,this._root);return E.length<2?[]:E[E.length-2].children.map(z=>z.value).filter(z=>z!==I)}pathFromRoot(I){return Kh(I,this._root).map(E=>E.value)}}function wc(M,I){if(M===I.value)return I;for(const E of I.children){const L=wc(M,E);if(L)return L}return null}function Kh(M,I){if(M===I.value)return[I];for(const E of I.children){const L=Kh(M,E);if(L.length)return L.unshift(I),L}return[]}class Jc{constructor(I,E){this.value=I,this.children=E}toString(){return`TreeNode(${this.value})`}}function Jr(M){const I={};return M&&M.children.forEach(E=>I[E.value.outlet]=E),I}class el extends lo{constructor(I,E){super(I),this.snapshot=E,Ll(this,I)}toString(){return this.snapshot.toString()}}function Sd(M,I){const E=function xp(M,I){const ae=new Ao([],{},{},"",{},vn,I,null,M.root,-1,{});return new Zh("",new Jc(ae,[]))}(M,I),L=new Ke([new Qi("",{})]),z=new Ke({}),Z=new Ke({}),ae=new Ke({}),he=new Ke(""),Ae=new bc(L,z,ae,he,Z,vn,I,E.root);return Ae.snapshot=E.root,new el(new Jc(Ae,[]),E)}class bc{constructor(I,E,L,z,Z,ae,he,Ae){this.url=I,this.params=E,this.queryParams=L,this.fragment=z,this.data=Z,this.outlet=ae,this.component=he,this.title=this.data?.pipe((0,ut.U)(ft=>ft[Ns]))??(0,J.of)(void 0),this._futureSnapshot=Ae}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ut.U)(I=>cn(I)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ut.U)(I=>cn(I)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ma(M,I="emptyOnly"){const E=M.pathFromRoot;let L=0;if("always"!==I)for(L=E.length-1;L>=1;){const z=E[L],Z=E[L-1];if(z.routeConfig&&""===z.routeConfig.path)L--;else{if(Z.component)break;L--}}return function Yh(M){return M.reduce((I,E)=>({params:{...I.params,...E.params},data:{...I.data,...E.data},resolve:{...E.data,...I.resolve,...E.routeConfig?.data,...E._resolvedData}}),{params:{},data:{},resolve:{}})}(E.slice(L))}class Ao{constructor(I,E,L,z,Z,ae,he,Ae,ft,Sn,jt,Fr){this.url=I,this.params=E,this.queryParams=L,this.fragment=z,this.data=Z,this.outlet=ae,this.component=he,this.title=this.data?.[Ns],this.routeConfig=Ae,this._urlSegment=ft,this._lastPathIndex=Sn,this._correctedLastPathIndex=Fr??Sn,this._resolve=jt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(L=>L.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zh extends lo{constructor(I,E){super(E),this.url=I,Ll(this,E)}toString(){return Ed(this._root)}}function Ll(M,I){I.value._routerState=M,I.children.forEach(E=>Ll(M,E))}function Ed(M){const I=M.children.length>0?` { ${M.children.map(Ed).join(", ")} } `:"";return`${M.value}${I}`}function qs(M){if(M.snapshot){const I=M.snapshot,E=M._futureSnapshot;M.snapshot=E,Ii(I.queryParams,E.queryParams)||M.queryParams.next(E.queryParams),I.fragment!==E.fragment&&M.fragment.next(E.fragment),Ii(I.params,E.params)||M.params.next(E.params),function $i(M,I){if(M.length!==I.length)return!1;for(let E=0;E<M.length;++E)if(!Ii(M[E],I[E]))return!1;return!0}(I.url,E.url)||M.url.next(E.url),Ii(I.data,E.data)||M.data.next(E.data)}else M.snapshot=M._futureSnapshot,M.data.next(M._futureSnapshot.data)}function Ba(M,I){const E=Ii(M.params,I.params)&&function Eu(M,I){return Xo(M,I)&&M.every((E,L)=>Ii(E.parameters,I[L].parameters))}(M.url,I.url);return E&&!(!M.parent!=!I.parent)&&(!M.parent||Ba(M.parent,I.parent))}function Nl(M,I,E){if(E&&M.shouldReuseRoute(I.value,E.value.snapshot)){const L=E.value;L._futureSnapshot=I.value;const z=function Om(M,I,E){return I.children.map(L=>{for(const z of E.children)if(M.shouldReuseRoute(L.value,z.value.snapshot))return Nl(M,L,z);return Nl(M,L)})}(M,I,E);return new Jc(L,z)}{if(M.shouldAttach(I.value)){const Z=M.retrieve(I.value);if(null!==Z){const ae=Z.route;return ae.value._futureSnapshot=I.value,ae.children=I.children.map(he=>Nl(M,he)),ae}}const L=function tv(M){return new bc(new Ke(M.url),new Ke(M.params),new Ke(M.queryParams),new Ke(M.fragment),new Ke(M.data),M.outlet,M.component,M)}(I.value),z=I.children.map(Z=>Nl(M,Z));return new Jc(L,z)}}const cr="ngNavigationCancelingError";function Va(M,I){const{redirectTo:E,navigationBehaviorOptions:L}=bs(I)?{redirectTo:I,navigationBehaviorOptions:void 0}:I,z=Ro(!1,0,I);return z.url=E,z.navigationBehaviorOptions=L,z}function Ro(M,I,E){const L=new Error("NavigationCancelingError: "+(M||""));return L[cr]=!0,L.cancellationCode=I,E&&(L.url=E),L}function xi(M){return Es(M)&&bs(M.url)}function Es(M){return M&&M[cr]}class ia{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ks,this.attachRef=null}}let Ks=(()=>{class M{constructor(){this.contexts=new Map}onChildOutletCreated(E,L){const z=this.getOrCreateContext(E);z.outlet=L,this.contexts.set(E,z)}onChildOutletDestroyed(E){const L=this.getContext(E);L&&(L.outlet=null,L.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let L=this.getContext(E);return L||(L=new ia,this.contexts.set(E,L)),L}getContext(E){return this.contexts.get(E)||null}}return M.\u0275fac=function(E){return new(E||M)},M.\u0275prov=W.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();const li=!1;let gr=(()=>{class M{constructor(E,L,z,Z,ae){this.parentContexts=E,this.location=L,this.changeDetector=Z,this.environmentInjector=ae,this.activated=null,this._activatedRoute=null,this.activateEvents=new W.vpe,this.deactivateEvents=new W.vpe,this.attachEvents=new W.vpe,this.detachEvents=new W.vpe,this.name=z||vn,E.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const E=this.parentContexts.getContext(this.name);E&&E.route&&(E.attachRef?this.attach(E.attachRef,E.route):this.activateWith(E.route,E.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W.vHH(4012,li);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W.vHH(4012,li);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W.vHH(4012,li);this.location.detach();const E=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(E.instance),E}attach(E,L){this.activated=E,this._activatedRoute=L,this.location.insert(E.hostView),this.attachEvents.emit(E.instance)}deactivate(){if(this.activated){const E=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,L){if(this.isActivated)throw new W.vHH(4013,li);this._activatedRoute=E;const z=this.location,ae=E._futureSnapshot.component,he=this.parentContexts.getOrCreateContext(this.name).children,Ae=new Td(E,he,z.injector);if(L&&function Ol(M){return!!M.resolveComponentFactory}(L)){const ft=L.resolveComponentFactory(ae);this.activated=z.createComponent(ft,z.length,Ae)}else this.activated=z.createComponent(ae,{index:z.length,injector:Ae,environmentInjector:L??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return M.\u0275fac=function(E){return new(E||M)(W.Y36(Ks),W.Y36(W.s_b),W.$8M("name"),W.Y36(W.sBO),W.Y36(W.lqb))},M.\u0275dir=W.lG2({type:M,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),M})();class Td{constructor(I,E,L){this.route=I,this.childContexts=E,this.parent=L}get(I,E){return I===bc?this.route:I===Ks?this.childContexts:this.parent.get(I,E)}}let kl=(()=>{class M{}return M.\u0275fac=function(E){return new(E||M)},M.\u0275cmp=W.Xpm({type:M,selectors:[["ng-component"]],standalone:!0,features:[W.jDz],decls:1,vars:0,template:function(E,L){1&E&&W._UZ(0,"router-outlet")},dependencies:[gr],encapsulation:2}),M})();function Ts(M,I){return M.providers&&!M._injector&&(M._injector=(0,W.MMx)(M.providers,I,`Route: ${M.path}`)),M._injector??I}function tl(M){const I=M.children&&M.children.map(tl),E=I?{...M,children:I}:{...M};return!E.component&&!E.loadComponent&&(I||E.loadChildren)&&E.outlet&&E.outlet!==vn&&(E.component=kl),E}function Ys(M){return M.outlet||vn}function nl(M,I){const E=M.filter(L=>Ys(L)===I);return E.push(...M.filter(L=>Ys(L)!==I)),E}function tt(M){if(!M)return null;if(M.routeConfig?._injector)return M.routeConfig._injector;for(let I=M.parent;I;I=I.parent){const E=I.routeConfig;if(E?._loadedInjector)return E._loadedInjector;if(E?._injector)return E._injector}return null}class Ad{constructor(I,E,L,z){this.routeReuseStrategy=I,this.futureState=E,this.currState=L,this.forwardEvent=z}activate(I){const E=this.futureState._root,L=this.currState?this.currState._root:null;this.deactivateChildRoutes(E,L,I),qs(this.futureState.root),this.activateChildRoutes(E,L,I)}deactivateChildRoutes(I,E,L){const z=Jr(E);I.children.forEach(Z=>{const ae=Z.value.outlet;this.deactivateRoutes(Z,z[ae],L),delete z[ae]}),hr(z,(Z,ae)=>{this.deactivateRouteAndItsChildren(Z,L)})}deactivateRoutes(I,E,L){const z=I.value,Z=E?E.value:null;if(z===Z)if(z.component){const ae=L.getContext(z.outlet);ae&&this.deactivateChildRoutes(I,E,ae.children)}else this.deactivateChildRoutes(I,E,L);else Z&&this.deactivateRouteAndItsChildren(E,L)}deactivateRouteAndItsChildren(I,E){I.value.component&&this.routeReuseStrategy.shouldDetach(I.value.snapshot)?this.detachAndStoreRouteSubtree(I,E):this.deactivateRouteAndOutlet(I,E)}detachAndStoreRouteSubtree(I,E){const L=E.getContext(I.value.outlet),z=L&&I.value.component?L.children:E,Z=Jr(I);for(const ae of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[ae],z);if(L&&L.outlet){const ae=L.outlet.detach(),he=L.children.onOutletDeactivated();this.routeReuseStrategy.store(I.value.snapshot,{componentRef:ae,route:I,contexts:he})}}deactivateRouteAndOutlet(I,E){const L=E.getContext(I.value.outlet),z=L&&I.value.component?L.children:E,Z=Jr(I);for(const ae of Object.keys(Z))this.deactivateRouteAndItsChildren(Z[ae],z);L&&L.outlet&&(L.outlet.deactivate(),L.children.onOutletDeactivated(),L.attachRef=null,L.resolver=null,L.route=null)}activateChildRoutes(I,E,L){const z=Jr(E);I.children.forEach(Z=>{this.activateRoutes(Z,z[Z.value.outlet],L),this.forwardEvent(new vp(Z.value.snapshot))}),I.children.length&&this.forwardEvent(new Nm(I.value.snapshot))}activateRoutes(I,E,L){const z=I.value,Z=E?E.value:null;if(qs(z),z===Z)if(z.component){const ae=L.getOrCreateContext(z.outlet);this.activateChildRoutes(I,E,ae.children)}else this.activateChildRoutes(I,E,L);else if(z.component){const ae=L.getOrCreateContext(z.outlet);if(this.routeReuseStrategy.shouldAttach(z.snapshot)){const he=this.routeReuseStrategy.retrieve(z.snapshot);this.routeReuseStrategy.store(z.snapshot,null),ae.children.onOutletReAttached(he.contexts),ae.attachRef=he.componentRef,ae.route=he.route.value,ae.outlet&&ae.outlet.attach(he.componentRef,he.route.value),qs(he.route.value),this.activateChildRoutes(I,null,ae.children)}else{const he=tt(z.snapshot),Ae=he?.get(W._Vd)??null;ae.attachRef=null,ae.route=z,ae.resolver=Ae,ae.injector=he,ae.outlet&&ae.outlet.activateWith(z,ae.injector),this.activateChildRoutes(I,null,ae.children)}}else this.activateChildRoutes(I,null,L)}}class Po{constructor(I){this.path=I,this.route=this.path[this.path.length-1]}}class wn{constructor(I,E){this.component=I,this.route=E}}function uo(M,I,E){const L=M._root;return Lo(L,I?I._root:null,E,[L.value])}function Nr(M,I){const E=Symbol(),L=I.get(M,E);return L===E?"function"!=typeof M||(0,W.Z0I)(M)?I.get(M):M:L}function Lo(M,I,E,L,z={canDeactivateChecks:[],canActivateChecks:[]}){const Z=Jr(I);return M.children.forEach(ae=>{(function Ul(M,I,E,L,z={canDeactivateChecks:[],canActivateChecks:[]}){const Z=M.value,ae=I?I.value:null,he=E?E.getContext(M.value.outlet):null;if(ae&&Z.routeConfig===ae.routeConfig){const Ae=function Sc(M,I,E){if("function"==typeof E)return E(M,I);switch(E){case"pathParamsChange":return!Xo(M.url,I.url);case"pathParamsOrQueryParamsChange":return!Xo(M.url,I.url)||!Ii(M.queryParams,I.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ba(M,I)||!Ii(M.queryParams,I.queryParams);default:return!Ba(M,I)}}(ae,Z,Z.routeConfig.runGuardsAndResolvers);Ae?z.canActivateChecks.push(new Po(L)):(Z.data=ae.data,Z._resolvedData=ae._resolvedData),Lo(M,I,Z.component?he?he.children:null:E,L,z),Ae&&he&&he.outlet&&he.outlet.isActivated&&z.canDeactivateChecks.push(new wn(he.outlet.component,ae))}else ae&&sa(I,he,z),z.canActivateChecks.push(new Po(L)),Lo(M,null,Z.component?he?he.children:null:E,L,z)})(ae,Z[ae.value.outlet],E,L.concat([ae.value]),z),delete Z[ae.value.outlet]}),hr(Z,(ae,he)=>sa(ae,E.getContext(he),z)),z}function sa(M,I,E){const L=Jr(M),z=M.value;hr(L,(Z,ae)=>{sa(Z,z.component?I?I.children.getContext(ae):null:I,E)}),E.canDeactivateChecks.push(new wn(z.component&&I&&I.outlet&&I.outlet.isActivated?I.outlet.component:null,z))}function No(M){return"function"==typeof M}function rl(M){return M instanceof Tt||"EmptyError"===M?.name}const Yt=Symbol("INITIAL_VALUE");function Zs(){return(0,hi.w)(M=>dn(M.map(I=>I.pipe($r(1),(0,Hs.O)(Yt)))).pipe((0,ut.U)(I=>{for(const E of I)if(!0!==E){if(E===Yt)return Yt;if(!1===E||E instanceof ai)return E}return!0}),(0,jr.h)(I=>I!==Yt),$r(1)))}function _r(M){return(0,We.z)((0,br.b)(I=>{if(bs(I))throw Va(0,I)}),(0,ut.U)(I=>!0===I))}const Or={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bn(M,I,E,L,z){const Z=re(M,I,E);return Z.matched?function Er(M,I,E,L){const z=I.canMatch;if(!z||0===z.length)return(0,J.of)(!0);const Z=z.map(ae=>{const he=Nr(ae,M);return Oi(function gi(M){return M&&No(M.canMatch)}(he)?he.canMatch(I,E):M.runInContext(()=>he(I,E)))});return(0,J.of)(Z).pipe(Zs(),_r())}(L=Ts(I,L),I,E).pipe((0,ut.U)(ae=>!0===ae?Z:{...Or})):(0,J.of)(Z)}function re(M,I,E){if(""===I.path)return"full"===I.pathMatch&&(M.hasChildren()||E.length>0)?{...Or}:{matched:!0,consumedSegments:[],remainingSegments:E,parameters:{},positionalParamSegments:{}};const z=(I.matcher||Nn)(E,M,I);if(!z)return{...Or};const Z={};hr(z.posParams,(he,Ae)=>{Z[Ae]=he.path});const ae=z.consumed.length>0?{...Z,...z.consumed[z.consumed.length-1].parameters}:Z;return{matched:!0,consumedSegments:z.consumed,remainingSegments:E.slice(z.consumed.length),parameters:ae,positionalParamSegments:z.posParams??{}}}function nr(M,I,E,L,z="corrected"){if(E.length>0&&function wi(M,I,E){return E.some(L=>ps(M,I,L)&&Ys(L)!==vn)}(M,E,L)){const ae=new nn(I,function hs(M,I,E,L){const z={};z[vn]=L,L._sourceSegment=M,L._segmentIndexShift=I.length;for(const Z of E)if(""===Z.path&&Ys(Z)!==vn){const ae=new nn([],{});ae._sourceSegment=M,ae._segmentIndexShift=I.length,z[Ys(Z)]=ae}return z}(M,I,L,new nn(E,M.children)));return ae._sourceSegment=M,ae._segmentIndexShift=I.length,{segmentGroup:ae,slicedSegments:[]}}if(0===E.length&&function fs(M,I,E){return E.some(L=>ps(M,I,L))}(M,E,L)){const ae=new nn(M.segments,function Jn(M,I,E,L,z,Z){const ae={};for(const he of L)if(ps(M,E,he)&&!z[Ys(he)]){const Ae=new nn([],{});Ae._sourceSegment=M,Ae._segmentIndexShift="legacy"===Z?M.segments.length:I.length,ae[Ys(he)]=Ae}return{...z,...ae}}(M,I,E,L,M.children,z));return ae._sourceSegment=M,ae._segmentIndexShift=I.length,{segmentGroup:ae,slicedSegments:E}}const Z=new nn(M.segments,M.children);return Z._sourceSegment=M,Z._segmentIndexShift=I.length,{segmentGroup:Z,slicedSegments:E}}function ps(M,I,E){return(!(M.hasChildren()||I.length>0)||"full"!==E.pathMatch)&&""===E.path}function Ms(M,I,E,L){return!!(Ys(M)===L||L!==vn&&ps(I,E,M))&&("**"===M.path||re(I,M,E).matched)}function ho(M,I,E){return 0===I.length&&!M.children[E]}const gs=!1;class Is{constructor(I){this.segmentGroup=I||null}}class Oo{constructor(I){this.urlTree=I}}function fo(M){return Vt(new Is(M))}function il(M){return Vt(new Oo(M))}class Rd{constructor(I,E,L,z,Z){this.injector=I,this.configLoader=E,this.urlSerializer=L,this.urlTree=z,this.config=Z,this.allowRedirects=!0}apply(){const I=nr(this.urlTree.root,[],[],this.config).segmentGroup,E=new nn(I.segments,I.children);return this.expandSegmentGroup(this.injector,this.config,E,vn).pipe((0,ut.U)(Z=>this.createUrlTree($s(Z),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ko(Z=>{if(Z instanceof Oo)return this.allowRedirects=!1,this.match(Z.urlTree);throw Z instanceof Is?this.noMatchError(Z):Z}))}match(I){return this.expandSegmentGroup(this.injector,this.config,I.root,vn).pipe((0,ut.U)(z=>this.createUrlTree($s(z),I.queryParams,I.fragment))).pipe(Ko(z=>{throw z instanceof Is?this.noMatchError(z):z}))}noMatchError(I){return new W.vHH(4002,gs)}createUrlTree(I,E,L){const z=mc(I);return new ai(z,E,L)}expandSegmentGroup(I,E,L,z){return 0===L.segments.length&&L.hasChildren()?this.expandChildren(I,E,L).pipe((0,ut.U)(Z=>new nn([],Z))):this.expandSegment(I,L,E,L.segments,z,!0)}expandChildren(I,E,L){const z=[];for(const Z of Object.keys(L.children))"primary"===Z?z.unshift(Z):z.push(Z);return(0,le.D)(z).pipe(co(Z=>{const ae=L.children[Z],he=nl(E,Z);return this.expandSegmentGroup(I,he,ae,Z).pipe((0,ut.U)(Ae=>({segment:Ae,outlet:Z})))}),fc((Z,ae)=>(Z[ae.outlet]=ae.segment,Z),{}),ti())}expandSegment(I,E,L,z,Z,ae){return(0,le.D)(L).pipe(co(he=>this.expandSegmentAgainstRoute(I,E,L,he,z,Z,ae).pipe(Ko(ft=>{if(ft instanceof Is)return(0,J.of)(null);throw ft}))),hc(he=>!!he),Ko((he,Ae)=>{if(rl(he))return ho(E,z,Z)?(0,J.of)(new nn([],{})):fo(E);throw he}))}expandSegmentAgainstRoute(I,E,L,z,Z,ae,he){return Ms(z,E,Z,ae)?void 0===z.redirectTo?this.matchSegmentAgainstRoute(I,E,z,Z,ae):he&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(I,E,L,z,Z,ae):fo(E):fo(E)}expandSegmentAgainstRouteUsingRedirect(I,E,L,z,Z,ae){return"**"===z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(I,L,z,ae):this.expandRegularSegmentAgainstRouteUsingRedirect(I,E,L,z,Z,ae)}expandWildCardWithParamsAgainstRouteUsingRedirect(I,E,L,z){const Z=this.applyRedirectCommands([],L.redirectTo,{});return L.redirectTo.startsWith("/")?il(Z):this.lineralizeSegments(L,Z).pipe((0,er.z)(ae=>{const he=new nn(ae,{});return this.expandSegment(I,he,E,ae,z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(I,E,L,z,Z,ae){const{matched:he,consumedSegments:Ae,remainingSegments:ft,positionalParamSegments:Sn}=re(E,z,Z);if(!he)return fo(E);const jt=this.applyRedirectCommands(Ae,z.redirectTo,Sn);return z.redirectTo.startsWith("/")?il(jt):this.lineralizeSegments(z,jt).pipe((0,er.z)(Fr=>this.expandSegment(I,E,L,Fr.concat(ft),ae,!1)))}matchSegmentAgainstRoute(I,E,L,z,Z){return"**"===L.path?(I=Ts(L,I),L.loadChildren?(L._loadedRoutes?(0,J.of)({routes:L._loadedRoutes,injector:L._loadedInjector}):this.configLoader.loadChildren(I,L)).pipe((0,ut.U)(he=>(L._loadedRoutes=he.routes,L._loadedInjector=he.injector,new nn(z,{})))):(0,J.of)(new nn(z,{}))):bn(E,L,z,I).pipe((0,hi.w)(({matched:ae,consumedSegments:he,remainingSegments:Ae})=>ae?this.getChildConfig(I=L._injector??I,L,z).pipe((0,er.z)(Sn=>{const jt=Sn.injector??I,Fr=Sn.routes,{segmentGroup:Cs,slicedSegments:Ds}=nr(E,he,Ae,Fr),qa=new nn(Cs.segments,Cs.children);if(0===Ds.length&&qa.hasChildren())return this.expandChildren(jt,Fr,qa).pipe((0,ut.U)(tf=>new nn(he,tf)));if(0===Fr.length&&0===Ds.length)return(0,J.of)(new nn(he,{}));const Zr=Ys(L)===Z;return this.expandSegment(jt,qa,Fr,Ds,Zr?vn:Z,!0).pipe((0,ut.U)(_s=>new nn(he.concat(_s.segments),_s.children)))})):fo(E)))}getChildConfig(I,E,L){return E.children?(0,J.of)({routes:E.children,injector:I}):E.loadChildren?void 0!==E._loadedRoutes?(0,J.of)({routes:E._loadedRoutes,injector:E._loadedInjector}):function Wt(M,I,E,L){const z=I.canLoad;if(void 0===z||0===z.length)return(0,J.of)(!0);const Z=z.map(ae=>{const he=Nr(ae,M);return Oi(function Ui(M){return M&&No(M.canLoad)}(he)?he.canLoad(I,E):M.runInContext(()=>he(I,E)))});return(0,J.of)(Z).pipe(Zs(),_r())}(I,E,L).pipe((0,er.z)(z=>z?this.configLoader.loadChildren(I,E).pipe((0,br.b)(Z=>{E._loadedRoutes=Z.routes,E._loadedInjector=Z.injector})):function oa(M){return Vt(Ro(gs,3))}())):(0,J.of)({routes:[],injector:I})}lineralizeSegments(I,E){let L=[],z=E.root;for(;;){if(L=L.concat(z.segments),0===z.numberOfChildren)return(0,J.of)(L);if(z.numberOfChildren>1||!z.children[vn])return Vt(new W.vHH(4e3,gs));z=z.children[vn]}}applyRedirectCommands(I,E,L){return this.applyRedirectCreateUrlTree(E,this.urlSerializer.parse(E),I,L)}applyRedirectCreateUrlTree(I,E,L,z){const Z=this.createSegmentGroup(I,E.root,L,z);return new ai(Z,this.createQueryParams(E.queryParams,this.urlTree.queryParams),E.fragment)}createQueryParams(I,E){const L={};return hr(I,(z,Z)=>{if("string"==typeof z&&z.startsWith(":")){const he=z.substring(1);L[Z]=E[he]}else L[Z]=z}),L}createSegmentGroup(I,E,L,z){const Z=this.createSegments(I,E.segments,L,z);let ae={};return hr(E.children,(he,Ae)=>{ae[Ae]=this.createSegmentGroup(I,he,L,z)}),new nn(Z,ae)}createSegments(I,E,L,z){return E.map(Z=>Z.path.startsWith(":")?this.findPosParam(I,Z,z):this.findOrReturn(Z,L))}findPosParam(I,E,L){const z=L[E.path.substring(1)];if(!z)throw new W.vHH(4001,gs);return z}findOrReturn(I,E){let L=0;for(const z of E){if(z.path===I.path)return E.splice(L),z;L++}return I}}class Au{}class Pd{constructor(I,E,L,z,Z,ae,he,Ae){this.injector=I,this.rootComponentType=E,this.config=L,this.urlTree=z,this.url=Z,this.paramsInheritanceStrategy=ae,this.relativeLinkResolution=he,this.urlSerializer=Ae}recognize(){const I=nr(this.urlTree.root,[],[],this.config.filter(E=>void 0===E.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,I,vn).pipe((0,ut.U)(E=>{if(null===E)return null;const L=new Ao([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},vn,this.rootComponentType,null,this.urlTree.root,-1,{}),z=new Jc(L,E),Z=new Zh(this.url,z);return this.inheritParamsAndData(Z._root),Z}))}inheritParamsAndData(I){const E=I.value,L=Ma(E,this.paramsInheritanceStrategy);E.params=Object.freeze(L.params),E.data=Object.freeze(L.data),I.children.forEach(z=>this.inheritParamsAndData(z))}processSegmentGroup(I,E,L,z){return 0===L.segments.length&&L.hasChildren()?this.processChildren(I,E,L):this.processSegment(I,E,L,L.segments,z)}processChildren(I,E,L){return(0,le.D)(Object.keys(L.children)).pipe(co(z=>{const Z=L.children[z],ae=nl(E,z);return this.processSegmentGroup(I,ae,Z,z)}),fc((z,Z)=>z&&Z?(z.push(...Z),z):null),function Zc(M,I=!1){return(0,Vn.e)((E,L)=>{let z=0;E.subscribe((0,mt.x)(L,Z=>{const ae=M(Z,z++);(ae||I)&&L.next(Z),!ae&&L.complete()}))})}(z=>null!==z),Mi(null),ti(),(0,ut.U)(z=>{if(null===z)return null;const Z=sl(z);return function Ru(M){M.sort((I,E)=>I.value.outlet===vn?-1:E.value.outlet===vn?1:I.value.outlet.localeCompare(E.value.outlet))}(Z),Z}))}processSegment(I,E,L,z,Z){return(0,le.D)(E).pipe(co(ae=>this.processSegmentAgainstRoute(ae._injector??I,ae,L,z,Z)),hc(ae=>!!ae),Ko(ae=>{if(rl(ae))return ho(L,z,Z)?(0,J.of)([]):(0,J.of)(null);throw ae}))}processSegmentAgainstRoute(I,E,L,z,Z){if(E.redirectTo||!Ms(E,L,z,Z))return(0,J.of)(null);let ae;if("**"===E.path){const he=z.length>0?Xn(z).parameters:{},Ae=qn(L)+z.length,ft=new Ao(z,he,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Uo(E),Ys(E),E.component??E._loadedComponent??null,E,Mc(L),Ae,ol(E),Ae);ae=(0,J.of)({snapshot:ft,consumedSegments:[],remainingSegments:[]})}else ae=bn(L,E,z,I).pipe((0,ut.U)(({matched:he,consumedSegments:Ae,remainingSegments:ft,parameters:Sn})=>{if(!he)return null;const jt=qn(L)+Ae.length;return{snapshot:new Ao(Ae,Sn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Uo(E),Ys(E),E.component??E._loadedComponent??null,E,Mc(L),jt,ol(E),jt),consumedSegments:Ae,remainingSegments:ft}}));return ae.pipe((0,hi.w)(he=>{if(null===he)return(0,J.of)(null);const{snapshot:Ae,consumedSegments:ft,remainingSegments:Sn}=he;I=E._injector??I;const jt=E._loadedInjector??I,Fr=function aa(M){return M.children?M.children:M.loadChildren?M._loadedRoutes:[]}(E),{segmentGroup:Cs,slicedSegments:Ds}=nr(L,ft,Sn,Fr.filter(Zr=>void 0===Zr.redirectTo),this.relativeLinkResolution);if(0===Ds.length&&Cs.hasChildren())return this.processChildren(jt,Fr,Cs).pipe((0,ut.U)(Zr=>null===Zr?null:[new Jc(Ae,Zr)]));if(0===Fr.length&&0===Ds.length)return(0,J.of)([new Jc(Ae,[])]);const qa=Ys(E)===Z;return this.processSegment(jt,Fr,Cs,Ds,qa?vn:Z).pipe((0,ut.U)(Zr=>null===Zr?null:[new Jc(Ae,Zr)]))}))}}function zl(M){const I=M.value.routeConfig;return I&&""===I.path&&void 0===I.redirectTo}function sl(M){const I=[],E=new Set;for(const L of M){if(!zl(L)){I.push(L);continue}const z=I.find(Z=>L.value.routeConfig===Z.value.routeConfig);void 0!==z?(z.children.push(...L.children),E.add(z)):I.push(L)}for(const L of E){const z=sl(L.children);I.push(new Jc(L.value,z))}return I.filter(L=>!E.has(L))}function Mc(M){let I=M;for(;I._sourceSegment;)I=I._sourceSegment;return I}function qn(M){let I=M,E=I._segmentIndexShift??0;for(;I._sourceSegment;)I=I._sourceSegment,E+=I._segmentIndexShift??0;return E-1}function Uo(M){return M.data||{}}function ol(M){return M.resolve||{}}function go(M){return"string"==typeof M.title||null===M.title}function Nu(M){return(0,hi.w)(I=>{const E=M(I);return E?(0,le.D)(E).pipe((0,ut.U)(()=>I)):(0,J.of)(I)})}let Ic=(()=>{class M{buildTitle(E){let L,z=E.root;for(;void 0!==z;)L=this.getResolvedTitleForRoute(z)??L,z=z.children.find(Z=>Z.outlet===vn);return L}getResolvedTitleForRoute(E){return E.data[Ns]}}return M.\u0275fac=function(E){return new(E||M)},M.\u0275prov=W.Yz7({token:M,factory:function(){return(0,W.f3M)(Ou)},providedIn:"root"}),M})(),Ou=(()=>{class M extends Ic{constructor(E){super(),this.title=E}updateTitle(E){const L=this.buildTitle(E);void 0!==L&&this.title.setTitle(L)}}return M.\u0275fac=function(E){return new(E||M)(W.LFG(Su.Dx))},M.\u0275prov=W.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();class Qs{}class Ld extends class Wl{shouldDetach(I){return!1}store(I,E){}shouldAttach(I){return!1}retrieve(I){return null}shouldReuseRoute(I,E){return I.routeConfig===E.routeConfig}}{}const al=new W.OlP("",{providedIn:"root",factory:()=>({})}),Fu=new W.OlP("ROUTES");let Nd=(()=>{class M{constructor(E,L){this.injector=E,this.compiler=L,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(E){if(this.componentLoaders.get(E))return this.componentLoaders.get(E);if(E._loadedComponent)return(0,J.of)(E._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(E);const L=Oi(E.loadComponent()).pipe((0,br.b)(Z=>{this.onLoadEndListener&&this.onLoadEndListener(E),E._loadedComponent=Z}),Na(()=>{this.componentLoaders.delete(E)})),z=new jn(L,()=>new ot.x).pipe(ls());return this.componentLoaders.set(E,z),z}loadChildren(E,L){if(this.childrenLoaders.get(L))return this.childrenLoaders.get(L);if(L._loadedRoutes)return(0,J.of)({routes:L._loadedRoutes,injector:L._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(L);const Z=this.loadModuleFactoryOrRoutes(L.loadChildren).pipe((0,ut.U)(he=>{this.onLoadEndListener&&this.onLoadEndListener(L);let Ae,ft,Sn=!1;Array.isArray(he)?ft=he:(Ae=he.create(E).injector,ft=Ci(Ae.get(Fu,[],W.XFs.Self|W.XFs.Optional)));return{routes:ft.map(tl),injector:Ae}}),Na(()=>{this.childrenLoaders.delete(L)})),ae=new jn(Z,()=>new ot.x).pipe(ls());return this.childrenLoaders.set(L,ae),ae}loadModuleFactoryOrRoutes(E){return Oi(E()).pipe((0,er.z)(L=>L instanceof W.YKP||Array.isArray(L)?(0,J.of)(L):(0,le.D)(this.compiler.compileModuleAsync(L))))}}return M.\u0275fac=function(E){return new(E||M)(W.LFG(W.zs3),W.LFG(W.Sil))},M.\u0275prov=W.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();class Od{}class $l{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,E){return I}}function mo(M){throw M}function Ia(M,I,E){return I.parse("/")}const Ga={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ha={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Wa(){const M=(0,W.f3M)(Dl),I=(0,W.f3M)(Ks),E=(0,W.f3M)(ii.Ye),L=(0,W.f3M)(W.zs3),z=(0,W.f3M)(W.Sil),Z=(0,W.f3M)(Fu,{optional:!0})??[],ae=(0,W.f3M)(al,{optional:!0})??{},he=(0,W.f3M)(Ou),Ae=(0,W.f3M)(Ic,{optional:!0}),ft=(0,W.f3M)(Od,{optional:!0}),Sn=(0,W.f3M)(Qs,{optional:!0}),jt=new Ki(null,M,I,E,L,z,Ci(Z));return ft&&(jt.urlHandlingStrategy=ft),Sn&&(jt.routeReuseStrategy=Sn),jt.titleStrategy=Ae??he,function qi(M,I){M.errorHandler&&(I.errorHandler=M.errorHandler),M.malformedUriErrorHandler&&(I.malformedUriErrorHandler=M.malformedUriErrorHandler),M.onSameUrlNavigation&&(I.onSameUrlNavigation=M.onSameUrlNavigation),M.paramsInheritanceStrategy&&(I.paramsInheritanceStrategy=M.paramsInheritanceStrategy),M.relativeLinkResolution&&(I.relativeLinkResolution=M.relativeLinkResolution),M.urlUpdateStrategy&&(I.urlUpdateStrategy=M.urlUpdateStrategy),M.canceledNavigationResolution&&(I.canceledNavigationResolution=M.canceledNavigationResolution)}(ae,jt),jt}let Ki=(()=>{class M{constructor(E,L,z,Z,ae,he,Ae){this.rootComponentType=E,this.urlSerializer=L,this.rootContexts=z,this.location=Z,this.config=Ae,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ot.x,this.errorHandler=mo,this.malformedUriErrorHandler=Ia,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,J.of)(void 0),this.urlHandlingStrategy=new $l,this.routeReuseStrategy=new Ld,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ae.get(Nd),this.configLoader.onLoadEndListener=Fr=>this.triggerEvent(new Ta(Fr)),this.configLoader.onLoadStartListener=Fr=>this.triggerEvent(new Lm(Fr)),this.ngModule=ae.get(W.h0i),this.console=ae.get(W.c2e);const jt=ae.get(W.R0b);this.isNgZoneEnabled=jt instanceof W.R0b&&W.R0b.isInAngularZone(),this.resetConfig(Ae),this.currentUrlTree=function Di(){return new ai(new nn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Sd(this.currentUrlTree,this.rootComponentType),this.transitions=new Ke({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(E){const L=this.events;return E.pipe((0,jr.h)(z=>0!==z.id),(0,ut.U)(z=>({...z,extractedUrl:this.urlHandlingStrategy.extract(z.rawUrl)})),(0,hi.w)(z=>{let Z=!1,ae=!1;return(0,J.of)(z).pipe((0,br.b)(he=>{this.currentNavigation={id:he.id,initialUrl:he.rawUrl,extractedUrl:he.extractedUrl,trigger:he.source,extras:he.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,hi.w)(he=>{const Ae=this.browserUrlTree.toString(),ft=!this.navigated||he.extractedUrl.toString()!==Ae||Ae!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ft)&&this.urlHandlingStrategy.shouldProcessUrl(he.rawUrl))return cl(he.source)&&(this.browserUrlTree=he.extractedUrl),(0,J.of)(he).pipe((0,hi.w)(jt=>{const Fr=this.transitions.getValue();return L.next(new wd(jt.id,this.serializeUrl(jt.extractedUrl),jt.source,jt.restoredState)),Fr!==this.transitions.getValue()?bt.E:Promise.resolve(jt)}),function Sp(M,I,E,L){return(0,hi.w)(z=>function po(M,I,E,L,z){return new Rd(M,I,E,L,z).apply()}(M,I,E,z.extractedUrl,L).pipe((0,ut.U)(Z=>({...z,urlAfterRedirects:Z}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,br.b)(jt=>{this.currentNavigation={...this.currentNavigation,finalUrl:jt.urlAfterRedirects},z.urlAfterRedirects=jt.urlAfterRedirects}),function Xh(M,I,E,L,z,Z){return(0,er.z)(ae=>function za(M,I,E,L,z,Z,ae="emptyOnly",he="legacy"){return new Pd(M,I,E,L,z,ae,he,Z).recognize().pipe((0,hi.w)(Ae=>null===Ae?function Tc(M){return new Qt.y(I=>I.error(M))}(new Au):(0,J.of)(Ae)))}(M,I,E,ae.urlAfterRedirects,L.serialize(ae.urlAfterRedirects),L,z,Z).pipe((0,ut.U)(he=>({...ae,targetSnapshot:he}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,br.b)(jt=>{if(z.targetSnapshot=jt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!jt.extras.skipLocationChange){const Cs=this.urlHandlingStrategy.merge(jt.urlAfterRedirects,jt.rawUrl);this.setBrowserUrl(Cs,jt)}this.browserUrlTree=jt.urlAfterRedirects}const Fr=new pi(jt.id,this.serializeUrl(jt.extractedUrl),this.serializeUrl(jt.urlAfterRedirects),jt.targetSnapshot);L.next(Fr)}));if(ft&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Fr,extractedUrl:Cs,source:Ds,restoredState:qa,extras:Zr}=he,ys=new wd(Fr,this.serializeUrl(Cs),Ds,qa);L.next(ys);const _s=Sd(Cs,this.rootComponentType).snapshot;return z={...he,targetSnapshot:_s,urlAfterRedirects:Cs,extras:{...Zr,skipLocationChange:!1,replaceUrl:!1}},(0,J.of)(z)}return this.rawUrlTree=he.rawUrl,he.resolve(null),bt.E}),(0,br.b)(he=>{const Ae=new mp(he.id,this.serializeUrl(he.extractedUrl),this.serializeUrl(he.urlAfterRedirects),he.targetSnapshot);this.triggerEvent(Ae)}),(0,ut.U)(he=>z={...he,guards:uo(he.targetSnapshot,he.currentSnapshot,this.rootContexts)}),function Du(M,I){return(0,er.z)(E=>{const{targetSnapshot:L,currentSnapshot:z,guards:{canActivateChecks:Z,canDeactivateChecks:ae}}=E;return 0===ae.length&&0===Z.length?(0,J.of)({...E,guardsResult:!0}):function N(M,I,E,L){return(0,le.D)(M).pipe((0,er.z)(z=>function Je(M,I,E,L,z){const Z=I&&I.routeConfig?I.routeConfig.canDeactivate:null;if(!Z||0===Z.length)return(0,J.of)(!0);const ae=Z.map(he=>{const Ae=tt(I)??z,ft=Nr(he,Ae);return Oi(function si(M){return M&&No(M.canDeactivate)}(ft)?ft.canDeactivate(M,I,E,L):Ae.runInContext(()=>ft(M,I,E,L))).pipe(hc())});return(0,J.of)(ae).pipe(Zs())}(z.component,z.route,E,I,L)),hc(z=>!0!==z,!0))}(ae,L,z,M).pipe((0,er.z)(he=>he&&function Ec(M){return"boolean"==typeof M}(he)?function $(M,I,E,L){return(0,le.D)(I).pipe(co(z=>(0,Bn.z)(function ee(M,I){return null!==M&&I&&I(new xc(M)),(0,J.of)(!0)}(z.route.parent,L),function B(M,I){return null!==M&&I&&I(new Tu(M)),(0,J.of)(!0)}(z.route,L),function Le(M,I,E){const L=I[I.length-1],Z=I.slice(0,I.length-1).reverse().map(ae=>function Xe(M){const I=M.routeConfig?M.routeConfig.canActivateChild:null;return I&&0!==I.length?{node:M,guards:I}:null}(ae)).filter(ae=>null!==ae).map(ae=>Pe(()=>{const he=ae.guards.map(Ae=>{const ft=tt(ae.node)??E,Sn=Nr(Ae,ft);return Oi(function Iu(M){return M&&No(M.canActivateChild)}(Sn)?Sn.canActivateChild(L,M):ft.runInContext(()=>Sn(L,M))).pipe(hc())});return(0,J.of)(he).pipe(Zs())}));return(0,J.of)(Z).pipe(Zs())}(M,z.path,E),function pe(M,I,E){const L=I.routeConfig?I.routeConfig.canActivate:null;if(!L||0===L.length)return(0,J.of)(!0);const z=L.map(Z=>Pe(()=>{const ae=tt(I)??E,he=Nr(Z,ae);return Oi(function Bi(M){return M&&No(M.canActivate)}(he)?he.canActivate(I,M):ae.runInContext(()=>he(I,M))).pipe(hc())}));return(0,J.of)(z).pipe(Zs())}(M,z.route,E))),hc(z=>!0!==z,!0))}(L,Z,M,I):(0,J.of)(he)),(0,ut.U)(he=>({...E,guardsResult:he})))})}(this.ngModule.injector,he=>this.triggerEvent(he)),(0,br.b)(he=>{if(z.guardsResult=he.guardsResult,bs(he.guardsResult))throw Va(0,he.guardsResult);const Ae=new yp(he.id,this.serializeUrl(he.extractedUrl),this.serializeUrl(he.urlAfterRedirects),he.targetSnapshot,!!he.guardsResult);this.triggerEvent(Ae)}),(0,jr.h)(he=>!!he.guardsResult||(this.restoreHistory(he),this.cancelNavigationTransition(he,"",3),!1)),Nu(he=>{if(he.guards.canActivateChecks.length)return(0,J.of)(he).pipe((0,br.b)(Ae=>{const ft=new vc(Ae.id,this.serializeUrl(Ae.extractedUrl),this.serializeUrl(Ae.urlAfterRedirects),Ae.targetSnapshot);this.triggerEvent(ft)}),(0,hi.w)(Ae=>{let ft=!1;return(0,J.of)(Ae).pipe(function ca(M,I){return(0,er.z)(E=>{const{targetSnapshot:L,guards:{canActivateChecks:z}}=E;if(!z.length)return(0,J.of)(E);let Z=0;return(0,le.D)(z).pipe(co(ae=>function Pu(M,I,E,L){const z=M.routeConfig,Z=M._resolve;return void 0!==z?.title&&!go(z)&&(Z[Ns]=z.title),function Xs(M,I,E,L){const z=function Lu(M){return[...Object.keys(M),...Object.getOwnPropertySymbols(M)]}(M);if(0===z.length)return(0,J.of)({});const Z={};return(0,le.D)(z).pipe((0,er.z)(ae=>function Ep(M,I,E,L){const z=tt(I)??L,Z=Nr(M,z);return Oi(Z.resolve?Z.resolve(I,E):z.runInContext(()=>Z(I,E)))}(M[ae],I,E,L).pipe(hc(),(0,br.b)(he=>{Z[ae]=he}))),Il(1),function xd(M){return(0,ut.U)(()=>M)}(Z),Ko(ae=>rl(ae)?bt.E:Vt(ae)))}(Z,M,I,L).pipe((0,ut.U)(ae=>(M._resolvedData=ae,M.data=Ma(M,E).resolve,z&&go(z)&&(M.data[Ns]=z.title),null)))}(ae.route,L,M,I)),(0,br.b)(()=>Z++),Il(1),(0,er.z)(ae=>Z===z.length?(0,J.of)(E):bt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,br.b)({next:()=>ft=!0,complete:()=>{ft||(this.restoreHistory(Ae),this.cancelNavigationTransition(Ae,"",2))}}))}),(0,br.b)(Ae=>{const ft=new _p(Ae.id,this.serializeUrl(Ae.extractedUrl),this.serializeUrl(Ae.urlAfterRedirects),Ae.targetSnapshot);this.triggerEvent(ft)}))}),Nu(he=>{const Ae=ft=>{const Sn=[];ft.routeConfig?.loadComponent&&!ft.routeConfig._loadedComponent&&Sn.push(this.configLoader.loadComponent(ft.routeConfig).pipe((0,br.b)(jt=>{ft.component=jt}),(0,ut.U)(()=>{})));for(const jt of ft.children)Sn.push(...Ae(jt));return Sn};return dn(Ae(he.targetSnapshot.root)).pipe(Mi(),$r(1))}),Nu(()=>this.afterPreactivation()),(0,ut.U)(he=>{const Ae=function ci(M,I,E){const L=Nl(M,I._root,E?E._root:void 0);return new el(L,I)}(this.routeReuseStrategy,he.targetSnapshot,he.currentRouterState);return z={...he,targetRouterState:Ae}}),(0,br.b)(he=>{this.currentUrlTree=he.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(he.urlAfterRedirects,he.rawUrl),this.routerState=he.targetRouterState,"deferred"===this.urlUpdateStrategy&&(he.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,he),this.browserUrlTree=he.urlAfterRedirects)}),((M,I,E)=>(0,ut.U)(L=>(new Ad(I,L.targetRouterState,L.currentRouterState,E).activate(M),L)))(this.rootContexts,this.routeReuseStrategy,he=>this.triggerEvent(he)),(0,br.b)({next(){Z=!0},complete(){Z=!0}}),Na(()=>{Z||ae||this.cancelNavigationTransition(z,"",1),this.currentNavigation?.id===z.id&&(this.currentNavigation=null)}),Ko(he=>{if(ae=!0,Es(he)){xi(he)||(this.navigated=!0,this.restoreHistory(z,!0));const Ae=new bd(z.id,this.serializeUrl(z.extractedUrl),he.message,he.cancellationCode);if(L.next(Ae),xi(he)){const ft=this.urlHandlingStrategy.merge(he.url,this.rawUrlTree),Sn={skipLocationChange:z.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||cl(z.source)};this.scheduleNavigation(ft,"imperative",null,Sn,{resolve:z.resolve,reject:z.reject,promise:z.promise})}else z.resolve(!1)}else{this.restoreHistory(z,!0);const Ae=new Ua(z.id,this.serializeUrl(z.extractedUrl),he,z.targetSnapshot??void 0);L.next(Ae);try{z.resolve(this.errorHandler(he))}catch(ft){z.reject(ft)}}return bt.E}))}))}resetRootComponentType(E){this.rootComponentType=E,this.routerState.root.component=this.rootComponentType}setTransition(E){this.transitions.next({...this.transitions.value,...E})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(E=>{const L="popstate"===E.type?"popstate":"hashchange";"popstate"===L&&setTimeout(()=>{const z={replaceUrl:!0},Z=E.state?.navigationId?E.state:null;if(Z){const he={...Z};delete he.navigationId,delete he.\u0275routerPageId,0!==Object.keys(he).length&&(z.state=he)}const ae=this.parseUrl(E.url);this.scheduleNavigation(ae,L,Z,z)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(E){this.events.next(E)}resetConfig(E){this.config=E.map(tl),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(E,L={}){const{relativeTo:z,queryParams:Z,fragment:ae,queryParamsHandling:he,preserveFragment:Ae}=L,ft=z||this.routerState.root,Sn=Ae?this.currentUrlTree.fragment:ae;let jt=null;switch(he){case"merge":jt={...this.currentUrlTree.queryParams,...Z};break;case"preserve":jt=this.currentUrlTree.queryParams;break;default:jt=Z||null}return null!==jt&&(jt=this.removeEmptyProps(jt)),Do(ft,this.currentUrlTree,E,jt,Sn??null)}navigateByUrl(E,L={skipLocationChange:!1}){const z=bs(E)?E:this.parseUrl(E),Z=this.urlHandlingStrategy.merge(z,this.rawUrlTree);return this.scheduleNavigation(Z,"imperative",null,L)}navigate(E,L={skipLocationChange:!1}){return function kd(M){for(let I=0;I<M.length;I++){if(null==M[I])throw new W.vHH(4008,false)}}(E),this.navigateByUrl(this.createUrlTree(E,L),L)}serializeUrl(E){return this.urlSerializer.serialize(E)}parseUrl(E){let L;try{L=this.urlSerializer.parse(E)}catch(z){L=this.malformedUriErrorHandler(z,this.urlSerializer,E)}return L}isActive(E,L){let z;if(z=!0===L?{...Ga}:!1===L?{...Ha}:L,bs(E))return Qn(this.currentUrlTree,E,z);const Z=this.parseUrl(E);return Qn(this.currentUrlTree,Z,z)}removeEmptyProps(E){return Object.keys(E).reduce((L,z)=>{const Z=E[z];return null!=Z&&(L[z]=Z),L},{})}processNavigations(){this.navigations.subscribe(E=>{this.navigated=!0,this.lastSuccessfulId=E.id,this.currentPageId=E.targetPageId,this.events.next(new _c(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),E.resolve(!0)},E=>{this.console.warn(`Unhandled Navigation Error: ${E}`)})}scheduleNavigation(E,L,z,Z,ae){if(this.disposed)return Promise.resolve(!1);let he,Ae,ft;ae?(he=ae.resolve,Ae=ae.reject,ft=ae.promise):ft=new Promise((Fr,Cs)=>{he=Fr,Ae=Cs});const Sn=++this.navigationId;let jt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(z=this.location.getState()),jt=z&&z.\u0275routerPageId?z.\u0275routerPageId:Z.replaceUrl||Z.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):jt=0,this.setTransition({id:Sn,targetPageId:jt,source:L,restoredState:z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:E,extras:Z,resolve:he,reject:Ae,promise:ft,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ft.catch(Fr=>Promise.reject(Fr))}setBrowserUrl(E,L){const z=this.urlSerializer.serialize(E),Z={...L.extras.state,...this.generateNgRouterState(L.id,L.targetPageId)};this.location.isCurrentPathEqualTo(z)||L.extras.replaceUrl?this.location.replaceState(z,"",Z):this.location.go(z,"",Z)}restoreHistory(E,L=!1){if("computed"===this.canceledNavigationResolution){const z=this.currentPageId-E.targetPageId;"popstate"!==E.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===z?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===z&&(this.resetState(E),this.browserUrlTree=E.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(z)}else"replace"===this.canceledNavigationResolution&&(L&&this.resetState(E),this.resetUrlToCurrentUrlTree())}resetState(E){this.routerState=E.currentRouterState,this.currentUrlTree=E.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,E.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(E,L,z){const Z=new bd(E.id,this.serializeUrl(E.extractedUrl),L,z);this.triggerEvent(Z),E.resolve(!1)}generateNgRouterState(E,L){return"computed"===this.canceledNavigationResolution?{navigationId:E,\u0275routerPageId:L}:{navigationId:E}}}return M.\u0275fac=function(E){W.$Z()},M.\u0275prov=W.Yz7({token:M,factory:function(){return Wa()},providedIn:"root"}),M})();function cl(M){return"imperative"!==M}let Ca=(()=>{class M{constructor(E,L,z,Z,ae){this.router=E,this.route=L,this.tabIndexAttribute=z,this.renderer=Z,this.el=ae,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ot.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(E){this._preserveFragment=(0,W.D6c)(E)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(E){this._skipLocationChange=(0,W.D6c)(E)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(E){this._replaceUrl=(0,W.D6c)(E)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(E){if(null!=this.tabIndexAttribute)return;const L=this.renderer,z=this.el.nativeElement;null!==E?L.setAttribute(z,"tabindex",E):L.removeAttribute(z,"tabindex")}ngOnChanges(E){this.onChanges.next(this)}set routerLink(E){null!=E?(this.commands=Array.isArray(E)?E:[E],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return M.\u0275fac=function(E){return new(E||M)(W.Y36(Ki),W.Y36(bc),W.$8M("tabindex"),W.Y36(W.Qsj),W.Y36(W.SBq))},M.\u0275dir=W.lG2({type:M,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(E,L){1&E&&W.NdJ("click",function(){return L.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[W.TTD]}),M})(),Ri=(()=>{class M{constructor(E,L,z){this.router=E,this.route=L,this.locationStrategy=z,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ot.x,this.subscription=E.events.subscribe(Z=>{Z instanceof _c&&this.updateTargetUrlAndHref()})}set preserveFragment(E){this._preserveFragment=(0,W.D6c)(E)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(E){this._skipLocationChange=(0,W.D6c)(E)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(E){this._replaceUrl=(0,W.D6c)(E)}get replaceUrl(){return this._replaceUrl}set routerLink(E){this.commands=null!=E?Array.isArray(E)?E:[E]:null}ngOnChanges(E){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(E,L,z,Z,ae){return!!(0!==E||L||z||Z||ae||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return M.\u0275fac=function(E){return new(E||M)(W.Y36(Ki),W.Y36(bc),W.Y36(ii.S$))},M.\u0275dir=W.lG2({type:M,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(E,L){1&E&&W.NdJ("click",function(Z){return L.onClick(Z.button,Z.ctrlKey,Z.shiftKey,Z.altKey,Z.metaKey)}),2&E&&W.uIk("target",L.target)("href",L.href,W.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[W.TTD]}),M})(),jl=(()=>{class M{constructor(E,L,z,Z,ae,he){this.router=E,this.element=L,this.renderer=z,this.cdr=Z,this.link=ae,this.linkWithHref=he,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new W.vpe,this.routerEventsSubscription=E.events.subscribe(Ae=>{Ae instanceof _c&&this.update()})}ngAfterContentInit(){(0,J.of)(this.links.changes,this.linksWithHrefs.changes,(0,J.of)(null)).pipe((0,Eo.J)()).subscribe(E=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const E=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(L=>!!L).map(L=>L.onChanges);this.linkInputChangesSubscription=(0,le.D)(E).pipe((0,Eo.J)()).subscribe(L=>{this.isActive!==this.isLinkActive(this.router)(L)&&this.update()})}set routerLinkActive(E){const L=Array.isArray(E)?E:E.split(" ");this.classes=L.filter(z=>!!z)}ngOnChanges(E){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const E=this.hasActiveLinks();this.isActive!==E&&(this.isActive=E,this.cdr.markForCheck(),this.classes.forEach(L=>{E?this.renderer.addClass(this.element.nativeElement,L):this.renderer.removeClass(this.element.nativeElement,L)}),E&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(E))})}isLinkActive(E){const L=function ql(M){return!!M.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return z=>!!z.urlTree&&E.isActive(z.urlTree,L)}hasActiveLinks(){const E=this.isLinkActive(this.router);return this.link&&E(this.link)||this.linkWithHref&&E(this.linkWithHref)||this.links.some(E)||this.linksWithHrefs.some(E)}}return M.\u0275fac=function(E){return new(E||M)(W.Y36(Ki),W.Y36(W.SBq),W.Y36(W.Qsj),W.Y36(W.sBO),W.Y36(Ca,8),W.Y36(Ri,8))},M.\u0275dir=W.lG2({type:M,selectors:[["","routerLinkActive",""]],contentQueries:function(E,L,z){if(1&E&&(W.Suo(z,Ca,5),W.Suo(z,Ri,5)),2&E){let Z;W.iGM(Z=W.CRH())&&(L.links=Z),W.iGM(Z=W.CRH())&&(L.linksWithHrefs=Z)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[W.TTD]}),M})();class yo{}let Vi=(()=>{class M{constructor(E,L,z,Z,ae){this.router=E,this.injector=z,this.preloadingStrategy=Z,this.loader=ae}setUpPreloading(){this.subscription=this.router.events.pipe((0,jr.h)(E=>E instanceof _c),co(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(E,L){const z=[];for(const Z of L){Z.providers&&!Z._injector&&(Z._injector=(0,W.MMx)(Z.providers,E,`Route: ${Z.path}`));const ae=Z._injector??E,he=Z._loadedInjector??ae;Z.loadChildren&&!Z._loadedRoutes&&void 0===Z.canLoad||Z.loadComponent&&!Z._loadedComponent?z.push(this.preloadConfig(ae,Z)):(Z.children||Z._loadedRoutes)&&z.push(this.processRoutes(he,Z.children??Z._loadedRoutes))}return(0,le.D)(z).pipe((0,Eo.J)())}preloadConfig(E,L){return this.preloadingStrategy.preload(L,()=>{let z;z=L.loadChildren&&void 0===L.canLoad?this.loader.loadChildren(E,L):(0,J.of)(null);const Z=z.pipe((0,er.z)(ae=>null===ae?(0,J.of)(void 0):(L._loadedRoutes=ae.routes,L._loadedInjector=ae.injector,this.processRoutes(ae.injector??E,ae.routes))));if(L.loadComponent&&!L._loadedComponent){const ae=this.loader.loadComponent(L);return(0,le.D)([Z,ae]).pipe((0,Eo.J)())}return Z})}}return M.\u0275fac=function(E){return new(E||M)(W.LFG(Ki),W.LFG(W.Sil),W.LFG(W.lqb),W.LFG(yo),W.LFG(Nd))},M.\u0275prov=W.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();const ei=new W.OlP("");let yw=(()=>{class M{constructor(E,L,z={}){this.router=E,this.viewportScroller=L,this.options=z,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},z.scrollPositionRestoration=z.scrollPositionRestoration||"disabled",z.anchorScrolling=z.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(E=>{E instanceof wd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=E.navigationTrigger,this.restoredId=E.restoredState?E.restoredState.navigationId:0):E instanceof _c&&(this.lastId=E.id,this.scheduleScrollEvent(E,this.router.parseUrl(E.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(E=>{E instanceof Mu&&(E.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(E.position):E.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(E.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(E,L){this.router.triggerEvent(new Mu(E,"popstate"===this.lastSource?this.store[this.restoredId]:null,L))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return M.\u0275fac=function(E){W.$Z()},M.\u0275prov=W.Yz7({token:M,factory:M.\u0275fac}),M})();function Qh(M,I){return{\u0275kind:M,\u0275providers:I}}function Jh(M){return[{provide:Fu,multi:!0,useValue:M}]}function rn(){const M=(0,W.f3M)(W.zs3);return I=>{const E=M.get(W.z2F);if(I!==E.components[0])return;const L=M.get(Ki),z=M.get(nv);1===M.get(Ip)&&L.initialNavigation(),M.get(_o,null,W.XFs.Optional)?.setUpPreloading(),M.get(ei,null,W.XFs.Optional)?.init(),L.resetRootComponentType(E.componentTypes[0]),z.next(),z.complete()}}const nv=new W.OlP("",{factory:()=>new ot.x}),Ip=new W.OlP("",{providedIn:"root",factory:()=>1});const _o=new W.OlP("");function Vu(M){return Qh(0,[{provide:_o,useExisting:Vi},{provide:yo,useExisting:M}])}const Aa=new W.OlP("ROUTER_FORROOT_GUARD"),ll=[ii.Ye,{provide:Dl,useClass:Sa},{provide:Ki,useFactory:Wa},Ks,{provide:bc,useFactory:function Uu(M){return M.routerState.root},deps:[Ki]},Nd];function $a(){return new W.PXZ("Router",Ki)}let Cc=(()=>{class M{constructor(E){}static forRoot(E,L){return{ngModule:M,providers:[ll,[],Jh(E),{provide:Aa,useFactory:Ud,deps:[[Ki,new W.FiY,new W.tp0]]},{provide:al,useValue:L||{}},L?.useHash?{provide:ii.S$,useClass:ii.Do}:{provide:ii.S$,useClass:ii.b0},{provide:ei,useFactory:()=>{const M=(0,W.f3M)(Ki),I=(0,W.f3M)(ii.EM),E=(0,W.f3M)(al);return E.scrollOffset&&I.setOffset(E.scrollOffset),new yw(M,I,E)}},L?.preloadingStrategy?Vu(L.preloadingStrategy).\u0275providers:[],{provide:W.PXZ,multi:!0,useFactory:$a},L?.initialNavigation?Ji(L):[],[{provide:ul,useFactory:rn},{provide:W.tb,multi:!0,useExisting:ul}]]}}static forChild(E){return{ngModule:M,providers:[Jh(E)]}}}return M.\u0275fac=function(E){return new(E||M)(W.LFG(Aa,8))},M.\u0275mod=W.oAB({type:M}),M.\u0275inj=W.cJS({imports:[kl]}),M})();function Ud(M){return"guarded"}function Ji(M){return["disabled"===M.initialNavigation?Qh(3,[{provide:W.ip1,multi:!0,useFactory:()=>{const I=(0,W.f3M)(Ki);return()=>{I.setUpLocationChangeListener()}}},{provide:Ip,useValue:2}]).\u0275providers:[],"enabledBlocking"===M.initialNavigation?Qh(2,[{provide:Ip,useValue:0},{provide:W.ip1,multi:!0,deps:[W.zs3],useFactory:I=>{const E=I.get(ii.V_,Promise.resolve());let L=!1;return()=>E.then(()=>new Promise(Z=>{const ae=I.get(Ki),he=I.get(nv);(function z(Z){I.get(Ki).events.pipe((0,jr.h)(he=>he instanceof _c||he instanceof bd||he instanceof Ua),(0,ut.U)(he=>he instanceof _c||he instanceof bd&&(0===he.code||1===he.code)&&null),(0,jr.h)(he=>null!==he),$r(1)).subscribe(()=>{Z()})})(()=>{Z(!0),L=!0}),ae.afterPreactivation=()=>(Z(!0),L||he.closed?(0,J.of)(void 0):he),ae.initialNavigation()}))}}]).\u0275providers:[]]}const ul=new W.OlP("")},5861:(Wn,vt,ge)=>{function W(J,ot,Ke,Ft,Tt,Qt,Dt){try{var ht=J[Qt](Dt),ze=ht.value}catch(wt){return void Ke(wt)}ht.done?ot(ze):Promise.resolve(ze).then(Ft,Tt)}function le(J){return function(){var ot=this,Ke=arguments;return new Promise(function(Ft,Tt){var Qt=J.apply(ot,Ke);function Dt(ze){W(Qt,Ft,Tt,Dt,ht,"next",ze)}function ht(ze){W(Qt,Ft,Tt,Dt,ht,"throw",ze)}Dt(void 0)})}}ge.d(vt,{Z:()=>le})}},Wn=>{Wn(Wn.s=3804)}]);